(()=>{"use strict";const t=Object.freeze({number:/\D/g});$.views.tags({charInput:{mainElement:"div",dataBoundOnly:!0,charsCount:1,charElements:[],validationErr:!1,readonly:!1,disabled:!1,boundProps:["validationErr"],template:"<div class=\"char-input {{:~tagCtx.props.classes}}\" data-link=\"class{merge: ~tag.disabled toggle='char-input--blocked'}class{merge: ~tag.charsCount === 6 toggle='char-input--count'}\"><input type=\"hidden\" class=\"_no_comments\">{^{for start=0 ^end=~tag.charsCount}}<input class=\"char-input__item j-b-charinput\" type=\"{{:~tagCtx.props.password ? 'password' : 'text'}}\" inputmode=\"{{:~tagCtx.props.inputmode}}\" autocomplete=\"off\" data-link=\"{on 'input' ~tag.onInput #index}{on 'blur' ~tag.onBlur #index}{on 'focus' ~tag.onFocus #index}{on 'keydown' ~tag.onKeyDown #index}disabled{:~tag.disabled}readonly{:~tag.readonly || false}class{merge:~tag.validationErr toggle='input-validation-error'}\">{{/for}}</div>",setValue:function(t){this._setWord(t)},onAfterLink:function(t){const e=this.charsCount!==t.props.count;$.observable(this).setProperty({charsCount:t.props.count,validationErr:t.props.validationErr,readonly:t.props.readonly,disabled:t.props.disabled}),e&&(this.charElements=this.mainElem[0].querySelectorAll(".j-b-charinput").toArray())},render(){this.tagCtx.props.setFocus&&setTimeout((()=>{this.charElements[0].focus()}),10)},onUpdate:!1,onFocus:function(t){var e,s;if(this.completed)this.completed=!1,this._setWord(""),this.updateValue(""),this.charElements[0].focus();else if(t>0&&""===this.charElements[t-1].value)this.charElements[t-1].focus();else if(t<this.tagCtx.props.count-1){const t=this._getWord().length;this.charElements[t].focus()}null===(s=(e=this.tagCtx.props).onInputFocus)||void 0===s||s.call(e)},onInput:function(e,s,a){var o,n,r;const i=t[this.tagCtx.props.inputtype];i&&(s.target.value=s.target.value.replace(i,"")),s.target.value.length>1&&this._setWord(s.target.value);const l=this._getWord();if(1===s.target.value.length){if(l.length===this.tagCtx.props.count)return this.completed=!0,this.charElements[e].blur(),this.updateValue(l),void(null===(n=(o=this.tagCtx.props).onComplete)||void 0===n||n.call(o));null===(r=this.charElements[e+1])||void 0===r||r.focus()}this.updateValue(l)},onKeyDown:function(t,e,s){const a=this.charElements[t].value.length>0;if("Backspace"===e.key&&t>0&&!a){let s=this.charElements[t-1];s.value="",this.updateValue(this._getWord()),s.focus(),e.preventDefault(),e.stopPropagation()}},_getWord(){return this.charElements.map((t=>t.value)).join("")},_setWord(t){let e=(null==t?void 0:t.split("").splice(0,this.tagCtx.props.count))||[];for(let t=0;t<this.tagCtx.props.count;t++)this.charElements[t].value=e[t]||""}}})})();