(()=>{"use strict";null===$||void 0===$||$.views.templates({_spaDropDownPopup:{markup:'<h2 class="popup__header">{{:~props.header}}</h2>\n{{include data tmpl="_spaDropDownBody" /}}'},_spaDropDownBody:{markup:'{^{radiogroup ~tag.selected convert="fromObj" convertBack="toObj"}}\n    <div class="drop-list">\n        {^{for #data filter=~filter}}\n            <label class="drop-select{{if optionCls}} {{:optionCls}}{{/if}}">\n                <input type="radio" class="drop-select-input" name="{{:~props.name || \'period\'}}" value="{{:value}}" data-link="data-val{:~props.useValidation}data-val-required{:(~props.useValidation ? ~props.validation || \'*\' : null)}" />\n                <span class="drop-select-text">{{localize:name}}</span>\n            </label>\n        {{/for}}\n    </div>\n{{/radiogroup}}\n',helpers:{filter:function(t){return!t._disabled}},converters:{fromObj:function(t){return t?t.value:""},toObj:function(t){var e;return null!==(e=this.tagCtx.view.data.find((e=>t===e.value.toString())))&&void 0!==e?e:{}}}}});null===$||void 0===$||$.views.tags({spaDropDown:{template:'    <div class="drop-radio-base {{:~tagCtx.props.class}}" data-link="class{merge:~tagCtx.props.disabled toggle=\'disabled\'}">\n        {{if ~tagCtx.props.title}}\n        <div class="label">{{: ~tagCtx.props.title}}</div>\n        {{/if}}\n    <div class="drop-btn" data-link="{on ~tag.toggle}class{merge:~tag.open toggle=\'open\'}">\n        {^{if ~tag.selected &&  ~tag.selected^name}}\n        <span class="drop-btn-checked">{^{localize:~tag.selected^name}}</span>\n        {{else}}\n        <span class="drop-btn-title">{{localize:~tagCtx.props.label || \'Выберите\'}}</span>\n        {{/if}}\n    </div>\n        {{include tmpl="_spaDropDownBody" ~props=~tagCtx.props /}}    </div>',bindTo:["selected"],mainElement:".drop-radio-base",dataBoundOnly:!0,selected:{},previousSelected:-1,setSize:!0,async init(){this.closeOnOuterClick=this.closeOnOuterClick.bind(this),$.observe(this,"selected",(function(t,e){var s,o,i;this.previousSelected=e.oldValue,this.updateValues(this.selected),null===(s=this._popup)||void 0===s||s.close(),null===(i=(o=this.tagCtx.props).onSelect)||void 0===i||i.call(o)}))},onAfterLink(){this.dropList=this.mainElem[0].querySelector(".drop-list"),this.dropList.style.cssText="display: block; opacity: 0; pointer-events: none;"},onBind:function(t){var e=t.props.selected;if(t.args[0]&&e){var s=t.args[0].find((t=>t.value==e.value));$.observable(this).setProperty("selected",s)}},toggle:function(t,s){var o;if(this.mainElem[0].classList.contains("disabled"))return!1;const i=!this.open,n=this;if($.observable(this).setProperty("open",i),n.tagCtx.props.popupMobileCls&&"m"===wb.settings.displayMode)return void(i?n._popup=wb.popup.showCustomPopup({showCross:!0,useCenteredFunction:!0,popupClassesList:["popup",n.tagCtx.props.popupMobileCls,"shown"],contentClasses:["popup__content"],onShow:t=>{$.templates._spaDropDownPopup.link(t.querySelector(".popup__content"),{data:n.tagCtx.contentView.data.filter((t=>!t._disabled))},{props:n.tagCtx.props,tag:n})},onHide:(t,e)=>{$.observable(this).setProperty("open",!1),n._popup=null}}):null===(o=n._popup)||void 0===o||o.close());const l=this.dropList.getBoundingClientRect();i?(l.bottom>document.documentElement.clientHeight&&(this.dropList.style.maxHeight=document.documentElement.clientHeight-l.top+"px",this.dropList.style.overflow="scroll"),this.dropList.style.pointerEvents="auto",document.addEventListener("click",this.closeOnOuterClick)):(this.dropList.style.maxHeight="unset",this.dropList.style.overflow="auto",this.dropList.style.pointerEvents="none",document.removeEventListener("click",this.closeOnOuterClick)),window.requestAnimationFrame(e(this.dropList,i))},closeOnOuterClick(t){this.mainElem[0].contains(t.target)&&!this.dropList.contains(t.target)||(document.removeEventListener("click",this.closeOnOuterClick),$.observable(this).setProperty("open",!1),this.dropList.style.maxHeight="unset",this.dropList.style.overflow="auto",this.dropList.style.pointerEvents="none",window.requestAnimationFrame(e(this.dropList,!1)))}}});const t=1/18;function e(e,s){let o=parseInt(window.getComputedStyle(e).opacity);return function i(){if(o+=t*(s?1:-1),e.style.opacity=o,o<1&&o>0)return window.requestAnimationFrame(i)}}})();