(()=>{"use strict";null===$||void 0===$||$.views.tags({contextMenu:{baseTag:"on",init:function(t){const e=t.args;t.args=["contextmenu",...e,this.onContextMenu.bind(this)],this.baseApply(arguments),this._destroyMenu=this._destroyMenu.bind(this)},onContextMenu:function(t){if(t.preventDefault(),t.target.closest(".context-menu"))return;const{data:e,ctx:n}=$.view(t.target);this._destroyMenu(),this.contextMenu=document.createElement("div"),this.contextMenu.classList.add("context-menu"),this.tagCtx.tmpl?this.tagCtx.tmpl.link(this.contextMenu,e,n):this.contextMenu.innerHTML="empty context menu",this.lastElement={target:t.currentTarget,data:e},t.currentTarget.appendChild(this.contextMenu),$.observable(e).setProperty("activeMenu",!0),document.addEventListener("click",this);const i=t.target.closest(".j-context-outer").getBoundingClientRect(),s=this.contextMenu.querySelector(".j-context-content"),o=s.getBoundingClientRect();if(o.right>=i.right-20){const t=i.right-o.right-20,e=+getComputedStyle(s).left.replace("px","");s.style.left=e+t+"px"}},handleEvent:function(t){("click"==t.type||this.contextMenu)&&t.target.offsetParent!=this.contextMenu&&(this._destroyMenu(),document.removeEventListener("click",this))},_destroyMenu:function(){const{target:t,data:e}=this.lastElement||{};t&&t.removeChild(this.contextMenu),e&&$.observable(e).setProperty("activeMenu",!1),this.contextMenu=null,this.lastElement=null},onUnbind:function(){this.baseApply(arguments),this._destroyMenu(),document.removeEventListener("click",this)}}})})();