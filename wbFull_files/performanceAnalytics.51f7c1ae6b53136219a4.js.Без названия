(()=>{"use strict";var e,t,n={isResourceTiming:!1,isElementTiming:!1,maxTime:3e4,reportOptions:{}},i=globalThis,r=i.console,a=i.navigator,o=i.performance,s=function(){return a.deviceMemory},c=function(){return a.hardwareConcurrency},u=function(){return o&&!!o.getEntriesByType&&!!o.now&&!!o.mark},d="4g",f=!1,l={value:0},p={value:{beacon:0,css:0,fetch:0,img:0,other:0,script:0,total:0,xmlhttprequest:0}},m={value:0},v={value:0},T={},g={isHidden:!1,didChange:!1},h=function(){g.isHidden=!1,document.hidden&&(g.isHidden=document.hidden,g.didChange=!0)},S=function(e,t){try{var n=new PerformanceObserver((function(e){t(e.getEntries())}));return n.observe({type:e,buffered:!0}),n}catch(e){r.warn("Perfume.js:",e)}return null},y=function(){return!!(c()&&c()<=4)||!!(s()&&s()<=4)},E=function(e,t){switch(e){case"slow-2g":case"2g":case"3g":return!0;default:return y()||t}},I=function(e){return parseFloat(e.toFixed(4))},C=function(e){return"number"!=typeof e?null:I(e/Math.pow(1024,2))},b=function(e,t,r,o,u){var l,p=function(){n.analyticsTracker&&(g.isHidden&&!["CLS","INP"].includes(e)||n.analyticsTracker({attribution:o,metricName:e,data:t,navigatorInformation:a?{deviceMemory:s()||0,hardwareConcurrency:c()||0,serviceWorkerStatus:"serviceWorker"in a?a.serviceWorker.controller?"controlled":"supported":"unsupported",isLowEndDevice:y(),isLowEndExperience:E(d,f)}:{},rating:r,navigationType:u}))};["CLS","INP"].includes(e)?p():(l=p,"requestIdleCallback"in i?i.requestIdleCallback(l,{timeout:3e3}):l())},k=function(e){e.forEach((function(e){if(!("self"!==e.name||e.startTime<l.value)){var t=e.duration-50;t>0&&(m.value+=t,v.value+=t)}}))};!function(e){e.instant="instant",e.quick="quick",e.moderate="moderate",e.slow="slow",e.unavoidable="unavoidable"}(e||(e={}));(t={})[e.instant]={vitalsThresholds:[100,200],maxOutlierThreshold:1e4},t[e.quick]={vitalsThresholds:[200,500],maxOutlierThreshold:1e4},t[e.moderate]={vitalsThresholds:[500,1e3],maxOutlierThreshold:1e4},t[e.slow]={vitalsThresholds:[1e3,2e3],maxOutlierThreshold:1e4},t[e.unavoidable]={vitalsThresholds:[2e3,5e3],maxOutlierThreshold:2e4};var L,M,A,w,P,R={RT:[100,200],TBT:[200,600],NTBT:[200,600]},_=function(e,t){return R[e]?t<=R[e][0]?"good":t<=R[e][1]?"needsImprovement":"poor":null},D=function(e,t,n){Object.keys(t).forEach((function(e){"number"==typeof t[e]&&(t[e]=I(t[e]))})),b(e,t,null,n||{})},F=function(e){var t=e.attribution,i=e.name,r=e.rating,a=e.value,o=e.navigationType;"FCP"===i&&(l.value=a),["FCP","LCP"].includes(i)&&!T[0]&&(T[0]=S("longtask",k)),"FID"===i&&setTimeout((function(){g.didChange||(F({attribution:t,name:"TBT",rating:_("TBT",m.value),value:m.value,navigationType:o}),D("dataConsumption",p.value))}),1e4);var s=I(a);s<=n.maxTime&&s>=0&&b(i,s,r,t,o)},N=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},B=function(e){if("loading"===document.readyState)return"loading";var t=N();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},O=function(e){var t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},x=function(e,t){var n="";try{for(;e&&9!==e.nodeType;){var i=e,r=i.id?"#"+i.id:O(i)+(i.classList&&i.classList.value&&i.classList.value.trim()&&i.classList.value.trim().length?"."+i.classList.value.trim().replace(/\s+/g,"."):"");if(n.length+r.length>(t||100)-1)return n||r;if(n=n?r+">"+n:r,i.id)break;e=i.parentNode}}catch(e){}return n},q=-1,H=function(){return q},j=function(e){addEventListener("pageshow",(function(t){t.persisted&&(q=t.timeStamp,e(t))}),!0)},G=function(){var e=N();return e&&e.activationStart||0},z=function(e,t){var n=N(),i="navigate";return H()>=0?i="back-forward-cache":n&&(document.prerendering||G()>0?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},V=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch(e){}},W=function(e,t,n,i){var r,a;return function(o){t.value>=0&&(o||i)&&((a=t.value-(r||0))||void 0===r)&&(r=t.value,t.delta=a,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},U=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},K=function(e){var t=function(t){"pagehide"!==t.type&&"hidden"!==document.visibilityState||e(t)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},Y=function(e){var t=!1;return function(n){t||(e(n),t=!0)}},Q=-1,$=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},J=function(e){"hidden"===document.visibilityState&&Q>-1&&(Q="visibilitychange"===e.type?e.timeStamp:0,Z())},X=function(){addEventListener("visibilitychange",J,!0),addEventListener("prerenderingchange",J,!0)},Z=function(){removeEventListener("visibilitychange",J,!0),removeEventListener("prerenderingchange",J,!0)},ee=function(){return Q<0&&(Q=$(),X(),j((function(){setTimeout((function(){Q=$(),X()}),0)}))),{get firstHiddenTime(){return Q}}},te=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},ne=[1800,3e3],ie=function(e,t){t=t||{},te((function(){var n,i=ee(),r=z("FCP"),a=V("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(a.disconnect(),e.startTime<i.firstHiddenTime&&(r.value=Math.max(e.startTime-G(),0),r.entries.push(e),n(!0)))}))}));a&&(n=W(e,r,ne,t.reportAllChanges),j((function(i){r=z("FCP"),n=W(e,r,ne,t.reportAllChanges),U((function(){r.value=performance.now()-i.timeStamp,n(!0)}))})))}))},re=[.1,.25],ae={passive:!0,capture:!0},oe=new Date,se=function(e,t){L||(L=t,M=e,A=new Date,de(removeEventListener),ce())},ce=function(){if(M>=0&&M<A-oe){var e={entryType:"first-input",name:L.type,target:L.target,cancelable:L.cancelable,startTime:L.timeStamp,processingStart:L.timeStamp+M};w.forEach((function(t){t(e)})),w=[]}},ue=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){se(e,t),r()},i=function(){r()},r=function(){removeEventListener("pointerup",n,ae),removeEventListener("pointercancel",i,ae)};addEventListener("pointerup",n,ae),addEventListener("pointercancel",i,ae)}(t,e):se(t,e)}},de=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,ue,ae)}))},fe=[100,300],le=0,pe=1/0,me=0,ve=function(e){e.forEach((function(e){e.interactionId&&(pe=Math.min(pe,e.interactionId),me=Math.max(me,e.interactionId),le=me?(me-pe)/7+1:0)}))},Te=function(){return P?le:performance.interactionCount||0},ge=[200,500],he=0,Se=function(){return Te()-he},ye=[],Ee={},Ie=function(e){var t=ye[ye.length-1],n=Ee[e.interactionId];if(n||ye.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var i={id:e.interactionId,latency:e.duration,entries:[e]};Ee[i.id]=i,ye.push(i)}ye.sort((function(e,t){return t.latency-e.latency})),ye.splice(10).forEach((function(e){delete Ee[e.id]}))}},Ce=function(e,t){!function(e,t){t=t||{},te((function(){var n;"interactionCount"in performance||P||(P=V("event",ve,{type:"event",buffered:!0,durationThreshold:0}));var i,r=z("INP"),a=function(e){e.forEach((function(e){e.interactionId&&Ie(e),"first-input"===e.entryType&&!ye.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&Ie(e)}));var t,n=(t=Math.min(ye.length-1,Math.floor(Se()/50)),ye[t]);n&&n.latency!==r.value&&(r.value=n.latency,r.entries=n.entries,i())},o=V("event",a,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});i=W(e,r,ge,t.reportAllChanges),o&&("PerformanceEventTiming"in window&&"interactionId"in PerformanceEventTiming.prototype&&o.observe({type:"first-input",buffered:!0}),K((function(){a(o.takeRecords()),r.value<0&&Se()>0&&(r.value=0,r.entries=[]),i(!0)})),j((function(){ye=[],he=Te(),r=z("INP"),i=W(e,r,ge,t.reportAllChanges)})))}))}((function(t){!function(e){if(e.entries.length){var t=e.entries.sort((function(e,t){return t.duration-e.duration||t.processingEnd-t.processingStart-(e.processingEnd-e.processingStart)}))[0],n=e.entries.find((function(e){return e.target}));e.attribution={eventTarget:x(n&&n.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:B(t.startTime)}}else e.attribution={}}(t),e(t)}),t)},be=[2500,4e3],ke={},Le=[800,1800],Me=function e(t){document.prerendering?te((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},Ae=function(e,t){t=t||{};var n=z("TTFB"),i=W(e,n,Le,t.reportAllChanges);Me((function(){var r=N();if(r){var a=r.responseStart;if(a<=0||a>performance.now())return;n.value=Math.max(a-G(),0),n.entries=[r],i(!0),j((function(){n=z("TTFB",0),(i=W(e,n,Le,t.reportAllChanges))(!0)}))}}))},we=function(e){e.forEach((function(e){e.identifier&&F({attribution:{identifier:e.identifier},name:"ET",rating:null,value:e.startTime})}))},Pe=function(e){e.forEach((function(e){if(n.isResourceTiming&&D("resourceTiming",e),e.decodedBodySize&&e.initiatorType){var t=e.decodedBodySize/1e3;p.value[e.initiatorType]+=t,p.value.total+=t}}))},Re=function(){!function(e,t){Ae((function(e){!function(e){if(e.entries.length){var t=e.entries[0],n=t.activationStart||0,i=Math.max(t.domainLookupStart-n,0),r=Math.max(t.connectStart-n,0),a=Math.max(t.requestStart-n,0);e.attribution={waitingTime:i,dnsTime:r-i,connectionTime:a-r,requestTime:e.value-a,navigationEntry:t}}else e.attribution={waitingTime:0,dnsTime:0,connectionTime:0,requestTime:0}}(e),function(e){e.value>0&&F(e)}(e)}),t)}(0,n.reportOptions.ttfb),function(e,t){!function(e,t){t=t||{},ie(Y((function(){var n,i=z("CLS",0),r=0,a=[],o=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=a[0],n=a[a.length-1];r&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(r+=e.value,a.push(e)):(r=e.value,a=[e])}})),r>i.value&&(i.value=r,i.entries=a,n())},s=V("layout-shift",o);s&&(n=W(e,i,re,t.reportAllChanges),K((function(){o(s.takeRecords()),n(!0)})),j((function(){r=0,i=z("CLS",0),n=W(e,i,re,t.reportAllChanges),U((function(){return n()}))})),setTimeout(n,0))})))}((function(e){!function(e){if(e.entries.length){var t=e.entries.reduce((function(e,t){return e&&e.value>t.value?e:t}));if(t&&t.sources&&t.sources.length){var n=(i=t.sources).find((function(e){return e.node&&1===e.node.nodeType}))||i[0];if(n)return void(e.attribution={largestShiftTarget:x(n.node),largestShiftTime:t.startTime,largestShiftValue:t.value,largestShiftSource:n,largestShiftEntry:t,loadState:B(t.startTime)})}}var i;e.attribution={}}(e),function(e){F(e)}(e)}),t)}(0,n.reportOptions.cls),function(e,t){ie((function(e){!function(e){if(e.entries.length){var t=N(),n=e.entries[e.entries.length-1];if(t){var i=t.activationStart||0,r=Math.max(0,t.responseStart-i);return void(e.attribution={timeToFirstByte:r,firstByteToFCP:e.value-r,loadState:B(e.entries[0].startTime),navigationEntry:t,fcpEntry:n})}}e.attribution={timeToFirstByte:0,firstByteToFCP:e.value,loadState:B(H())}}(e),function(e){F(e)}(e)}),t)}(0,n.reportOptions.fcp),function(e,t){!function(e,t){t=t||{},te((function(){var n,i=ee(),r=z("FID"),a=function(e){e.startTime<i.firstHiddenTime&&(r.value=e.processingStart-e.startTime,r.entries.push(e),n(!0))},o=function(e){e.forEach(a)},s=V("first-input",o);n=W(e,r,fe,t.reportAllChanges),s&&K(Y((function(){o(s.takeRecords()),s.disconnect()}))),s&&j((function(){var i;r=z("FID"),n=W(e,r,fe,t.reportAllChanges),w=[],M=-1,L=null,de(addEventListener),i=a,w.push(i),ce()}))}))}((function(e){!function(e){var t=e.entries[0];e.attribution={eventTarget:x(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:B(t.startTime)}}(e),function(e){F(e)}(e)}),t)}(0,n.reportOptions.fid),function(e,t){!function(e,t){t=t||{},te((function(){var n,i=ee(),r=z("LCP"),a=function(e){var t=e[e.length-1];t&&t.startTime<i.firstHiddenTime&&(r.value=Math.max(t.startTime-G(),0),r.entries=[t],n())},o=V("largest-contentful-paint",a);if(o){n=W(e,r,be,t.reportAllChanges);var s=Y((function(){ke[r.id]||(a(o.takeRecords()),o.disconnect(),ke[r.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return setTimeout(s,0)}),!0)})),K(s),j((function(i){r=z("LCP"),n=W(e,r,be,t.reportAllChanges),U((function(){r.value=performance.now()-i.timeStamp,ke[r.id]=!0,n(!0)}))}))}}))}((function(e){!function(e){if(e.entries.length){var t=N();if(t){var n=t.activationStart||0,i=e.entries[e.entries.length-1],r=i.url&&performance.getEntriesByType("resource").filter((function(e){return e.name===i.url}))[0],a=Math.max(0,t.responseStart-n),o=Math.max(a,r?(r.requestStart||r.startTime)-n:0),s=Math.max(o,r?r.responseEnd-n:0),c=Math.max(s,i?i.startTime-n:0),u={element:x(i.element),timeToFirstByte:a,resourceLoadDelay:o-a,resourceLoadTime:s-o,elementRenderDelay:c-s,navigationEntry:t,lcpEntry:i};return i.url&&(u.url=i.url),r&&(u.lcpResourceEntry=r),void(e.attribution=u)}}e.attribution={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadTime:0,elementRenderDelay:e.value}}(e),function(e){F(e)}(e)}),t)}(0,n.reportOptions.lcp),Ce((function(e){return F(e)}),n.reportOptions.inp),n.isResourceTiming&&S("resource",Pe),n.isElementTiming&&S("element",we)},_e=function(e){var t="usageDetails"in e?e.usageDetails:{};D("storageEstimate",{quota:C(e.quota),usage:C(e.usage),caches:C(t.caches),indexedDB:C(t.indexedDB),serviceWorker:C(t.serviceWorkerRegistrations)})},De={finalMarkToStepsMap:{},startMarkToStepsMap:{},active:{},navigationSteps:{}},Fe=function(e){if(void 0===e&&(e={}),n.analyticsTracker=e.analyticsTracker,n.isResourceTiming=!!e.resourceTiming,n.isElementTiming=!!e.elementTiming,n.maxTime=e.maxMeasureTime||n.maxTime,n.reportOptions=e.reportOptions||n.reportOptions,n.steps=e.steps,n.onMarkStep=e.onMarkStep,u()){"PerformanceObserver"in i&&Re(),void 0!==document.hidden&&document.addEventListener("visibilitychange",h);var t=function(){if(!u())return{};var e=o.getEntriesByType("navigation")[0];if(!e)return{};var t=e.responseStart,n=e.responseEnd;return{fetchTime:n-e.fetchStart,workerTime:e.workerStart>0?n-e.workerStart:0,totalTime:n-e.requestStart,downloadTime:n-t,timeToFirstByte:t-e.requestStart,headerSize:e.transferSize-e.encodedBodySize||0,dnsLookupTime:e.domainLookupEnd-e.domainLookupStart,redirectTime:e.redirectEnd-e.redirectStart}}();D("navigationTiming",t),t.redirectTime&&F({attribution:{},name:"RT",rating:_("RT",t.redirectTime),value:t.redirectTime}),D("networkInformation",function(){if("connection"in a){var e=a.connection;return"object"!=typeof e?{}:(d=e.effectiveType,f=!!e.saveData,{downlink:e.downlink,effectiveType:e.effectiveType,rtt:e.rtt,saveData:!!e.saveData})}return{}}()),a&&a.storage&&"function"==typeof a.storage.estimate&&a.storage.estimate().then(_e),n.steps&&n.steps&&(De.startMarkToStepsMap={},De.finalMarkToStepsMap={},De.active={},De.navigationSteps={},Object.entries(n.steps).forEach((function(e){var t,n,i=e[0],r=e[1].marks,a=r[0],o=r[1],s=null!==(n=De.startMarkToStepsMap[a])&&void 0!==n?n:{};if(s[i]=!0,De.startMarkToStepsMap[a]=s,De.finalMarkToStepsMap[o]){var c=De.finalMarkToStepsMap[o][a]||[];c.push(i),De.finalMarkToStepsMap[o][a]=c}else De.finalMarkToStepsMap[o]=((t={})[a]=[i],t)})))}};const Ne=Object.freeze({MAIN:"Main",LK:"LK",MY_DATA:"My_Data",NOTIFICATIONS:"Notifications",FAVORITES:"Favorites",FAVORITE_BRANDS:"Favorite_Brands",DELIVERY:"Delivery",PURCHASES:"Purchases",CHECKS:"Checks",REFUND_REGISTRATION:"Refund_Registration",APPLICATIONS:"Applications",REVIEWS:"Reviews",MY_BALANCE:"MyBalance",CART:"Cart",ITEM:"Item",ITEM_FEEDBACKS:"Item_Feedbacks",ITEM_QUESTIONS:"Item_Questions",LISTING_BANNER:"Listing_Banner",LISTING_CATALOG:"Listing_Catalog",LISTING_SEARCH:"Listing_Search",BRAND:"Brand",SELLER:"Seller"}),Be=Object.freeze({SpaHomeEntrypoint:Ne.MAIN,SpaPersonalCabinetEntrypoint:Ne.LK,SpaAccountEntrypoint:Ne.MY_DATA,SpaNotificationsEntrypoint:Ne.NOTIFICATIONS,SpaFavoritesEntrypoint:Ne.FAVORITES,SpaFavoriteBrandsEntrypoint:Ne.FAVORITE_BRANDS,SpaActiveOrdersEntrypoint:Ne.DELIVERY,SpaArchivePositionsEntrypoint:Ne.PURCHASES,SpaCustomerReceiptEntrypoint:Ne.CHECKS,SpaCourierRefunds:Ne.REFUND_REGISTRATION,SpaMyClaimsEntrypoint:Ne.REFUND_REGISTRATION,SpaMyCommunicationsEntrypoint:Ne.APPLICATIONS,SpaMyFeedbacksEntrypoint:Ne.REVIEWS,SpaWalletPurchaseEntrypoint:Ne.MY_BALANCE,SpaBasketEntrypoint:Ne.CART,SpaProductCardEntrypoint:Ne.ITEM,SpaProductCardFeedbacksEntrypoint:Ne.ITEM_FEEDBACKS,SpaProductCardQuestionsEntrypoint:Ne.ITEM_QUESTIONS,SpaPromotionCatalogEntrypoint:Ne.LISTING_BANNER,SpaCatalogEntrypoint:Ne.LISTING_CATALOG,SpaSearchEntrypoint:Ne.LISTING_SEARCH,SpaBrandsEntrypoint:Ne.BRAND,SpaSellerCatalogEntrypoint:Ne.SELLER}),Oe="wbx__navigatorInfoSended";(new(function(){function e(){this.analyticsTracker=e=>{const{metricName:t,data:n,navigatorInformation:i}=e;if(!this.sentMetricsFlags.get(t)){switch(this.sentMetricsFlags.get("navigatorInformation")||(this._sendPerformanceData("navigatorInformation","start",i),localStorage.setItem(Oe,"true"),this.sentMetricsFlags.set("navigatorInformation",!0)),t){case"navigationTiming":n&&"object"==typeof n&&this._sendPerformanceData("navigationTiming","pageview_spa",n);break;case"networkInformation":n&&"object"==typeof n&&this._sendPerformanceData("networkInformation","pageview_spa",n);break;case"storageEstimate":n&&"object"==typeof n&&this._sendPerformanceData("storageEstimate","pageview_spa",n);break;case"TTFB":this._sendPerformanceData("TTFB","pageview_spa",{duration:n});break;case"RT":this._sendPerformanceData("RT","pageview_spa",{duration:n});break;case"FCP":this._sendPerformanceData("FCP","pageview_spa",{duration:n});break;case"FID":this._sendPerformanceData("FID","first_click",{duration:n});break;case"LCP":this._sendPerformanceData("LCP","first_click",{duration:n});break;case"CLS":this._sendPerformanceData("CLS","close",{value:n});break;case"INP":this._sendPerformanceData("INP","close",{value:n});break;case"TBT":this._sendPerformanceData("TBT","close",{duration:n});break;case"dataConsumption":break;default:this._sendPerformanceData(t,"other",{duration:n})}this.sentMetricsFlags.set(t,!0)}},this.sentMetricsFlags=new Map,this.sentMetricsFlags.set("navigatorInformation",!!localStorage.getItem(Oe))}var t=e.prototype;return t.initialize=function(){var e;const t=null===(e=WbSpaModel.prototype.$router.currentRoute)||void 0===e?void 0:e.name;this.location=Be[t]||"",Fe({analyticsTracker:this.analyticsTracker})},t._sendPerformanceData=function(e,t,n){wb.analitics.sendEvent("performance",Object.assign({id:e,type:t,location:this.location},n))},e}())).initialize()})();