/*! For license information please see index.d272726de8e5a88bba3a.js.LICENSE.txt */
(()=>{var __webpack_modules__={41325:()=>{"use strict";const e={};let t,n;function s(e){const t=[].slice.call(arguments,1);return e.replace(/{(\d+)}/g,(function(e,n){return void 0!==t[n]?t[n]:e}))}function i(t){return{value:e[t]||t,notfound:!e[t]}}function r(e){return"[object Object]"===Object.prototype.toString.call(e)}t=n=function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},$.localize=function(){if(1===arguments.length)return r(arguments[0])?void("function"==typeof(t=arguments[0].pluralRule)&&1==t.length&&(n=t)):i(arguments[0]).value;var t;if(2==arguments.length&&r(arguments[1]))Object.assign(e,arguments[1]);else if(arguments.length>1&&arguments[0]&&arguments[0].indexOf(!1)){const e=[].slice.call(arguments,1);return e.unshift(i(arguments[0]).value),s.apply(this,e)}},$.pluralize=function(){if(arguments.length<2)return arguments[0];const e=new Array(arguments.length-1);for(let t=0;t<arguments.length-1;t++)e[t]=arguments[t+1];const r=i(e.join(",")),o=r.value.split(","),a=r.notfound?t(arguments[0]):n(arguments[0]),l=o[a<o.length?a:o.length-1];return l.indexOf("{0}")>-1?s(l,arguments[0]):l}},33345:()=>{"use strict";DOMTokenList.prototype.addMany=function(e){if(null==e||!Array.isArray(e))throw new Error("DOMTokenList.prototype.addMany accepts only array");e.forEach((e=>this.add(e)))},DOMTokenList.prototype.removeMany=function(e){if(null==e||!Array.isArray(e))throw new Error("DOMTokenList.prototype.removeMany accepts only array");e.forEach((e=>this.remove(e)))}},54729:()=>{"use strict";HTMLElement.prototype.hide=function(){this.style.display="none"},HTMLElement.prototype.show=function(){this.style.display="block"},HTMLElement.prototype.width=function(){return 0==this.clientWidth?getComputedStyle(this).width.replace("px",""):this.clientWidth},HTMLElement.prototype.wrap=function(e){let t=(new DOMParser).parseFromString(e,"text/html").body.firstElementChild;for(this.parentNode.insertBefore(t,this);null!=t.firstElementChild;)t=t.firstElementChild;t.appendChild(this)},HTMLElement.prototype.parents=function(e){for(var t=[],n=this,s=void 0!==e;null!==(n=n.parentElement);)n.nodeType===Node.ELEMENT_NODE&&(s&&!n.matches(e)||t.push(n));return t},HTMLElement.prototype.isHidden=function(){return 0===this.offsetWidth&&0===this.offsetHeight||"none"===window.getComputedStyle(this).display},HTMLElement.prototype.isVisible=function(){return!this.isHidden()}},22333:()=>{"use strict";URLSearchParams.prototype.toDictionary=function(){const e={};return this.forEach(((t,n)=>e[n]=t)),e},URLSearchParams.prototype.hasOwnProperty("size")||Object.defineProperty(URLSearchParams.prototype,"size",{get:function(){let e=0;for(let t of this.keys())e++;return e}})},68815:()=>{"use strict";Array.prototype.getIntesection=function(e){return Array.isArray(e)?this.filter((t=>e.includes(t))):(console.error("Argument must be an array"),[])},Array.prototype.last||(Array.prototype.last=function(){return this[this.length-1]}),Array.prototype.first||(Array.prototype.first=function(){return this[0]}),Array.prototype.max=function(){return Math.max.apply(null,this)},Array.prototype.min=function(){return Math.min.apply(null,this)},Array.prototype.findWhere=function(e){return this.find((t=>Object.keys(e).every((n=>t[n]===e[n]))))},Array.prototype.distinct=function(){return this.filter((function(e,t,n){return n.indexOf(e)===t}))},Array.prototype.toHashSet=function(e){if(null!=e&&"function"!=typeof e)throw new TypeError("toHashSet method require callback function or null");return this.reduce(((t,n)=>{var s;return t.add(null!==(s=null==e?void 0:e(n))&&void 0!==s?s:n),t}),new Set)},Array.prototype.toMap=function(e,t){if(null!=e&&"function"!=typeof e)throw new TypeError("toMap method require callback function or null");if(null!=t&&"function"!=typeof t)throw new TypeError("toMap method require callback function or null");return this.reduce(((n,s)=>(n.set(null==e?s:e(s),null==t?s:t(s)),n)),new Map)},Array.prototype.sum=function(e){let t=0;for(let n=0,s=this.length;n<s;n++)t+=e?this[n][e]:this[n];return t},Array.prototype.sumBy=function(e){let t=0;for(let n=0,s=this.length;n<s;n++)t+=e(this[n]);return t},Array.prototype.groupBy=function(e){const t=new Map;return this.forEach((n=>{const s=e(n),i=t.get(s);i?i.push(n):t.set(s,[n])})),t},Array.prototype.selectMany=function(e){return this.length?this.map((t=>e(t))).reduce(((e,t)=>e.concat(t))):[]},Array.prototype.toChunk=function(e){const t=Math.ceil(this.length/e),n=new Array(t);for(let s=0;s<t;s++){const t=e*s;n[s]=this.slice(t,t+e)}return n},Array.prototype.merge=function(e,{lookup:t=e=>e,hasConflict:n=(e,t)=>!1}={}){if(!e||0==e.length)return!1;const s=new Map;for(const e of this||[]){const n=JSON.stringify(t(e));s.set(n,e)}let i=!1;for(const r of e){const e=JSON.stringify(t(r));if(s.has(e)){const t=s.get(e);n(r,t)&&(Object.assign(t,r),i=!0)}else this.push(r),i=!0}return i},Array.prototype.diff=function(e,{lookup:t=e=>e,hasConflict:n=(e,t)=>!1}={}){const s=[];if(!e||0==e.length)return s;const i=new Map;for(const e of this||[]){const n=JSON.stringify(t(e));i.set(n,e)}for(const r of e){const e=JSON.stringify(t(r));if(i.has(e)){n(r,i.get(e))&&s.push(r)}else s.push(r)}return s},Array.prototype.remove=function(e){let t=this.indexOf(e);t>-1&&this.splice(t,1)}},35136:()=>{"use strict";Date.prototype.format=function(e,t){var n,s,i,r,o=(n=/d{1,4}|M{1,5}|yy(?:yy)?|([HhmsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,s=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,i=/[^-+\dA-Z]/g,r=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e},function(e,t,a){var l=o;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(e)||/\d/.test(e)||(t=e,e=void 0),e=e?new Date(e):new Date,isNaN(e))throw SyntaxError("invalid date");"UTC:"==(t=String(l.masks[t]||t||l.masks.default)).slice(0,4)&&(t=t.slice(4),a=!0);var c=a?"getUTC":"get",u=e[c+"Date"](),d=e[c+"Day"](),h=e[c+"Month"](),p=e[c+"FullYear"](),m=e[c+"Hours"](),g=e[c+"Minutes"](),f=e[c+"Seconds"](),y=e[c+"Milliseconds"](),v=a?0:e.getTimezoneOffset(),b={d:u,dd:r(u),ddd:l.i18n.dayNames[d],dddd:l.i18n.dayNames[d+7],M:h+1,MM:r(h+1),MMM:l.i18n.monthShortNames[h],MMMM:l.i18n.monthNames[h+12],MMMMM:l.i18n.monthNames[h+24],yy:String(p).slice(2),yyyy:p,h:m%12||12,hh:r(m%12||12),H:m,HH:r(m),m:g,mm:r(g),s:f,ss:r(f),l:r(y,3),L:r(y>99?Math.round(y/10):y),t:m<12?"a":"p",tt:m<12?"am":"pm",T:m<12?"A":"P",TT:m<12?"AM":"PM",Z:a?"UTC":(String(e).match(s)||[""]).pop().replace(i,""),o:(v>0?"-":"+")+r(100*Math.floor(Math.abs(v)/60)+Math.abs(v)%60,4),S:["th","st","nd","rd"][u%10>3?0:(u%100-u%10!=10)*u%10]};return t.replace(n,(function(e){return e in b?b[e]:e.slice(1,e.length-1)}))});return o.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},o.i18n={dayNames:["Вс","Пн","Вт","Ср","Чт","Пт","Сб","Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],monthNames:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек","января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],monthShortNames:["янв","февр","марта","апр","мая","июня","июля","авг","сент","окт","нояб","дек"]},$.localize.dfr&&(o.i18n.dayNames=$.localize.dfr.abbreviatedDayNames.concat($.localize.dfr.dayNames),$.localize.dfr.abbreviatedMonthNames[1]="февр",$.localize.dfr.abbreviatedMonthNames[2]="марта",$.localize.dfr.abbreviatedMonthNames[4]="мая",$.localize.dfr.abbreviatedMonthNames[5]="июня",$.localize.dfr.abbreviatedMonthNames[6]="июля",$.localize.dfr.abbreviatedMonthNames[8]="сент",$.localize.dfr.abbreviatedMonthNames[10]="нояб",o.i18n.monthNames=$.localize.dfr.abbreviatedMonthNames.concat($.localize.dfr.monthGenitiveNames).concat($.localize.dfr.monthNames.map((e=>e.charAt(0).toUpperCase()+e.slice(1))))),o(this,e,t)},Date.prototype.daysBetween=function(e){var t=new Date(this.getFullYear(),this.getMonth(),this.getDate()),n=(new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-t.getTime())/864e5;return Math.floor(n)},Date.prototype.dateEqual=function(e){return this.getDate()===e.getDate()&&this.getMonth()===e.getMonth()&&this.getFullYear()===e.getFullYear()},Date.prototype.is1stJan=function(){return 1===this.getDate()&&0===this.getMonth()},Date.prototype.getUtcTime=function(){return this.getTime()-6e4*this.getTimezoneOffset()},Date.utcNow=function(){return(new Date).getUtcTime()},Date.prototype.addDays=function(e){let t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t},Date.prototype.addMinutes=function(e){let t=new Date(this.valueOf());return t.setMinutes(t.getMinutes()+e),t},Date.prototype.addHours=function(e){const t=new Date(this.valueOf());return isNaN(e)||t.setHours(t.getHours()+ +e),t},Date.prototype.addMinutes=function(e){let t=new Date(this.valueOf());return t.setMinutes(t.getMinutes()+e),t}},35342:()=>{"use strict";var e;Event.prototype.stopPropagation=(e=Event.prototype.stopPropagation,function(){this.isPropagationStopped=!0,e.call(this)})},73704:()=>{"use strict";Map.prototype.every=function(e){if("function"!=typeof e)throw new TypeError("Callback is not a function");let t=!0;return this.forEach(((n,s,i)=>{t&=e(n,s,i)})),1==t},Map.prototype.some=function(e){if(!(e instanceof Function))throw new TypeError("Callback is not a function");let t=!1;return this.forEach(((n,s,i)=>{t||(t=e(n,s,i))})),t},Map.prototype.reduce=function(e,t){if("function"!=typeof e)throw new TypeError("Map reduce argument 1 must be a function");let n=t,s=0;return this.forEach(((i,r,o)=>{s++,n=1!=s||null!=t?e(n,i,r,o):i})),n},Map.prototype.map=function(e){if("function"!=typeof e)throw new TypeError("Callback is not a function");const t=new Map;return this.forEach(((n,s,i)=>{t.set(s,e(n,s,i))})),t},Map.prototype.toArray=function(e){if("function"!=typeof e&&null!=e)throw new TypeError("Callback if not a function");const t=[];return this.forEach(((n,s,i)=>t.push(null==e?n:e(n,s,i)))),t},Map.prototype.find=function(e){if("function"!=typeof e)throw new TypeError("Callback is not a function");let t=null;return this.forEach(((n,s,i)=>{t||e(n,s,i)&&(t=n)})),t},Map.prototype.sort=function(e){let t=new Map;this[Symbol.iterator]=function*(){yield*[...this.entries()].sort(e)};for(let[e,n]of this)t.set(e,n);return t}},8913:()=>{"use strict";Number.prototype.formatMoney=function(e,t,n){var s=this,i=(e=isNaN(e=Math.abs(e))?2:e,t=null==t?".":t,n=null==n?",":n,s<0?"-":""),r=parseInt(s=Math.abs(+s||0).toFixed(e))+"",o=(o=r.length)>3?o%3:0;return i+(o?r.substr(0,o)+n:"")+r.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+n)+(e?t+Math.abs(s-r).toFixed(e).slice(2):"")},Number.prototype.countDecimals=function(){return Math.floor(this.valueOf())===this.valueOf()?0:this.toString().split(".")[1].length||0},Number.prototype.toFixedNumber=function(e,t){var n=Math.pow(t||10,e);return Math.round(this*n)/n},Number.tryParseInt=function(e){const t=parseInt(e);return isNaN(t)?null:t}},8730:()=>{"use strict";Set.prototype.toArray=function(e){if(null!=e&&"function"!=typeof e)throw new TypeError("Callback at Set.prototype.toArray must be null or function");const t=[];return this.forEach((n=>t.push(null==e?n:e(n)))),t},Set.prototype.map=function(e){if("function"!=typeof e)throw new TypeError("Callback at Set.prototype.map must be function");const t=new Set;return this.forEach((n=>t.add(e(n)))),t},Set.prototype.filter=function(e){if("function"!=typeof e)throw new TypeError("Callback at Set.prototype.map must be function");const t=new Set;return this.forEach((n=>{e(n)&&t.add(n)})),t}},98479:()=>{"use strict";if("localStorage"in window||null!==window.localStorage){const e=Storage.prototype.setItem;Storage.prototype.setItem=function(t,n){try{e.apply(this,arguments)}catch(t){if(-1===t.message.indexOf("quota"))throw wb.spa.logError(t),t;let n,s,i={len:0},r=0;for(s in localStorage)localStorage.hasOwnProperty(s)&&(n=2*(localStorage[s].length+s.length),r+=n,i.len<n&&(i={len:n,key:s}));if(i.key)if(i.len>307200){this.removeItem(i.key);const n=`localstorage delkey:${i.key}, len:${i.len/1024} KB, key:${arguments[0]}, exp:${t.message}`;console.log(n),wb.spa.logError(new Error(n)),e.apply(this,arguments)}else{const e=`localstorage exception key:${arguments[0]}, exp:${t.message}, storageKeys:${localStorage.length}, storageLen:${r/1024} KB`;console.log(e),wb.spa.logError(new Error(e))}}},Storage.prototype.trySetItem=function(e,t){try{this.setItem(e,t)}catch(e){}},Storage.prototype.clearStartsWith=function(e,t){if(e)try{Object.entries(this).filter((n=>0===n[0].indexOf(e)&&n[0]!==t)).forEach((e=>{this.removeItem(e[0])}))}catch(e){}},Storage.prototype.putObject=function(e,t,{tryCatch:n}={}){if(n)try{this.setItem(e,JSON.stringify(t))}catch(e){}else this.setItem(e,JSON.stringify(t))},Storage.prototype.getObject=function(e){var t=this.getItem(e);try{return t&&JSON.parse(t)}catch(t){this.removeItem(e)}return null},Storage.prototype.hasItem=function(e){return null!=this.getItem(e)}}},74233:()=>{"use strict";String.prototype.capitalizeIf=function(e){return e?this.charAt(0).toUpperCase()+this.slice(1):this},String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")},String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")},String.prototype.trim=function(){return this.trimRight().trimLeft()},String.prototype.trimMiddle=function(){return this.trim().replace(/\s\s+/g," ")},String.prototype.cleanTrashBetweenTd=function(){return this.replace(new RegExp(">[ \t\r\n\v\f]*<","g"),"><")},String.format=function(){for(var e=arguments[0],t=0;t<arguments.length-1;t++){var n=new RegExp("\\{"+t+"\\}","gm");e=e.replace(n,arguments[t+1])}return e},String.prototype.formatPhone=function(e){let t=this.split(""),n="";for(let s=0;s<e.length;s++)n+="#"===e[s]?t.splice(0,1):e[s];return n},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)},String.prototype.toSafeString=function(){return encodeURIComponent(this.replace(/<\/?[^>]+>/gi,"").trim())},String.prototype.hashCode=function(){let e,t,n=0;if(0===this.length)return n;for(e=0;e<this.length;e++)t=this.charCodeAt(e),n=(n<<5)-n+t,n|=0;return n}},17708:(e,t,n)=>{"use strict";var s={};n.r(s),n.d(s,{Deferred:()=>J,animationFrameWithMinDelay:()=>Y,base64:()=>Z,currentCulture:()=>E,debounce:()=>j,debounceLead:()=>L,debounceTrail:()=>N,deepMerge:()=>x,deepMerge_v2:()=>B,delay:()=>V,delegator:()=>H,getClientDt:()=>K,isElementInViewport:()=>G,isMobileBrowser:()=>Q,isNumber:()=>X,loadCssAsync:()=>te,loadJsAsync:()=>ee,lockPromise:()=>W,nextTick:()=>z,objectSerializer:()=>A,once:()=>U,repeat:()=>F,serializeToFormData:()=>D,sleep:()=>q,throttle:()=>R});n(74233),n(68815),n(73704),n(8730),n(54729),n(33345),n(35136),n(8913),n(98479),n(35342),n(22333);NodeList.prototype.toArray=function(){return Array.prototype.slice.call(this)},HTMLCollection.prototype.forEach=function(e){Array.prototype.slice.call(this).forEach(((t,n,s)=>e(t,n,s)))},window.requestIdleCallback||(window.requestIdleCallback=function(e){setTimeout(e,1)});var i=n(92901),r=n(30694);let o=function(){function e(){}var t=e.prototype;return t.init=function(){const e={},t=document.querySelector(".j-lk-menu-top"),n=[{type:"top",selector:document.querySelector(".j-lk-menu-top")}];return this.alternateRoutes=new Map,n.forEach((t=>t.selector.querySelectorAll("a").forEach((t=>{var n;let s;try{s=new URL(t.href).pathname}catch(e){return}const i="true"==t.dataset.main,r="true"==t.dataset.sub,o=t.parentElement;e.hasOwnProperty(s)||(e[s]={links:[],elements:[]});const a=t.closest(i?"li":"ul");e[s].elements.push(a),e[s].links.push({el:o,isMainMenu:i,isSubMenu:r,path:s,switch:o.dataset.switch,altSwitch:o.dataset.altSwitch}),null===(n=t.dataset.altRoutes)||void 0===n||n.split(",").forEach((e=>{e&&this.alternateRoutes.set(e.trim(),s)})),"6"===a.dataset.attr&&(this.walletWrapperEl=a,this.walletEl=t,this.walletEl.innerText=wb.settings.balanceTitle,this.walletWrapperEl.classList.add(wb.settings.walletTypeCode>0?"lk-menu-main__item--wallet":"lk-menu-main__item--balance"))})))),this.menuDictionary=e,this.menuDictionaryKeys=Object.keys(this.menuDictionary),this.root=t,this.roots=n.map((e=>e.selector)),this.nextAnimationFrame=null,this._initDropDownMenu(),this.toggleVisibilityNodes(),wb.global.subscribe(this.toggleVisibilityNodes.bind(this)),$.observe(wb.settings,"balanceTitle",(()=>{this.walletEl.innerText=wb.settings.balanceTitle,this.walletWrapperEl.classList.add(wb.settings.walletTypeCode>0?"lk-menu-main__item--wallet":"lk-menu-main__item--balance")})),this},t.setStatic=function(e){this.stylesLink=e.stylesLink},t.updateMenu=function(e,t,n){if(this.toggleVisibility(t,n),"/"!=e[0]&&(e="/"+e),null==this.root)return;const s=this.alternateRoutes.get(e);s&&(e=s);const i=this.menuDictionary[e];if(null==i)return;const r=i.elements.length>0?i.elements[0].dataset.attr:"";this.menuDictionaryKeys.forEach((t=>{const n=this.menuDictionary[t].elements;n.length>0&&n.forEach((e=>{const t=e.dataset.attr==r;e.classList.toggle("active",t)})),this.menuDictionary[t].links.forEach((t=>{!t.isMainMenu&&t.el.classList.toggle("active",t.path==e)}))}))},t.toggleVisibility=function(e,t){if(!e||!e.visible||e.authOnly&&void 0!==t&&!t)return this.hide();this.show()},t.toggleVisibilityNodes=function(){this.menuDictionaryKeys.forEach((e=>{this.menuDictionary[e].links.forEach((e=>{if(e.switch||e.altSwitch){let t=wb.global.settings.switches[e.switch];if(!t&&e.altSwitch&&(t=wb.global.settings.switches[e.altSwitch],t))for(const[t,n]of this.alternateRoutes)if(n==e.path){const n=e.el.querySelector("a");if(n){n.href=t;break}}e.el.classList.toggle("hide",!t)}}))}))},t.show=async function(){await this.$helper.loadCssAsync(this.stylesLink),this.roots.forEach((e=>e.classList.remove("hide"))),"ru"==wb.settings.currentLocale||wb.global.userSettings.closed.includes("new_fin_oper_loc")||(wb.global.userSettings.closed.push("new_fin_oper_loc"),wb.global.saveUserSettings(),this._showFinOperationsTooltip())},t.hide=function(){this.roots.forEach((e=>e.classList.add("hide")))},t._initDropDownMenu=function(){const e=["mouseleave","click"];this.menuDictionaryKeys.forEach((t=>{this.menuDictionary[t].links.forEach((t=>{t.isMainMenu&&t.el.addEventListener("mouseover",(()=>{t.isMainMenu&&t.el.classList.add("open")})),e.forEach((function(e){t.isMainMenu&&t.el.addEventListener(e,(function(){t.isMainMenu&&t.el.classList.remove("open")}))}))}))})),this._addClickStat()},t._addClickStat=function(){this.roots.forEach((e=>{e.addEventListener("click",(e=>{var t,n;const s=null===(t=e.target)||void 0===t?void 0:t.closest("a"),i=null===(n=null==s?void 0:s.dataset)||void 0===n?void 0:n.lkHeaderWba;if(!i)return;const r=`${i}_T`;this.$analitic.sendEvent(r)}))}))},t._showFinOperationsTooltip=function(){const e="lk-menu-main__item--tooltip-active",t=document.getElementById("menuTooltipTarget");if(!t)return;const n=t.querySelector(".j-tooltip-close"),s=()=>t.classList.remove(e);null==n||n.addEventListener("click",s),setTimeout(s,6e3),t.classList.add(e)},e}();const a=o;var l=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n};const c=new RegExp(["ru-basket-api.wildberries.ru","basket-api.wildberries.by","basket-api.wildberries.kz","basket-api.wildberries.kg","basket-api.wildberries.am","basket-api.wildberries.uz","localhost","wbxoofex.wildberries.ru","customs.wb.ru","user-geo-data.wildberries.ru","shopper-bt.wb.ru","webappx-proxy.wbx-site-utility.k8s.stage-xc","webapp-*.wbx-site.k8s.dev-el","webapp-*.wbx-site.k8s.stage-xc","webapp-*.wbx-site.k8s.prod-el","kg.wildberries.ru","uz.wildberries.ru"].map((e=>e.replace(/\./g,"\\.").replace(/\*/g,".*"))).join("|")),u=new RegExp(["www.wildberries.ru","www.wildberries.by","www.wildberries.kz","www.wildberries.kg","kz.wildberries.ru","www.wildberries.am","www.wildberries.uz","ru-basket-api.wildberries.ru","basket-api.wildberries.by","basket-api.wildberries.kz","basket-api.wildberries.kg","basket-api.wildberries.am","basket-api.wildberries.uz","localhost","webapp-*.wbx-site.k8s.dev-el","webapp-*.wbx-site.k8s.stage-xc","webapp-*.wbx-site.k8s.prod-el","kg.wildberries.ru","uz.wildberries.ru"].map((e=>e.replace(/\./g,"\\.").replace(/\*/g,".*"))).join("|"));let d=function(){function e(){}var t=e.prototype;return t.fetchJSON=async function(e,t={},n={}){var s;let i;try{if(n.timeout){const e=new AbortController;setTimeout((()=>e.abort()),n.timeout),t.signal=e.signal}let s;switch(i=await this.fetch(e,t),this._wrapTimeout(i,n),i.status){case 401:case 403:throw new UnauthorizeError({jwtDrop:i.headers.has("X-Jwt-Drop")});case 404:throw new NotFoundError;case 204:case 208:s=null;break;default:if(!i.ok){const e=new Error(`Fetch failed with status code ${i.status}`);throw e.status=i.status,n.keepRespData&&(e.data=await i.json()),e}s=await i.json()}return n.noProcessResponse||null==s?n.includeResponse?{response:i,responseData:s,headers:i.headers}:s:new Promise(((e,t)=>{$.processResponse(s,(t=>n.includeResponse?e({response:i,responseData:t,headers:i.headers}):e(t)),(e=>t(new KnownServerError(e))),(t=>n.includeResponse?e({response:i,responseData:t,headers:i.headers}):e(t)))}))}catch(r){let o=r;if("AbortError"==r.name&&n.throwAbortError)throw r;const a=!r.isCustomError&&r instanceof TypeError&&("Failed to fetch"===r.message||"NetworkError when attempting to fetch resource."===r.message||"Cancelled"===r.message);if(a&&(o=new CancelledRequestError(r.message)),(a||"AbortError"==r.name)&&n.tryResend)return WbSpaModel.prototype.$services.retryFetchService.saveRequest(e,t,n),Promise.resolve({});if(n.hasOwnProperty("defaultValue"))return n.includeResponse?{response:i,responseData:n.defaultValue}:n.defaultValue;throw o.isCustomError||"AbortError"!==r.name&&console.error(`Unknown server error, msg=${r.message}, requested_url=${e}`),o.isUnauthorize&&(o.jwtDrop&&WbSpaModel.prototype.$auth.setToken(null),n.redirectUnauth&&wb.spa.signIn({query:{returnUrl:window.location.href}},null!==(s=n.replaceState)&&void 0!==s&&s)),o}},t.fetchBasicJSON=async function(e,t={},n={}){var s,i,r,o;if(n.timeout){const e=new AbortController;setTimeout((()=>e.abort()),n.timeout),t.signal=e.signal}if(!t.headers&&(t.headers=new Headers),n.addUserHeader){const e=WbSpaModel.prototype.$user.getId();e&&t.headers.set("X-Userid",e)}const a=WbSpaModel.prototype.$auth.jwt;n.addAuthHeader&&a&&t.headers.set("Authorization",`Bearer ${a}`);const l=null!==(s=n.retry)&&void 0!==s?s:1;let c;for(let s=1;s<=l;s++)try{if(n.addCatalogCaptcha&&(null===(i=wb.global)||void 0===i?void 0:i.settings.switches.enableCatalogCaptcha)&&!a){const e=null!==(r=WbSpaModel.prototype.$services.parseTokenService)&&void 0!==r?r:await WbSpaModel.prototype.$getService("parseTokenService"),n=await e.providers.catalog.getToken();n&&t.headers.set("X-Captcha-ID",`Catalog ${n}`)}return await this.fetch(e,t).then((async t=>{var s,i,r;if(204===t.status)return Promise.resolve(n.return204?t:null);if(208===t.status)return Promise.resolve(null);if(t.ok)return c=await t.json(),"v2"===n.v&&c.error?Promise.reject(new KnownServerError(c.error)):c;if(n.addCatalogCaptcha&&(null===(s=wb.global)||void 0===s?void 0:s.settings.switches.enableCatalogCaptcha)&&498===t.status)throw null===(i=WbSpaModel.prototype.$services.parseTokenService)||void 0===i||i.providers.catalog.resetToken(),new Error("Need refresh token");if("v2"===n.v)return Promise.reject(new NetworkError);n.logOff||null===(r=wb.spa)||void 0===r||r.logError(new Error(`Failed fetch. status:${t.status}; type:${t.type}`),{url:e})}))}catch(t){if((t.isCustomError||t.isNetworkError)&&"v2"===n.v)return Promise.reject(t);if("AbortError"===t.name&&n.throwAbortError)throw t;if(t instanceof TypeError&&"Cancelled"===t.message)return null;if(n.logOff||null===(o=wb.spa)||void 0===o||o.logError(t,{url:e,attempt:s}),s===l&&n.nullOnError)return null;if(s===l&&t instanceof TypeError&&("Failed to fetch"===t.message||"NetworkError when attempting to fetch resource."===t.message))throw new NetworkError}return null},t.fetchText=async function(e,t,n={}){var s;let i;if(n.timeout){const e=new AbortController;setTimeout((()=>e.abort()),n.timeout),t.signal=e.signal}try{let s;if(i=await this.fetch(e,t),401===i.status)throw new UnauthorizeError;return i.ok&&(s=await i.text()),this._wrapTimeout(i,n),s}catch(t){let i=t;throw!t.isCustomError&&t instanceof TypeError&&("Failed to fetch"===t.message||"NetworkError when attempting to fetch resource."===t.message||"Cancelled"===t.message)&&(i=new CancelledRequestError),i.isCustomError||(console.log(t.message),i=new KnownServerError("Unknown server error, msg="+t.message+", requested_url="+e)),i.isUnauthorize&&(i.jwtDrop&&WbSpaModel.prototype.$auth.setToken(null),n.redirectUnauth&&wb.spa.signIn({query:{returnUrl:window.location.href}},null!==(s=n.replaceState)&&void 0!==s&&s)),i}},t.fetchStaticDataV2=async function(e,t=3e4,n="json"){var s,i;return"text"===n?null!==(s=await this.fetchText(wb.helpers.url.urlStaticDataJson("data/"+e),{},{timeout:t,nullOnError:!0}))&&void 0!==s?s:await this.fetchText(wb.helpers.url.urlStaticDataObsolete(e),{cache:"no-cache"},{timeout:t,nullOnError:!0}):null!==(i=await this.fetchBasicJSON(wb.helpers.url.urlStaticDataJson("data/"+e),{},{timeout:t,nullOnError:!0}))&&void 0!==i?i:await this.fetchBasicJSON(wb.helpers.url.urlStaticDataObsolete(e),{cache:"no-cache"},{timeout:t,nullOnError:!0})},t.fetchStaticV2=async function(e,t=3e4,n="json"){var s;return"text"===n?null!==(s=await this.fetchText(wb.helpers.url.urlStaticData(e),{},{timeout:t,nullOnError:!0}))&&void 0!==s?s:await this.fetchText(e,{cache:"no-cache"},{timeout:t,nullOnError:!0}):await this.fetchBasicJSON(e,{cache:"no-cache"},{timeout:t,nullOnError:!0})},t.fetch=async function(e,t={}){const{headers:n={}}=t,s=l(t,["headers"]),i=new Headers(n),r=WbSpaModel.prototype;let o=!1;try{const t=new URL(e.startsWith("//")?`${document.location.protocol}${e}`:e);(t.hostname===window.location.host&&t.port===window.location.port||c.test(t.hostname))&&(u.test(t.hostname)&&(i.set("X-Spa-Version",WbSpaModel.appVersion),i.set("X-Requested-With","XMLHttpRequest"),i.set("DeviceId",r.$services.sessionService.getSession()),r.$adult.isConfirmed&&i.set("adultConfirmed","1")),!i.has("Authorization")&&r.$auth.jwt&&i.set("Authorization",`Bearer ${r.$auth.jwt}`))}catch(e){o=!0,i.set("X-Requested-With","XMLHttpRequest"),i.set("X-Spa-Version",WbSpaModel.appVersion),i.set("DeviceId",r.$services.sessionService.getSession()),!i.has("Authorization")&&r.$auth.jwt&&i.set("Authorization",`Bearer ${r.$auth.jwt}`),r.$adult.isConfirmed&&i.set("adultConfirmed","1")}return t.body instanceof URLSearchParams&&(i.set("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),s.body=s.body.toString()),fetch(e,Object.assign({credentials:"same-origin",headers:i},s)).then((e=>{var t;if(o&&(null===(t=null===wb||void 0===wb?void 0:wb.helpers)||void 0===t?void 0:t.date)){const t=e.headers.get("Date");wb.helpers.date.serverDate=new Date(t)}return e}))},t._wrapTimeout=function(e,t){return t&&e.headers.has("X-Timeout")&&(t.modified={timeout:!0}),t},e}();const h=new d;let p=function(){function e(){}var t=e.prototype;return t.fetch=async function(e,t,n,s){var i;const r=WbSpaModel.prototype.$auth;let o=r.getToken();const a=null==s?void 0:s(null===(i=o.data)||void 0===i?void 0:i.shard_key);if(null==t?void 0:t.timeout){const e=new AbortController;setTimeout((()=>e.abort()),t.timeout),t.signal=e.signal}return this._fetch(`${a||""}${e}`,t,o.token).then((async t=>{if(t.ok){const e=+t.headers.get("content-length");if(e>16&&e<256){const e=await t.clone().json();-1===(null==e?void 0:e.state)&&41===e.reason&&r._slide(!0)}return t}function s(n,s){return wb.spa.logError({message:n},{status:s,msg:"wbx_fetch"}),Promise.reject(new Error(`url:${e}, response:${n}, code:${t.status}`))}return 401===t.status&&r._slide(!0),"function"==typeof n?n(t,s):t.text().then((e=>s(e,t.status)))}))},t.postJSON=async function(e,t,n){return this._fetchJSON(e,t,n,"POST")},t.getJSON=async function(e,t){return this._fetchJSON(e,null,t,"GET")},t._fetch=function(e,t,n){return n?(!t&&(t={}),t.headers=Object.assign({},t.headers,{Authorization:"Bearer "+n}),WbSpaModel.prototype.$httpClient.fetch(e,t)):Promise.reject("miss accessToken")},t._fetchJSON=async function(e,t,n,s){const i={method:s};Object.assign(i,n),i.headers={"X-Service-Name":"site"},t&&(i.headers["Content-Type"]="application/json",i.body=t);const r=await this.fetch(e,i);if(r.ok)return await r.json()},e}();const m=new p;var g=n(47949);const f="wbx__tokenData",y="v2",v=`/${y}/auth/slide-v3`,b=`/${y}/auth/slide-v3-confirm`,w=`/${y}/auth/logoff`;let S=function(){function e(){this._pull(),window.addEventListener("storage",(e=>{e.key===f&&this._pull()}))}var t=e.prototype;return t.getToken=function(){if(this.jwt)if(this.isWbxSite)this._slide(!1,!0);else{this._isJwtExpired(this.jwtData)&&this._slide()}return this._data},t.setToken=function(e){try{if(e){const t=this._tryDecodeJwt(e);if(t){this._data={token:e,data:t,um:this._createUm(t)};try{localStorage.putObject(f,{token:e})}catch(e){}return}}this._data={token:null,data:{},um:this._createUm()},localStorage.removeItem(f)}catch(e){}finally{this._jwtUpdateResp=null}},t.signOut=async function(e){if(!this.isAuth)return;const t=new AbortController;setTimeout((()=>t.abort()),2e3),await this._fetch(w,{method:"POST",credentials:"include",signal:t.signal,headers:{deviceid:WbSpaModel.prototype.$services.sessionService.getSession(),"wb-apptype":"web","wb-appversion":WbSpaModel.appVersion}}).catch((e=>Promise.resolve({isNetworkError:!0}))),this.signOutOld(e),this.setToken(null)},t.signOutOld=async function(e){return WbSpaModel.prototype.$httpClient.fetchJSON(`/webapi/security/exit?returnUrl=${encodeURIComponent(e||"")}`,{method:"POST"})},t._pull=function(){var e;const t=null===(e=localStorage.getObject(f))||void 0===e?void 0:e.token,n=this._tryDecodeJwt(t);this._data=n?{token:t,data:n,um:this._createUm(n)}:{token:null,data:{},um:this._createUm(n)}},t._isJwtExpired=function(e){return Date.now()>=1e3*(e.iat+172800)},t._isJwtShortExpired=function(e){return Date.now()>=1e3*(e.iat+120)},t._slide=function(e,t){try{return this._slideToken(e,t)}catch(e){wb.spa.logError(e,{msg:"wbx_auth_slide"})}},t._createUm=function(e){let t=null==e?void 0:e.user;if(t){t=`user:${t}`;const e=[];for(let n=0;n<t.length;n++)e.push(129^t.charCodeAt(n));return{userUid:btoa(String.fromCodePoint(...(new TextEncoder).encode(String.fromCharCode.apply(null,e)))),userId:t}}return{userUid:"",userId:""}},t._tryDecodeJwt=function(e){try{if(!e)return null;const[t,n,s]=e.split(".");if(!(t||n||s))return null;const i=atob(n);return i?JSON.parse(i)||{}:null}catch(e){return console.error(e),null}},t.slideRefreshCookie=function(){return WbSpaModel.prototype.$httpClient.fetchBasicJSON("v2/auth/sliderefresh",{method:"POST",credentials:"include"})},t.delRefreshCookie=function(){return WbSpaModel.prototype.$httpClient.fetch("v2/auth/delrefresh",{method:"POST",credentials:"include"}).catch((()=>{}))},t._fetch=function(e,t){return WbSpaModel.prototype.$httpClient.fetch(this.AUTH_HOST+e,t)},t._slideToken=async function(e,t){navigator.locks.request("lock-auth-slide",(async n=>{var s;if(!this.jwt)return;if(t&&this.isWbxSite&&this._isJwtShortExpired(this.jwtData)){const t=await this.slideRefreshCookie().catch((()=>{}));0===(null==t?void 0:t.ResultState)?e=!0:-1===(null==t?void 0:t.ResultState)&&localStorage.removeItem("wbx__exchangeRates")}if(e&&!this._isJwtShortExpired(this.jwtData))return;if(!e&&!this._isJwtExpired(this.jwtData))return;const i=new AbortController;setTimeout((()=>i.abort()),1e4);const r=WbSpaModel.prototype.$services.sessionService.getSession(),o=await this._fetch(v,{method:"POST",credentials:"include",signal:i.signal,headers:{deviceid:r,"wb-apptype":"web","wb-appversion":WbSpaModel.appVersion}}).then((e=>e.ok?e.json():{})).then((e=>(e.error&&wb.spa.logError(new Error(`[wbx_auth_slide]: res: ${e.result}, error: ${e.error}`)),e))).catch((()=>({})));if(t&&(await this.delRefreshCookie(),localStorage.removeItem("wbx__exchangeRates")),12!==o.result){if(0===o.result&&(null===(s=o.payload)||void 0===s?void 0:s.sticker)&&o.payload.access_token){const e=JSON.stringify({sticker:o.payload.sticker}),t=await this._fetch(b,{method:"POST",credentials:"include",signal:i.signal,headers:{deviceid:r,"wb-apptype":"web","wb-appversion":WbSpaModel.appVersion},body:e}).then((e=>e.ok?e.json():{})).then((e=>(e.error&&wb.spa.logError(new Error(`[wbx_auth_slide_confirm]: res: ${e.result}, error: ${e.error}`)),e))).catch((()=>({})));12===t.result?this.setToken(null):0===t.result&&this.setToken(o.payload.access_token)}}else this.setToken(null)}))},t.sendMetrics=function(e,t){try{WbSpaModel.prototype.$httpClient.fetch(`/webapi/logging/wbxauth/metrics?act=${e}&status=${t}`,{method:"POST"})}catch(e){}},(0,i.A)(e,[{key:"AUTH_HOST",get:function(){let e=wb.settings.currentDomain;return"kz"===e&&(e="ru"),g.R0+e}},{key:"isAuth",get:function(){return!!this._data.token}},{key:"jwt",get:function(){return this._data.token}},{key:"jwtData",get:function(){return this._data.data}},{key:"isUserGuid",get:function(){var e;return isNaN(null===(e=this.jwtData)||void 0===e?void 0:e.user)}},{key:"um",get:function(){return this._data.um}},{key:"shard",get:function(){var e;return Number(null===(e=this.jwtData)||void 0===e?void 0:e.shard_key)||1}},{key:"sShard",get:function(){return $.views.converters.leadZero(this.shard,2)}},{key:"isWbxSite",get:function(){return localStorage.hasItem("wbx__exchangeRates")}}])}();const _=new S;n(75281),n(61506);function C(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}function k(e){for(var t=2,n="",s=e.length,i=0,r=0;r<s;r++)t=r%3,i|=e[r]<<(16>>>t&24),2!==t&&e.length-r!=1||(n+=String.fromCodePoint(C(i>>>18&63),C(i>>>12&63),C(i>>>6&63),C(63&i)),i=0);return n.substr(0,n.length-2+t)+(2===t?"":1===t?"=":"==")}let I=function(){function e(){}return e.decode=function(e){return e?function(e){for(var t,n="",s=e.length,i=0;i<s;i++)t=e[i],n+=String.fromCodePoint(t>251&&t<254&&i+5<s?1073741824*(t-252)+(e[++i]-128<<24)+(e[++i]-128<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:t>247&&t<252&&i+4<s?(t-248<<24)+(e[++i]-128<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:t>239&&t<248&&i+3<s?(t-240<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:t>223&&t<240&&i+2<s?(t-224<<12)+(e[++i]-128<<6)+e[++i]-128:t>191&&t<224&&i+1<s?(t-192<<6)+e[++i]-128:t);return n}(function(e,t){for(var n,s,i,r=e.replace(/[^A-Za-z0-9\+\/]/g,""),o=r.length,a=t?Math.ceil((3*o+1>>2)/t)*t:3*o+1>>2,l=new Uint8Array(a),c=0,u=0,d=0;d<o;d++)if(s=3&d,c|=((i=r.charCodeAt(d))>64&&i<91?i-65:i>96&&i<123?i-71:i>47&&i<58?i+4:43===i?62:47===i?63:0)<<6*(3-s),3===s||o-d==1){for(n=0;n<3&&u<a;n++,u++)l[u]=c>>>(16>>>n&24)&255;c=0}return l}(e)):null},e.encode=function(e){return e?k(function(e){for(var t,n,s=e.length,i=0,r=0;r<s;r++)(n=e.codePointAt(r))>65536&&r++,i+=n<128?1:n<2048?2:n<65536?3:n<2097152?4:n<67108864?5:6;t=new Uint8Array(i);for(var o=0,a=0;o<i;a++)(n=e.codePointAt(a))<128?t[o++]=n:n<2048?(t[o++]=192+(n>>>6),t[o++]=128+(63&n)):n<65536?(t[o++]=224+(n>>>12),t[o++]=128+(n>>>6&63),t[o++]=128+(63&n)):n<2097152?(t[o++]=240+(n>>>18),t[o++]=128+(n>>>12&63),t[o++]=128+(n>>>6&63),t[o++]=128+(63&n),a++):n<67108864?(t[o++]=248+(n>>>24),t[o++]=128+(n>>>18&63),t[o++]=128+(n>>>12&63),t[o++]=128+(n>>>6&63),t[o++]=128+(63&n),a++):(t[o++]=252+(n>>>30),t[o++]=128+(n>>>24&63),t[o++]=128+(n>>>18&63),t[o++]=128+(n>>>12&63),t[o++]=128+(n>>>6&63),t[o++]=128+(63&n),a++);return t}(e)):""},e.encodeBytesArr=function(e){return k(e)},e}();const M=I,P={cache:{},onFirstExecution(){0===Object.keys(this.cache).length&&document.querySelectorAll("script[type='text/javascript']").forEach((e=>{""!==e.src&&(this.cache[e.src.replace(/https?:/,"")]=Promise.resolve())}))},require(e){let t=this.cache[e];return null==t&&(this.onFirstExecution(),t=this.cache[e],null==t&&(t=this.cache[e]=T(e,this.loadScriptAsync))),t.catch((t=>(this.cache[e]=null,Promise.reject(t))))},loadScriptAsync:e=>new Promise(((t,n)=>{try{const s=document.createElement("script");s.type="text/javascript",s.src=e,s.readyState?s.onreadystatechange=function(){"loaded"!==s.readyState&&"complete"!==s.readyState||(s.onreadystatechange=null,t())}:s.onload=t,s.onerror=n,document.body.appendChild(s)}catch(e){n(e)}}))},O={cashe:{},orinalStylesIncluded:!1,require(e){return new Promise(((t,n)=>{this.orinalStylesIncluded||this.addOrinalStyles(),null==this.cashe[e]&&(this.cashe[e]=T(e,this.loadCssAsync)),this.cashe[e].then(t).catch((t=>{this.cashe[e]=null,n(t)}))}))},addOrinalStyles(){this.orinalStylesIncluded=!0,document.querySelectorAll("link[type='text/css']").forEach((e=>this.cashe[e.href.replace(/https?:/,"")]=Promise.resolve()))},loadCssAsync:e=>new Promise(((t,n)=>{let s;if(navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.indexOf("Trident/")>0){const i=document.createElement("link");i.href=e,i.type="text/css",i.rel="stylesheet",i.onload=t,i.onerror=n,s=i}else{const i=document.createElement("style");i.onload=t,i.textContent=`@import "${e}"`,i.onload=t,i.onerror=n,s=i}document.querySelector("head").appendChild(s)}))};async function T(e,t){return new Promise(((n,s)=>{t(e).then((e=>n())).catch((s=>t(wb.helpers.url.urlStaticDataFallback(e)).then((e=>n()))))}))}function A(e,t=new URLSearchParams,n=!1,s=!1){const i=(e,r)=>{s&&"boolean"==typeof r?t.append(e,r.toString()):"object"==typeof r&&null!=r?Object.entries(r).forEach((([n,s])=>{i(`${e}[${n}]`,s,t)})):n&&null==r||t.append(e,r)};return Object.entries(e).forEach((([e,t])=>i(e,t))),t}function D(e,t=new FormData){const n=(e,s="")=>{for(let i in e){const r=e[i];let o=i;s&&(o=Array.isArray(e)?`${s}[${i}]`:`${s}.${i}`),"boolean"==typeof r?t.append(o,r.toString()):"string"==typeof r||"number"==typeof r?t.append(o,r):"object"==typeof r&&n(r,o)}};return n(e),t}const E=function(){const e=wb.cookieHelper.getCookie(".AspNetCore.Culture");if(e){const t=e.match(/^c=([a-z]{2})(-[A-Z]{2})?\|uic=([a-z]{2})(-[A-Z]{2})?$/);if(t)return t[1]}return document.documentElement.getAttribute("lang")}();function x(){let e=arguments[0],t=t=>{for(let n in t)t.hasOwnProperty(n)&&("[object Object]"===Object.prototype.toString.call(t[n])&&null!=e[n]?e[n]=x(e[n],t[n]):e[n]=t[n])};for(let e=1;e<arguments.length;e++)t(arguments[e]);return e}function B(){let e=arguments[0],t=t=>{for(let n in t)t.hasOwnProperty(n)&&("[object Object]"===Object.prototype.toString.call(t[n])&&null!=e[n]?e[n]=B(e[n],t[n]):void 0!==t[n]&&(e[n]=t[n]))};for(let e=1;e<arguments.length;e++)t(arguments[e]);return e}const j=(e,t)=>{let n=null;return(...s)=>{n&&clearTimeout(n),n=setTimeout((()=>{e.apply(void 0,s),n=null}),t)}},L=(e,t=300)=>{let n;return function(...s){n||e.apply(this,s),clearTimeout(n),n=setTimeout((()=>n=null),t)}},N=(e,t=300)=>{let n;return function(...s){clearTimeout(n),n=setTimeout((()=>{e.apply(this,s)}),t)}},R=(e,t)=>{let n,s,i=!1;return function r(){if(i)return n=arguments,void(s=this);e.apply(this,arguments),i=!0,setTimeout((function(){i=!1,n&&(r.apply(s,n),n=s=null)}),t)}},F=(e,t,n,s)=>{let i=0,r=setInterval((function(){if(i>t)return clearInterval(r),void(s&&s());e(r)&&clearInterval(r),i++}),n);return r},U=e=>{let t;return function(){return U.done||(t=e.apply(this,arguments),U.done=!0),t}},W=e=>{let t=null;return function(){return t||(t=e.apply(this,arguments).then((e=>e)).finally((()=>t=null))),t}},H=(e,t)=>function(n){const s=n.target.closest(e);null!=s&&t(n,s)},z=()=>Promise.resolve().then((()=>Promise.resolve())),q=e=>new Promise((t=>setTimeout(t,e))),V=(e,t)=>new Promise(((n,s)=>setTimeout((e=>{try{t()&&n()}catch(e){s(e)}}),e)));function G(e,t,n){var s;const i=e.getBoundingClientRect();return n&&(n.threshold=null!==(s=n.threshold)&&void 0!==s?s:10,X(n.top))?i.top>=n.top-n.threshold&&i.top<=n.top+n.threshold:i.top>=0&&(t||i.left>=0)&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&(t||i.right<=(window.innerWidth||document.documentElement.clientWidth))}function J(){this.promise=new Promise(((e,t)=>{this.reject=t,this.resolve=e})),this.then=this.promise.then.bind(this.promise)}function K(){const e=new Date,t=new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString();return t.slice(0,t.length-1)}function Q(){if(void 0!==window._isMobileBrowser)return window._isMobileBrowser;let e=!1;var t;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),window._isMobileBrowser=e,window._isMobileBrowser}function X(e){return!isNaN(parseFloat(e))&&isFinite(e)}function Y(e,t){const n=performance.now(),s=()=>performance.now()-n>e?t():window.requestAnimationFrame(s);window.requestAnimationFrame(s)}const Z=M,ee=P.require.bind(P),te=O.require.bind(O);let ne=function(){function e(){this.allModules={},this.modulesDict={},this.allServices={},this.servicesDict={},this.loadingServices={}}var t=e.prototype;return t.init=function(){return window.__spaModuleManager__={register:(e,t)=>{this._enrichProto(t),this.modulesDict[e]=t},getModule:(e,t)=>{if(null!=this.modulesDict[e]||t)return this.modulesDict[e];throw new Error("Module "+e+" has not been loaded yet")}},window.__spaServiceManager__={register:(e,t)=>{this._enrichProto(t),this.servicesDict[e]=t},getService:(e,t)=>{if(null!=this.servicesDict[e]||t)return this.servicesDict[e];throw new Error("Service "+e+" has not been loaded yet")}},this},t.setModules=function(e){this.allModules=e},t.setServices=function(e){this.allServices=e},t.loadServiceAsync=async function(e){const{physicalPath:t}=this.allServices[e]||{};if(null==t)throw new Error(e+" service doesnt exist");const n=await this._loadServiceAsync(e,t);this.$services[e]=new n},t.loadServiceAsSingletonAsync=async function(e){const{physicalPath:t}=this.allServices[e]||{};if(null==t)throw new Error(e+" service doesnt exist");return this.loadingServices[e]||(this.loadingServices[e]=this._loadServiceAsync(e,t).then((t=>(this.$services[e]=new t,this.$services[e])))),this.loadingServices[e]},t.loadModuleAsync=async function(e,t=!1){let{physicalPath:n,dataPath:s,hasTmpl:i,tmpls:r=[],templateId:o,isDynamic:a=!1,httpMethod:l="GET",cssPaths:c,jsPaths:u,apiName:d}=this.allModules[e]||{};if(null==n)throw new Error(e+" module doesnt exist");const h=r.map((e=>this._loadTemplateAsync(e))),p=this._loadTemplateAsync(i?e:null,o),m=this._loadDataAsync(e,s,a,l,d),g=null==c?[Promise.resolve(null)]:c.map((e=>this.$helper.loadCssAsync(e))),f=null==u?[Promise.resolve(null)]:u.map((e=>this.$helper.loadJsAsync(e))),[y,v,b]=await Promise.all([this._loadModule(e,n,t),m,p,...h,...g,...f]);return null!=y&&(y.data=v,y.template=b),y},t.execModule=async function(e="",t="",n=[]){try{(await this.loadModuleAsync(e))[t](...n)}catch(e){console.error(e)}},t._loadModule=async function(e,t,n){if(null==e||null==t)throw new Error("path and name are required to load module");return await this.$helper.loadJsAsync(t),window.__spaModuleManager__.getModule(e,n)},t._loadServiceAsync=async function(e,t){if(null==e||null==t)throw new Error("path and name are required to load service");return await this.$helper.loadJsAsync(t),window.__spaServiceManager__.getService(e)},t._loadDataAsync=async function(e,t,n,s,i){return null==t?null:n||null==this.modulesDict[e]||this.modulesDict[e].isNetworkError?("basket"===i&&(t=`${this.$services.cartService.publicBasketApiUrl}${t}`),await this.$httpClient.fetchJSON(t,{method:s||"GET",credentials:"include"},{defaultValue:{isNetworkError:!0}})):this.modulesDict[e].data},t._loadTemplateAsync=async function(e,t,n){return null==e&&null==t?Promise.resolve(null):t?$.views.loadWebApiTemplateAsync(t,n):$.views.loadTemplateAsync(e,n)},t._enrichProto=function(e){if(!e.prototype)return;let t=e.prototype,n=null;for(;(n=Object.getPrototypeOf(t))&&n!=Object.prototype;)t=n;t!=WbSpaModel.prototype&&Object.setPrototypeOf(t,WbSpaModel.prototype)},e}();const se=ne;const ie=function(){function e(){this.proceedIfAdultConfirmed=this.proceedIfAdultConfirmed.bind(this)}var t=e.prototype;return t.proceedIfAdultConfirmed=function(e,t,n,...s){this.adultPopup.then((i=>{i.closePopup(),!e||this.isConfirmed?null==t||t.apply(n,s):i.proceedIfAdultConfirmed(t,n,s).then((e=>{$.observable(this).setProperty({isConfirmed:e})}))}))},t.pushToQueue=function(e){this.adultPopup.then((t=>t.pushToQueue(e)))},t.closePopup=function(){this.adultPopup.then((e=>e.closePopup()))},(0,i.A)(e,[{key:"isConfirmed",get:function(){if(null==this._isConfirmed){const e=localStorage.getObject("__ac");e&&e.dtExp>Date.utcNow()?this._isConfirmed=e.state:this._isConfirmed=!1}return this._isConfirmed},set:function(e){this._isConfirmed=e;try{localStorage.putObject("__ac",{dtExp:Date.utcNow()+36e5,state:e})}catch(e){}return e}},{key:"adultPopup",get:function(){return this._adultPopup?Promise.resolve(this._adultPopup):new Promise((e=>{WbSpaModel.prototype.$moduleLoader.loadModuleAsync("adultConfirmedPopup").then((t=>{this._adultPopup=new t,e(this._adultPopup)}))}))}}])}();const re=function(){function e(){}var t=e.prototype;return t.getVerticalObserver=function(e,t,n){return new oe(e,t,n)},t.getCarouselBannersObserver=function(e,t,n){const s=Object.assign({keepObserve:!0,sendOutEvent:!0},null!=n?n:{});return new oe(e,t,s)},t.getSimpleObserver=function(e,t,n){if(WbSpaModel.prototype.$apiSupport.intersectionObserver){const s={threshold:.5},i=Object.assign(s,null!=t?t:{}),r={keepObserve:!1},o=Object.assign(r,null!=n?n:{});let a=[];const l=new IntersectionObserver(((t,n)=>{t.forEach((t=>{t.isIntersecting&&(e(t.target,a.indexOf(t.target)+1),o.keepObserve||n.unobserve(t.target))}))}),i);function c(){null==l||l.disconnect()}function u(e){a.forEach((e=>l.unobserve(e))),a=[],a=e,a.forEach((e=>l.observe(e)))}return{observe:u,destroy:c}}return{observe:t=>t.forEach((n=>e(n,t.indexOf(n)+1))),destroy:()=>{}}},e}();let oe=function(){function e(e,t,n){this.intersectionObserverEnable=WbSpaModel.prototype.$apiSupport.intersectionObserver,e=null!=e?e:[],this.items=(Array.isArray(e)?e:[e]).toHashSet(),this.options=null!=t?t:{};this.settings=Object.assign({keepObserve:!1,sendOutEvent:!1},null!=n?n:{}),this.observer=null,this.elementInViewportEventName="elementInViewportEvent",this.elementOutOfViewportEventName="elementOutOfViewportEvent"}var t=e.prototype;return t._observe=function(e){var t,n;const s={bubbles:!0};(null===(t=this.settings)||void 0===t?void 0:t.eventDetails)&&(s.detail=this.settings.eventDetails);let i=new CustomEvent(this.elementInViewportEventName,s),r=new CustomEvent(this.elementOutOfViewportEventName,s);this.intersectionObserverEnable?(this.observer=null!==(n=this.observer)&&void 0!==n?n:new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.isIntersecting?(e.target.dispatchEvent(i),this.settings.keepObserve||(this.items.delete(e.target),t.unobserve(e.target))):!e.isIntersecting&&this.settings.sendOutEvent&&e.target.dispatchEvent(r)}))}),this.options),e.forEach((e=>{e&&this.observer.observe(e)}))):e.forEach((e=>{e.dispatchEvent(i),this.items.delete(e)}))},t.observe=function(){return this._observe(this.items),this},t.update=function(e){let t;if(Array.isArray(e))t=e;else if(e instanceof HTMLElement)t=[e];else{if(!("toArray"in e))return;t=e.toArray()}this._observe(t)},t.unobserve=function(e){e&&this.intersectionObserverEnable&&this.observer.unobserve(e)},t.unobserveAll=function(){this.items.forEach((e=>this.observer.unobserve(e))),this.items.clear()},t.destroy=function(){var e;this.items.clear(),null===(e=this.observer)||void 0===e||e.disconnect()},e}(),ae=null,le=function(){function e(){this.productCardPopup=null,this.processing=!1,this.currentData=null,this.targetData=null,this.onPopupShow=this.onPopupShow.bind(this)}var t=e.prototype;return t.showSlider=async function(e,t,n){if(!this.$isDesktop)return void this.$router.moveTo($.views.converters.urlForGood(e.cod1S,!0,e.newTargetUrl,null,!1,e.chrtId));const{observeDisplayMode:s,removeObserver:i}=this._createObservable();wb.displayModeSettings.addObserver(s),e.onHideCallback=i;if(await this._processingPopup(e.cod1S,e.chrtId,e.newTargetUrl,n))try{await ae.showSlider(e,t,n)}catch(e){this._onShowError(i)}finally{this.onPopupShow()}},t.show=async function(e,t,n,s,i){if(!this.$isDesktop)return s&&this.$analitic.updateState(s),void this.$router.moveTo($.views.converters.urlForGood(e,!0,n,null,!1,t));const{observeDisplayMode:r,removeObserver:o}=this._createObservable();wb.displayModeSettings.addObserver(r);if(await this._processingPopup(e,t,n,null))try{await ae.show(e,t,n,s,o,i)}catch(e){this._onShowError(o)}finally{this.onPopupShow()}},t.onPopupShow=async function(){this.processing=!1,this.currentData=null,this.targetData=null},t._processingPopup=async function(e,t,n,s){var i;return this.processing?(e!=(null===(i=this.currentData)||void 0===i?void 0:i.cod1S)&&(this.targetData={cod1S:e,chrtId:t,newTargetUrl:n,cardIndex:s}),!1):(this.processing=!0,this.currentData={cod1S:e,chrtId:t,newTargetUrl:n,cardIndex:s},await this._loadProductCardPopup(),!0)},t._loadProductCardPopup=async function(){if(this.productCardPopup)return;const e=await this.$moduleLoader.loadModuleAsync("productCardPopup");ae=e;window.addEventListener("spaTransition",(()=>{this.processing=!1,this.currentData=null,this.targetData=null}).bind(this))},t._createObservable=function(){const e=()=>wb.displayModeSettings.removeObserver(t),t=()=>{var t;null===(t=this.productCardPopup)||void 0===t||t.hidePopup(),e()};return{observeDisplayMode:t,removeObserver:e}},t._onShowError=function(e){navigator.onLine||wb.popup.renderModalError("Internet connection is lost"),null==e||e(),this.processing=!1,this.currentData=null,this.targetData=null},e}();const ce=le;let ue=function(){function e(){this.eventsDictionary={}}var t=e.prototype;return t.addEventListener=function(e,t,{single:n}={}){const s=this._validateInput(e,t);if(!s.valid)throw s.error;null==this.eventsDictionary[e]&&(this.eventsDictionary[e]=[]);const i=this.eventsDictionary[e];n&&i.includes(t)||i.push(t)},t.removeEventListener=function(e,t){var n;const s=this._validateInput(e,t);if(!s.valid)throw s.error;const i=this.eventsDictionary[e];this.eventsDictionary[e]=null!==(n=null==i?void 0:i.filter((e=>e!==t)))&&void 0!==n?n:[]},t.dispatchEvent=function(e){if(!(e instanceof Event))throw new TypeError("DispatchEvent can be called only with Event instance");if(""==e.type)throw new TypeError("Event doesnt have sufficient type");const t=this.eventsDictionary[e.type];null==t||t.forEach((t=>{e.isPropagationStopped||queueMicrotask((()=>{t(e)}))}))},t._validateInput=function(e,t){return"string"!=typeof e||""==e?{valid:!1,error:new TypeError("Event type must be a valid string value")}:t instanceof Function?{valid:!0}:{valid:!1,error:new TypeError("Callback must be a function")}},e}();const de=new ue;let he=function(){function e(){this.items=[],this.requestUrl=""}var t=e.prototype;return t.init=function(e,t,n){this.requestUrl=t,this.items=e.map((e=>{var t;try{return document.querySelector(`${e.tagName}${Object.keys(null!==(t=e.attributesDictionary)&&void 0!==t?t:{}).map((t=>`[${t}='${e.attributesDictionary[t].replace(/[\n\r]/g,"").replace(/["']/g,"\\$&")}']`)).join("")}`)}catch(e){return console.error(e.message),null}})),this.defaultTitle=n},t.update=async function(e,t=null){return this._loadMetaTags(null!=t?t:this.requestUrl,e).then((e=>{if(this.delete(),(null!=e?e:[]).length>0)return this._renderMetatags(e),e;this._renderDefaultTitle()})).catch((()=>{}))},t.render=function(e){this.delete(),(null!=e?e:[]).length>0?this._renderMetatags(e):this._renderDefaultTitle()},t.loadMetaTags=async function(e,t){if(e.metaTags)return this.render(e.metaTags);const n=await this.update(window.location.pathname,WbSpaModel.prototype.$router.currentRoute.metaTagsUrl);if(!n)return;const s=n.find((e=>"H1"===e.tagName));if(s&&window.requestAnimationFrame((()=>$.observable(e).setProperty({title:s.hTMLContent}))),t){const t=n.find((e=>"bottomText"===e.tagName));t&&window.requestAnimationFrame((()=>$.observable(e).setProperty({bottomText:t.hTMLContent})))}},t.delete=function(){this.items.forEach((e=>null==e?void 0:e.remove())),this.items.length=0},t._loadMetaTags=function(e,t){if(!e)return Promise.resolve();const n=new URLSearchParams(this.$router.queryParams);let s;return n.append("targetUrl",encodeURIComponent(("/"===t[0]?"":"/")+t)),e.indexOf("{*category}")>-1&&(e=e.replace("{*category}",this.$router.routeParameters.category)),e.indexOf("{brandBasePath}")>-1&&"/"===(e=e.replace("{brandBasePath}",this.$router.routeParameters.brandBasePath))[e.length-1]&&(e=e.slice(0,-1)),e.indexOf("{promoBasePath}")>-1&&"/"===(e=e.replace("{promoBasePath}",this.$router.routeParameters.promoBasePath))[e.length-1]&&(e=e.slice(0,-1)),s=e,this.$httpClient.fetchJSON(s+"?"+n).then((e=>Promise.resolve(null==e?void 0:e.metaTags))).catch((n=>(n.isCancelled||""===n.message||(console.error(n.message),console.error(`Error loading meta tags for path ${t} by requesting ${e}`)),Promise.resolve())))},t._renderMetatags=function(e){const t=document.createDocumentFragment();e.forEach((e=>{var n;if("H1"===e.tagName)return;if("bottomText"===e.tagName)return;const s=document.createElement(e.tagName);Object.keys(null!==(n=e.attributesDictionary)&&void 0!==n?n:{}).forEach((t=>s.setAttribute(t,e.attributesDictionary[t]))),(e.hTMLContent||e.htmlContent)&&(s.innerHTML=e.hTMLContent||e.htmlContent),this.items.push(s),t.appendChild(s)})),document.head.appendChild(t)},t._renderDefaultTitle=function(){const e=document.createElement("title");e.innerHTML=this.defaultTitle,this.items.push(e),document.head.appendChild(e)},e}();const pe=new he,me={updateVerificationToken(e){const t=document.querySelector("input[name=__RequestVerificationToken]");t&&(t.value=e)}},ge={short:9e5,halfHour:18e5,normal:36e5};Object.freeze(ge);let fe=function(){function e(){}return e.createStorageHelperItem=function(e,t,n){return new ye(e,t,n)},e.supportIndexedDb=function(){return null!=window.indexedDB},e.metadataTableName=function(e){return e+"_metadata"},e.openDb=function(e,t={}){return new Promise(((n,s)=>{var i;const r=indexedDB.open(e,null!==(i=null==t?void 0:t.version)&&void 0!==i?i:1);r.onupgradeneeded=e=>{var n;null===(n=t.onupgradeneeded)||void 0===n||n.call(t,e.target.result)},r.onsuccess=e=>{n(e.target.result)},r.onerror=t=>{s(new Error(`[StorageHelper]: Database cannot be opened db_name=${e} error=${r.error}`))}}))},e.setItem=function(e,t,n){return new Promise(((s,i)=>{const r=e.transaction([t],"readwrite").objectStore(t).put(n);r.onsuccess=s,r.onerror=e=>{console.error(e.message),i("Error while setting item from indexedDb")}}))},e.addItem=function(e,t,n,s){return new Promise(((i,r)=>{const o=e.transaction([t],"readwrite").objectStore(t).add(n);o.onsuccess=e=>i(e.target.result),o.onerror=e=>{!s&&console.error(e.message),r("Error while setting item from indexedDb")}}))},e.setItems=function(e,t,n,s){return new Promise(((i,r)=>{let o=e.transaction([t],"readwrite"),a=o.objectStore(t);a.clear(),s.forEach((e=>{e.__expiredAt__=n,a.add(e)})),o.oncomplete=i,o.onerror=e=>{console.error(e.message),r("Error while setting item from indexedDb")}}))},e.getAll=function(e,t){return new Promise(((n,s)=>{const i=e.transaction([t]).objectStore(t).getAll();i.onsuccess=e=>n(e.target.result),i.onerror=()=>s("Error while getting item from indexedDb")}))},e.get=function(e,t,n){return new Promise(((s,i)=>{const r=e.transaction([t]).objectStore(t).get(n);r.onsuccess=e=>s(e.target.result),r.onerror=()=>i("Error while getting item from indexedDb")}))},e.getItem=function(t,n,s){return new Promise(((i,r)=>{const o=t.transaction([n]).objectStore(n).get(s);o.onsuccess=r=>{const o=r.target.result;return o&&o.__expiredAt__<=Date.now()?(e.removeItem(t,n,s),i(null)):i(r.target.result)},o.onerror=()=>r("Error while getting item from indexedDb")}))},e.removeItem=function(e,t,n){return new Promise(((s,i)=>{const r=e.transaction([t],"readwrite").objectStore(t).delete(n);r.onsuccess=s,r.onerror=()=>i("Error while removing item from indexedDb")}))},e.updateItem=function(e,t,n,s){return new Promise(((i,r)=>{const o=e.transaction([t],"readwrite").objectStore(t).put(n,s);o.onsuccess=i,o.onerror=e=>{console.error(e.message),r("Error while updating item in indexedDb")}}))},e.clear=function(e,t){return new Promise(((n,s)=>{const i=e.transaction([t],"readwrite").objectStore(t).clear();i.onsuccess=n,i.onerror=()=>s("Error while removing item from indexedDb")}))},e.removeDb=function(e){return new Promise(((t,n)=>{const s=indexedDB.deleteDatabase(e);s.onsuccess=t,s.onerror=()=>n("Error while removing database")}))},e.exec=function(e,t,n){if("function"==typeof n)return new Promise(((s,i)=>{const r=e.transaction([t]).objectStore(t),o=n(r);o.onsuccess=e=>s(e.target.result),o.onerror=()=>i("Error while getting item from indexedDb")}))},e.withCursor=function(e,t,n,s){return new Promise(((i,r)=>{let o=e.transaction([t],"readwrite").objectStore(t);n&&(o=o.index(n));const a=o.openCursor();a.onsuccess=e=>{const t=e.target.result;t?(s(t.key,t.value,t),t.continue()):i()},a.onerror=()=>r("Error while getting item from indexedDb")}))},e.objectStorePromise=function(e,t,n){return new Promise(((s,i)=>{const r=e.objectStore(t),o=n(r);o.onsuccess=e=>s(e.target.result),o.onerror=()=>i("Error while work on objectStore from indexedDb")}))},e.withTransaction=function(e,t,n){return new Promise(((s,i)=>{const r=e.transaction(t,"readwrite");n(r).then((e=>{})),r.onsuccess=s(r),r.onerror=()=>i("Error while open transaction in indexedDb on :"+t.join(","))}))},(0,i.A)(e,null,[{key:"cacheActivityType",get:function(){return ge}}])}(),ye=function(){function e(e,t,n=1){if(null==e||""==e)throw new Error("creating database without name is impossible");this.databaseName=e,this.databaseVersion=n,this.onupgradeneeded=t}var t=e.prototype;return t.updateCacheAsync=function(e,t,n,s,i){return i=Object.assign(Object.assign({},{saveAllDb:!1,getResultFunc:e=>e}),i),fe.supportIndexedDb()?this._getItemFromDb(e,t,n,s,i):this._getItemFromLocalStorage(e,t,n,s,i)},t._getItemFromDb=function(e,t,n,s,i){let r;return fe.openDb(this.databaseName,{version:this.databaseVersion,onupgradeneeded:this.onupgradeneeded}).then((n=>(r=n,fe.getItem(r,e,t)))).then((t=>null!=t?Promise.resolve(t):s().then((t=>{null!=t&&(i.saveAllDb?fe.setItems(r,e,Date.now()+n,t):fe.setItem(r,e,Object.assign({__expiredAt__:Date.now()+n},t)));const s=i.getResultFunc(t);return Promise.resolve(s)}))))},t._getItemFromLocalStorage=function(e,t,n,s,i){const r=i.saveAllDb?`${this.databaseName};${this.databaseVersion};${e}`:`${this.databaseName};${this.databaseVersion};${e};${t}`,o=localStorage.getItem(r),a=o?JSON.parse(o):null;if((null==a?void 0:a.__expiredAt__)>=Date.now()&&(!i.saveAllDb||!!a.items.length)){const e=i.getResultFunc(i.saveAllDb?a.items:a);return Promise.resolve(e)}return s().then((e=>{const t=i.saveAllDb?{items:e}:e;return t.__expiredAt__=Date.now()+n,localStorage.setItem(r,JSON.stringify(t)),Promise.resolve(i.getResultFunc(e))}))},e}();const ve=fe;var be=n(85340);let we=function(){function e(){this.$eventBus.addEventListener("CurrencyChanged",this._onChangeCurrency.bind(this))}var t=e.prototype;return t.initPreferredLocation=async function(){await this.updateLocation();document.querySelectorAll(".j-geocity-link").forEach((e=>{e.addEventListener("click",this.doOnGeoBtnClick.bind(this))}))},t.updateLocation=async function(){this.location=await this.$user.getLocationData(),this.setCityName(this.location.address)},t.setCityName=function(e){const t=document.querySelectorAll(".j-geocity-link"),n=decodeURI(e);t.forEach((e=>{e.textContent!==n&&(e.textContent=n)}))},t.doOnGeoBtnClick=function(e){const t=e.currentTarget;e.preventDefault(),t.classList.contains("_click")||(t.classList.add("_click"),this.openDeliveryPointsPopup().then((e=>t.classList.remove("_click"))))},t.findCurrentAddress=function(e,t=!1){return this.location?null==e?void 0:e.find((e=>e.lat==this.location.latitude&&e.lon==this.location.longitude&&(e.address==this.location.address||!t))):null},t.openDeliveryPointsPopup=async function(e){const t=await this.$moduleLoader.loadModuleAsync("deliveryPointsChoosePopup");this.dpPopup||(this.dpPopup=new t),await this.dpPopup.init({source:"geo",selectAddress:(e,t,n,s)=>{const i=n||this.$services.userAddressService.get(t,e);this._submitGeo(i,s)},updateSelectedAddresses:t=>{const n=this.findCurrentAddress(t.courier.list,!0),s=this.findCurrentAddress(t.self.list);t.courier.selected=null==n?void 0:n.addressId,t.self.selected=null==s?void 0:s.addressId,t.preferred="courier"===e||"self"===e?e:n?"courier":"self"},beforeSelectDw:(e,t)=>{if("self"==$.view(e.target).ctxPrm("selectedDeliveryWay"))return;if(this.dpPopup.deliveryWays.length<2)return;"self"===$.view(e.target).data.code&&this.$moduleLoader.loadModuleAsync("basketProductModel").then((t=>{var n;const s=(null===(n=this.$services.cartService.get(!0).basketItems)||void 0===n?void 0:n.map((e=>new t(e))).filter((e=>e.onlyCourier)))||[];s.length>0&&(e.preventDefault(),this.$moduleLoader.loadModuleAsync("productCourierOnlyPopup").then((e=>{var t;e.show(e.template,s,null===(t=this.dpPopup.selectedAddresses)||void 0===t?void 0:t.preferred,this.openDeliveryPointsPopup.bind(this))})),this.dpPopup.close())}))}}),this.dpPopup.show()},t._onChangeCurrency=function(){var e;"SpaBasketEntrypoint"!==(null===(e=this.$router.currentRoute)||void 0===e?void 0:e.name)&&this.$services.cartService.localBasket.enrichProductsIfNeedAsync({force:!0})},t._submitGeo=function(e,t){var n;let s,i=this.map;if(((null==e?void 0:e.id)||(null==e?void 0:e.addressId))&&(s=e),s||(s=(null==i?void 0:i.selectedPointId)?("courier"===i.deliveryType?i.courierList:i.visiblePoints).find((e=>e.id===i.selectedPointId)):i.selectedPoint),!s)return;const r=s.id||s.addressId||(null==i?void 0:i.selectedPointId);this.saveLastAddressAsync(r,s.deliveryType,e.address,t,null!==(n=s.officeId)&&void 0!==n?n:s.addressId),this.$user.setGeo(s).then((()=>{this.$eventBus.dispatchEvent(new CustomEvent("ExternalSelectAddress",{detail:{selectedAddressId:r,dWay:s.deliveryType}}))})),this.dpPopup.close()},t.saveLastAddressAsync=async function(e,t,n,s,i){this.$services.cartService.localBasket.setAddress(e,t,n,s),this.$router.userIsAuth&&this.$httpClient.fetchJSON(this.$services.cartService.publicBasketApiUrl+"/spa/address/select",{credentials:"include",method:"POST",body:this.$helper.objectSerializer({addressId:e,deliveryWay:t})}),this.$analitic.setCurrentAddress(t,i),this.$analitic.sendAddressSelection({source:"Header",deliveryType:t,addressId:e,address:n,isChanged:s})},e}();const Se=we;const _e=function(){function e(){this.nativeLazyImage="loading"in HTMLImageElement.prototype,this.intersectionObserver="IntersectionObserver"in window,this.webpImage=!1,this._checkWebpImageSupport()}return e.prototype._checkWebpImageSupport=async function(){if(0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp"))this.webpImage=!0;else try{const e=new Image;e.onload=function(){e.width>0&&e.height>0&&(this.webpImage=!0)}.bind(this),e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"}catch(e){}},e}();const Ce=function(){function e(){}return e.get=function(){const t=localStorage.getObject(e.storageKey())||{url:[],query:[],nm:[]};return t.nm=t.nm.map((e=>e.nmId)),t},e.getRecentWithTimestamp=function(){return localStorage.getObject(e.storageKey())||{url:[],query:[],nm:[]}},e.addProduct=function(t){("number"==typeof t||"string"==typeof t&&!isNaN(Number(t)))&&e.putInStorage("nm",t,100)},e.putInStorage=function(t,n,s){let i=e.getRecentWithTimestamp(),r={time:parseInt(Date.now()/1e3),nmId:n},o=i[t];const a=o.indexOf(r);0!==a&&(a>0&&o.splice(a,1),o.unshift(r),o.length>s&&(o.length=s),i[t]=o,e.clearPrevStorage(),localStorage.putObject(e.storageKey(),i))},e.storageKey=function(){return`recentViewsV2-${WbSpaModel.prototype.$user.getUid()}`},e.clearPrevStorage=function(){const e=`recentViews-${WbSpaModel.prototype.$user.getUid()}`;localStorage.removeItem(e)},e}();var ke;const Ie="promotion-creatives";let Me,$e,Pe,Oe,Te,Ae=function(){function e(){}return e.getById=function(e){return Me&&Me[e]},e.isThermometerNeeded=function(e){return Pe&&Pe.has(e)},e.isRedPriceNeeded=function(e){return Te&&Te.has(e)},e.getFilter=function(){return Oe},e.getMainActionId=function(){return 188852},e.getHomeCarouselData=function(){return{caruselUrl:"/promotions/uhtydazha",carouselName:"За яркими ценами!",carouselBg:"#ED1AD8"}},e._startUpdate=async function(){try{await navigator.locks.request(`lock-${Ie}`,(async e=>{var t;const n=await ke.prototype.$httpClient.fetchText(wb.helpers.url.urlStaticDataJson(`data/${Ie}.json.hash`),{method:"GET",cache:"no-cache"},{noProcessResponse:!0});if(n&&n!==(null===(t=localStorage.getObject(Ie))||void 0===t?void 0:t.hash)){const e=await ke.prototype.$httpClient.fetchBasicJSON(wb.helpers.url.urlStaticDataJson(`data/${Ie}.json`),{cache:"no-cache"},{nullOnError:!0});e.hash=n,this.initPromoCreatives(e),localStorage.putObject(Ie,e),localStorage.removeItem("promotions"),localStorage.removeItem("promotions-hash")}}))}catch(e){}},e.initPromoCreatives=function(e){var t,n,s;e&&(Me={},null===(t=e.panels)||void 0===t||t.forEach((e=>Me[e.id]=e)),Pe=new Set(null!==(n=e.thermometer)&&void 0!==n?n:[]),Te=new Set(null!==(s=e.redPrices)&&void 0!==s?s:[]),e.filter&&(null==Oe?void 0:Oe.id)!==e.filter.id&&(document.documentElement.style.setProperty("--custom-promo-filter-color",e.filter.color),document.documentElement.style.setProperty("--custom-promo-filter-background",e.filter.background),document.documentElement.style.setProperty("--custom-promo-filter-switch-color",e.filter.switch),document.documentElement.style.setProperty("--custom-promo-filter-switch-background",e.filter.switchBackground)),Oe=e.filter)},e}();(ke=Ae).initPromoCreatives(localStorage.getObject(Ie)),ke._startUpdate(),$e=setInterval(ke._startUpdate.bind(ke),18e4);const De=Ae;n(34784);var Ee=n(83503),xe=n.n(Ee);const Be=navigator.connection||navigator.mozConnection||navigator.webkitConnection,je=Object.freeze({c246x328:"c246x328",c516x688:"c246x328",big:"c516x688"}),Le={volHostV2:function(e){let t;switch(!0){case e>=0&&e<=143:t="01";break;case e<=287:t="02";break;case e<=431:t="03";break;case e<=719:t="04";break;case e<=1007:t="05";break;case e<=1061:t="06";break;case e<=1115:t="07";break;case e<=1169:t="08";break;case e<=1313:t="09";break;case e<=1601:t="10";break;case e<=1655:t="11";break;case e<=1919:t="12";break;case e<=2045:t="13";break;case e<=2189:t="14";break;case e<=2405:t="15";break;case e<=2621:t="16";break;case e<=2837:t="17";break;case e<=3053:t="18";break;default:t="19"}return`basket-${t}.wbbasket.ru`},volFeedbackHost:function(e){let t;switch(!0){case e>=0&&e<=431:t="01";break;case e<=863:t="02";break;case e<=1199:t="03";break;case e<=1535:t="04";break;case e<=1919:t="05";break;case e<=2303:t="06";break;case e<=2688:t="07";break;default:t="08"}return`feedback${t}.wbbasket.ru`},volVideoHost:function(e){let t;switch(!0){case e>=0&&e<=11:t="01";break;case e<=23:t="02";break;case e<=35:t="03";break;case e<=47:t="04";break;case e<=59:t="05";break;case e<=71:t="06";break;case e<=83:t="07";break;case e<=95:t="08";break;case e<=107:t="09";break;case e<=119:t="10";break;case e<=131:t="11";break;case e<=143:t="12";break;default:t="13"}return`videonme-basket-${t}.wbbasket.ru`},constructHostV2:function(e,t="nm"){const n=parseInt(e,10),s="video"===t?n%144:~~(n/1e5),i="video"===t?~~(n/1e4):~~(n/1e3);let r;return"nm"===t?r=Le.volHostV2(s):"feedback"===t?r=Le.volFeedbackHost(s):"video"===t&&(r=Le.volVideoHost(s)),`https://${r}/vol${s}/part${i}/${n}`}};wb.helpers={deepClone:e=>JSON.parse(JSON.stringify(e)),getHashCode:e=>{let t,n,s=0;if(0===e.length)return s;for(t=0;t<e.length;t++)n=e.charCodeAt(t),s=(s<<5)-s+n,s|=0;return s},generateGuid:e=>{const t=URL.createObjectURL(new Blob).split("/").pop();return e?t:t.replace(/-/g,"")},date:{leftBefore:function(e){const t=wb.helpers.date.serverDate?new Date(wb.helpers.date.serverDate):new Date,n=e.getTime()-t.getTime(),s=Math.floor(n/1e3%60),i=Math.floor(n/6e4%60),r=Math.floor(n/36e5);return String.format("{0}:{1}:{2}",$.views.converters.leadZero(r,2),$.views.converters.leadZero(i,2),$.views.converters.leadZero(s,2))},diff:(e,t=new Date)=>{const n={days:0,months:0,years:0};if(e==t)return n;if(e>t)return wb.helpers.date.diff(t,e);if(n.years=t.getFullYear()-e.getFullYear(),n.months=t.getMonth()-e.getMonth(),n.days=t.getDate()-e.getDate(),n.days<0){const t=new Date(e.getFullYear(),e.getMonth()+1,0);n.months--,n.days+=t.getDate()}return n.months<0&&(n.years--,n.months+=12),n},formatEstimated:(e,t,n)=>{const{timeFrom:s,timeTo:i}=n||{},r=new Date;r.setHours(0,0,0,0);const o=new Date(e);t||(t=new Date(e)),t.setDate(t.getDate());if(t-r<0)return"Задерживается";if(s&&i){const e=$.views.converters.formatTimeStr(s);return`${$.views.converters.dayNameFromDate(o,!0)} c ${e} до&nbsp;${i}`}return o.getMonth()!==t.getMonth()?`${o.format("d MMMM")}-${t.format("d MMMM")}`:o.getDate()!==t.getDate()?`${o.getDate()}-${t.format("d MMMM")}`:`${o.format("d MMMM")}`}},getParamsFromUrlQuery:function(e){if(!e)return{};0===e.indexOf("?")&&(e=e.substring(1));const t=e.split("&"),n={};for(let e=0,s=t.length;e<s;e++){const s=t[e].split("=");n[s[0]]=s[1]}return n},appendToParamsFromQuery:function(e,t){if(!t)return;0===t.indexOf("?")&&(t=t.substring(1));const n=t.split("&");for(let t=0,s=n.length;t<s;t++){const s=n[t].split("=");e.set(s[0],s[1])}},getCardImgName:function(e){if(1===e.idx){return function(e,t){if(!t)return!1;const n=parseInt((2048&t?"1":"0")+(1024&t?"1":"0"),2);if(0===n)return!1;const s=wb.cookieHelper.getCookie("_wbauid");if(!s)return!1;const i=e+s+"ABTest=Be$t",r=xe()(i),o=BigInt("0x"+r.slice(-16))%BigInt(n+1);return 0!=o&&`ab_${o}`}(e.nmId,e.viewFlags)||e.idx}return e.idx},url:{imageUrl:function(e,t,n,s,i){var r,o;s&&!WbSpaModel.prototype.$isDesktop&&(t=s);const a=parseInt(e,10);if((null==Be?void 0:Be.effectiveType)&&"4g"!==(null==Be?void 0:Be.effectiveType)&&"3g"!==(null==Be?void 0:Be.effectiveType)&&je[t]&&(null===(o=null===(r=wb.global.settings)||void 0===r?void 0:r.switches)||void 0===o?void 0:o.enableProductImageDowngrade)&&(t=je[t]),isNaN(a)||0===a)return`${wb.settings.staticSiteUrl}/i/product/notfound/${t}.jpg`;return`${Le.constructHostV2(a)}/images/${t}/${wb.helpers.getCardImgName({nmId:e,viewFlags:i,idx:null!=n?n:1})}.webp`},urlProductStatic:function(e){return`${Le.constructHostV2(e)}/info/ru/card.json`},urlPriceHistoryStatic:function(e){return`${Le.constructHostV2(e)}/info/price-history.json`},urlSellerStatic:function(e){return`${Le.constructHostV2(e)}/info/sellers.json`},urlMulticardStatic:function(e){return`${Le.constructHostV2(e)}/multicart/${e}.json`},urlCertificateStatic:function(e){return`${Le.constructHostV2(e)}/info/certificate.json`},urlStaticData:function(e){return e.startsWith("//")?e:`https:${wb.settings.staticBasketUrl}/${e}`},urlStaticDataFallback:function(e){return e=e.replace(wb.settings.staticBasketUrl+"/",""),`https:${wb.settings.staticFallbackUrl}/${e}`},urlStaticDataJson:function(e){return e.startsWith("//")?e:`https:${wb.settings.staticBasketJsonUrl}/${e}`},urlStaticDataObsolete:function(e){return`https://static.wbstatic.net/data/${e}`},urlFeedbackPhoto:function(e,t="ms"){const n=parseInt(e,10);return`${Le.constructHostV2(n,"feedback")}/photos/${t}.${$.views.converters.toWebp("jpg")}`},urlVideoProduct:function(e,t="mp4",n="360p"){const s=parseInt(e,10);return`${Le.constructHostV2(s,"video")}/${t}/${n}/${"mp4"===t?"1.mp4":"index.m3u8"}`},urlRichContent:function(e){return`${Le.constructHostV2(e)}/info/ru/rich_v1.json`},urlImageTags:function(e,t){const n=Le.constructHostV2(e);return t?`${n}/info/tags/${t}.json`:`${n}/info/tags/picMap.json`},urlToExternalStatic:function(e){return`https://static-basket-01.wbbasket.ru${e}`},urlFeedbackVideoPreview:function(e){const t=e.id,[n,s]=null==t?void 0:t.split("/");return`https://videofeedback${("00"+n).slice(-2)}.wbbasket.ru/${s}/preview.jpg`}},replaceDeliveryFilterVal:function(e){return e.replace(/&fdlvr=(\d+)/,((e,t)=>{const n=23-new Date(Date.now()).getHours()-1;let s=null;switch(parseInt(t)){case 4:s=n>4?4:n;break;case 12:s=n;break;case 24:s=24+n;break;case 48:s=48+n;break;case 72:s=72+n;break;case 120:s=120+n}return null!=s?`&fdlvr=${s}`:""}))},path:{fileName:e=>(null==e?void 0:e.substring(e.lastIndexOf("/")+1))||"",extension:e=>(null==e?void 0:e.slice(1+(Math.max(e.lastIndexOf("."),0)||e.length)))||""},iOS:function(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},huawei:function(){const e=navigator.userAgent||navigator.vendor||window.opera;return/huawei/i.test(e)},formatVideoDuration:function(e){const t=Math.floor(e/60),n=e%60;return`${t<10?`0${t}`:t}:${n<10?`0${n}`:n}`},setImgFunc:function(e,t){if("function"==typeof t)switch(e){case"basket_route_map":Le.volHostV2=t;break;case"feedback_route_map":Le.volFeedbackHost=t}},downloadFile(e){const t=URL.createObjectURL(e),n=document.createElement("a");n.setAttribute("target","_blank"),n.href=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}};const Ne=Object.freeze({delete:0,add:1});let Re=function(){return(0,i.A)((function(e,t=!1){this.items=e.sort(((e,t)=>{var n,s;return null!==(n=t.timestamp)&&void 0!==n?n:0-(null!==(s=e.timestamp)&&void 0!==s?s:0)})),this.isEmptyCache=t,this._favoritesGoodsMap=null}),[{key:"count",get:function(){return this.items.length}},{key:"favoritesGoodsMap",get:function(){return null!=this._favoritesGoodsMap||(this._favoritesGoodsMap=this.items.reduce(((e,t)=>(e.set(t.characteristicId,t),e)),new Map)),this._favoritesGoodsMap}}])}();const Fe=Re,Ue="user_favorite_goods_{0}_v{1}";let We=function(){function e(e){this.uid=null,this.cacheModel=null,this._storageHelper=e,this._bindEvents()}var t=e.prototype;return t.setKey=function(e){this.uid=e,this._checkOldCache(),this.cacheModel=null},t.getLastSyncDt=async function(){var e;if(null==this.uid)return-1;try{const t=await this._openIDb(),n=await this._storageHelper.getItem(t,this.lastSyncCacheKey,"sync_dt");return null!==(e=null==n?void 0:n.lastSyncDt)&&void 0!==e?e:-1}catch(e){return this.getLastSyncDtFromLocalStorage()}},t.getLastSyncDtFromLocalStorage=function(){var e;if(null==this.uid)return-1;const t=null!==(e=localStorage.getItem(this.lastSyncCacheKey))&&void 0!==e?e:-1;return parseInt(localStorage.hasItem(this.cacheKey)?t:-1)},t.setLastSyncDt=async function(e){if(!(await this.getLastSyncDt()>=e||null==this.uid))try{const t=await this._openIDb();await this._storageHelper.setItem(t,this.lastSyncCacheKey,{name:"sync_dt",lastSyncDt:e})}catch(t){localStorage.setItem(this.lastSyncCacheKey,e)}},t.clearLastSyncDt=async function(){try{const e=await this._openIDb();await this._storageHelper.removeItem(e,this.lastSyncCacheKey,"sync_dt")}catch(e){localStorage.removeItem(this.lastSyncCacheKey)}},t.getFavoriteGoods=async function(e=!1){if(null==this.uid&&(this.cacheModel=new Fe([],!0)),!this.cacheModel){let e=await this._fetchFromIDb();null==e&&(e=localStorage.getObject(this.cacheKey)),this.cacheModel=null==e?new Fe([],!0):new Fe(e)}return e?this.cacheModel:new Fe(this.cacheModel.items.filter((e=>!e.needSync||e.needSync&&e.syncType!==Ne.delete)),this.cacheModel.isEmptyCache)},t.getFavoriteGoodsFromLocalStorage=async function(e=null){var t;null==this.uid&&(this.cacheModel=new Fe([],!0));const n=null!==(t=null!=e?e:await this._fetchFromIDb())&&void 0!==t?t:localStorage.getObject(this.cacheKey),s=null==n?new Fe([],!0):new Fe(n);return new Fe(s.items.filter((e=>!e.needSync||e.needSync&&e.syncType!=Ne.delete)),s.isEmptyCache)},t.setFavoriteGoods=async function(e){if(null==this.uid)return;this.cacheModel=null==e?new Fe([],!0):new Fe(e);!await this._saveToIDb(e)&&localStorage.putObject(this.cacheKey,e),localStorage.setItem(this.tabsSyncCacheKey,`${Date.now()}`)},t.contains=function(e){if(null==this.cacheModel)return!1;const t=this.cacheModel.favoritesGoodsMap.get(e);return null!=t&&!(t.needSync&&t.syncType===Ne.delete)},t._checkOldCache=function(){for(let e=1;e<1;e++)localStorage.removeItem(String.format(Ue,this.uid,e))},t._bindEvents=function(){window.addEventListener("storage",(e=>{null!=e.key&&e.key!==this.tabsSyncCacheKey||(this.cacheModel=null,this.getFavoriteGoods())}))},t._fetchFromIDb=async function(){try{const e=await this._openIDb(),t=await this._storageHelper.getAll(e,this.cacheKey);return null!=t?t:[]}catch(e){return console.log(`[FAVS_STORAGE]: fetching from idb failed, reason=${e.message}`),null}},t._saveToIDb=async function(e){try{const t=await this._openIDb(),n=t.transaction([this.cacheKey],"readwrite").objectStore(this.cacheKey);n.clear();for(let t of e)n.put(t);return!0}catch(e){return console.log(`[FAVS_STORAGE]: saving to idb failed, reason=${e.message}`),!1}},t._openIDb=async function(){try{return await this._storageHelper.openDb("wb_"+this.cacheKey,{onupgradeneeded:e=>{if(!e.objectStoreNames.contains(this.cacheKey)){e.createObjectStore(this.cacheKey,{keyPath:"characteristicId"}).createIndex("timestamp","timestamp",{unique:!1})}e.objectStoreNames.contains(this.lastSyncCacheKey)||e.createObjectStore(this.lastSyncCacheKey,{keyPath:"name"})},version:1})}catch(e){return null}},(0,i.A)(e,[{key:"cacheKey",get:function(){return String.format(Ue,this.uid,1)}},{key:"lastSyncCacheKey",get:function(){return String.format("favorite_last_sync_dt_{0}_v{1}",this.uid,1)}},{key:"tabsSyncCacheKey",get:function(){return String.format("favorite_tabs_sync_v{0}",1)}}])}();const He=We;let ze=function(){function e(){}return e.convertToFavoriteGoods=function(e={},t={}){var n,s,i,r,o,a,l,c;const u=null===(n=e.sizes)||void 0===n?void 0:n.find((e=>e.optionId===t.characteristicId)),d=null!==(s=null==u?void 0:u.price)&&void 0!==s?s:e.price,h=d&&null!==(r=null===(i=null==u?void 0:u.stocks)||void 0===i?void 0:i.some((e=>e.qty>0)))&&void 0!==r&&r,p=20624===e.brandId||30624===e.siteBrandId,m=h?d.priceToShow/100:0;return{nmId:e.id,cod1S:e.id,brandName:e.brand,characteristicId:t.characteristicId,meta:t.meta,id:t.characteristicId,goodsName:e.name,colorName:null===(a=null===(o=e.colors)||void 0===o?void 0:o[0])||void 0===a?void 0:a.name,onStock:h?1:0,star:e.rating,price:h?d.basic/100:0,priceWithSale:m,priceWithCouponAndDiscount:m,sale:h?d.sale:0,totalSale:h?d.sale:0,salePrice:m,targetUrl:null!==(l=t.targetUrl)&&void 0!==l?l:"",sizeName:null!==(c=null==u?void 0:u.origName)&&void 0!==c?c:"",stocks:null==u?void 0:u.stocks,timestamp:t.timestamp,deliveryHours:h&&e.time1+e.time2,source:t.source,subjectId:e.subjectId,subjectParentId:e.subjectParentId,reviewRating:e.reviewRating,feedbacks:e.feedbacks||e.commentsCount,supplierId:e.supplierId,supplier:e.supplier,newlyArrived:h&&(1&t.source)>0,_rawCatalogModel:e,viewFlags:e.viewFlags,shouldShowOriginalMark:!p&&!!(8&e.viewFlags),paymentDiscountAmount:wb.priceHelper.calcWalletDiscount(m,e.currency,null==u?void 0:u.saleConditions),premiumSale:e.premiumSale,showRedPrice:wb.xnm.isRedPrice(e.panelPromoId),get isDeleted(){return!(this.goodsName||this.brandName||this.colorName||this.sizeName)},get showDiscount(){return(this.price>0||this.priceWithCouponAndDiscount>0)&&this.price!=this.priceWithCouponAndDiscount}}},e.convertFromAddModelToCacheItem=function(e,t){var n,s,i;const r=wb.analitics.analiticsInfoToListName(e),o={characteristicId:e.characteristicId,cod1S:e.cod1S,id:e.characteristicId,source:t,targetUrl:`${null!==(n=e.targetUrl)&&void 0!==n?n:""}|${null!==(s=e.iid)&&void 0!==s?s:1}|${r}|${e.logs}`,timestamp:Math.ceil(Date.now()/1e3),meta:e.meta};return(null===(i=o.meta)||void 0===i?void 0:i.shade)&&delete o.meta.shade,o},e.convertFromCacheItemToUserStorageItem=function(e){return{product_option_id:e.characteristicId,product_id:e.cod1S,target_url:e.targetUrl,added_timestamp:e.timestamp,meta:e.meta,fav_type:3==e.source||1==e.source?1:2}},e.convertFromUserStorageItemToCacheItem=function(e){return{characteristicId:e.product_option_id,cod1S:e.product_id,targetUrl:e.target_url,timestamp:e.added_timestamp,count:1,source:e.fav_type,meta:e.meta}},e}();const qe=ze,Ve=Object.freeze({waitlist:1,poned:2,both:3});const Ge=function(){function e(e,t,n,s,i){this.chrt_id=+t,this.cod_1s=n,this.client_ts=s||Date.now()/1e3|0,this.op_type=e||1,this.type=i||2}return e.fromCache=function(t){if(0===t.syncType)return e.toDelete(t.characteristicId);const n=new e(1,t.characteristicId,t.cod1S,t.timestamp,t.source);return n.client_ts>1e12&&(n.client_ts=n.client_ts/1e3|0),n.target_url=t.targetUrl,t.meta&&(n.meta_json=JSON.stringify(t.meta)),n},e.toDelete=function(t){return new e(3,t)},e.convertFromSharedModelToCacheItem=function(e){const t={characteristicId:e.chrt_id,cod1S:e.cod_1s,targetUrl:e.target_url,timestamp:e.client_ts,source:e.type};try{t.meta=e.meta_json?JSON.parse(e.meta_json):null}catch(e){}return t},e}(),Je=g.D4;let Ke=function(){function e(e){this._cacheHelper=e,this.debounceSync=this.$helper.debounce(this.sync.bind(this),3e3)}var t=e.prototype;return t._getOperationAsync=async function(){return(await this._cacheHelper.getFavoriteGoods(!0)).items.filter((e=>e.needSync)).map((e=>Ge.fromCache(e)))},t._getAllAsync=async function(){return(await this._cacheHelper.getFavoriteGoods()).items.map((e=>Ge.fromCache(e)))},t.sync=async function(e){var t;if(this.$auth.isAuth){this._syncProcess=null!==(t=this._syncProcess)&&void 0!==t?t:this._sync(e);try{return await this._syncProcess}catch(e){}finally{this._syncProcess=null}}},t._sync=async function(e){return await navigator.locks.request("lock-fav-sync",(async t=>{const n=await this._cacheHelper.getLastSyncDt(),s=await this._getOperationAsync(),i=this.$services.sessionService.getSession();try{const t=await this._doSync({ts:n,sessionId:i,operations:s,timeout:e});if(this._sendMetrics(t.state),0===t.state&&t.change_ts>0)return await this._updateProductsAsync(s,t);if(1===t.state){const e=await this._getAllAsync(),t=await this._doSync({ts:n,sessionId:i,operations:e,rememberMe:!0});if(0===t.state&&t.change_ts>0)return await this._updateProductsAsync(e,t)}else t&&wb.spa.logError(new Error(`[WB_FAVS_SYNC]: sync state:${t.state}`),{result:t,ts:n,deviceId:i,opLen:s.length,hasJwt:this.$auth.isAuth})}catch(e){const t=!e.isCustomError&&e instanceof TypeError&&("Failed to fetch"===e.message||"NetworkError when attempting to fetch resource."===e.message||"Cancelled"===e.message);this._sendMetrics(t?"network":"error"),wb.spa.logError(new Error(`[WB_FAVS_SYNC]: ${e.message}`),{ts:n,deviceId:i,opLen:s.length,hasJwt:this.$auth.isAuth})}return!1}))},t._updateProductsAsync=async function(e,t){return await this._cacheHelper.setFavoriteGoods(await this.mergeUpdatedAndCacheItems(e,t.result_set)),await this._cacheHelper.setLastSyncDt(t.change_ts),!0},t.mergeUpdatedAndCacheItems=async function(e,t){var n;const s=(null===(n=(await this._cacheHelper.getFavoriteGoods(!0)).items)||void 0===n?void 0:n.toMap((e=>e.characteristicId),(e=>e)))||new Map;return null==e||e.forEach((e=>{if(3===e.op_type)s.delete(e.chrt_id);else{const t=s.get(e.chrt_id);t&&(delete t.needSync,delete t.syncType)}})),null==t||t.forEach((e=>{const t=s.get(e.chrt_id);if(null==t?void 0:t.needSync){if(!e.is_deleted)return;if(1===t.op_type)return}e.is_deleted?s.delete(e.chrt_id):s.set(e.chrt_id,Ge.convertFromSharedModelToCacheItem(e))})),s.toArray().sort(((e,t)=>t.timestamp-e.timestamp))},t._doSync=function({ts:e,sessionId:t,operations:n,rememberMe:s=!1,timeout:i=null}){return this.$wbxHttpClient.fetch(`${Je}/sync?ts=${e}&device_id=${t}${s?"&remember_me=true":""}`,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json","Wb-AppType":"site"},timeout:i||1e4}).then((async e=>e.ok?e.json():{})).then((e=>(e.result_set&&(e.result_set=e.result_set[0]||[]),e)))},t._sendMetrics=function(e){try{fetch(`/webapi/logging/favs/metrics?status=${e}`,{method:"POST"})}catch(e){}},e}();const Qe=Ke,Xe="favs/favs_v1_synced",Ye="favs/favs_v3_synced",Ze="favs/site_items",et="_favs_synced_v3";let tt=function(){function e(){this._cacheHelper=new He(this.$storageHelper),this._enrichedFavoriteItems=new Map,this._timer=null,this.isSynced=!1,this._hasBeenLoadedOnce=!1,this._bindEvents()}var t=e.prototype;return t.init=function(){Object.setPrototypeOf(Qe.prototype,WbSpaModel.prototype),this.dumpFav=new Qe(this._cacheHelper)},t.setKey=function(e,t){this._stopSyncronizing(),e&&(this._cacheHelper.setKey(t),localStorage.clearStartsWith(et,this._favV3Key),this._startSyncronizing())},t.syncFromServerAsync=async function(){if(this.isSynced||this._initialSyncInProgress)return;this._initialSyncInProgress=!0;const e=await this._loadRawGoodsFromDumpAsync();return this._initialSyncInProgress=!1,e},t.getWlArrivedCatalogModelAsync=async function(){window._debug&&console.time("buildWlArrivedCatalogModel");try{const[e,t]=await Promise.all([this._loadFavoriteGoodsAsync(),this.$moduleLoader.loadModuleAsync("favoriteGoodsModel")]),n=new t(e);return n.setOnlyWlArrived(!0).setSorting(1).setGoods(Number.MAX_SAFE_INTEGER).complete(),{goods:n.favoriteGoods}}catch(e){return console.error(e),{goods:[],isEmptyCache:!0}}finally{window._debug&&console.timeEnd("buildWlArrivedCatalogModel")}},t.getSimplifiedModelAsync=async function(){window._debug&&console.time("buildFavSimpleModel");try{const[e,t]=await Promise.all([this._loadFavoriteGoodsAsync(),this.$moduleLoader.loadModuleAsync("favoriteGoodsModel")]);return new t(e).setSorting(7).setGoods(16).toSimpleModel()}catch(e){return console.error(e),{goods:[],totalCount:0,availableCount:0,isEmptyCache:!0}}finally{window._debug&&console.timeEnd("buildFavSimpleModel")}},t.getFavsDataAsync=async function(e=""){var t,n,s,i;window._debug&&console.time("buildFavModel");const r=new URLSearchParams(e),o=(parseInt(null!==(t=r.get("page"))&&void 0!==t?t:1),null!==(n=r.get("sort"))&&void 0!==n?n:"newlydown"),a=null!==(s=r.get("search"))&&void 0!==s?s:"",l="true"==(null!==(i=r.get("wlArrived"))&&void 0!==i?i:r.get("wlarrived"));try{const[e,t,n,{FavorireGoodsSorterModel:s}]=await Promise.all([this._loadFavoriteGoodsAsync(),this.$moduleLoader.loadModuleAsync("favoriteGoodsModel"),this.$moduleLoader.loadModuleAsync("pagerHelper"),this.$moduleLoader.loadModuleAsync("sorterModel")]),i=new t(e,new s(o,window.location.href));return i.setOnlyWlArrived(l).setSearch(a).setSorting().setGoods().complete(),i}catch(e){return console.error(e),{isEmptyCache:!0}}finally{window._debug&&console.timeEnd("buildFavModel")}},t.addToFavs=async function(e,t=!1,n){if(!this.$router.userIsAuth)throw new UnauthorizeError;return this.sendToWishlistStat(e,n),t?this._addToPoned(e):this._addToWl(e)},t.sendToWishlistStat=async function(e,t){var n,s,i,r,o,a,l,c,u,d,h;if(window.wba)try{const p=t&&t.sizes||e&&e.sizes||[];let m={stores:null===(n=p.find((t=>t.ch==e.characteristicId)))||void 0===n?void 0:n.stocks,salePrice:t?t.salePrice:e.salePrice};if(!m.stores){m=(await wb.xnm.getInfoForWbaStat([{nmId:e.cod1S,size:e.characteristicId}])).get(e.cod1S)}const g=this.$analitic.getAnaliticsInfoFromTargetUrl(e.targetUrl),f=()=>this.$analitic.analiticsInfoToListName(e.l?e:g),y=()=>this.$analitic.getTailObjectFromAnalyticsInfo(e.l?e:g);if(["CSD","CAD","WLC","WLA"].includes(e.l)){const t=WbSpaModel.prototype.$analitic.getTermsFromTailObject(e.l);e.t=t.category,e.t1=t.id_category,e.t2=t.discount_name}const v={id:e.cod1S,chrt:e.characteristicId,quantity:e.quantity,price:null==m?void 0:m.salePrice,affiliation:null!==(s=null==t?void 0:t.supplierId)&&void 0!==s?s:e.supplierId,inListIndex:e.iid||1,listName:f(),name:null!==(i=null==t?void 0:t.name)&&void 0!==i?i:e.goodsName,brand:null!==(r=null==t?void 0:t.brand)&&void 0!==r?r:e.brandName,rating:null!==(o=null==t?void 0:t.reviewRating)&&void 0!==o?o:e.reviewRating,storeId:null!==(a=null==e?void 0:e.storeId)&&void 0!==a?a:(h=null==m?void 0:m.stores,(null==h?void 0:h.length)>0?null==h?void 0:h.sort(((e,t)=>e.time1+e.time2-t.time1-t.time2))[0].wh:null),feedbacksCount:null!==(l=null==t?void 0:t.feedbacks)&&void 0!==l?l:e.feedbacks,subjectId:null!==(c=null==t?void 0:t.subjectId)&&void 0!==c?c:e.subjectId,subjectParentId:null!==(u=null==t?void 0:t.subjectParentId)&&void 0!==u?u:e.subjectParentId,logs:null!==(d=null==t?void 0:t.logs)&&void 0!==d?d:e.logs,tailObject:y()};this.$analitic.sendWbaEcomStat("add_to_wishlist",[v])}catch(e){console.error(e)}},t.deleteFromFavs=function(e,t){return this._removeFromPoned(t)},t.isAddedToFavs=function(e){return this.syncFromServerAsync(),this._cacheHelper.contains(e)},t.deleteManyFromFavsAsync=async function(e){const t=await this._cacheHelper.getFavoriteGoods(!0);e.forEach((e=>{const n=t.favoritesGoodsMap.get(e.characteristicId);n&&(n.needSync=!0,n.syncType=Ne.delete)})),await this._cacheHelper.setFavoriteGoods(t.favoritesGoodsMap.toArray()),this._canUseV3()&&this.dumpFav.debounceSync(),WbSpaModel.prototype.$moduleLoader.execModule("bottomNotificationPanel","showNotification",[0,"Товар удалён из избранного"])},t.moveManyToBasketAsync=async function(e){this.$services.cartService.addManyItems(e).isSuccess&&WbSpaModel.prototype.$moduleLoader.execModule("bottomNotificationPanel","showNotification",[0,"Товар добавлен в корзину"])},t._bindEvents=function(){this.$eventBus.addEventListener("GeoUpdated",(()=>this._enrichedFavoriteItems.clear()))},t._loadFavoriteGoodsAsync=async function(){try{const e=await this._loadRawGoodsFromDumpAsync(4e3);if(!e)return{isEmptyCache:!0,items:[]};if(e.isEmptyCache)return{isEmptyCache:!0,items:[]};const t=e.items;return t.length<1?{isEmptyCache:!1,items:[]}:this._enrichGoodsAsync(t)}catch(e){return console.error(e),this._loadFromCache()}},t._loadRawGoodsAsync=async function(){return this._cacheHelper.getFavoriteGoodsFromLocalStorage()},t._enrichGoodsAsync=async function(e){const t=e.reduce(((e,t)=>(!this._enrichedFavoriteItems.has(t.characteristicId)&&e.set(t.characteristicId,t),e)),new Map);let n={};return t.size>0&&(n=await wb.xnm.getCatalogCards(t.toArray((e=>e.cod1S)),!1,!0,!0)),{isEmptyCache:!1,items:e.reduce(((e,t)=>{var s;const i=n[t.cod1S],r=this._enrichedFavoriteItems.get(t.characteristicId);if(i||r){const n=null!==(s=r&&Object.assign({},r))&&void 0!==s?s:qe.convertToFavoriteGoods(i,t);e.push(n),!r&&this._enrichedFavoriteItems.set(n.characteristicId,n)}return e}),[])}},t._addToPoned=function(e){return this._addThroughCache(e,Ve.poned)},t._removeFromPoned=async function(e){const t=(await this._cacheHelper.getFavoriteGoods(!0)).items,n=t.find((t=>t.characteristicId===e));n&&(n.needSync=!0,n.syncType=Ne.delete),await this._cacheHelper.setFavoriteGoods(t),this._canUseV3()&&this.dumpFav.debounceSync()},t._addToWl=function(e){return this._addThroughCache(e,Ve.waitlist)},t._addThroughCache=async function(e,t){if(!e.isFromCache){if((await this._cacheHelper.getFavoriteGoods()).count>=2e3)throw new KnownServerError(String.format(this.$localziation.ponedMaxStorage,2e3))}const n=(await this._cacheHelper.getFavoriteGoods(!0)).items;let s=n.find((t=>t.characteristicId==e.characteristicId));s?s.timestamp=Math.ceil(Date.now()/1e3):(s=qe.convertFromAddModelToCacheItem(e,t),n.push(s)),s.needSync=!0,s.syncType=Ne.add,await this._cacheHelper.setFavoriteGoods(n),this._canUseV3()&&this.dumpFav.debounceSync()},t.mergeActualAndCacheItems=async function(e,t,n){const s=e.reduce(((e,t)=>(e.set(t.characteristicId,t),e)),new Map),i=(await this._cacheHelper.getFavoriteGoods(!0)).items;t>n&&i.forEach((e=>{1e3*e.timestamp>n&&e.syncType!=Ne.delete&&(e.needSync=!0,e.syncType=Ne.add)}));return i.filter((e=>e.needSync)).forEach((e=>{(e.syncType==Ne.delete&&s.has(e.characteristicId)||e.syncType==Ne.add&&!s.has(e.characteristicId))&&s.set(e.characteristicId,e)})),s.toArray()},t._startSyncronizing=function(){this._canUseV3()||(this._timer=setInterval((async()=>{var e;if(this._syncronizigInProcess||!this.isSynced)return;const t=await this._cacheHelper.getLastSyncDt();let n=await this._getDumpFilesInfoAsync();if(null===n||n.needsMigration)return;if(n.migratedV3)return this._stopSyncronizing();const s=(await this._cacheHelper.getFavoriteGoods(!0)).items;let i=0,r=!1;if(!(0===s.filter((e=>e.needSync)).length&&n.dumpTs<=t)){this._syncronizigInProcess=!0;try{let o=[];if(n.dumpTs<=t)o=s.filter((e=>!e.needSync||e.needSync&&e.syncType!==Ne.delete));else{const e=await this.$services.apiUserStorage.getData([{path:n.dumpFiles[0].path}]);if(!Array.isArray(e)||0===e.length)throw new Error(`failed to fetch data at path ${n.dumpFiles[0].path}`);let i=null;try{i=JSON.parse(this.$helper.base64.decode(e[0].file))}catch(e){wb.spa.logError(e,`[FAVS_SYNC]: latest file is corrupted, file=${n.dumpFiles[0].path}`,!0)}if(Array.isArray(i)){let e=i.map((e=>qe.convertFromUserStorageItemToCacheItem(e)));o=await this.mergeActualAndCacheItems(e,t,n.dumpTs),r=this._itemsAreMatched(e,o)}else o=s.filter((e=>!e.needSync||e.needSync&&e.syncType!==Ne.delete))}if(r)i=n.dumpTs;else{const t=this.$helper.base64.encode(JSON.stringify(o.map((e=>qe.convertFromCacheItemToUserStorageItem(e))))),s=[{path:Ze,file:t}],r=await this.$services.apiUserStorage.setData(s);if(!r.success)throw new Error(`failed to set data reason=${null===(e=r.error)||void 0===e?void 0:e.message}`);{i=n.dumpTs;const e=await this._getDumpFilesInfoAsync();(null==e?void 0:e.dumpTs)>0&&(i=e.dumpTs)}}await this._cacheHelper.setFavoriteGoods(o.map((e=>(e.needSync=!1,e))))}catch(e){wb.spa.logError(e,"[FAVS_SYNC]: sync failed",!0)}finally{this._syncronizigInProcess=!1,await this._cacheHelper.setLastSyncDt(i>0?i:t)}}}),3e4))},t._itemsAreMatched=function(e,t){return e.map((e=>e.characteristicId)).sort(((e,t)=>e-t)).join(",")===t.map((e=>e.characteristicId)).sort(((e,t)=>e-t)).join(",")},t._stopSyncronizing=function(){clearInterval(this._timer)},t._updateSyncStatus=function(e){$.observable(this).setProperty({isSynced:e}),WbSpaModel.prototype.$eventBus.dispatchEvent(new CustomEvent("favouritesSynced"))},t._getTimeout=function(e){const t=new AbortController;return setTimeout((()=>t.abort()),e),t.signal},t._getDumpFilesInfoAsync=async function(){try{let e=await this.$services.apiUserStorage.getList("favs",{signal:this._getTimeout(5e3)});if(null==e)return null;const t={};return t.dumpFiles=e.filter((e=>[Ze,"favs/ios_items","favs/android_items"].indexOf(e.path)>-1)),t.dumpFiles.sort(((e,t)=>t.modify_time-e.modify_time)),t.needsMigration=!e.find((e=>e.path===Xe||"favs/favs_v2_synced"===e.path)),t.migratedV3=!!e.find((e=>e.path===Ye)),t.migratedV3&&localStorage.setItem(this._favV3Key,"1"),t.dumpFiles.forEach((e=>{e.modify_time=1e3*e.modify_time})),t.dumpTs=t.dumpFiles.length>0?t.dumpFiles[0].modify_time:0,t}catch(e){return null}},t._migrateFromOldStorageAsync=async function(){const e=await this._loadRawGoodsAsync();if(!e.isEmptyCache){const t=e.items.map((e=>qe.convertFromCacheItemToUserStorageItem(e))),n=[{path:Ze,file:this.$helper.base64.encode(JSON.stringify(t))},{path:Xe,file:"W10="}];wb.spa.logError(new Error(`[FAVS_SYNC]: sync completed items_synced=${t.length}`)),await this.$services.apiUserStorage.setData(n)}},t._loadRawGoodsFromDumpAsync=async function(e){return this._canUseV3()?await this._loadRawGoodsFromFavsServiceAsync(e):(await this._loadRawGoodsFromUserStorageAsync(),this._canUseV3()&&await this._loadRawGoodsFromFavsServiceAsync(e)),await this._cacheHelper.getFavoriteGoods()},t._loadRawGoodsFromFavsServiceAsync=async function(e){await this.dumpFav.sync(e),this._migrateV3FromUserStorageAsync(),this._updateSyncStatus(!0)},t._migrateV3FromUserStorageAsync=async function(){if(localStorage.hasItem(this._favV3Key))return;const e=await this._getDumpFilesInfoAsync();if(null!==e&&!e.migratedV3)if(e.dumpTs>0){const t=e.dumpFiles.find((e=>e.path===Ze));let n=null;const s=await this.$services.apiUserStorage.getData([{path:t.path}]);if(!Array.isArray(s)||0===s.length)throw new Error(`failed to fetch data at path ${t.path}`);try{n=JSON.parse(this.$helper.base64.decode(s[0].file))}catch(e){throw wb.spa.logError(e,`[FAVS_MIGR]: latest file is corrupted, file=${t.path}`,!0),e}if(!n||!Array.isArray(n))throw"[FAVS_MIGR]: all dump files are corrupted";if(!n.length)return void this._setMigratedV3();const i=n.map((e=>qe.convertFromUserStorageItemToCacheItem(e))),r=(await this._cacheHelper.getFavoriteGoods(!0)).favoritesGoodsMap;i.forEach((e=>{r.get(e.characteristicId)||(e.needSync=!0,e.syncType=Ne.add,r.set(e.characteristicId,e))})),await this._cacheHelper.setFavoriteGoods(r.toArray().sort(((e,t)=>t.timestamp-e.timestamp))),await this.dumpFav.sync()&&this._setMigratedV3()}else this._setMigratedV3()},t._setMigratedV3=function(){localStorage.setItem(this._favV3Key,"1"),this.$services.apiUserStorage.setData([{path:Ye,file:"W10="}])},t._loadRawGoodsFromUserStorageAsync=async function(){var e;const t=await this._cacheHelper.getLastSyncDt();let n,s=!1,i=null;try{const e=await this._getDumpFilesInfoAsync();if((null==e?void 0:e.needsMigration)&&this._migrateFromOldStorageAsync(),null==e?void 0:e.migratedV3)return;if(null!=e){if(t===e.dumpTs||0===e.dumpTs)return;let r=0,o=null;for(;r<e.dumpFiles.length&&!(r>0&&e.dumpFiles[r].modify_time<t);){const t=await this.$services.apiUserStorage.getData([{path:e.dumpFiles[r].path}]);if(!Array.isArray(t)||0===t.length)throw new Error(`failed to fetch data at path ${e.dumpFiles[r].path}`);try{o=JSON.parse(this.$helper.base64.decode(t[0].file));break}catch(t){wb.spa.logError(t,`[FAVS_SYNC]: latest file is corrupted, file=${e.dumpFiles[r].path}`,!0),r++,i=-1}}if(!Array.isArray(o))throw"[FAVS_SYNC]: all dump files are corrupted";n={favsList:o.map((e=>qe.convertFromUserStorageItemToCacheItem(e)))},i=-1===i?i:e.dumpTs,s=!0}}catch(e){if(e.isUnauthorize)return null}finally{!this._cacheHelper.cacheModel&&await this._cacheHelper.getFavoriteGoods(),this._updateSyncStatus(!0)}if(!s)return;i=null!=i?i:t;const r=null!==(e=null==n?void 0:n.favsList)&&void 0!==e?e:[];await this._cacheHelper.setFavoriteGoods(await this.mergeActualAndCacheItems(r,t,i)),await this._cacheHelper.setLastSyncDt(i)},t._canUseV3=function(){return!0},(0,i.A)(e,[{key:"_favV3Key",get:function(){return`${et}_${WbSpaModel.prototype.$auth.um.userUid}`}}])}();const nt=tt;let st=function(){function e(){this.timer=null,this.lastUpdate=-1/0,this.userData={},this.balanceInfo={},this.loadRequesterPromise=null}var t=e.prototype;return t.setKey=function(e,t){e&&(this.USER_INFO_CACHE_KEY_FORMATTED=String.format("user-info-{0}",t))},t.getMaskedInfo=function(){return this._getLocalUserInfo()},t._getLocalUserInfo=function(){var e;return null!==(e=this._masketInfo)&&void 0!==e?e:localStorage.getObject(this.USER_INFO_CACHE_KEY_FORMATTED)},t.clear=function(){this.lastUpdate=-1/0},t.clearLocalUserInfo=function(){this.USER_INFO_CACHE_KEY_FORMATTED&&localStorage.removeItem(this.USER_INFO_CACHE_KEY_FORMATTED)},t.getUserDataAsync=async function(e=!1,t=!1){var n;if(t&&this.userData.isAuthenticated&&!this.userData.isAuthenticated)return wb.spa.signIn({query:{returnUrl:window.location.href}});this.basicDataTask=null!==(n=this.basicDataTask)&&void 0!==n?n:this._loadBasicDataInternal();const s=this.basicDataTask,[i]=await Promise.all([s]);if(this.basicDataTask=null,t&&!this.userData.isAuthenticated)return wb.spa.signIn({query:{returnUrl:window.location.href}});if(i.maskedInfo){i.maskedInfo.isEmp=i.isEmployeeSynced,this._masketInfo=i.maskedInfo;try{localStorage.putObject(this.USER_INFO_CACHE_KEY_FORMATTED,i.maskedInfo)}catch(e){}}return{userInfo:i,userExtraInfo:{dataLoaded:!0,discountInfo:{purchase:i.purchaseAmount,personalDiscount:i.personalDiscount,purchasePercent:i.purchasePercent}}}},t.checkAccountsBinding=async function(e){var t,n,s;if(!this.$auth.isAuth)return!1;const[i,r]=await Promise.all([this.$services.userData.getUserDataAsync(),this.$services.userData.getAccBinding()]);return!(!(null===(s=null===(n=null===(t=null==i?void 0:i.userInfo)||void 0===t?void 0:t.phone)||void 0===n?void 0:n.toString())||void 0===s?void 0:s.startsWith("79"))||!((null==r?void 0:r.isEsiaBound)||(null==r?void 0:r.isSberidBound)||e.esiaSignIn||e.sberIdSignIn))},t.getAccBinding=async function(){if(!this.$auth.isAuth)return{};await this.$moduleLoader.loadServiceAsync("storageService");const e=await this.$services.storageService.userInfo.getInfo(!1);return{isEsiaBound:null==e?void 0:e.isEsiaBound,isSberidBound:null==e?void 0:e.isSberidBound}},t.removeInn=function(){$.observable(this.userData).setProperty({inn:""})},t.updateFioAsync=async function(e,t,n){return(await this._loadRequetser()).updateFioAsync(e,t,n,this.userData)},t.updateSexAsync=async function(e){return(await this._loadRequetser()).updateSexAsync(e,this.userData)},t.updateBirthdayAsync=async function(e){return(await this._loadRequetser()).updateBirthdayAsync(e,this.userData)},t.updateEmailAsync=async function(e){return(await this._loadRequetser()).updateEmailAsync(e,this.userData)},t.updatePhoneMobileAsync=async function(e,t,n){return(await this._loadRequetser()).updatePhoneMobileAsync(e,t,n,this.userData)},t.updateInnAsync=async function(e){return(await this._loadRequetser()).updateInnAsync(e,this.userData)},t.updateImageAsync=async function(e){return(await this._loadRequetser()).updateImageAsync(e,this.userData)},t.removeUserPhotoAsync=async function(){return(await this._loadRequetser()).removeUserPhotoAsync(this.userData)},t.updateSettingsAsync=async function(e,t){return(await this._loadRequetser()).updateUserSettingsAsync(e,t,this.userData)},t._loadBasicDataInternal=async function(){if(Date.now()-this.lastUpdate<6e5)return this.userData;const e=await this._loadRequetser();return this.lastUpdate=Date.now(),e.loadBasicInfo(this.userData,this._getLocalUserInfo())},t._loadRequetser=async function(){return this.loadRequesterPromise||(this.loadRequesterPromise=this.$moduleLoader.loadModuleAsync("userInfoRequester")),this.loadRequesterPromise},t.migrateProfileFromGlobal=async function(){if(localStorage.hasItem("wbx_to_wb_profile_synced"))return;if(!!(await this.$services.apiUserStorage.getList("profile")).find((e=>"profile/info_synced"===e.path)))return;const e=`${this.$services.cartService.publicBasketApiUrl}/lk/account/addresses/migratefromglobal`;try{await this.$httpClient.fetchJSON(e,{method:"POST"}),localStorage.setItem("wbx_to_wb_profile_synced",1)}catch(e){wb.spa.logError("[WBX_PROFILE_MIGR]: failed to migrate profile",e)}},e}();const it=st;var rt=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n};const ot="/webapi/newsfeed/events";let at=function(){function e(){this.eventsModel={eventsCount:0,loading:!0}}var t=e.prototype;return t.canSendToBell=function(){var e,t,n;const s=Number(null===(n=null===(t=null===(e=wb.global)||void 0===e?void 0:e.settings)||void 0===t?void 0:t.variables)||void 0===n?void 0:n.bellPercentage);return s>0&&this.$auth.jwtData.user%100<s},t.bellFetch=function(e,t={}){const{headers:n={}}=t,s=rt(t,["headers"]),i=new Headers(n);return i.set("X-Request-ID",wb.helpers.generateGuid()),this.$wbxHttpClient.fetch(`${g.YM}/shard-proxy/${e}`,Object.assign({headers:i},s))},t.checkNotificationCountAsync=async function(){if(this._clearTimer(),!this.$auth.isAuth)return this.eventsModel;let e=!1;try{this.canSendToBell()&&this.bellFetch("api/v3/notice/unread?app_type=web",{method:"GET"});const t=await this.$httpClient.fetchJSON(`${ot}/count`,{method:"POST"});$.observable(this.eventsModel).setProperty({eventsCount:t}),e=!0}catch(e){console.error(e),$.observable(this.eventsModel).setProperty({isNetworkError:!0})}finally{return $.observable(this.eventsModel).setProperty({loading:!1}),this._startTimer(e),this.eventsModel}},t.markNotificationRead=async function(e){this._clearTimer();let t=!1;try{await this.$httpClient.fetchJSON(`${ot}/mark`,{method:"POST",body:new URLSearchParams({readIds:e.join(";")})}),$.observable(this.eventsModel).setProperty({eventsCount:Math.max(this.eventsModel.eventsCount-e.length,0)}),t=!0}catch(e){$.observable(this.eventsModel).setProperty({isNetworkError:!0})}finally{return this._startTimer(t),{isSuccess:t,error:undefined}}},t._clearTimer=function(){clearTimeout(this.timer)},t._startTimer=function(e){this.timer=setTimeout((()=>this.checkNotificationCountAsync()),e?18e4:6e4)},e}();const lt=at;let ct=function(){function e(){this.maxQuantity=10,this.canBeOrdered=!0,this.includeInOrder=!0}return e.fromWbBasketProduct=function(t){var n;const s=new e,i=+t.quantity;s.characteristicId=s.id=+t.chrt_id,s.quantity=i>0?i:1,s.cod1S=t.cod_1s;try{s.meta=t.meta_json?JSON.parse(t.meta_json):null}catch(e){}return s.targetUrl=null===(n=t.target_url)||void 0===n?void 0:n.replace(/\x00/g,""),s.isDeleted=t.is_deleted,s.timestamp=t.client_ts,s._fromSync=!0,s.viewFlags=t.viewFlags,s},e.fromWbxBasketProduct=function(t){const n=new e,s=+t.count;return n.characteristicId=n.id=+t.product_option_id,n.quantity=s>0?s:1,n.cod1S=t.product_id,n.targetUrl=t.target_url,n.timestamp=t.added_timestamp,n.meta=t.meta,n.viewFlags=t.viewFlags,n},e.fromCardModel=function(t,n,s){var i,r,o,a,l,c,u,d;const h=new e,p=+t.quantity,m=WbSpaModel.prototype.$analitic.analiticsInfoToListName(Object.assign({l:"AAA",lw:"IT"},t)),g=null===(i=t.meta)||void 0===i?void 0:i.analitic,f=(null==g?void 0:g.logs)||t.logs||(null===(o=null===(r=t.targetInfo)||void 0===r?void 0:r.analiticsInfo)||void 0===o?void 0:o.logs)||"";g&&f&&(g.logs=f),t.meta||(t.meta={}),t.meta.analitic=g;const y=WbSpaModel.prototype.$user.getUserGradeFromCache();if(h.characteristicId=h.id=+t.characteristicId,h.quantity=p>0?p:1,h.maxQuantity=(null==n?void 0:n.totalQuantity)||10,h.cod1S=t.cod1S,h.targetUrl=`EX|${t.iid||"1"}|${m}|${f}`,h.priceWithCoupon=h.priceWithCouponAndDiscount=h.priceWithCouponAndSpp=h.priceWithSale=h.price=t.priceWithCouponAndDiscount,h.subjectId=t.subjectId,h.subjectParentId=t.subjectParentId,h.supplierId=t.supplierId,h.supplierName=t.supplier,h.reviewRating=t.reviewRating,h.feedbacks=t.feedbacks||t.commentsCount,h.meta=t.meta,h.timestamp=Date.now()/1e3|0,h.viewFlags=(null==n?void 0:n.viewFlags)||t.viewFlags,n){if(h.brandName=n.brand,h.goodsName=n.name,h.colorName=n.colorName||n.color,h.promos=n.promotions,h.isUnrefusable=n.isUnrefusable,h.isPrepaid=n.isPrepaid,h.isUnreturnable=n.isUnreturnable,h.isVerificationReturn=n.isVerificationReturn,h.logisticsCost=n.logisticsCost,h.payloadV2=n.payloadV2,h.whDtype=null!==(a=n.whDtype)&&void 0!==a?a:n.dtype,h.catalogReturnCost=null!==(l=n.returnCost)&&void 0!==l?l:null===(c=n.catalogPrice)||void 0===c?void 0:c.return,h.saleConditions=n.saleConditions,n.panelPromoId&&(h.panelPromoId=n.panelPromoId),n.feedbacks&&(h.feedbacks=n.feedbacks),n.reviewRating&&(h.reviewRating=n.reviewRating),n.deliveryHours&&(h.deliveryHours=n.deliveryHours),n.catalogPrice?(h.price=h.priceWithCoupon=n.catalogPrice.basic/100,h.salePrice=h.priceWithSale=h.priceWithCouponAndDiscount=h.priceWithCouponAndSpp=n.catalogPrice.total/100,h.sale=n.catalogPrice.sale):(h.priceWithSale=n.salePrice,h.sale=n.sale),WbSpaModel.prototype.$useCatalogReturnCost()&&(h.returnCost=Math.round(h.catalogReturnCost/100),4==(null==y?void 0:y.version))){const e=16&h.whDtype||32&h.whDtype?1:y.return_fee;h.returnCost=Math.min(h.priceWithCouponAndDiscount,h.returnCost*e)}const e=null===(u=n.sizes)||void 0===u?void 0:u.find((e=>e.ch===h.id));if(e&&(h.sizeName=e.nm,h.stocks=e.stocks,e.deliveryHours&&(h.deliveryHours=e.deliveryHours),h.payloadV2=e.payloadV2,h.whDtype=null!==(d=e.whDtype)&&void 0!==d?d:e.dtype,e.returnCost&&(h.catalogReturnCost=e.returnCost),e.logisticsCost&&(h.logisticsCost=e.logisticsCost),e.saleConditions&&(h.saleConditions=e.saleConditions),e.catalogPrice?(h.price=h.priceWithCoupon=e.catalogPrice.basic/100,h.salePrice=h.priceWithSale=h.priceWithCouponAndDiscount=e.catalogPrice.total/100,h.sale=e.catalogPrice.sale):e.salePrice&&e.salePrice!=h.priceWithCouponAndDiscount&&(h.priceWithCoupon=h.priceWithCouponAndDiscount=h.priceWithCouponAndSpp=h.priceWithSale=h.price=e.salePrice),e.saleConditions&&wb.xnm.expandSaleConditions(h,e),WbSpaModel.prototype.$useCatalogReturnCost()&&e.returnCost&&(h.returnCost=Math.round(h.catalogReturnCost/100),4==(null==y?void 0:y.version)))){const e=16&h.whDtype||32&h.whDtype?1:y.return_fee;h.returnCost=Math.min(h.priceWithCouponAndDiscount,h.returnCost*e)}}return s&&(h.stocks=s),h.stocks&&(h.maxQuantity=h.stocks.sumBy((e=>e.qty))),h.canBeOrdered=h.maxQuantity>0,h},e.fromBasketInputExtended=function(t){const n=e.fromCardModel(t,null,t.stocks);return n.price=t.price,n.colorName=t.colorName,n.goodsName=t.goodsName,n.sizeName=t.sizeName,n.viewFlags=t.viewFlags,n},e.enrichCatalogGood=function(e,t={}){var n,s,i,r,o,a,l;if(!e)return;const c=null===(n=t.sizes)||void 0===n?void 0:n.find((t=>t.optionId===e.characteristicId)),u=null!==(i=null===(s=null==c?void 0:c.stocks)||void 0===s?void 0:s.some((e=>e.qty>0)))&&void 0!==i&&i,d=null!==(r=null==c?void 0:c.price)&&void 0!==r?r:t.price;if(e.brandName=t.brand,e.goodsName=t.name,e.colorName=null===(a=null===(o=t.colors)||void 0===o?void 0:o[0])||void 0===a?void 0:a.name,e.canBeOrdered=u,e.price=u?d.basic/100:0,e.priceWithSale=u?d.total/100:0,e.priceWithCoupon=u?d.basic/100:0,e.priceWithCouponAndDiscount=d.total/100,e.sale=u?d.sale:0,e.totalSale=u?d.sale:0,e.salePrice=u?d.total/100:0,e.sizeName=null!==(l=null==c?void 0:c.origName)&&void 0!==l?l:"",e.stocks=null==c?void 0:c.stocks,e.stocks&&(e.maxQuantity=e.stocks.sumBy((e=>e.qty))),e.subjectId=t.subjectId,e.subjectParentId=t.subjectParentId,e.supplierId=t.supplierId,e.supplierName=t.supplier,e.volume=t.volume,e.reviewRating=t.reviewRating,e.feedbacks=t.feedbacks||t.commentsCount,e.promos=t.promotions,e.isUnrefusable=t.isUnrefusable,e.isPrepaid=t.isPrepaid,e.isUnreturnable=t.isUnreturnable,e.isVerificationReturn=t.isVerificationReturn,e.priceWithCouponAndSpp=e.priceWithCouponAndDiscount,e.catalogReturnCost=d.return,WbSpaModel.prototype.$useCatalogReturnCost()){e.returnCost=Math.round(d.return/100);const t=WbSpaModel.prototype.$user.getUserGradeFromCache();if(4==(null==t?void 0:t.version)){const n=16&e.whDtype||32&e.whDtype?1:t.return_fee;e.returnCost=Math.min(e.priceWithCouponAndDiscount,e.returnCost*n)}}return e.logisticsCost=d.logistics||0,e.priceBasic=d.basic,e.priceTotal=d.total,e.whDtype=null==c?void 0:c.dtype,e.payloadV2=null==c?void 0:c.payload,e.saleConditions=null==c?void 0:c.saleConditions,e.viewFlags=t.viewFlags,t.panelPromoId&&(e.panelPromoId=t.panelPromoId),e},e.enrichStaticGood=function(e,t={}){if(e)return e.goodsName=t.n||e.goodsName||"Название не указано",e.colorName=t.c||e.colorName,e},e}();const ut=ct;const dt=function(){function e(e,t){this.settings={},this.paymentTypes=[e?{userGrade:0,bankCards:[{id:"_newcardid",name:"Привязать карту",createNew:!0,system:"bindnew"}],isOnline:!0,isCreditCard:!0,codeLower:"crd",name:"Оплата картой",id:"63",available:!0}:{isOnline:!0,isCreditCard:!0,codeLower:"crd",name:"Оплата картой",id:"63",available:!0}],this.deliveryWay="self",this.basketItems=null!=t?t:[]}return e.calc=function(e){e.basketItems.forEach((e=>{e.stocks&&(e.maxQuantity=e.stocks.sumBy((e=>e.qty))),e.maxQuantity>0&&e.maxQuantity<e.quantity?e.partQuantity=e.maxQuantity:e.partQuantity=null,e._qnt=e.partQuantity||e.quantity,wb.global.settings.switches.dontIncludeSoldItemsInOrder&&!e.maxQuantity&&(e.includeInOrder=!1)}));const t=e.basketItems.filter((e=>e.maxQuantity>0));return 1===t.length&&(t[0].includeInOrder=!0),e.totalQuantity=e.basketItems.sumBy((e=>e._qnt)),e},e}(),ht=256;let pt=function(){function e(e,t,n){this._isAuth=e,this.sessionService=t,this.$eventBus=n,this.$eventBus.addEventListener("onUserAuth",this.clearMemory.bind(this))}var t=e.prototype;return t.clearMemory=function(){this.innerStorage=new dt(this.isAuth,[])},t.migrate=function(){if(localStorage.hasItem("_basket")){const e=this._getGuestBasket();return e.basketItems&&e.basketItems.reverse(),this.addManyItems(e.basketItems,!0),this._detGuestBasket(),e.basketItems}return[]},t.addManyItems=function(e,t){if(!(null==e?void 0:e.length))return{isSuccess:!1,error:"[basket] Неизвестная ошибка"};const n=this._syncFrom();if(!t&&n.basketItems.length+e.length>ht)return{isSuccess:!1,error:String.format("Вы не можете добавить в корзину больше {0}",$.views.converters.pluralize(ht,"{0} товар","{0} товара","{0} товаров"))};let s=!0;const i=n.basketItems.filter((e=>e.maxQuantity>0)).every((e=>e.includeInOrder));for(let t=0;t<e.length;t++){const r=n.basketItems.findIndex((n=>n.characteristicId===e[t].characteristicId));-1===r?(s=!1,e[t].timestamp<=this.lastTs&&(e[t].timestamp=this.lastTs+1),e[t].includeInOrder=i,n.basketItems.unshift(e[t])):n.basketItems[r].timestamp>0&&(e[t].timestamp=n.basketItems[r].timestamp,e[t].quantity=n.basketItems[r].quantity)}this._syncTo();return{isExist:s,isSuccess:!0,xnmDictTask:this._enrichProducts(n.basketItems.map((e=>e.cod1S)))}},t.clearItems=function(e){if((null==e?void 0:e.length)>0){const t=this._syncFrom();t.basketItems=t.basketItems.filter((function(t){return-1===e.indexOf(t.characteristicId)})),this._syncTo()}},t.add=function(e){const t=this._syncFrom();if(t.basketItems.length+1>ht)return{isSuccess:!1,error:String.format("Вы не можете добавить в корзину больше {0}",$.views.converters.pluralize(ht,"{0} товар","{0} товара","{0} товаров"))};const n=t.basketItems.find((t=>t.characteristicId===e.characteristicId));n?n.timestamp>0&&(e.timestamp=n.timestamp,e.quantity=n.quantity):(e.timestamp<=this.lastTs&&(e.timestamp=this.lastTs+1),e.includeInOrder=t.basketItems.filter((e=>e.maxQuantity>0)).every((e=>e.includeInOrder)),t.basketItems.unshift(e)),this._syncTo();return{isExist:!!n,isSuccess:!0,xnmDictTask:this._enrichProducts(t.basketItems.map((e=>e.cod1S)))}},t.updateMeta=function(e,t){if(!e||!t)return!1;const n=this._syncFrom().basketItems.find((t=>t.characteristicId===e));return!!n&&(n.meta=WbSpaModel.prototype.$helper.deepMerge(n.meta||{},t),this._syncTo(),!0)},t.refresh=function(e,t){var n,s,i,r,o,a,l;const c=this._syncFrom();if("remove"===t){const t=(null===(n=e.chrtIds)||void 0===n?void 0:n.length)>0?e.chrtIds[0]:e.chrtId;c.basketItems=c.basketItems.filter((function(e){return e.characteristicId!==t}))}else if("recalc"===t&&e.quantity>0){const t=c.basketItems.find((t=>t.characteristicId===e.chrtId));t&&(t.quantity=e.quantity)}!e.isBuyItNowMode&&e.includeInOrderMap&&c.basketItems.forEach((t=>{e.includeInOrderMap.has(t.id)&&(t.includeInOrder=e.includeInOrderMap.get(t.id))})),c.deliveryWay=e.deliveryWay;let u=WbSpaModel.prototype.$services.userAddressService.get(e.addressId,e.deliveryWay);u&&(null===(s=c.deliveryPoint)||void 0===s?void 0:s.addressId)!==u.addressId&&(c.deliveryPoint=u,c.deliveryPriceModel=null),e.paymentTypeId&&e.paymentTypeId!==(null===(i=c.paymentType)||void 0===i?void 0:i.id)&&(c.paymentType=c.paymentTypes.find((t=>t.id===e.paymentTypeId&&t.available))),(null===(r=c.paymentType)||void 0===r?void 0:r.isCreditCard)&&e.bankCardId&&e.bankCardId!==(null===(o=c.paymentType)||void 0===o?void 0:o.bankCardId)&&(c.paymentType.bankCardId=e.bankCardId,c.paymentType.selectedBankCard=null===(l=null===(a=c.paymentTypes.find((e=>e.isCreditCard)))||void 0===a?void 0:a.bankCards)||void 0===l?void 0:l.find((t=>t.id===e.bankCardId))),this._syncTo()},t.deleteCards=function(e){var t;if(!e)return;const n=null===(t=this._syncFrom().paymentTypes)||void 0===t?void 0:t.find((e=>e.isCreditCard));n&&(n.bankCards=(n.bankCards||[]).filter((t=>-1===e.indexOf(t.id)))),this._syncTo()},t.setCardDefault=function(e){this.getBankCards().forEach((t=>{t.default=t.id===e})),this._syncTo()},t.setAddress=function(e,t){var n;const s=this._syncFrom();let i=WbSpaModel.prototype.$services.userAddressService.get(e,t);i&&(null===(n=s.deliveryPoint)||void 0===n?void 0:n.addressId)!==i.addressId&&(s.deliveryWay=t,s.deliveryPoint=i,s.deliveryPriceModel=null,this._syncTo())},t.getBankCards=function(){var e,t;return(null===(t=null===(e=this._syncFrom().paymentTypes)||void 0===e?void 0:e.find((e=>e.isCreditCard)))||void 0===t?void 0:t.bankCards)||[]},t.getPaymentsForDeliveries=async function(e){var t;const{payments:n}=await this.$httpClient.fetchJSON(`${this.$services.cartService.publicBasketApiUrl}/payment/list/fordeliveriesv2`,{method:"POST",credentials:"include",body:new URLSearchParams({currency:e})})||{};return null===(t=null==n?void 0:n.find((e=>"crd"==e.codeLower)))||void 0===t||t.bankCards.forEach((e=>{e.isSbp||(e.icon=e.system)})),n},t.getItems=function(){return this._syncFrom().basketItems},t.enrichItemsLocalInfo=function(e){const t=this._syncFrom().basketItems.toMap((e=>e.id),(e=>e));e.forEach((e=>{const n=t.get(e.id);(null==n?void 0:n.meta)&&(e.meta=null==n?void 0:n.meta)}))},t.save=function(e){const t=this._syncFrom(),n=JSON.parse(JSON.stringify(e,((e,t)=>"basketItems"===e?void 0:t)));n.basketItems=e.basketItems.reduce(((e,t)=>(e.get(t.id)&&e.set(t.id,wb.helpers.deepClone(t)),e)),t.basketItems.toMap((e=>e.id),(e=>e))).toArray(),this._syncTo(n)},t.updateIncludeInOrder=function(e){if(!e)return;this._syncFrom().basketItems.forEach((t=>{e.has(t.id)&&(t.includeInOrder=e.get(t.id))})),this._syncTo()},t.get=function(){return this._syncFrom()},t.getDeliveryPoint=function(){return this._syncFrom().deliveryPoint},t.buyItNow=function(e){const t=this._syncFrom(),n=t.basketItems.find((t=>t.characteristicId==e));if(n){const e=new dt(this.isAuth);return e.isBuyItNowMode=!0,n.includeInOrder=!0,e.basketItems.unshift(n),e.deliveryWay=t.deliveryWay,e.deliveryPoint=t.deliveryPoint,e.paymentTypes=t.paymentTypes,e.paymentType=t.paymentType,e.paymentType&&(e.paymentType.bankCardId=t.paymentType.bankCardId,e.paymentType.selectedBankCard=t.paymentType.selectedBankCard),dt.calc(e),e}return t},t.enrichProductsIfNeedAsync=function({force:e}={}){const t=this._syncFrom();return t.basketItems.length>0&&t.basketItems.every((e=>!e.hasOwnProperty("priceWithCouponAndDiscount")&&!e.hasOwnProperty("price")))||e?this._enrichProducts(t.basketItems.map((e=>e.cod1S))):Promise.resolve([])},t._getGuestBasket=function(){const e=localStorage.getObject("_basket");return e||new dt(!1)},t._detGuestBasket=function(){localStorage.removeItem("_basket")},t._syncFrom=function(){var e,t,n;try{const n=this.basketKey,s=localStorage.getObject(n);return s?(this.innerStorage=s,this.innerStorage?this.innerStorage.basketItems||(this.innerStorage.basketItems=[]):this.innerStorage=new dt(this.isAuth,[])):(null===(t=null===(e=this.innerStorage)||void 0===e?void 0:e.basketItems)||void 0===t?void 0:t.length)||(this.innerStorage=new dt(this.isAuth,[])),this.isAuth&&(localStorage.clearStartsWith("wb_basket_",n),localStorage.clearStartsWith("wb___basketStorage_",`wb___basketStorage_${this.sessionService.getUserUid()}`)),this.innerStorage}catch(e){return console.error(e),wb.spa.logError(e,"cartService syncfrom"),null!==(n=this.innerStorage)&&void 0!==n?n:new dt(this.isAuth)}},t._syncTo=function(e){var t;e&&(this.innerStorage=e),dt.calc(this.innerStorage);try{localStorage.putObject(this.basketKey,this.innerStorage)}catch(e){}this.$eventBus.dispatchEvent(new CustomEvent("LocalBasketUpdateCount",{detail:{count:null===(t=this.innerStorage)||void 0===t?void 0:t.totalQuantity}}))},t._enrichProducts=async function(e){if(0===e.length)return{};const[t,n]=await Promise.all([wb.xnm.getXnmProducts(e,!1),wb.xnm.getProductColorsByNmIdsAsync(e)]),s=this._syncFrom();let i=!1;return s.basketItems.forEach((e=>{t[e.cod1S]&&(ut.enrichCatalogGood(e,t[e.cod1S]),i=!0),n[e.cod1S]&&(ut.enrichStaticGood(e,n[e.cod1S]),i=!0)})),s.currency=WbSpaModel.prototype.$user.getCurrency(),i&&this._syncTo(s),t},t.updateWbProducts=function(e){const t=this._syncFrom();localStorage.hasItem(this.basketKey)||this._syncTo(),(null==e?void 0:e.length)&&(t.basketItems=[...t.basketItems,...e.map((e=>ut.fromWbBasketProduct(e)))].reduce(((e,t)=>{const n=e.findIndex((e=>e.id===t.id));return-1!==n||t.isDeleted?-1!==n&&(e[n].timestamp=Math.max(e[n].timestamp,t.timestamp),e[n].quantity=t.quantity,e[n].targetUrl=t.targetUrl,e[n].isDeleted=t.isDeleted,e[n].meta=t.meta):(t._fromSync&&(t.includeInOrder=e.filter((e=>e.maxQuantity>0)).every((e=>e.includeInOrder)),delete t._fromSync),e.push(JSON.parse(JSON.stringify(t)))),e}),[]).filter((e=>!e.isDeleted)).sort(((e,t)=>t.timestamp-e.timestamp)),this._syncTo())},(0,i.A)(e,[{key:"isAuth",get:function(){return this._isAuth()}},{key:"lastTs",get:function(){var e,t;return null===(t=null===(e=this.innerStorage.basketItems)||void 0===e?void 0:e[0])||void 0===t?void 0:t.timestamp}},{key:"count",get:function(){const e=this._syncFrom();return this.$eventBus.dispatchEvent(new CustomEvent("LocalBasketUpdateCount",{detail:{count:e.totalQuantity}})),e.totalQuantity}},{key:"basketKey",get:function(){return this.isAuth?`wb_basket_${this.sessionService.getUserUid()}`:"_basket"}}])}();const mt="wb___basketMgrt";const gt=function(){function e(){}var t=e.prototype;return t.check=function(e){return this._migrated||(this._migrated=localStorage.getItem(mt)===e),this._migrated},t.set=function(e){this._migrated=!!e;try{this._migrated?localStorage.setItem(mt,e):localStorage.removeItem(mt)}catch(e){}},e}();let ft=function(e){this.ts=e.modify_time,this.path=e.path;const t=e.path.split("/"),n=t.find((e=>e.split("|").length>1));if(n){const e=n.split("|");this.sessionId=e[0],this.ver=parseInt(e[1])}else!0===e.is_dir&&(this.isDir=e.is_dir,this.dirId=t[t.length-1])},yt=function(){function e(e){this.storage=e}var t=e.prototype;return t.getList=async function(){const e=await this.storage.getList.apply(this.storage,arguments);if(null===e)throw"userstorage err";return e},t.getData=async function(){const e=await this.storage.getData.apply(this.storage,arguments);if(null===e)throw"userstorage err";return e},e}(),vt=function(){function e(e){this.constants=e,this.userStorage=new yt(this.$services.apiUserStorage),this.wbBasketMigrated=new gt}var t=e.prototype;return t.unAuth=function(){this.clear(),this.wbBasketMigrated.set(!1)},t.clear=function(){localStorage.removeItem("wbx___basketSyncDate"),localStorage.removeItem("wbx___basketLocal"),localStorage.removeItem("wbx___basketRemote"),localStorage.removeItem("wbx___basketId"),localStorage.removeItem("wbx___basketMgrt"),localStorage.removeItem("wb__basketSyncDate"),localStorage.removeItem("wb__basketId"),localStorage.removeItem("wb__queue_basket-fetch")},t.sync=async function(e){const t=new AbortController;return setTimeout((()=>t.abort()),e||5e3),this._task||(this._task=this._sync(t.signal)),await this._task},t._sync=async function(e){var t;try{const n={signal:e},s=await this._getLastIndBasket(n);if(this.isWbBasketMigrated)return null;const i=(null===(t=await this.userStorage.getList(`cart/${s}`,n))||void 0===t?void 0:t.map((e=>new ft(e))))||[],r=await this._getData(i,n);return r.selectMany((e=>e.data)).reduce(((e,t)=>{const n=e.findIndex((e=>e.product_option_id===t.product_option_id));return t.added_timestamp>1e12&&(t.added_timestamp=t.added_timestamp/1e3|0),-1===n?e.push(Object.assign({},t)):(e[n].added_timestamp=Math.min(e[n].added_timestamp,t.added_timestamp),e[n].count+=t.count,e[n].target_url=e[n].target_url||t.target_url),e}),[]).filter((e=>e.product_id&&e.product_option_id&&e.count>0)).sort(((e,t)=>e.added_timestamp-t.added_timestamp))}catch(e){return null}finally{this._task=null}},t._getLastIndBasket=async function(e){const t=await this.userStorage.getList("cart",e),n=(null==t?void 0:t.map((e=>new ft(e))))||[];null!=t&&n.some((e=>e.path===this.constants.WB_BASKET_SYNC_FILEPATH))&&this.wbBasketMigrated.set(this.$auth.um.userUid);const s=n.filter((e=>!0===e.isDir));if(0!==s.length){const e=s.filter((e=>!isNaN(e.dirId))).reduce(((e,t)=>Number(e.dirId)>Number(t.dirId)?e:t));return Number(e.dirId)}return 0},t._getData=async function(e,t){if(!e.length)return[];let n=await this.userStorage.getData(e,t);return null==n?void 0:n.reduce(((e,t)=>{const n=t.path.split("/"),s=n.find((e=>e.split("|").length>1));if(s){const i=s.split("|");let r=[];try{r=JSON.parse(this.$helper.base64.decode(t.file))}catch(e){wb.spa.logError(new Error(`[BASKET_WBX_SYNC]: file is corrupted path:${n}`),t)}e.push({ts:t.modify_time,sessionId:i[0],data:r})}return e}),[])},(0,i.A)(e,[{key:"isWbBasketMigrated",get:function(){return this.wbBasketMigrated.check(this.$auth.um.userUid)}}])}();const bt=vt;const wt=function(){function e(e,t,n,s,i){this.chrt_id=+t;const r=+n;this.quantity=r>0?r:1,this.cod_1s=s,this.client_ts=i||Date.now()/1e3|0,this.op_type=e||1}return e.fromLocalBasket=function(t,n){const s=new e(n,t.characteristicId,t.quantity,t.cod1S,t.timestamp);return s.client_ts>1e12&&(s.client_ts=s.client_ts/1e3|0),s.target_url=t.targetUrl,t.meta&&(s.meta_json=JSON.stringify(t.meta)),s},e.toUpdate=function(t){return e.fromLocalBasket(t,2)},e.toDelete=function(t){return new e(3,t)},e}(),St="wb___basketStorage",_t={ts:0,c_ts:0,operations:new Map};const Ct=function(){function e(e){window.addEventListener("storage",(e=>{e.key===this._basketKey&&this._pull()})),WbSpaModel.prototype.$eventBus.addEventListener("onUserAuth",this._pull.bind(this)),this.getLocalItems=e,this._data=_t}var t=e.prototype;return t.checkBug=function(){this._data.ts>10&&WbSpaModel.prototype.$auth.um.userUid&&!localStorage.hasItem(`wb_basket_${WbSpaModel.prototype.$auth.um.userUid}`)&&(wb.spa.logError(new Error(`[WB_BASKET_STORAGE]: key wb_basket_${WbSpaModel.prototype.$auth.um.userUid} notfound`),{ts:this.ts,opLen:this._data.operations.size,hasKey:localStorage.hasItem(this._basketKey)}),this._data.ts=10)},t.hasOperations=function(){return!!this._data.operations.size},t.getOperations=function(){return this.ts||(this._data.operations.clear(),this.getLocalItems().forEach((e=>{this._data.operations.set(e.chrt_id,e)}))),this._data.operations.toArray()},t.setTs=function(e){e&&(this._data.ts=e,this._push())},t.setClientTs=function(e){this._data.c_ts=e,this._push()},t._mergeOp=function(e,t){return(null==e?void 0:e.chrt_id)===t.chrt_id&&(1===e.op_type&&2===t.op_type&&(t.op_type=1),2===e.op_type&&2===t.op_type&&(t.meta=t.meta||e.meta,t.quantity=t.quantity||e.quantity)),t},t.normalize=function(e,t){e.forEach((e=>{const t=this._data.operations.get(e.chrt_id);t.quantity===e.quantity&&t.client_ts===e.client_ts&&t.op_type===e.op_type&&this._data.operations.delete(e.chrt_id)}));let n=[];return(null==t?void 0:t.length)>0&&(t.forEach((e=>{const t=this._data.operations.get(e.chrt_id);if(t){if(!e.is_deleted)return;if(1===t.op_type)return;this._data.operations.delete(e.chrt_id)}n.push(e)})),this._push()),n},t.update=function(e){if((null==e?void 0:e.length)>0){for(let t=0;t<e.length;t++){const n=e[t].chrt_id;this._data.operations.set(n,this._mergeOp(this._data.operations.get(n),e[t]))}this._push()}},t.clear=function(){localStorage.removeItem(St)},t._pull=function(){const e=localStorage.getObject(this._basketKey)||localStorage.getObject(St);e&&(e.operations=Array.isArray(e.operations)?new Map(e.operations.map((e=>[e.chrt_id,e]))):_t.operations),this._data=null!=e?e:_t},t._push=function(){try{const e=this._data.operations.toArray();localStorage.putObject(this._basketKey,{ts:this._data.ts,c_ts:this._data.c_ts,operations:e}),localStorage.hasItem(St)&&localStorage.putObject(St,{ts:this._data.ts,c_ts:this._data.c_ts,operations:e})}catch(e){}},(0,i.A)(e,[{key:"_basketKey",get:function(){return`${St}_${WbSpaModel.prototype.$auth.um.userUid}`}},{key:"clientTs",get:function(){return this._data.c_ts}},{key:"ts",get:function(){return this._data.ts}}])}(),kt=g.F3;let It=function(){function e(e){this.localBasket=e,this.storage=new Ct((()=>this.localBasket.getItems().map((e=>wt.fromLocalBasket(e))))),this.debounceSync=this.$helper.debounce(this._sync.bind(this),3e3),this.debounceShortSync=this.$helper.debounce(this._sync.bind(this),1e3),setTimeout((()=>this._backupBasketAsync()),11e3)}var t=e.prototype;return t.unAuth=function(){this.storage.clear()},t.onBeforeSignOut=function(){this.storage.hasOperations()&&this._sync()},t.addItem=function(e){e&&(this.storage.update([wt.fromLocalBasket(e)]),this.debounceShortSync())},t.addManyItems=function(e){e.length&&(this.storage.update(e.map((e=>wt.fromLocalBasket(e)))),this.debounceShortSync())},t.clearItems=function(e){e.length&&(this.storage.update(e.map((e=>wt.toDelete(e)))),this.debounceShortSync())},t.updateItem=function(e){if(!e)return;const t=this.localBasket.getItems().find((t=>t.characteristicId===e));t&&this.storage.update([wt.toUpdate(t)]),this.debounceSync()},t.refresh=function(e,t){var n,s,i,r;if("remove"===t){const t=null!==(r=null!==(s=null===(n=e.chrtIds)||void 0===n?void 0:n[0])&&void 0!==s?s:null===(i=e.items)||void 0===i?void 0:i[0].chrtId)&&void 0!==r?r:e.chrtId;t>0&&this.storage.update([wt.toDelete(t)])}else"recalc"===t&&this.updateItem(e.chrtId);this.debounceSync()},t.sync=async function(e,t){return await this._sync(e,t)},t._sync=async function(e,t){return await navigator.locks.request("lock-basket-sync",(async n=>{this.storage.checkBug();const s=this.storage.getOperations();if(t&&!s.length&&this.storage.clientTs>(Date.now()/1e3|0))return!1;const i=this.$services.sessionService.getSession();try{const t=await this._doSync({sessionId:i,operations:s,signal:e});if(this._sendMetrics(t.state),0===t.state&&t.change_ts>0)return this._updateProducts(t,s);if(1===t.state){const e=this.localBasket.getItems().map((e=>wt.fromLocalBasket(e))),t=await this._doSync({sessionId:i,operations:e,rememberMe:!0});if(0===t.state&&t.change_ts>0)return this._updateProducts(t,s)}else t&&wb.spa.logError(new Error(`[WB_BASKET_SYNC]: sync state:${t.state}`),{result:t,ts:this.storage.ts,deviceId:i,opLen:s.length,hasJwt:this.$auth.isAuth})}catch(e){const t=!e.isCustomError&&e instanceof TypeError&&("Failed to fetch"===e.message||"NetworkError when attempting to fetch resource."===e.message||"Cancelled"===e.message);this._sendMetrics(t?"network":"error"),wb.spa.logError(new Error(`[WB_BASKET_SYNC]: ${e.message}`),{ts:this.storage.ts,deviceId:i,opLen:s.length,hasJwt:this.$auth.isAuth})}return!1}))},t._updateProducts=function(e,t){const n=this.storage.normalize(t,e.result_set);return this.localBasket.updateWbProducts(n),this.storage.setTs(e.change_ts),this.storage.setClientTs(235+(Date.now()/1e3|0)),e.change_ts>0},t._doSync=function({sessionId:e,operations:t,rememberMe:n=!1,signal:s=null}){return this.$wbxHttpClient.fetch(`${kt}/sync?ts=${this.storage.ts}&device_id=${e}${n?"&remember_me=true":""}`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json","Wb-AppType":"site"},signal:s}).then((async e=>e.ok?e.json():{})).then((e=>(e.result_set&&(e.result_set=e.result_set[0]||[]),e)))},t._sendMetrics=function(e){try{this.$httpClient.fetch(`/webapi/logging/wbbasket/metrics?status=${e}`,{method:"POST"})}catch(e){}},t._backupBasketAsync=function(){if(this.storage.ts<=0)return;const e=this.localBasket.getItems().map((e=>{let t=wt.fromLocalBasket(e);return delete t.op_type,t})),t=[{path:"/cart/wb_backup",file:this.$helper.base64.encode(JSON.stringify(e))}];this.$services.apiUserStorage.setData(t)},e}();const Mt=It;const $t=function(e){var t,n,s,i;this.characteristicId=+e.characteristicId;const r=+e.quantity;this.quantity=r>0?r:1,this.cod1S=e.cod1S,this.customsFeeAmount=e.customCharges,this.targetUrl=null===(t=e.targetUrl)||void 0===t?void 0:t.replace(/\x00/g,""),this.includeInOrder=e.includeInOrder,this.dstOffice=e.dstOffice,this.storeName=e.storeName,this.isLargeItem=e.isLargeItem,this.couponSale=e.couponSale,this.goodsName=e.goodsName,this.colorName=e.colorName,this.sizeName=e.sizeName,this.brandName=e.brandName,this.sale=e.sale,this.salePrice=e.salePrice,this.totalSale=e.totalSale,this.personalDiscount=e.personalDiscount,this.returnCost=e.returnCost,this.premiumSaleAmount=e.premiumSaleAmount?e.premiumSaleAmount:0,this.price=e.price,this.priceWithSale=e.priceWithSale,this.priceWithCoupon=e.priceWithCoupon,this.priceWithCouponAndSpp=e.priceWithCouponAndSpp+this.premiumSaleAmount,this.priceWithCouponAndDiscount=e.priceWithCouponAndDiscount+this.premiumSaleAmount,this.paymentSaleAmount=e.paymentSaleAmount,this.subjectId=e.subjectId,this.subjectRoot=e.subjectParentId,this.reviewRating=e.reviewRating,this.commentsCount=e.commentsCount||e.feedbacks,this.payloadV2=e.payloadV2,this.logisticsCost=e.logisticsCost,this.whDtype=e.whDtype,this.supplierId=e.supplierId,this.supplierName=e.supplierName,this.saleConditions=e.saleConditions,this.catalogReturnCost=e.catalogReturnCost,this.maxQuantity=e.maxQuantity,this.volume=e.volume,this.storeIds=(null===(s=null===(n=e.stocks)||void 0===n?void 0:n.filter((e=>e.qty>0)))||void 0===s?void 0:s.map((e=>e.wh)))||[],this.stocks=null===(i=e.stocks)||void 0===i?void 0:i.reduce(((e,t)=>(e[t.wh]={storeId:t.wh,quantity:t.qty||0,time1:t.time1,time2:t.time2,priority:t.priority},e)),{}),this.timestamp=e.timestamp,this.shadeModel=e.shadeModel},Pt=pt,Ot=ut,Tt={WB_BASKET_SYNC_FILE:"migration-us-wb",WB_BASKET_SYNC_FILEPATH:"cart/migration-us-wb"};let At=function(){function e(){}var t=e.prototype;return t.init=function(){Object.setPrototypeOf(bt.prototype,WbSpaModel.prototype),Object.setPrototypeOf(Mt.prototype,WbSpaModel.prototype),this.getBankCards=this.$helper.lockPromise(this.getBankCards),this.localBasket=new Pt((()=>this.$router.userIsAuth),this.$services.sessionService,this.$eventBus),this.wbxBasket=new bt(Tt),this.wbxBasket.clear(),this.wbBasket=new Mt(this.localBasket),this.srv=this.wbBasket,this.$eventBus.addEventListener("onUserAuth",this.sync.bind(this)),this.$eventBus.addEventListener("onUserUnAuth",this.wbBasket.unAuth.bind(this.wbBasket)),this.$eventBus.addEventListener("onBeforeSignOut",this.wbBasket.onBeforeSignOut.bind(this.wbBasket)),$.observe(this.$router,"activeContainer","showPreview",((e,t)=>{document.body.classList.toggle("body-gray",2===e.target.activeContainer&&!e.target.showPreview)})),"hidden"in document&&"visibilityState"in document&&document.addEventListener("visibilitychange",(e=>{"visible"===document.visibilityState&&this.sync("interval")}))},t.sync=async function(e){var t;if(this.$router.userIsAuth){let n=new AbortController;return n._dt=(new Date).getTime()+6e4,(null==e?void 0:e.timeout)?(this.backgroundController&&this.backgroundController._dt<(new Date).getTime()?(this.backgroundController.abort(),this.backgroundController=null):this.backgroundController&&(n=this.backgroundController),setTimeout((()=>n.abort()),e.timeout)):this.backgroundController=n,this._syncProcess=null!==(t=this._syncProcess)&&void 0!==t?t:this.srv.sync(n.signal,"interval"===e),this._syncProcess.catch((e=>{})).finally((()=>{this.$router.userIsAuth&&(this._migrate(),this.localBasket.enrichProductsIfNeedAsync(),this.migrateFromUserStorageAsync(2e3)),this._syncProcess=null,this.backgroundController=null}))}},t.migrateFromUserStorageAsync=async function(e){if(this.wbxBasket.isWbBasketMigrated||this.$auth.isUserGuid||this.$router.userId>146e6)return;const t=await this.wbxBasket.sync(e);t&&this.addManyItems(t.map((e=>Ot.fromWbxBasketProduct(e))),!0);const n=await this.srv.sync();t&&!this.wbxBasket.isWbBasketMigrated&&n&&(await this.$services.apiUserStorage.setData([{path:`/cart/${Tt.WB_BASKET_SYNC_FILE}`,file:"W10="}]),this.localBasket.enrichProductsIfNeedAsync(),wb.spa.logError(new Error(`[CART_SERVICE]: synced ${t.length} items`)))},t.updateMeta=function(e,t){t&&this.localBasket.updateMeta(e,t)&&this.srv.updateItem(e)},t.addItem=function({model:e,product:t,stores:n}){const s=Ot.fromCardModel(e,t,n),i=this.localBasket.add(s);return this.$router.userIsAuth&&i.isSuccess&&!i.isExist&&this.srv.addItem(s),i},t.addManyItems=function(e,t){if(!(null==e?void 0:e.length))return;const n=e.map((e=>Ot.prototype.isPrototypeOf(e)?e:Ot.fromBasketInputExtended(e))),s=this.localBasket.addManyItems(n,t);return this.$router.userIsAuth&&s.isSuccess&&!s.isExist&&this.srv.addManyItems(n),s},t.refresh=function({data:e,type:t}){this.localBasket.refresh(e,t),this.$router.userIsAuth&&t&&this.srv.refresh(e,t)},t.clearItems=function(e){(null==e?void 0:e.length)&&(this.localBasket.clearItems(e),this.$router.userIsAuth&&this.srv.clearItems(e))},t.getItems=function(){return this.localBasket.getItems().map((e=>new $t(e)))},t.getSelectedBankCard=async function(){var e;let t=this.localBasket.getBankCards();const n=null===(e=(await this.$services.userData.getUserDataAsync()).userInfo.phone)||void 0===e?void 0:e.toString().startsWith("79");null==t||t.forEach((e=>{e.isSbp||(e.icon=e.system,n||"mir"!==e.icon||(e.icon="none",e.name=e.nameNotPaySystem))}));const s=t.find((e=>e.default));return s||(t=await this.getBankCards(),null==t||t.forEach((e=>{e.isSbp||(e.icon=e.system,n||"mir"!==e.icon||(e.icon="none",e.name=e.nameNotPaySystem))})),t.find((e=>e.default)))},t.getBankCards=async function(e=6e3,t="",n=!1){var s,i,r;const o=null===(s=(await this.$services.userData.getUserDataAsync()).userInfo.phone)||void 0===s?void 0:s.toString().startsWith("79");try{t||(t=this.$user.getCurrency());const s=await this.$user.getUserGrade(t),a=await this.$httpClient.fetchJSON(`${this.publicBasketApiUrl}/webapi/lk/bankcards`,{method:"POST",credentials:"include",body:this.$helper.objectSerializer({currency:t,userGradeSigned:s,bypassCache:n},new URLSearchParams,!0,!0)},{timeout:e});null===(i=null==a?void 0:a.maskedCards)||void 0===i||i.forEach((e=>{e.isSbp||(e.icon=e.system,o||"mir"!==e.icon||(e.icon="none",e.name=e.nameNotPaySystem))}));const l=null!==(r=null==a?void 0:a.maskedCards)&&void 0!==r?r:[];return this.$eventBus.dispatchEvent(new CustomEvent("BankCardsUpdated",{detail:l})),l}catch(e){}},t.getPaymentsForDeliveries=async function(e){var t;const{payments:n}=await this.$httpClient.fetchJSON(`${this.$services.cartService.publicBasketApiUrl}/payment/list/fordeliveriesv2`,{method:"POST",credentials:"include",body:new URLSearchParams({currency:e})})||{};return null===(t=null==n?void 0:n.find((e=>e.isCreditCard)))||void 0===t||t.bankCards.forEach((e=>{e.isSbp||(e.icon=e.system)})),n},t.save=function(e){this.localBasket.save(e)},t.get=function(e){return this.localBasket.get()},t.buyItNow=function(e){return e?this.localBasket.buyItNow(e):this.localBasket.get()},t._migrate=function(){const e=this.localBasket.migrate();0!==e.length&&this.srv.addManyItems(e)},(0,i.A)(e,[{key:"BasketItemViewModel",get:function(){return Ot}},{key:"BasketItemSharedModel",get:function(){return $t}},{key:"publicBasketApiUrl",get:function(){return"ru"===(e=wb.settings.currentDomain)||"kz"===e?g.E$:g.sk+e;var e}},{key:"deliveryWays",get:function(){var e,t;let n=[{id:2,code:"self",name:"Пункт выдачи",calendars:[]},{id:1,code:"courier",name:"Курьером",calendars:[]}];return!1===(null===(t=null===(e=wb.global.settings)||void 0===e?void 0:e.switches)||void 0===t?void 0:t.enableCourierDelivery)&&(n=n.filter((e=>"courier"!==e.code))),n}},{key:"localCount",get:function(){return this.localBasket.count}},{key:"currentDeliveryType",get:function(){return this.localBasket.getDeliveryPoint()}}])}();const Dt=At;var Et,xt=n(17252);const Bt="by"===(null===(Et=wb.settings)||void 0===Et?void 0:Et.currentLocale)?"Склад поставщика":"Склад продавца",jt={0:Bt,507:"Коледино WB",686:"Новосибирск WB",1193:"Хабаровск WB",1733:"Екатеринбург WB",2737:"Уткина Заводь WB",117442:"Калуга WB",117501:"Подольск WB",117866:"Тамбов WB",117986:"Казань WB",120762:"Электросталь WB",121709:"Электросталь WB",130744:"Краснодар WB",159402:"Шушары WB",161812:"Санкт-Петербург WB",172430:"Барнаул WB",204615:"Томск WB",204939:"Астана WB",205104:"Ульяновск WB",205205:"Киров WB",205228:"Белая дача WB",206236:"Белые Столбы WB",206348:"Алексин WB",206708:"Новокузнецк WB",206844:"Калининград WB",206968:"Новосёлки WB",208277:"Невинномысск WB",208941:"Домодедово WB",209513:"Домодедово WB",210001:"Новосёлки-2 WB",210515:"Вёшки WB",208768:Bt+" Абакан",209649:Bt+" Алексин",208769:Bt+" Алматы",212038:Bt+" Алматы-2",209902:Bt+" Артём",214110:Bt+" Архангельск",122495:Bt+" Астана",204492:Bt+" Астрахань",204493:Bt+" Барнаул",206239:Bt+" Белая Дача (Москва)",213892:Bt+" Белгород",214112:Bt+" Белогорск",209112:Bt+" Белые Столбы",208814:Bt+" Бишкек",204494:Bt+" Брянск",204495:Bt+" Владикавказ",117392:Bt+" Владимир",152588:Bt+" Волгоград",204496:Bt+" Вологда",211895:Bt+" Воронеж",209111:Bt+" Гольяново (Москва)",208771:Bt+" Гомель (Беларусь)",210967:Bt+" Домодедово",208815:Bt+" Екатеринбург",211790:Bt+" Екатеринбург-2",208816:Bt+" Ереван",208772:Bt+" Иваново",172073:Bt+" Ижевск",131643:Bt+" Иркутск",208817:Bt+" Казань",208761:Bt+" Калининград",144046:Bt+" Калуга",208773:Bt+" Киров",119261:Bt+" Коледино",209109:Bt+" Комсомольский (Москва)",208818:Bt+" Краснодар",118365:Bt+" Красноярск",208774:Bt+" Крыловская (Краснодар)",172075:Bt+" Курск",209108:Bt+" Курьяновская (Москва)",208776:Bt+" Липецк",168826:Bt+" Лобня (Москва)",121700:Bt+" Минск",211672:Bt+" Минск-2",212032:Bt+" Вешки",211730:Bt+" Внуково",117673:Bt+" Москва",122259:Bt+" Москва",208777:Bt+" Мурманск",208778:Bt+" Набережные Челны",209107:Bt+" Нахабино (Москва)",209601:Bt+" Невинномысск",118535:Bt+" Нижний Новгород",213651:Bt+" Нижний Тагил",208789:Bt+" Новокузнецк",117419:Bt+" Новосибирск",209591:Bt+" Омск",208780:Bt+" Оренбург",157848:Bt+" Пенза",209592:Bt+" Пермь",208781:Bt+" Печатники",214111:Bt+" Псков",208782:Bt+" Пушкино (Москва)",204497:Bt+" Пятигорск",118019:Bt+" Ростов-на-Дону",152594:Bt+" Рязань",146666:Bt+" Самара",132043:Bt+" Санкт-Петербург",117414:Bt+" Санкт-Петербург (Уткина Заводь)",208819:Bt+" Санкт-Петербург (Шушары)",158929:Bt+" Саратов",204498:Bt+" Серов",144154:Bt+" Симферополь",208783:Bt+" Смоленск",204212:Bt+" Солнцево",158448:Bt+" Ставрополь",208784:Bt+" Сургут",115651:Bt+" Тамбов",152610:Bt+" Тверь",208785:Bt+" Темрюк (Краснодарский край)",208786:Bt+" Томск",146725:Bt+" Тюмень",209950:Bt+" Ульяновск",152700:Bt+" Уфа",208820:Bt+" Хабаровск",210815:Bt+" Хоргос",204499:Bt+" Чебоксары",152611:Bt+" Челябинск",209113:Bt+" Черная грязь (Москва)",209106:Bt+" Чертановский (Москва)",208787:Bt+" Чита",209510:Bt+" Электросталь",209110:Bt+" Южные ворота (Москва)",152612:Bt+" Ярославль"},Lt=["ru","by","kg","kz","am","uz"];let Nt=function(){function e(){}var t=e.prototype;return t.isMp=function(e){return this._checkStoreFlag(e,2)},t.isCargoStore=function(e){return this._checkStoreFlag(e,4)},t.isDbs=function(e){return this._checkStoreFlag(e,8)},t.isForeign=function(e){return this._checkStoreFlag(e,16)},t.isWbGo=function(e){return this._checkStoreFlag(e,32)},t.isExpress=function(e){return this._checkStoreFlag(e,64)},t.needVerification=function(e,t){return this._checkStoreFlag(e,1<<this._localeBit(t),"import")},t._checkStoreFlag=function(e,t,n="type"){var s;return((null===(s=this[e])||void 0===s?void 0:s[n])&t)===t},t._localeBit=function(e){const t=Lt.indexOf(null==e?void 0:e.toLowerCase());return Math.max(t,0)},e}();const Rt=Nt,Ft="wb__cargo_data_dt",Ut=9e5,Wt="cargo-stores",Ht="stores-data";const zt=function(){function e(){this._storeNames=jt,this._stores=new Rt,this._getCargoStoresAsync().then((({storesData:e})=>{if(this._cargoStores=[],e){for(let{id:t,name:n,type:s,intervals:i,workingHours:r}of e)this._storeNames[t]=n,!0&s&&this._cargoStores.push(t),this._stores[t]={name:n,type:s,intervals:i,workingHours:r};this._storesLoaded=!0}this._startJobSync()}))}var t=e.prototype;return t._openDb=function(){return this.$storageHelper.openDb("all-stores",{onupgradeneeded:e=>{e.objectStoreNames.contains(Wt)||e.createObjectStore(Wt,{keyPath:"id"}),e.objectStoreNames.contains(Ht)||e.createObjectStore(Ht,{keyPath:"id"})},version:2})},t._setStoresAsync=function(e,t){this._openDb().then((n=>{if(e instanceof Array){let t=n.transaction([Wt],"readwrite").objectStore(Wt);t.clear();for(let n=0;n<e.length;n++)t.add(e[n])}if(t instanceof Array){const e=n.transaction([Ht],"readwrite").objectStore(Ht);for(const n of t)e.put(n)}}))},t._getCargoStoresAsync=async function(){const e=await this._openDb(),[t,n]=await Promise.all([this.$storageHelper.getAll(e,Wt),this.$storageHelper.getAll(e,Ht)]);return{cargoStores:t,storesData:n}},t._startJobSync=function(){(!this._cargoStores||!this._storesLoaded||+localStorage.getItem("wb__cargo_stores_dt")<Date.now()||+localStorage.getItem(Ft)<Date.now())&&this._syncStores(),setInterval(this._syncStores.bind(this),Ut)},t._syncStores=async function(){const[e,t]=await Promise.all([this.$httpClient.fetchStaticDataV2("cargo-delivery-stores-v2.json"),this.$httpClient.fetchStaticDataV2("stores-data.json")]);if(t instanceof Array){if(t instanceof Array){this._storesLoaded=!0,this._cargoStores=[];for(let{id:e,name:n,type:s,intervals:i=null,workingHours:r=null,import:o}of t)this._storeNames[e]=n,!0&s&&this._cargoStores.push(e),this._stores[e]={name:n,type:s,intervals:i,workingHours:r,import:o};localStorage.setItem(Ft,Date.now()+Ut)}this._setStoresAsync(e,t)}},(0,i.A)(e,[{key:"cargoStores",get:function(){return this._cargoStores||[]}},{key:"names",get:function(){return this._storeNames}},{key:"storesMap",get:function(){return this._stores}}])}(),qt=[5352,2255],Vt=[1,2,3,4,6,200,204,1327,1465,1513,1616,2273,3497,4607,4735],Gt=[213,1542,2605,2693,4733,4737,212,380,733,1675,2687,4738,4827,4932,214,2616,218,757,53,61,63,305,946,1161,1422,1439,1475,1487,2318,2379,2747,2920,3489,3490,3579,3766,4200,4256,4537,5154,5220,5222,5273,5094,5096,1339,836,5131,1542,5095,4021,4022,1338,2564],Jt=[1,2,1513,2692,2688,2690,2691,2685,166,2683,2686,2684,2689,4732,4731,4730,4729,4726,4725,4724,4728,4727,4723,6093,6092,6094,6090,6096,6095,6091,5922,133,2048,74,75,409,76,132,5446,5270,168,2649,191,155,185,163,5268,158,70,1687,1641,215,170,173,1935,162,216,5269,11,217,1629,1591,69,8098,284,4377,149,172,180,161,1724,160,41,1631,8239,159,193,157,219,233,4315,148,322,171,209,1635,5271,313,156,38,285,394,174,1429,147,2110,192,1791,177,151,184,153],Kt=[786,1107],Qt=[1524,1525],Xt=[1,2,4,200,204,239,1513,5038];let Yt=[],Zt=function(){function e(){}var t=e.prototype;return t.loadProductCardAsync=async function(e,t,n=!1){var s;try{return(null===(s=this._stashedCatalogProduct)||void 0===s?void 0:s.nmId)!==e||n||this._stashedCatalogProduct.currency!==WbSpaModel.prototype.$user.getCurrency()?this.loadDynamicProductAsync(e,t,await this.loadStaticProductAsync(e)):this.fromCatalogProduct(this._stashedCatalogProduct,t)}catch(e){return null}},t.loadStaticProductAsync=async function(e){try{const[t]=await Promise.all([this.$httpClient.fetchBasicJSON(wb.helpers.url.urlProductStatic(e),{},{timeout:2e3}),wb.xnm.waitNoReturnSubjectsInitialized()]);return t}catch(e){return null}},t.loadDynamicProductAsync=async function(e,t,n,s){var i,r;if(!e||isNaN(parseInt(e)))throw new TypeError("[ProductCardService] nmId must be an integer at loadDynamicProductAsync");t&&isNaN(parseInt(t))&&(console.warn("[ProductCardService] chrtId is not an integer at loadDynamicProductAsync"),t=null),n=null!=n?n:await this.loadStaticProductAsync(e);const o=new Map;let a=null!==(i=null==n?void 0:n.colors)&&void 0!==i?i:[e];n&&(n.colors=this._colorLimiter(e,a),a=n.colors,o.set(n.nm_id,n));const l=this.$router.queryParams.get("helpKursk")?-2307160:null,c=1===a.length&&s?{[e]:s}:await wb.xnm.getXnmProducts(a,!1,l).catch((e=>null));let u=null==c?void 0:c[e];if(!u)return null;const d=await this._getMultiInfo(u,n),h=!!d,p=!h&&this._canCheckForMulti(n),m={},g=this._fillBaseProductCardFromX(n,u,h||p);g.metacard=d,h&&(a=[e]),a.forEach((t=>{const n=o.get(t),s=null==c?void 0:c[t];if(s&&s.pics>0){const i=this._fillNomenclature(t,n,s);i.groupedAddedOptions=g.groupedAddedOptions,i.miniAddedOptions=g.miniAddedOptions,i.verifiedCertificate=this._setVerifiedCertificate(n),e===t&&(i.isHelpKursk=new URL(window.location.href).searchParams.get("helpKursk")||window.location.pathname.includes("pomozhem-kursku-vmeste")),g.nomenclatures.push(i)}})),g.nomenclatures=g.nomenclatures.sort(((t,n)=>t.nmId===e?-1:n.nmId===e?1:n.sort-t.sort));const f=g.nomenclatures.find((t=>t.nmId===e));if(null==f||null==f.sizes)return null;const y=Object.assign({},f);return this.fillSelectedNomenclature(y,t),this._addDigitalLinks(y,n),Object.assign(m,{product:g,selectedNomenclature:y}),m.metaTags=this._fillProductCardMetaTags(g),m.promoUrl=this._fillPromoUrl(e,g,n,y.brandId),m.openGraphDescription=this._fillOpenGraphDescription(e,f,m.metaTags),m.targetInfo=null!==(r=m.targetInfo)&&void 0!==r?r:{},m.selectedNomenclature.goodsName||(m.product.goodsName="Название не указано"),this._checkGroupedAddedOptionsExist(m.selectedNomenclature.groupedAddedOptions)||(m.selectedNomenclature.groupedAddedOptions=[]),m.product.canCheckForMulti=p,m},t.getMultiInfo=async function(e,t){return this._getMultiInfo(e,t)},t._getMultiInfo=async function(e,t){var n;if(!(null===(n=wb.global.settings.switches)||void 0===n?void 0:n.multicardV2Enable))return null;const s=e.rcId;if(!s)return null;const i=e.id||e.nmId,[r]=await Promise.all([(async()=>null!=t?t:this.loadStaticProductAsync(i))(),this.$moduleLoader.loadServiceAsync("metacardService")]),o=this.$services.metacardService;if(!(null==r?void 0:r.rc)||2!==r.rc.type||r.rc.id!==s)return null;if(e.metacard&&e.metacard.id==s)return e.metacard=o.getMetacardFromExisting(e.metacard,i,r),Promise.resolve(e.metacard);e.metacard=null;return await o.getMetacardData(s,i,r)},t.loadSizeTable=async function(e){const t=await this.loadStaticProductAsync(e);return this._fillSizeTable(t)},t.fromCatalogProduct=function(e,t){var n,s,i,r;const o={},a={imtId:e.imtId,nomenclatures:[],supplierDeliveryInfo:{time1:e.time1||null,time2:e.time2||null,storeId:e.fastestStore||null},rcId:e.rcId},l=e.pics,c=20624===e.brandId||30624===e.siteBrandId,u={adult:e.adult,brandId:e.brandCod,brandName:e.brand,canFit:this._setCanFit(e.subjectId,e.subjectParentId),tilesVariable:this.canUseTilesVariable(e.subjectId,e.subjectParentId),colorName:-1!==Kt.indexOf(e.subjectId)?null:e.color,consist:"",deliveryHours:e.deliveryHours,description:null,markdownDescription:null,dest:e.dest,fastestStore:e.wh||e.fastestStore,feedbacks:e.feedbacks,gluedOptions:e.gluedOptions,goodsName:e.name,isActivationKey:-1!==qt.indexOf(e.subjectId),isDataLoaded:!1,isDetailsLoaded:!1,isDigital:e.isDigitalGood,isWbInstCompliant:e.isWbInstCompliant,isPreorder:5772===e.brandCod&&wb.settings.preOrderList.includes(e.nmId),isPrepaid:e.isPrepaid,isVideo:5105===e.subjectId,hasVideo:!!(16&e.viewFlags),isBestQualityVideo:!1,hasRich:!1,hasImageTags:!1,kindId:null!==(n=e.kindId)&&void 0!==n?n:0,nmId:e.nmId,nonRefundable:e.isUnrefusable||wb.xnm.setNoRefund(e.subjectId),panelPromoId:e.panelPromoId,picsCount:l,bestQualityPics:[],promoText:e.promoTextCard,promotions:null,saleConditions:e.saleConditions,subjectId:e.subjectId,subjectName:"",subjectParent:"",subjectParentId:e.subjectParentId,sizes:e.sizes.map((t=>{var n,s,i;const r=null!==(n=t.catalogPrice)&&void 0!==n?n:e.catalogPrice;return{characteristicId:t.ch,sizeName:t.nm,sizeNameRus:t.rusNm,quantity:t.unavailable||e.soldOut?0:1,stocks:t.stocks,storeIds:null===(s=t.stocks)||void 0===s?void 0:s.map((e=>e.wh)),isSoldOut:!!t.unavailable||e.soldOut,deliveryHours:e.deliveryHours,payloadV2:t.payloadV2,saleConditions:t.saleConditions,whDtype:null!==(i=t.dtype)&&void 0!==i?i:t.whDtype,price:r?{price:r.basic?r.basic/100:0,salePrice:r.priceToShow?r.priceToShow/100:0,sale:r.sale,logisticsCost:r.logistics,returnCost:r.return}:null}})),sizeTable:null,showMinDetails:!Xt.includes(e.subjectParentId),reviewRating:e.reviewRating,star:e.star,urlForReccomendations:`/recommendation/catalog?type=visuallysimilar&forproduct=${e.nmId}&excludeNms=true`,supplier:$.views.helpers.supplierFineName("Wildberries"===e.supplier?"WILDBERRIES":$.views.converters.trimWord(e.supplier,$.views.helpers.suppliersOrgForms),e.brandId),supplierId:e.supplierId,supplierRating:e.supplierRating,viewFlags:e.viewFlags,shouldShowOriginalMark:!c&&!!(8&e.viewFlags),miniAddedOptions:[],groupedAddedOptions:[],showThermometer:e.showThermometer,quantity:e.totalQuantity,whDtype:e.whDtype,isHelpKursk:new URL(window.location.href).searchParams.get("helpKursk")||window.location.pathname.includes("pomozhem-kursku-vmeste")};u.allSizesSoldOut=null===(s=u.sizes)||void 0===s?void 0:s.every((e=>e.isSoldOut));const d=!u.allSizesSoldOut&&(null===(i=e.catalogPrice)||void 0===i?void 0:i.total)>0;return u.price={price:d?e.catalogPrice.basic/100:0,salePrice:d?e.catalogPrice.priceToShow/100:0,sale:d?e.catalogPrice.sale:0,priceDiff:!!d&&e.priceDiff,logisticsCost:e.catalogPrice.logistics,returnCost:e.catalogPrice.return,soldOut:e.allSizesSoldOut},u.sort=0,u.sizes.length>0&&(1===u.sizes.length?u.sort=u.sizes[0].quantity>0?1:0:u.sizes.reduce(((e,t)=>u.sort+=t.quantity>0),{})),a.nomenclatures.push(u),this.fillSelectedNomenclature(u,t),Object.assign(o,{product:a,selectedNomenclature:u}),o.product.canCheckForMulti=!0,o.targetInfo=null!==(r=o.targetInfo)&&void 0!==r?r:{},o.metaTags=this._fillProductCardMetaTags(a),o.openGraphDescription=this._fillOpenGraphDescription(u.nmId,a,o.metaTags),o},t.stashCatalogProduct=function(e={}){this._stashedCatalogProduct=e},t._checkGroupedAddedOptionsExist=function(e){return(null==e?void 0:e.length)>0&&e.some((e=>{var t;return(null===(t=e.addedOptions)||void 0===t?void 0:t.length)>0}))},t.fillSelectedNomenclature=function(e,t){var n,s,i;wb.xnm.fillFeedbacksPayment([e]),wb.xnm.isRedPrice(e.panelPromoId)&&(e.showRedPrice=!0);const r=e.sizes.length<=2&&e.sizes.every((e=>"0"===e.sizeName));r||1===e.sizes.length?e.selectedSize=e.sizes.find((e=>!e.isSoldOut))||e.sizes[0]:null!=t&&(e.selectedSize=e.sizes.find((e=>e.characteristicId===t))),this._setSelectedPrice(e),this._setButtons(e),e.showSize=!r,e.deliveryInfoEnable=!e.isDigital&&!((null===(n=e.selectedSize)||void 0===n?void 0:n.isSoldOut)||e.allSizesSoldOut),e.isVehicle=8242==e.subjectParentId,e.saleConditions=null===(i=null===(s=e.sizes)||void 0===s?void 0:s.find((e=>{var t;return null===(t=e.stocks)||void 0===t?void 0:t.length})))||void 0===i?void 0:i.saleConditions,e.colorGroupBaseType&&e.selectedSize&&(e.isShowChooseColorBtn=!0)},t.loadNomenclature=async function(e){var t,n,s,i,r,o,a,l,c,u,d,h,p,m,g,f,y,v;let b=null;if(!e.isDataLoaded)try{b=await this.loadStaticProductAsync(e.nmId)}catch(e){b=null}if(b){if(e.goodsName=null!==(t=null==b?void 0:b.imt_name)&&void 0!==t?t:e.goodsName,e.brandName=null!==(s=null===(n=null==b?void 0:b.selling)||void 0===n?void 0:n.brand_name)&&void 0!==s?s:e.brandName,e.colorName=b.nm_colors_names,e.hasVideo=null===(i=b.media)||void 0===i?void 0:i.has_video,e.isBestQualityVideo=null!==(o=null===(r=null==b?void 0:b.media)||void 0===r?void 0:r.is_best_quality_video)&&void 0!==o&&o,e.bestQualityPics=null!==(l=null===(a=b.media)||void 0===a?void 0:a.best_qualities_photos)&&void 0!==l?l:[],e.hasRich=null!==(c=null==b?void 0:b.has_rich)&&void 0!==c&&c,e.hasImageTags=null!==(u=(null==b?void 0:b.enable_tags)&&(null==b?void 0:b.has_photo_tags))&&void 0!==u&&u,e.consist=null!==(g=null!==(h=null===(d=null==b?void 0:b.compositions)||void 0===d?void 0:d.map((e=>e.value?`${e.name} ${e.value}%`:e.name)).join(", "))&&void 0!==h?h:null===(m=null===(p=null==b?void 0:b.options)||void 0===p?void 0:p.find((e=>"Состав"===e.name)))||void 0===m?void 0:m.value)&&void 0!==g?g:"",b.sizes_table&&b.sizes_table.details_props){e.sizeTable=[];const t=b.sizes_table.details_props.indexOf("RU"),n={row:[]};t>=0&&(n.row[0]=this.$localziation.russianSize),n.row[1]=this.$localziation.manufactureSize;let s=2;for(let e=2;e<b.sizes_table.details_props.length;e++){const t=b.sizes_table.details_props[e];n.row[s++]=""!==t?t:"-"}e.sizeTable.push(n),b.sizes_table.values.forEach((n=>{var s;const i={chrtId:null!==(s=n.chrt_id)&&void 0!==s?s:0,row:[]};if(t>=0&&(i.row[0]=n.details[t]),i.row[1]=n.tech_size,n.details.length>2)for(let e=2;e<n.details.length;e++)i.row[e]=""!==n.details[e]?n.details[e]:"-";e.sizeTable.push(i)}));for(const t of e.sizes){const e=b.sizes_table.values.find((e=>e.chrt_id===t.characteristicId));if(e&&b.sizes_table.details_props.length===e.details.length)for(let n=2;n<b.sizes_table.details_props.length;n++){const s={name:b.sizes_table.details_props[n],value:""!==e.details[n]?e.details[n]:"-"};t.dimensions.push(s)}}}const w=this._fillGroupedAddedOptions(b);e.groupedAddedOptions=w,e.miniAddedOptions=this._fillMiniGroupedAddedOptions(w),e.gluedOptions=wb.xnm.convertOptionsToGluedOptions(null==b?void 0:b.options),e.subjectName=null!==(f=null==b?void 0:b.subj_name)&&void 0!==f?f:"",e.subjectParent=null!==(y=null==b?void 0:b.subj_root_name)&&void 0!==y?y:"",e.verifiedCertificate=this._setVerifiedCertificate(b),this._addDigitalLinks(e,b),e.description=b.description,e.markdownDescription=b.markdown_description,e.isAutoplayingVideo=null===(v=b.media)||void 0===v?void 0:v.is_autoplaying_video,e.isDataLoaded=!0,this._fillIsChooseColor(b,e)}const w=Object.assign({},e);return this.fillSelectedNomenclature(w),w},t.loadPriceHistory=async function(e){return await this.$httpClient.fetchBasicJSON(wb.helpers.url.urlPriceHistoryStatic(e),{},{nullOnError:!0,logOff:!0})},t.loadProductVideosAsync=async function(e){const t=Yt.find((t=>t.nmId==e));if(null!=t)return await t.payloadTask;try{const t=this.$httpClient.fetchBasicJSON(`https://video-reviews.wildberries.ru/api/v1/video-by-nm?nm=${e}`);Yt.push({nmId:e,payloadTask:t}),Yt=Yt.slice(-25);return await t}catch(e){return console.error(e),null}},t.setChooseColorInBasket=function(e,t){var n,s,i;for(let r=0;r<e.length;r++)if((null===(s=null===(n=e[r].meta)||void 0===n?void 0:n.shade)||void 0===s?void 0:s.colorHex)&&t.sizes){if(e[r].characteristicId===(null===(i=t.sizes[0])||void 0===i?void 0:i.characteristicId)){$.observable(t).setProperty({chooseColorInBasket:!0});break}}else $.observable(t).setProperty({chooseColorInBasket:!1})},t._addDigitalLinks=function(e,t){var n,s;e.digitalLinks={audio:null===(n=null==t?void 0:t.media)||void 0===n?void 0:n.audiobook,electronic:null===(s=null==t?void 0:t.media)||void 0===s?void 0:s.electronic_book}},t._colorLimiter=function(e,t){if(null===t||t.length<60)return t;if(t.indexOf(e)<60)return t.slice(0,60);const n=[e];return n.push(...t.slice(0,59)),n},t._fillBaseProductCardFromX=function(e,t,n){var s,i,r,o;const a=this._fillGroupedAddedOptions(e);return{imtId:null!==(i=null!==(s=null==e?void 0:e.imt_id)&&void 0!==s?s:null==t?void 0:t.root)&&void 0!==i?i:0,groupedAddedOptions:a,miniAddedOptions:this._fillMiniGroupedAddedOptions(a,n),nomenclatures:[],promoTemplateUfu:null===(o=null===(r=null==e?void 0:e.media)||void 0===r?void 0:r.promo_url)||void 0===o?void 0:o.replace(/^\/+|\/+$/g,""),supplierDeliveryInfo:{time1:null==t?void 0:t.time1,time2:null==t?void 0:t.time2,storeId:null==t?void 0:t.wh}}},t._fillGroupedAddedOptions=function(e){var t,n,s,i,r,o,a;const l=null!==(n=null===(t=null==e?void 0:e.grouped_options)||void 0===t?void 0:t.map((e=>{var t;return{categoryName:e.group_name,addedOptions:null===(t=e.options)||void 0===t?void 0:t.map((e=>({property:e.name,subProperty:e.value})))}})))&&void 0!==n?n:[];let c=null==l?void 0:l.find((e=>"Дополнительная информация"===(null==e?void 0:e.categoryName)));return null!=c&&null!=c.addedOptions||(c={categoryName:"Дополнительная информация",addedOptions:[]},l.push(c)),(null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.find((e=>"Состав"===e.name)))||null==(null==e?void 0:e.compositions)||c.addedOptions.unshift({property:"Состав",subProperty:null===(i=null==e?void 0:e.compositions)||void 0===i?void 0:i.map((e=>e.value?`${e.name} ${e.value}%`:e.name)).join("; ")}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.find((e=>"Комплектация"===e.name)))||null==(null==e?void 0:e.contents)||c.addedOptions.push({property:"Комплектация",subProperty:e.contents}),(null===(o=null==e?void 0:e.options)||void 0===o?void 0:o.find((e=>"Пол"===e.name)))||null==(null==e?void 0:e.kinds)||c.addedOptions.push({property:"Пол",subProperty:e.kinds.join(", ")}),!(null===(a=null==e?void 0:e.options)||void 0===a?void 0:a.find((e=>"Сезон"===e.name)))&&(null==e?void 0:e.season)&&c.addedOptions.push({property:"Сезон",subProperty:e.season}),l.filter((e=>e.addedOptions.length>0))},t._fillNomenclature=function(e,t,n){var s,i,r,o,a,l,c,u,d,h,p,m,g,f,y,v,b,w,S,_,C,k,I,M,P,O,T,A,D,E,x,B,j,L,N,R,F,U,W,H,z;const q=null!==(r=null!==(i=null===(s=null==t?void 0:t.data)||void 0===s?void 0:s.subject_id)&&void 0!==i?i:null==n?void 0:n.subjectId)&&void 0!==r?r:0,V=null!==(l=null!==(a=null===(o=null==t?void 0:t.data)||void 0===o?void 0:o.subject_root_id)&&void 0!==a?a:null==n?void 0:n.subjectParentId)&&void 0!==l?l:0,G=null!==(c=null==t?void 0:t.subj_name)&&void 0!==c?c:"",J=null!==(u=null==t?void 0:t.subj_root_name)&&void 0!==u?u:"",K=null!==(p=null!==(d=null==n?void 0:n.pics)&&void 0!==d?d:null===(h=null==t?void 0:t.media)||void 0===h?void 0:h.photo_count)&&void 0!==p?p:0,Q=null!==(g=null===(m=null==t?void 0:t.media)||void 0===m?void 0:m.best_qualities_photos)&&void 0!==g?g:[],X=20624===(null==n?void 0:n.brandId)||30624===(null==n?void 0:n.siteBrandId),Y=this.$services.storeService.storesMap[null==n?void 0:n.wh]||null;JSON.parse(localStorage.getItem("isWentAuthPage"));setTimeout((()=>{localStorage.putObject("isWentAuthPage",{isWentAuthPage:!1})}),2e3);const Z={adult:null!==(f=null==n?void 0:n.isAdult)&&void 0!==f&&f,brandId:null!==(y=null==n?void 0:n.brandId)&&void 0!==y?y:0,brandName:null!==(b=null===(v=null==t?void 0:t.selling)||void 0===v?void 0:v.brand_name)&&void 0!==b?b:null==n?void 0:n.brand,canFit:this._setCanFit(q,V),tilesVariable:this.canUseTilesVariable(q,V),colorName:-1!==Kt.indexOf(null==n?void 0:n.subjectId)?null:null!==(w=null==t?void 0:t.nm_colors_names)&&void 0!==w?w:null===(S=null==n?void 0:n.colors)||void 0===S?void 0:S.map((e=>e.name)).join(", "),consist:null!==(M=null!==(C=null===(_=null==t?void 0:t.compositions)||void 0===_?void 0:_.map((e=>e.value?`${e.name} ${e.value}%`:e.name)).join(", "))&&void 0!==C?C:null===(I=null===(k=null==t?void 0:t.options)||void 0===k?void 0:k.find((e=>"Состав"===e.name)))||void 0===I?void 0:I.value)&&void 0!==M?M:"",deliveryHours:((null==n?void 0:n.time1)||0)+((null==n?void 0:n.time2)||0),intervals:null==Y?void 0:Y.intervals,workingHours:null==Y?void 0:Y.workingHours,description:null==t?void 0:t.description,markdownDescription:null==t?void 0:t.markdown_description,dest:null==n?void 0:n.dest,fastestStore:null==n?void 0:n.wh,feedbacks:null!==(P=null==n?void 0:n.feedbacks)&&void 0!==P?P:0,gluedOptions:wb.xnm.convertOptionsToGluedOptions(null==t?void 0:t.options),goodsName:null!==(O=null==t?void 0:t.imt_name)&&void 0!==O?O:null==n?void 0:n.name,isActivationKey:-1!==qt.indexOf(q),isAutoplayingVideo:null!==(A=null===(T=null==t?void 0:t.media)||void 0===T?void 0:T.is_autoplaying_video)&&void 0!==A&&A,isDataLoaded:null!=t,isDetailsLoaded:!0,isDigital:null!==(D=null==n?void 0:n.isDigital)&&void 0!==D&&D,isWbInstCompliant:null!==(E=null==n?void 0:n.isWbInstCompliant)&&void 0!==E&&E,isPreorder:5772===(null==n?void 0:n.brandId)&&wb.settings.preOrderList.includes(e),isPrepaid:null==n?void 0:n.isPrepaid,isVideo:5105===q,hasVideo:null!==(B=null===(x=null==t?void 0:t.media)||void 0===x?void 0:x.has_video)&&void 0!==B&&B,isBestQualityVideo:null!==(L=null===(j=null==t?void 0:t.media)||void 0===j?void 0:j.is_best_quality_video)&&void 0!==L&&L,hasRich:null!==(N=null==t?void 0:t.has_rich)&&void 0!==N&&N,hasImageTags:null!==(R=(null==t?void 0:t.enable_tags)&&(null==t?void 0:t.has_photo_tags))&&void 0!==R&&R,kindId:null!==(F=null==n?void 0:n.kindId)&&void 0!==F?F:0,nmId:e,nonRefundable:(null==n?void 0:n.isUnrefusable)||wb.xnm.setNoRefund(q),panelPromoId:null==n?void 0:n.panelPromoId,picsCount:K,bestQualityPics:Q,promoText:null==n?void 0:n.promoTextCard,promotions:null==n?void 0:n.promotions,saleConditions:null==n?void 0:n.saleConditions,subjectId:q,subjectName:G,subjectParent:J,subjectParentId:V,sizes:this._fillSizes(n,t),sizeTable:t?this._fillSizeTable(t):null,showMinDetails:!Xt.includes(V),reviewRating:null==n?void 0:n.reviewRating,star:null!==(U=null==n?void 0:n.rating)&&void 0!==U?U:0,urlForReccomendations:`/recommendation/catalog?type=visuallysimilar&forproduct=${e}&excludeNms=true`,supplier:$.views.helpers.supplierFineName(null==n?void 0:n.supplier,null==n?void 0:n.brandId),supplierId:null==n?void 0:n.supplierId,supplierRating:null==n?void 0:n.supplierRating,premiumSale:null==n?void 0:n.premiumSale,showRedPrice:wb.xnm.isRedPrice(n.panelPromoId),whDtype:null==n?void 0:n.dtype};Z.allSizesSoldOut=null===(W=Z.sizes)||void 0===W?void 0:W.every((e=>e.isSoldOut));const ee=!Z.allSizesSoldOut&&(null===(H=null==n?void 0:n.price)||void 0===H?void 0:H.total)>0;return this._fillIsChooseColor(t||n,Z),Z.price={price:ee&&n.price.basic?n.price.basic/100:0,salePrice:ee&&n.price.total?n.price.priceToShow/100:0,priceForBasket:ee&&n.price.priceForBasket?n.price.priceForBasket/100:0,sale:ee?n.price.sale:0,priceDiff:!!ee&&n.diffPrice,logisticsCost:n.price.logistics,returnCost:n.price.return,soldOut:Z.allSizesSoldOut},Z.sort=0,Z.quantity=0,(null===(z=Z.sizes)||void 0===z?void 0:z.length)>0&&(1===Z.sizes.length?(Z.quantity=Z.sizes[0].quantity,Z.sort=Z.quantity>0?1:0):Z.sizes.reduce(((e,t)=>{Z.quantity+=t.quantity,Z.sort+=t.quantity>0}),{})),this._setCanShowThermometer(null==n?void 0:n.panelPromoId,Z),Z.supplierDeliveryInfo={time1:null==n?void 0:n.time1,time2:null==n?void 0:n.time2,storeId:null==n?void 0:n.wh},n&&(Z.viewFlags=n.viewFlags,Z.shouldShowOriginalMark=!X&&!!(8&n.viewFlags)),Z},t._fillSizeTable=function(e){const t=[];if(e.sizes_table&&e.sizes_table.details_props){const n=e.sizes_table.details_props.indexOf("RU"),s=e.sizes_table.details_props.indexOf("EU"),i={row:[]};let r=0;n>=0&&(i.row[r++]=this.$localziation.russianSize),i.row[r++]=this.$localziation.manufactureSize;for(let t=0;t<e.sizes_table.details_props.length;t++){if(t===n||t===s)continue;const o=e.sizes_table.details_props[t];i.row[r++]=""!==o?o:"-"}t.push(i),e.sizes_table.values.forEach((e=>{var i;let r=0;const o={chrtId:null!==(i=e.chrt_id)&&void 0!==i?i:0,row:[]};n>=0&&(o.row[r++]=e.details[n]),o.row[r++]=e.tech_size;const a=(-1!==n?1:0)+(-1!==s?1:0);if(e.details.length>a)for(let t=0;t<e.details.length;t++)t!==n&&t!==s&&(o.row[r++]=""!==e.details[t]?e.details[t]:"-");t.push(o)}))}return t},t._fillIsChooseColor=function(e,t){var n,s,i,r,o,a;const l=null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.findIndex((e=>"база для колеровки"===e.name.toLowerCase()&&e.value)),c=null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.find((e=>"продавец может заколеровать"===e.name.toLowerCase()&&"да"===e.value.toLowerCase())),u=null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.find((e=>"каталог цветов"===e.name.toLowerCase()&&e.value.toLowerCase().split(/[; ]+/).includes("ncs"))),d=null===(o=null===(r=t.sizes[0])||void 0===r?void 0:r.stocks)||void 0===o?void 0:o.every((e=>[1,2,3].includes(e.dtype)));if(l>0&&c&&u&&d){if(!t.sizes.map((e=>wb.xnm.expandSaleConditions({},e))).some((e=>e.isUnrefusable&&e.isPrepaid&&(e.isUnreturnable||e.isVerificationReturn))))return;const n=null===(a=null==e?void 0:e.options[l])||void 0===a?void 0:a.value.toLowerCase(),s=["a","1","bw"],i=["c","3","bc","d"];n&&(t.colorBaseType=n.toUpperCase(),s.includes(n)?t.colorGroupBaseType="A":i.includes(n)&&(t.colorGroupBaseType="C"));const r=this.$services.cartService.get().basketItems;this.setChooseColorInBasket(r,t)}},t._fillProductCardMetaTags=function(e){const t={};return e.nomenclatures.map((e=>{const n=`${e.goodsName} ${e.brandName} ${e.nmId}`;t[e.nmId]={title:`${n} купить %FORPRICE% в интернет-магазине Wildberries`,description:`${n} купить %FORPRICE% в интернет-магазине Wildberries. Бесплатная доставка и постоянные скидки!`}})),t},t._fillPromoUrl=function(e,t,n,s){var i,r;if(t.promoTemplateUfu)return`promo/${t.promoTemplateUfu}`;if(6012===s||3363===s){if(null===(r=null===(i=null==n?void 0:n.options)||void 0===i?void 0:i.find((e=>"Подробный обзор"===e.name)))||void 0===r?void 0:r.value)return`https://www.wildberries.ru/productinfo/philips/${e}`}},t._canCheckForMulti=function(e){var t;return!!(null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.find((e=>"Модель"===e.name)))},t._fillOpenGraphDescription=function(e,t,n){if(null==t?void 0:t.description)return t.description;const s=n[e];return(null==s?void 0:s.description)?s.description:"Узнать подробнее, перейдите по ссылке"},t._fillSizes=function(e,t){var n;return e&&e.sizes?e.sizes.sort(((e,t)=>e.rank-t.rank)).map((n=>{var s,i,r,o,a,l,c,u;const d=[],h=null===(i=null===(s=null==t?void 0:t.sizes_table)||void 0===s?void 0:s.values)||void 0===i?void 0:i.find((e=>e.chrt_id===n.optionId));if((null==h?void 0:h.details)&&(null===(r=t.sizes_table.details_props)||void 0===r?void 0:r.length)===h.details.length)for(let e=0;e<t.sizes_table.details_props.length;e++){if("RU"===t.sizes_table.details_props[e]||"EU"===t.sizes_table.details_props[e])continue;const n={name:t.sizes_table.details_props[e],value:""!==h.details[e]?h.details[e]:"-"};d.push(n)}const p=null!==(a=null===(o=n.price)||void 0===o?void 0:o.total)&&void 0!==a?a:null===(l=e.price)||void 0===l?void 0:l.total;let m=0;p>0&&(null===(c=n.stocks)||void 0===c?void 0:c.length)>0&&(1===n.stocks.length?m=n.stocks[0].qty:n.stocks.reduce(((e,t)=>m+=t.qty),0));const g=m>0?null===(u=n.stocks)||void 0===u?void 0:u.map((e=>e.wh)):null,f={characteristicId:n.optionId,sizeName:n.origName,sizeNameRus:n.name,dimensions:d,quantity:m,stocks:n.stocks,storeIds:g,isSoldOut:0===m,lowQuantity:m<3&&m>0,deliveryHours:(n.time1||0)+(n.time2||0),fastestStore:n.wh,payloadV2:n.payload,saleConditions:n.saleConditions,whDtype:n.dtype,isForeign:!!(32&n.dtype)};return m>0&&n.price&&(f.price={price:n.price.basic?n.price.basic/100:0,salePrice:n.price.total?n.price.priceToShow/100:0,priceForBasket:n.price.priceForBasket?n.price.priceForBasket/100:0,sale:n.price.sale,logisticsCost:n.price.logistics,returnCost:n.price.return},this._setCanShowThermometer(e.panelPromoId,f)),f})):(null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.chrt_ids)?t.data.chrt_ids.map((e=>{var n,s,i;const r=null===(n=null==t?void 0:t.sizes_table)||void 0===n?void 0:n.values.find((t=>t.chrt_id===e)),o=[];if(r){const e=null===(s=null==t?void 0:t.sizes_table)||void 0===s?void 0:s.values.find((e=>e.chrt_id===r.optionId));if((null==e?void 0:e.details)&&(null===(i=t.sizes_table.details_props)||void 0===i?void 0:i.length)===e.details.length)for(let n=0;n<t.sizes_table.details_props.length;n++){if("RU"===t.sizes_table.details_props[n]||"EU"===t.sizes_table.details_props[n])continue;const s={name:t.sizes_table.details_props[n],value:""!==e.details[n]?e.details[n]:"-"};o.push(s)}}return{characteristicId:e,sizeName:"0",sizeNameRus:"",dimensions:o,quantity:0,isSoldOut:!0}})):null},t._setCanFit=function(e,t){return-1!==Vt.indexOf(t)&&-1===Gt.indexOf(e)},t.canUseTilesVariable=function(e,t){return wb.global.settings.switches.enableTalesKT||this.$analitic.checkDataInSplitterServiceV2Sync("common","ab_EnableTalesKT","Yes")?-1!==Jt.indexOf(t)&&-1===Gt.indexOf(e):null},t._fillMiniGroupedAddedOptions=function(e,t){const n=[];if(!e)return n;let s=t?4:6;for(let t=0;t<e.length;t++){const i=e[t].addedOptions.slice(0,s).filter((e=>"Цвет"!==e.property));if(n.push(...i),s-=i.length,s<1)break}return n},t._setVerifiedCertificate=function(e){var t,n;return(null===(t=null==e?void 0:e.certificate)||void 0===t?void 0:t.verified)?(null===(n=e.data)||void 0===n?void 0:n.subject_id)&&Qt.indexOf(e.data.subject_id)>=0?2:1:0},t._setSelectedPrice=function(e){var t;e.selectedPrice=(null===(t=e.selectedSize)||void 0===t?void 0:t.price)?e.selectedSize.price:e.price},t._setButtons=function(e){var t,n,s;e.addToBasketEnable=!((null===(t=e.selectedSize)||void 0===t?void 0:t.isSoldOut)||e.allSizesSoldOut),e.addToPonedEnable=!((null===(n=e.selectedSize)||void 0===n?void 0:n.isSoldOut)||e.allSizesSoldOut),e.addToWaitingListEnable=(null===(s=e.selectedSize)||void 0===s?void 0:s.isSoldOut)||e.allSizesSoldOut,e.addedToBasket=!1,e.addedToWl=!1},t._setCanShowThermometer=function(e,t){!WbSpaModel.prototype.$auth.isAuth||!t.quantity||t.quantity>1e3||WbSpaModel.prototype.$promotionsHelper.isThermometerNeeded(e)&&(t.showThermometer=!0)},e}();const en=Zt;let tn=function(){function e(e,t){this.publicUrl="https://banners-website.wildberries.ru/public/v1/banners",this.enums=e,this.helper=t}var t=e.prototype;return t.getBannersFromApi=async function(e){var t;const n=null!==(t=e.appType)&&void 0!==t?t:this._getAppType();let s=await this._getBannersFromApi(e.urlType,n,e.menuId,e.brandId);return s=s.filter((e=>null!=e)).map((e=>this.helper.convertToBannerItem(e))),s.sort(((e,t)=>{var n,s;return(null!==(n=e.placementOptions.sort)&&void 0!==n?n:0)-(null!==(s=t.placementOptions.sort)&&void 0!==s?s:0)})),s},t._getBannersFromApi=async function(e,t,n,s){var i,r;let o=await WbSpaModel.prototype.$user.getLocationData();const a=WbSpaModel.prototype.$user.getUserInfo(),l=WbSpaModel.prototype.$user.getBannersClusters(),c=this._getDisplayType(a),u=this._getCountry(),d=WbSpaModel.prototype.$helper.currentCulture,h=new URLSearchParams({urltype:e,apptype:t,displaytype:c,longitude:o.longitude,latitude:o.latitude,country:u,culture:d});WbSpaModel.prototype.$analitic.appendSplitInfoV2(h,"banner"),(null==l?void 0:l.length)&&h.append("clusterids",l),n&&h.append("menuid",n),s&&h.append("brandId",s);const p=`${this.publicUrl}?${new URLSearchParams(h)}`;let m=await WbSpaModel.prototype.$httpClient.fetchBasicJSON(p,{},{timeout:1e4,nullOnError:!0,addAuthHeader:!0});if(m&&(null==m?void 0:m.length)||(m=await this._getDefaultBannersFromStatic(e,t,n)),m&&WbSpaModel.prototype.$apiSupport.webpImage&&(null===(r=null===(i=wb.global.settings)||void 0===i?void 0:i.switches)||void 0===r?void 0:r.bannerWebp))for(const e of m)e.Src&&(e.Src=e.Src.replace(".jpg",".webp")),e.src&&(e.src=e.src.replace(".jpg",".webp"));return(null==m?void 0:m.length)>0?m:[]},t._getDefaultBannersFromStatic=async function(e,t,n){const s=this._getBannersTypeForStatic(e);if(!s)return null;const i=n?`banners-${s}-${wb.settings.currentLocale}-${n}-v1.json`:`banners-${s}-${wb.settings.currentLocale}-v1.json`;try{let n=await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(i,3e3);return t==this.enums.appType.desktop?n=null==n?void 0:n.filter((e=>e.applicationType==this.enums.appType.desktop||225==e.applicationType||227==e.applicationType)):t==this.enums.appType.mobile&&(n=null==n?void 0:n.filter((e=>e.applicationType==this.enums.appType.mobile||227==e.applicationType))),e==this.enums.urlType.promotion&&t==this.enums.appType.desktop&&(null==n||n.forEach((e=>{e.src=this.helper.createBannerPathByResolution(e.src,"c660x210")}))),n}catch(e){return null}},t._getBannersTypeForStatic=function(e){switch(e){case this.enums.urlType.main:return"main";case this.enums.urlType.promotion:return"promo";case this.enums.urlType.cataloger:return"catalog"}},t._getAppType=function(){return"d"==wb.settings.displayMode?this.enums.appType.desktop:this.enums.appType.mobile},t._getDisplayType=function(e){return e.isAuth?this.enums.bannerDisplayType.forAuth:this.enums.bannerDisplayType.forNotAuth},t._getCountry=function(){var e;return 1<<(null!==(e=this.enums.country[WbSpaModel.prototype.$user.getLocale()])&&void 0!==e?e:0)-1},e}();const nn=tn;let sn=function(e,t,n,s){this.urlType=e,this.menuId=n,this.brandId=s,this.appType=t},rn=function(){function e(e,t){this.enums=e,this.helper=t,this.api=new nn(this.enums,this.helper)}var t=e.prototype;return t.getBannersForHomePageAsync=async function(){const e=await this.api.getBannersFromApi(new sn(this.enums.urlType.main,this.enums.appType.desktopAndMobile)),t=[this.enums.locationType._215x168,this.enums.locationType._705x394,this.enums.locationType._460x394,this.enums.locationType._364x668],n=[],s=[],i=[],r=[];let o=[];return null==e||e.forEach((e=>{e.locationType==this.enums.locationType._1440x168?e.applicationType==this.enums.appType.desktop?n.push(e):e.applicationType==this.enums.appType.mobile&&o.push(e):e.locationType==this.enums.locationType.mainInfo?e.applicationType==this.enums.appType.desktop?i.push(e):e.applicationType==this.enums.appType.mobile&&r.push(e):-1!=t.indexOf(e.locationType)&&s.push(e)})),o.length||(o=n),{mainBanners:n,mainMobileBanners:o,contentBanners:s,mainInfoBanners:i,mainInfoMobileBanners:r}},t.getBannersForFooterAsync=async function(){const e=await this.api.getBannersFromApi(new sn(this.enums.urlType.main,this.enums.appType.desktopAndMobile)),t=[],n=[];return null==e||e.forEach((e=>{e.locationType===this.enums.locationType.footerSocial&&(e.applicationType==this.enums.appType.desktop?t.push(e):e.applicationType==this.enums.appType.mobile&&n.push(e))})),{desktopBanners:t,mobileBanners:n.length?n:t}},t.getPromoBanners=function(){return this._getPromotionBanners()},t._getPromotionBanners=async function(){const e=(await this.api.getBannersFromApi(new sn(this.enums.urlType.promotion,this.enums.appType.desktop))).filter((e=>e.locationType==this.enums.locationType._770x245));return this.helper.dividePromotionBanners(e)},t.getPromoCatalogBanners=async function(e,t=!1){return(await this.api.getBannersFromApi(new sn(this.enums.urlType.promotionCatalog,t?this.enums.appType.mobile:this.enums.appType.desktop,e))).filter((e=>e.locationType===this.enums.locationType.promo_strip))},t.getPromotionSpecialBanners=async function(e=!1){const t=await this.api.getBannersFromApi(new sn(this.enums.urlType.promotionCatalog,e?this.enums.appType.mobile:this.enums.appType.desktop)),n=[],s=[];return t.forEach((e=>{e.locationType===this.enums.locationType.promo_strip&&n.push(e),e.locationType===this.enums.locationType.special_promo&&s.push(e)})),[n,s]},t.getTopMenuBanners=async function(){const e=await this.api.getBannersFromApi(new sn(this.enums.urlType.default,this.enums.appType.desktop)),t=this._menuSingleBanners(e),n=await this._getMenuPromotionBanners(),s=t;return(null==n?void 0:n.length)>0&&(s[2192]=n),s},t._menuSingleBanners=function(e){return e.reduce(((e,t)=>{var n;if(t.locationType!=this.enums.locationType.menu_banners)return e;const s=null!==(n=t.placementOptions.menuID)&&void 0!==n?n:0;return e.hasOwnProperty(s)||(e[s]=[]),e[s].push(t),e}),{})},t._getMenuPromotionBanners=async function(){const e=await this._getPromotionBanners(),t=e.leftBanners.slice(0,5).concat(e.rightBanners.slice(0,5));return null==t||t.forEach((e=>{e.src=this.helper.createBannerPathByResolution(e.src,"t305x245q"),e.absoluteUrl=e.getAbsoluteUrl()})),t},t.getCatalogBanners=async function(e,t,n=!1){var s,i;this.menuIdEnum||(this.menuIdEnum=t);const r=await this.api.getBannersFromApi(new sn(this.enums.urlType.cataloger,this.enums.appType.desktop,e)),o=this._getBannersForCatalog(r,e);let a=o.firstCarousel,l=o.secondCarousel;if(n){const t=await this.api.getBannersFromApi(new sn(this.enums.urlType.cataloger,this.enums.appType.mobile,e)),n=this._getCatalogBigBanners(t);a=(null===(s=n.firstCarousel)||void 0===s?void 0:s.length)>0?n.firstCarousel:o.firstCarousel,l=(null===(i=n.secondCarousel)||void 0===i?void 0:i.length)>0?n.secondCarousel:o.secondCarousel}return{mainBannersFirst:a,mainBannersSecond:l,verticalBanners:o.verticalBanners,smallBanners:o.commonBanners,seasonBanners:o.seasonBanners}},t._getBannersForCatalog=function(e,t){if(!e)return[];const{firstCarousel:n,secondCarousel:s}=this._getCatalogBigBanners(e),i=this._getCatalogVerticalBanners(e),r=e.filter((e=>e.locationType==this.enums.locationType.small));return{firstCarousel:n,secondCarousel:s,verticalBanners:i,commonBanners:this._getCommonBanners(r,t),seasonBanners:this._getSeasonBanners(r,t)}},t._getCommonBanners=function(e,t){const n=this._getCatalogBannersSortParams(t,!0);return this.helper.getBannersBySort(e,n).reduce(((e,t)=>{const n=t.placementOptions.sort;return e[n]=[...e[n]||[],t],e}),{})},t._getSeasonBanners=function(e,t){const n=this._getCatalogBannersSortParams(t);return this.helper.getBannersBySort(e,n)},t._getCatalogVerticalBanners=function(e){return e.filter((e=>e.locationType==this.enums.locationType.vertical)).reduce(((e,t)=>{const n=t.placementOptions.sort;return e[n]=[...e[n]||[],t],e}),{})},t._getCatalogBigBanners=function(e){const t=e.filter((e=>e.locationType==this.enums.locationType.big)),n=[],s=[];return t.forEach((e=>{e.placementOptions.sort<100&&n.push(e),e.placementOptions.sort>100&&e.placementOptions.sort<110&&s.push(e)})),{firstCarousel:n,secondCarousel:s}},t._getCatalogBannersSortParams=function(e,t){const n={onlyMarketingSortStart:null,onlyMarketingSortEnd:null,suppliersSortStart:null,suppliersSortCount:null},s=[this.menuIdEnum.sport,this.menuIdEnum.monocity];return t?-1!=s.indexOf(e)?(n.suppliersSortStart=0,n.suppliersSortCount=3):(n.onlyMarketingSortStart=0,n.onlyMarketingSortEnd=100,n.suppliersSortStart=100,n.suppliersSortCount=3):(n.onlyMarketingSortStart=50,n.onlyMarketingSortEnd=99),n},e}();const on=rn;const an=function(){function e(){this.appType=this._getAppType(),this.locationType=this._getLocationType(),this.urlType=this._getUrlType(),this.bannerDisplayType=this._getBannerDisplayType(),this.country=this._getCountry(),this.ownerType=this._getOwnerType()}var t=e.prototype;return t._getAppType=function(){return{desktop:1,mobile:2,desktopAndMobile:3}},t._getLocationType=function(){return{main:42,small:38,strip:39,_352x428:60,_305x245:57,_770x245:59,big:41,vertical:36,promo_strip:61,_1440x168:62,_215x168:63,_705x394:64,_460x394:65,_364x668:66,menu_banners:73,footerSocial:80,mainInfo:81,special_promo:88}},t._getUrlType=function(){return{main:1024,default:0,promotion:16384,cataloger:1<<22,promotionCatalog:62}},t._getBannerDisplayType=function(){return{forAuth:2,forNotAuth:3}},t._getCountry=function(){return{ru:1,by:2,kz:3,am:4,kg:5,uz:13}},t._getOwnerType=function(){return{marketing:0,supplier:1}},e}();let ln=function(){function e(e){var t,n,s,i,r,o,a,l,c,u,d,h,p,m,g,f,y,v,b,w,S;this.id=null!==(t=e.UID)&&void 0!==t?t:e.uID,this.href=null!==(n=e.Href)&&void 0!==n?n:e.href,this.applicationType=null!==(s=e.ApplicationType)&&void 0!==s?s:e.applicationType,this.locationType=null!==(i=e.LocationType)&&void 0!==i?i:e.locationType,this.placementOptions={sort:null!==(o=null===(r=e.PlacementOptions)||void 0===r?void 0:r.Sort)&&void 0!==o?o:null===(a=e.placementOptions)||void 0===a?void 0:a.sort,menuID:null!==(c=null===(l=e.PlacementOptions)||void 0===l?void 0:l.MenuID)&&void 0!==c?c:null===(u=e.placementOptions)||void 0===u?void 0:u.menuID},this.src=null!==(d=e.Src)&&void 0!==d?d:e.src,this.alt=null!==(h=e.Alt)&&void 0!==h?h:e.alt,this.noFollow=null!==(p=e.NoFollow)&&void 0!==p?p:e.noFollow,this.noIndex=null!==(m=e.NoIndex)&&void 0!==m?m:e.noIndex,this.target=null!==(g=e.Target)&&void 0!==g?g:e.target,this.ordBannerMark=null!==(f=e.OrdBannerMark)&&void 0!==f?f:e.ordBannerMark;const _=null!==(y=e.AdditionalSections)&&void 0!==y?y:e.additionalSections;this.bannerSelections=null!==(v=null==_?void 0:_.map((e=>new cn(e))))&&void 0!==v?v:[],this.promoText=null!==(b=e.PromoText)&&void 0!==b?b:e.promoText,this.promoTextLines=null!==(w=e.PromoTextLines)&&void 0!==w?w:e.promoTextLines,this.owner=null!==(S=e.Provider)&&void 0!==S?S:e.provider,this.statisticFields=new un(e),this.absoluteUrl=this.getAbsoluteUrl(),this.link=this.getLink(),this.pixelSrc=e.PixelSrc}var t=e.prototype;return t.getLink=function(){if(0===this.href.indexOf("https:"))return new URL(this.href).href;const e=new URL(this.href,window.location);return e.searchParams.append("bid",this.id),`${e.pathname}${e.search}`},t.getAbsoluteUrl=function(){return-1!==this.src.toLowerCase().indexOf("wildberries")?this.src:wb.helpers.url.urlToExternalStatic(`/vol1/crm-bnrs${this.src}`)},e}(),cn=function(e){var t,n,s,i,r;this.href=null!==(t=e.Href)&&void 0!==t?t:e.href,this.relativeXPos=null!==(n=e.RelativeXPos)&&void 0!==n?n:e.relativeXPos,this.relativeYPos=null!==(s=e.RelativeYPos)&&void 0!==s?s:e.relativeYPos,this.relativeHeight=null!==(i=e.RelativeHeight)&&void 0!==i?i:e.relativeHeight,this.relativeWidth=null!==(r=e.RelativeWidth)&&void 0!==r?r:e.relativeWidth},un=function(e){var t,n,s,i,r,o;this.urlType=null!==(t=e.URLType)&&void 0!==t?t:e.uRLType,this.displayType=null!==(n=e.DisplayType)&&void 0!==n?n:e.displayType,this.locationType=null!==(s=e.LocationType)&&void 0!==s?s:e.locationType,this.sort=null!==(r=null===(i=e.PlacementOptions)||void 0===i?void 0:i.Sort)&&void 0!==r?r:null===(o=e.placementOptions)||void 0===o?void 0:o.sort};const dn=function(){function e(e){this.enums=e,this.fillingGapsSortStart=300}var t=e.prototype;return t.convertToBannerItem=function(e){return new ln(e)},t.createBannerPathByResolution=function(e,t){const n=t,s=e.split("/").slice(-1);return`/poster/${WbSpaModel.prototype.$helper.currentCulture}/action2/${n}/${s}`},t.dividePromotionBanners=function(e){const t=this._getBannersSoldToSuppliers(e,100,20),n=null==e?void 0:e.filter((e=>e.owner==this.enums.ownerType.marketing)),s=n.filter((e=>e.placementOptions.sort<100));let{leftBanners:i,rightBanners:r}=this._createTwoSidesWithTheSameSize(n,s,t);return i=i.map((e=>e)),r=r.map((e=>e)),{leftBanners:i,rightBanners:r}},t.getBannersBySort=function(e,t){const n=e.filter((e=>e.owner==this.enums.ownerType.marketing&&e.placementOptions.sort>t.onlyMarketingSortStart&&e.placementOptions.sort<t.onlyMarketingSortEnd)),s=this._getBannersSoldToSuppliers(e,t.suppliersSortStart,t.suppliersSortCount);return n.concat(s)},t._getBannersSoldToSuppliers=function(e,t,n){if(!WbSpaModel.prototype.$helper.isNumber(t)||!n)return[];const s=e.filter((e=>e.owner==this.enums.ownerType.supplier)),i=e.filter((e=>e.owner==this.enums.ownerType.marketing&&e.placementOptions.sort>200&&e.placementOptions.sort<this.fillingGapsSortStart)).reduce(((e,t)=>{const n=t.placementOptions.sort;return e.set(n,[...e.get(n)||[],t])}),new Map),r=s.reduce(((e,t)=>e.add(t.placementOptions.sort)),new Set);for(let e=1;e<=n;e++){const n=t+e;if(!r.has(n)){const t=i.get(200+e);if((null==t?void 0:t.length)>0){const e=t[0];e.placementOptions.sort=n,s.push(e)}}}return s},t._createTwoSidesWithTheSameSize=function(e,t,n){const s=e.filter((e=>e.placementOptions.sort>=this.fillingGapsSortStart));if(0==s.length)return n;var i=Math.max(t.length,n.length);return this._fillGapsIfNeeded(t,i,s),this._fillGapsIfNeeded(n,i,s),{leftBanners:t,rightBanners:n}},t._fillGapsIfNeeded=function(e,t,n){let s=t-e.length;for(;s>0&&n.length>0;){{const t=n[0];n.splice(0,1),e.push(t)}s--}e.sort(((e,t)=>e.placementOptions.sort-t.placementOptions.sort))},e}(),hn="home-banners-cache-new",pn="menu-banners-cache-v2",mn="main-catalog-banners-cache",gn="promotions-banners-cache",fn="footer-banners-cache",yn="promotion-special-banners-cache",vn=3e5;let bn=function(){function e(){WbSpaModel.prototype.$eventBus.addEventListener("GeoUpdated",(()=>this._refreshCache())),this.cacheVers=5}var t=e.prototype;return t.getCachedResults=async function(e,t,n,s){const i=WbSpaModel.prototype.$user.getUserInfo().uid,r=this._getCacheKey(e);return r?(s||(s=1),await this._getCachedResults(r,t,i,n,s)):Promise.resolve(null)},t._getCachedResults=async function(e,t,n,s,i){const r=this._tryGetCachedData(e,n),o=this._getResultsFromCachedData(r,s,i);if(o)return Promise.resolve(o);const a=await t();if(!a)return Promise.resolve(null);if(this._checkBannersExist(a)){const t=this._toCacheResult(n,s,i,r,a);localStorage.putObject(e,t)}return Promise.resolve(a)},t._tryGetCachedData=function(e,t){const n=localStorage.getObject(e);return n&&this.cacheVers==n.version&&n.userId==t?n:null},t._getResultsFromCachedData=function(e,t,n){var s;const i=this._getDisplayName(t),r=null===(s=null==e?void 0:e[i])||void 0===s?void 0:s[n];return!r||Date.now()-r.updateTs>vn?null:r.data},t._toCacheResult=function(e,t,n,s,i){s||(s={}),s.version=this.cacheVers,s.userId=e,s.desktop=this._getCleanedCachedData(s.desktop),s.mobile=this._getCleanedCachedData(s.mobile);return s[this._getDisplayName(t)][n]={updateTs:Date.now(),data:i},s},t._checkBannersExist=function(e){let t=!1;if(Array.isArray(e))return!0;for(let n in e){const s=e[n];if(s&&(Array.isArray(s)?t=s.length>0:"object"==typeof s&&(t=this._checkBannersExist(s)),t))break}return t},t._getCleanedCachedData=function(e){const t={};for(let n in null!=e?e:{})!n||Date.now()-e[n].updateTs>vn||(t[n]=e[n]);return t},t._getDisplayName=function(e){return e?"mobile":"desktop"},t._getCacheKey=function(e){switch(e){case this.bannersCacheType.main:return hn;case this.bannersCacheType.menu:return pn;case this.bannersCacheType.catalog:return mn;case this.bannersCacheType.promotion:return gn;case this.bannersCacheType.promotionCatalog:return"promotions-catalog-banners-cache";case this.bannersCacheType.footer:return fn;case this.bannersCacheType.promotionSpecial:return yn;default:return null}},t._refreshCache=function(){[hn,pn,mn,gn,fn,yn].forEach((e=>{localStorage.removeItem(e)}))},(0,i.A)(e,[{key:"bannersCacheType",get:function(){return{main:1,menu:2,catalog:3,promotion:4,promotionCatalog:5,footer:6,promotionSpecial:7}}}])}();const wn=bn,Sn=new an,_n=new dn(Sn);const Cn=function(){function e(){this.service=new on(Sn,_n),this.cache=new wn}var t=e.prototype;return t.getBannersForHomePageAsync=async function(){return await this.cache.getCachedResults(this.cache.bannersCacheType.main,(()=>this.service.getBannersForHomePageAsync()))},t.getBannersForFooterAsync=async function(){return await this.cache.getCachedResults(this.cache.bannersCacheType.footer,(()=>this.service.getBannersForFooterAsync()))},t.getMenuBanners=async function(){return await this.cache.getCachedResults(this.cache.bannersCacheType.menu,(()=>this.service.getTopMenuBanners()))},t.getCatalogBanners=async function(e,t){this.menuIdEnum||(this.menuIdEnum=t);const n="m"==wb.settings.displayMode;return await this.cache.getCachedResults(this.cache.bannersCacheType.catalog,(()=>this.service.getCatalogBanners(e,this.menuIdEnum,n)),n,e)},t.getPromoBanners=async function(){return await this.cache.getCachedResults(this.cache.bannersCacheType.promotion,(()=>this.service.getPromoBanners()))},t.getPromoCatalogBanners=async function(e){const t="m"==wb.settings.displayMode;return await this.cache.getCachedResults(this.cache.bannersCacheType.promotionCatalog,(()=>this.service.getPromoCatalogBanners(e,t)),t,e)},t.getPromotionSpecialBanners=async function(){const e="m"==wb.settings.displayMode;return await this.cache.getCachedResults(this.cache.bannersCacheType.promotionSpecial,(()=>this.service.getPromotionSpecialBanners(e)),e)},e}(),kn=24,In=50,Mn=37,$n=0,Pn=-1,On="_userstorage_h";let Tn=function(){function e(){this.savedHost=null,window.addEventListener("storage",(e=>{e.key===On&&this.getSavedHost()})),this.$eventBus.addEventListener("onUserAuth",(()=>{this.getSavedHost()})),this.$eventBus.addEventListener("onUserUnAuth",(()=>{this.saveHost(null)}))}var t=e.prototype;return t.getSavedHost=function(){return this.savedHost=localStorage.getItem(On),this.savedHost},t.saveHost=function(e){this.savedHost=e,this.savedHost?localStorage.setItem(On,this.savedHost):localStorage.removeItem(On)},t.fetch=function(e,t,n){return this.$wbxHttpClient.fetch(e,t,null,(e=>n||this._userStorageHost(e))).then((e=>e.json()))},t._get=async function(e,t,n,s){var i,r;try{const r=await this.fetch(e,t,s);if(r.state===$n)return r.body;if(r.state===Pn&&r.reason===kn)return[];if(r.state===Pn&&r.reason===In)return(null==n?void 0:n.replaceBroken)&&(null===(i=t.paths)||void 0===i?void 0:i.length)?t.paths.map((e=>({path:e.path,file:"W10="}))):[];if(r.state===Pn&&r.reason===Mn){this.saveHost(r.location);const n=await this.fetch(e,t);if(n.state===$n)return n.body;if(n.state===Pn&&n.reason===kn)return[]}return null}catch(i){if(!s){const s=`https://${An[Math.floor(Math.random()*Object.keys(An).length)+1]}`;if(!(null===(r=null==t?void 0:t.signal)||void 0===r?void 0:r.aborted))return await this._get(e,t,n,s);t.signal=null,this._fixLocation(e,{method:t.method,body:t.body},s)}return null}},t._fixLocation=async function(e,t,n){const s=await this.fetch(e,t,n);(null==s?void 0:s.state)===Pn&&(null==s?void 0:s.reason)===Mn&&this.saveHost(s.location)},t.getList=function(e,t){const n={method:"POST",body:JSON.stringify({path:e}),signal:null==t?void 0:t.signal,timeout:null==t?void 0:t.timeout};return this._get("/api/v2/list",n,t)},t.getData=function(e,t){if(!e||0===e.length)return null;const n={method:"POST",body:JSON.stringify(e),signal:null==t?void 0:t.signal,paths:e};return this._get("/api/v2/data/get",n,t)},t.setData=async function(e){try{const t={method:"POST",body:JSON.stringify(e)},n=await this.fetch("/api/v2/data/set",t);if(n.state===$n)return{success:!0};if(n.state===Pn&&n.reason===Mn){this.saveHost(n.location);const e=await this.fetch("/api/v2/data/set",t);return e.state===$n?{success:!0}:{success:!1,error:new Error(`error - ${e}`)}}return{success:!1,error:new Error(`error - ${n}`)}}catch(e){return{success:!1,error:e}}},t._userStorageHost=function(e){return`https://${this.savedHost||An[e||1]||An[1]}`},e}();const An={1:"user-storage-01dl.wb.ru",2:"user-storage-01iel.wb.ru",3:"user-storage-01hel.wb.ru",4:"user-storage-01fel.wb.ru",5:"user-storage-01eel.wb.ru",6:"user-storage-01gel.wb.ru",7:"user-storage-01del.wb.ru",8:"user-storage-01dp.wb.ru",9:"user-storage-01cxc.wb.ru",10:"user-storage-01bxc.wb.ru",11:"user-storage-01kel.wb.ru",12:"user-storage-01bdl.wb.ru",13:"user-storage-01adl.wb.ru",14:"user-storage-01hel.wb.ru",15:"user-storage-01fel.wb.ru",16:"user-storage-01eel.wb.ru",17:"user-storage-01gel.wb.ru",18:"user-storage-01del.wb.ru",19:"user-storage-01dp.wb.ru",20:"user-storage-01cxc.wb.ru",21:"user-storage-01bxc.wb.ru",22:"user-storage-01kel.wb.ru",23:"user-storage-01bdl.wb.ru",24:"user-storage-01adl.wb.ru",25:"user-storage-02dp.wb.ru",26:"user-storage-02el.wb.ru",27:"user-storage-02dp.wb.ru",28:"user-storage-02el.wb.ru",29:"user-storage-02dp.wb.ru",30:"user-storage-02el.wb.ru",31:"user-storage-02dp.wb.ru",32:"user-storage-02el.wb.ru",33:"user-storage-02dp.wb.ru",34:"user-storage-02el.wb.ru",35:"user-storage-02dp.wb.ru",36:"user-storage-02el.wb.ru",37:"user-storage-02dp.wb.ru",38:"user-storage-02el.wb.ru",39:"user-storage-02dp.wb.ru",40:"user-storage-02el.wb.ru",41:"user-storage-02dp.wb.ru",42:"user-storage-02el.wb.ru"},Dn=Tn,En="wbx__sessionID";const xn=function(){function e(){this.session=localStorage.getItem(En),window.addEventListener("storage",(e=>{e.key===En&&(this.session=localStorage.getItem(En))}))}var t=e.prototype;return t.getSession=function(){return this.session||(this.session=localStorage.getItem(En),this.session||(this.session=`site_${wb.helpers.generateGuid()}`,localStorage.setItem(En,this.session))),this.session},t.getUserUid=function(){return this.$router.userIsAuth?this.$router.userUid:this.getBasketUid()},t.getBasketUid=function(){let e=wb.cookieHelper.getCookie("BasketUID");return e||(e=this.getSession()),e},e}();const Bn=function(){function e(){}return e.createPagerModel=function(t,n,s=100,i=window.location.href,r=!1){let o=Math.ceil(t/s);r&&(o=o<=n?n:n+1);let a=[];if(o<=8)a.push(...e.createRange(o,1));else{let t=5;if(n<7)a.push(...e.createRange(7,1)),a.push("");else if(n>=o-t-1)a.push(1),a.push(""),a.push(...e.createRange(7,o-7+1));else{a.push(1),a.push("");let t=n,s=n,i=!1,r=1;for(;r<7;)s<o&&i&&(s++,r++),t>1&&!1===i&&(t--,r++),i=!i;t=1===t?2:t,a.push(...e.createRange(s-t+1,t)),s<o-1&&a.push("")}}const l=new URL(i,window.location.origin),c=a.map((e=>(l.searchParams.set("page",e),{value:e,href:""!==e?l.toString():null})));return{pageUrls:c,pagingInfo:{currentPage:n,totalPages:o,totalItems:t,hideTotal:r}}},e.createRange=function(e,t){return Array.from({length:e}).map(((e,n)=>n+t))},e}(),jn="[RETRY FETCH SERVICE]";let Ln=function(){function e(){this.sendQueue="queue",this.storage=this.$storageHelper,this.storage.supportIndexedDb()?setInterval((()=>this._sendJobChecker.call(this,this.sendQueue)),1e4):this.dbPromise=Promise.reject()}var t=e.prototype;return t.saveRequest=function(e,t,{tryTill:n,timeout:s}={}){try{delete t.signal;const i={url:e,options:t,retryCount:1,retryTime:Date.now()};n>0&&(i.tryTill=n),s>0&&(i.timeout=s),this._openDb().then((e=>e.transaction(this.sendQueue,"readwrite").objectStore(this.sendQueue).add(i)))}catch(e){wb.spa.logError(e,`${jn}: failed to save table=${this.sendQueue}`,!0)}},t._openDb=function(){return this.dbPromise||(this.dbPromise=this.storage.openDb("send-queue",{onupgradeneeded:e=>{if(!e.objectStoreNames.contains(this.sendQueue)){e.createObjectStore(this.sendQueue,{autoIncrement:!0}).createIndex("retryTime","retryTime",{unique:!1})}e.objectStoreNames.contains(this.storage.metadataTableName(this.sendQueue))||e.createObjectStore(this.storage.metadataTableName(this.sendQueue),{keyPath:"name"})},version:2})),this.dbPromise},t._log=function(e){window._debug&&console.debug(`%c${jn}: ${e}`,"color:#4B6F44")},t._sendJobChecker=function(){const e="job_in_progress",t=this.storage.metadataTableName(this.sendQueue);wb.settings.isOffline||this._openDb().then((async n=>{let s=!1;try{const i=await this.storage.get(n,t,e);i&&Date.now()>i.value&&await this.storage.removeItem(n,t,e).then((()=>this._log("lock cleared"))),s=await this.storage.addItem(n,t,{name:e,value:Date.now()+3e5},!0);try{await this.storage.withCursor(n,this.sendQueue,"retryTime",(async(e,t,s)=>{var i;const r=Date.now();if(this._log(`checking ${s.primaryKey} url: ${t.url}, retryCount: ${t.retryCount}, retryTime: ${t.retryTime}`),t.retryCount>10&&0<t.tryTill&&t.tryTill>r&&(t.retryCount=Math.max(2,8),t.retryTime=r-1e3),t.retryCount>10)this.storage.removeItem(n,this.sendQueue,s.primaryKey).then((()=>this._log(`cleared url: ${t.url}`)));else if(t.retryTime<r){const e=s.primaryKey;try{this._log(`executing ${e} url: ${t.url}, retryCount: ${t.retryCount}, retryTime: ${t.retryTime}`);const s={timeout:t.timeout};if(await this.$httpClient.fetchText(t.url,t.options,s),null===(i=s.modified)||void 0===i?void 0:i.timeout)throw this._log(`timeout for ${e} url: ${t.url}`),new Error("service timeout");this.storage.removeItem(n,this.sendQueue,e).then((()=>this._log(`cleared ${e} url: ${t.url}`)))}catch(s){t.retryTime=Date.now()+2**t.retryCount*1e3,t.retryCount++,delete t.options.signal,this.storage.updateItem(n,this.sendQueue,t,e).then((()=>this._log(`extended ${e} url: ${t.url}, retryCount: ${t.retryCount}, retryTime: ${t.retryTime}`)))}}}))}catch(e){console.log(e)}}catch(e){}finally{s&&this.storage.removeItem(n,t,e)}}))},e}();const Nn=Ln,Rn=36e5,Fn="splitInfoV2",Un={splitId:"no_test",title:"no_test"},Wn={default:[{key:"ab_testing",value:!1}]};let Hn=function(){function e(){this._setSplitInfo=this._setSplitInfo.bind(this),this.splitInfo=Wn.default,this._setSplitInfo()}var t=e.prototype;return t.removeCountInFilters=function(){return"no_filters_count"===this.splitInfo.title},t.getSplitInfo=function(){return Un},t.getSplitInfoV2=function(e){return this.splitInfo[e]||Wn.default},t.appendSplitInfoV2=function(e,t){const n=this.getSplitInfoV2(t);n&&n.forEach((t=>e.append(t.key,t.value)))},t._updSplitInfo=function(){this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout(this._setSplitInfo,Rn)},t._setSplitInfo=async function(){var e;const t=this._getSplitInfoFromCache();if(this.splitInfo=null!==(e=null==t?void 0:t.splitInfo)&&void 0!==e?e:Wn,!(null==t?void 0:t.skipSplitRequest)){const e=await this._getSplitInfoFromService()||Wn;this._setSplitInfoToCache(e),this.splitInfo=e}wb.analitics.sendEvent("AB_Test_Splitter_Request",this.splitInfo),this._updSplitInfo()},t._getSplitInfoFromService=async function(){const e=wb.cookieHelper.getCookie("_wbauid");if(!e)return null;try{const t="https://splitter.wb.ru/v2/result",n={"X-API-KEY":"c8ab0248-284e-4fad-a8a2-d4dd258cbd6c","X-USER-ID":e};let s=await WbSpaModel.prototype.$httpClient.fetchBasicJSON(t,{credentials:"omit",headers:n},{saveToBlob:"splitter_response",timeout:3e3,nullOnError:!0,return204:!0});return s&&204!==s.status?this._convertToAssociativeArray(s):Wn}catch(e){return null}},t._convertToAssociativeArray=function(e){let t={};return Array.isArray(e)&&(t=e.reduce(((e,t)=>(e[t.type]=t.properties,e)),{})),t},t._getSplitInfoFromCache=function(){var e;let t=localStorage.getObject(Fn);return t?(t.t=null!==(e=t.t)&&void 0!==e?e:0,Date.now()>t.t+72e5?null:{splitInfo:t.splitInfo,skipSplitRequest:Date.now()<=t.t+Rn}):null},t._setSplitInfoToCache=function(e){e&&localStorage.putObject(Fn,{splitInfo:e,t:Date.now()})},e}();const zn=Hn;const qn=function(){function e(){}return e.prototype.onActionExecuting=async function(){let e=WbSpaModel.prototype.$user.getUid();WbSpaModel.prototype.$services.userData.setKey("0"!==e,e),await WbSpaModel.prototype.$services.userData.getUserDataAsync()},e}();const Vn=function(){function e(){}return e.prototype.onBeforeActionExecuting=async function(e){if("ru"===wb.settings.currentLocale)e.searchParams.set("country","ru");else{const t=await WbSpaModel.prototype.$user.getLocationData();e.searchParams.set("country",t.locale)}},e}();const Gn=function(){function e(e){this.checkFunction=null!=e?e:()=>!0}return e.prototype.onBeforeActionExecuting=function(e,t,n){n.cancelRequest=this.checkFunction()},e}();const Jn=function(){function e(){}return e.prototype.onBeforeActionExecuting=function(e,t,n){t.body||(t.body=new URLSearchParams),t.body.set("changeEmail","SpaChangeEmailEntrypoint"==WbSpaModel.prototype.$router.targetRoute)},e}();let Kn=function(){function e(){}var t=e.prototype;return t.onBeforeActionExecuting=async function(e,t,n,s,i){var r,o;WbSpaModel.prototype.$services.favsService.syncFromServerAsync();const a=WbSpaModel.prototype.$services.cartService,l=WbSpaModel.prototype.$auth.isAuth,c=await WbSpaModel.prototype.$user.getCurrencyAsync();await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("installmentAggregatorService"),this.getBalanceTask=l?WbSpaModel.prototype.$user.getBalance({timeout:1e3}).catch((e=>Promise.resolve())):Promise.resolve();try{await a.sync({timeout:3e3})}catch(e){wb.spa.logError(e,{customMsg:"BasketDataPipeline sync"},!0)}const u=a.publicBasketApiUrl;t.credentials="include";const d=new URL(u);e.port=d.port,e.pathname=(d.pathname+e.pathname).replace("//",""),e.host=d.host,t.body||(t.body=new URLSearchParams);const h=a.getItems();0===h.length&&(n.cancelRequest=()=>!0);const[p,m,g,f,y,v,b]=await Promise.all([WbSpaModel.prototype.$user.getXinfoSignedV1(),this.getBalanceTask,WbSpaModel.prototype.$user.getUserGrade(c),WbSpaModel.prototype.$services.installmentAggregatorService.getAvailableInstallment(),WbSpaModel.prototype.$user.getBrokerInstallmentStatus(),WbSpaModel.prototype.$user.getBrokerInstallmentConfig(),WbSpaModel.prototype.$user.getCustomsDuty(c)]);this.userBalanceSigned=m,this.userGradeSigned=g,this.pdlInstOptions=null;let w,S=null;if("pdl"===(null==f?void 0:f.type))this.pdlInstOptions=await WbSpaModel.prototype.$services.installmentAggregatorService.getLimit("pdl");else if("cwb"===(null==f?void 0:f.type)){const[e,t]=await Promise.all([WbSpaModel.prototype.$user.getBrokerInstallmentStatus(),WbSpaModel.prototype.$user.getBrokerInstallmentConfig()]);this.userBrokerInstStatus=e,this.userBrokerInstConfig=t}else"iwb"===(null==f?void 0:f.type)&&(S=await WbSpaModel.prototype.$services.installmentAggregatorService.getLimit("iwb"));if(this.customsDutySigned=b,WbSpaModel.prototype.$services.userAddressService.getByCoordinates(p.latitude,p.longitude,p.address),l){const e=await WbSpaModel.prototype.$getService("groupedDeliveriesService").then((e=>e.getPurchaseInfo()));w=null==e?void 0:e.unpaid}const _=this.userBrokerInstStatus&&"completed"===this.userBrokerInstStatus.status?Math.floor(this.userBrokerInstStatus.availableSum/100):0,C=e.searchParams.get("includeInOrderStr"),k=h.find((e=>e.characteristicId==C));this.isBuyItNowMode=!!k,k?k.includeInOrder=!0:1===h.length&&(h[0].includeInOrder=!0),t.body=WbSpaModel.prototype.$helper.objectSerializer({isBuyItNowMode:this.isBuyItNowMode,items:k?[k]:h,includeInOrderStr:this.isBuyItNowMode?null:h.filter((e=>e.includeInOrder)).map((e=>e.characteristicId)).join(";")||"1",currency:c,xInfo:p.xinfo,cityLatitude:p.latitude,cityLongitude:p.longitude,address:p.address,userBalanceSigned:this.userBalanceSigned,unpaidAmount:w,userDataSigned:p.userDataSign,addressDataSign:p.addressDataSign,userGradeSigned:g,customsDutySigned:b,iwcNetLimit:(null===(o=null===(r=this.pdlInstOptions)||void 0===r?void 0:r.productTypes)||void 0===o?void 0:o.length)?this.pdlInstOptions.limit:-1,cwbLimit:_,iwbLimit:null==S?void 0:S.limit,instType:null==f?void 0:f.type},t.body,!0,!0)},t.onActionExecuted=async function(e){var t,n;e.responseData||(e.responseData={}),e.responseData.isNetworkError?await WbSpaModel.prototype.$services.cartService.localBasket.enrichProductsIfNeedAsync():((null===(t=e.responseData.data)||void 0===t?void 0:t.basket)&&WbSpaModel.prototype.$services.cartService.localBasket.enrichItemsLocalInfo(e.responseData.data.basket.basketItems),(null===(n=e.responseData.data)||void 0===n?void 0:n.basket)&&!this.isBuyItNowMode&&WbSpaModel.prototype.$services.cartService.save(e.responseData.data.basket)),e.responseData.userBalanceSigned=this.userBalanceSigned,e.responseData.pdlInstOptions=this.pdlInstOptions,e.responseData.userGradeSigned=this.userGradeSigned,e.responseData.customsDutySigned=this.customsDutySigned,e.responseData.isBuyItNowMode=this.isBuyItNowMode},e}();const Qn=Kn;const Xn=function(){function e(){}return e.prototype.onBeforeActionExecuting=async function(e){try{if(!!e.searchParams.get("bc")){WbSpaModel.prototype.$services.cartService.getBankCards(2e3,WbSpaModel.prototype.$user.getCurrency(),!0),WbSpaModel.prototype.$moduleLoader.execModule("bottomNotificationPanel","showNotification",[0,"Карта успешно привязана"]);const e=new URL(location.href);e.searchParams.delete("bc"),window.history.replaceState({},document.title,e.href)}}catch(e){}},e}();const Yn=function(){function e(){}var t=e.prototype;return t.onActionExecuting=async function(e,t,n){const s=WbSpaModel.prototype.$router,i=parseInt(s.routeParameters.cod1S),r=s.queryParams.has("size")&&parseInt(s.queryParams.get("size"))||null,o=await WbSpaModel.prototype.$services.productCard.loadProductCardAsync(i,r);if(null===o)return n.redirected=!0,s.moveTo404Async();this.data=o},t.onActionExecuted=async function(e){e.responseData?Object.assign(e.responseData,this.data):e.responseData=this.data},e}();let Zn=function(){function e(){this.data=null}var t=e.prototype;return t.onBeforeActionExecuting=function(){this.data=null},t.onActionExecuting=async function(e,t,n){var s;const i=await this.$services.favsService.getWlArrivedCatalogModelAsync();if(0==(null!==(s=null==i?void 0:i.goods)&&void 0!==s?s:[]).length)return n.redirected=!0,this.$router.moveTo404Async();this.data=i},t.onActionExecuted=function(e){var t;if(null==this.data)return;const n=this._adaptGoods(null!==(t=this.data.goods)&&void 0!==t?t:[]);e.responseData={goods:n,goodsCount:n.length}},t._adaptGoods=function(e){return e.map((e=>{var t;return Object.assign(Object.assign({},e),{pics:1,brand:e.brandName,name:e.goodsName,canQuickOrder:!e.digitalGood,sale:Math.max(e.sale,null!==(t=null==e?void 0:e.personalSale)&&void 0!==t?t:0)})}))},(0,i.A)(e,[{key:"$services",get:function(){return WbSpaModel.prototype.$services}},{key:"$router",get:function(){return WbSpaModel.prototype.$router}}])}();const es=Zn;const ts=function(){function e(){this.data=null}var t=e.prototype;return t.onActionExecuting=async function(e){this.data=await WbSpaModel.prototype.$services.favsService.getFavsDataAsync(e.searchParams)},t.onActionExecuted=function(e){null!=this.data&&(e.responseData||(e.responseData={}),Object.assign(e.responseData,this.data))},e}(),ns=Object.freeze({main:1,goods:2,search:3,brand:4,brandConstructor:5,brandConstructorCatalog:6,seller:7,sellerCustomMain:9,promoEntry:11,categoryDenyLink:12,recommendationsSearch:13}),ss="__catalogOptions";const is=function(){function e(){}return e.updateCookie=function(e,t){const n=wb.cookieHelper.getCookie(ss);if(null!=n){const s=n.split("&").map((n=>n.indexOf(e)>-1?`${e}:${t[0].toUpperCase()}${t.slice(1)}`:n)).join("&");wb.cookieHelper.setCookie(ss,s,{"max-age":86400,domain:"localhost"===window.location.hostname?"":".wildberries.ru"})}else{const e="c516x688",t="popular",n=`CardSize:${e[0].toUpperCase()}${e.slice(1)}&Sort:${t[0].toUpperCase()}${t.slice(1)}`;wb.cookieHelper.setCookie(ss,n,{"max-age":86400,domain:"localhost"===window.location.hostname?"":".wildberries.ru"})}},e.getCookie=function(e){let t;const n=wb.cookieHelper.getCookie(ss);return null!=n&&n.split("&").forEach((n=>{n.indexOf(e)>-1&&(t=n.split(":")[1].toLowerCase())})),t},e}();const rs=function(){function e(){}return e.prototype.getSeoTags=async function(e){e=e.replace("/catalogdata/","/catalog/");const t=`seo-catalog-tags-by-url-${wb.settings.currentLocale}-${e}.json`,n=await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(t,3e3);return(null==n?void 0:n.link)&&(n.link=n.link.replace("/catalog/","/catalogdata/")),n},e}();var os=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n};let as=function(){function e(){this.initialized=!1,this.cancelled=!1,this.catalogMenu=null,this.currentMenuItem=null,this.modules={}}var t=e.prototype;return t.onBeforeActionExecuting=async function(e,t,n){var s,i;this.xData=this.xInfo=this.products=this.sort=null,this.cancelled=!1,this.searchSeoTag=!1,this.initialized||await this._initAsync();const r=new URL(e);if(r.pathname=r.pathname.replace("/webapi",""),this.currentMenuItem=this.catalogMenu.getCurrentMenuItem(r),(null===(s=this.currentMenuItem)||void 0===s?void 0:s.landing)||(null===(i=this.currentMenuItem)||void 0===i?void 0:i.isDenyLink))return void(this.cancelled=!0);this.currentMenuItem?this.currentMenuItem.seoTagInfo=null:this.currentMenuItem=await this._tryGetMenuItemFromTags(r);const[o,a]=await Promise.all([this._getXDataAsync(),WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync()]);this.xData=o,this.xInfo=a,n.cancelRequest=null!=this.xData,n.cancelRequest||(t.body=this.xInfo)},t._tryGetMenuItemFromTags=async function(e){const t=e.pathname,n=await this.seoTagsService.getSeoTags(t);if(!n)return null;this.searchSeoTag=!!n.searchQuery,e.pathname=n.link;const s=this.searchSeoTag?this.catalogMenu.getCurrentMenuItem(e):this._selectedMenuItemFinder(e);return s?(this.searchSeoTag||(n.xQuery=0===s.query.indexOf("preset")?`${s.query}&${n.parameters}`:n.parameters),s.seoTagInfo=n,s):null},t._selectedMenuItemFinder=function(e){let t,n=null;for(;0!==(t=e.pathname.lastIndexOf("/"))&&null==n;)n=this.catalogMenu.getCurrentMenuItem(e),e.pathname=e.pathname.substring(0,t);return n},t.onActionExecuting=async function(){if(this.xData&&this.xInfo&&!this.cancelled){const e=this.modules.QueryHelper.getInitialParams();let{sort:t=this.modules.SorterModel.getSortFromCookie,page:n}=e,s=os(e,["sort","page"]);t!==this.modules.SorterModel.getSortFromCookie&&is.updateCookie("Sort",t);const i=new this.modules.QueryHelper({sort:t,page:n,filters:this.modules.QueryHelper.checkOnlyFilterParams(s)});t=i.checkAndchangeSort(t);const r=i.getQueryStringForCatalog(),o=this.modules.CatalogProvider.createGoodsProvider(this.xData),{goods:a=[],resp:l}=await this._loadGoodsAsync(o,r);this.products=a,this.sort=t,this.searchSeoTag&&(this.xData=this._updateXDataIfSearchTag(this.xData,l))}},t._updateXDataIfSearchTag=function(e,t){var n;const s=(null==t?void 0:t.metadata)?null==t?void 0:t.metadata:t;return(null==s?void 0:s.name)||(e.gender=null),(null==s?void 0:s.name)&&e.search!==(null==s?void 0:s.name)&&(e.search=s.name),(null==s?void 0:s.catalog_value)&&(e.xcatalogQuery=s.catalog_value),(null==s?void 0:s.catalog_type)&&(e.xcatalogShard=s.catalog_type),(null==s?void 0:s.context)&&(e.xcatalogContext=s.context),e.originalSearch=null!==(n=null==s?void 0:s.original)&&void 0!==n?n:null,e},t._loadGoodsAsync=async function(e,t){try{const{goods:n=[],resp:s}=await e.loadGoodsAsync(t);return{goods:n,resp:s}}catch(e){return{goods:[],resp:null}}},t.onActionExecuted=function(e){var t;if(null==this.xData||this.cancelled)return;e.responseData||(e.responseData={});const n=this.catalogMenu.getSitePathItems(this.currentMenuItem),s={xData:this.xData,menuId:this.currentMenuItem.id,currentMenuItem:this.currentMenuItem,rootMenuItem:this.catalogMenu.getRootNode(this.currentMenuItem),selectedHasChild:!!this.currentMenuItem.childs,sitePathItems:n,emptyCatalogLink:this.currentMenuItem.url,tagsUrl:this.currentMenuItem.url,products:this.products,targetUrl:"GP",title:null!==(t=this.currentMenuItem.seo)&&void 0!==t?t:this.currentMenuItem.name,containerClass:"catalog-page",needAdultProtection:!wb.adult.isConfirmed,sorterModel:new this.modules.SorterModel(this.sort,this.currentMenuItem.url)};this.currentMenuItem.seoTagInfo&&this._updateModelIfSeoTagUrl(s,this.currentMenuItem.seoTagInfo);const i={mainVersion:0,type:ns.goods,model:s};Object.assign(e.responseData,{data:i})},t._updateModelIfSeoTagUrl=async function(e,t){t.seo&&(e.title=t.seo),e.tagsUrl=t.url},t._initAsync=async function(){const[e,t,n,s,i]=await Promise.all([this.$moduleLoader.loadModuleAsync("xCatalogData"),this.$moduleLoader.loadModuleAsync("queryHelper"),this.$moduleLoader.loadModuleAsync("xCatalogProvider"),this.$moduleLoader.loadModuleAsync("sorterModel"),wb.spa.getCatalogMenu()]);this.modules={XCatalogData:e.XCatalogData,XSearchCatalogData:e.XSeachData,QueryHelper:t,CatalogProvider:n,SorterModel:s.CatalogSorterModel},this.catalogMenu=i,this.seoTagsService=new rs},t._getXDataAsync=async function(){var e;const t=null===(e=this.currentMenuItem)||void 0===e?void 0:e.seoTagInfo;if(this.searchSeoTag&&t){const e=await WbSpaModel.prototype.$getUserGender();return new this.modules.XSearchCatalogData(t.searchQuery,t.searchQuery,null,null,e,1)}const n=this.currentMenuItem&&((null==t?void 0:t.xQuery)||this.currentMenuItem.query);return this.currentMenuItem&&this.currentMenuItem.shard?new this.modules.XCatalogData(n,this.currentMenuItem.shard):null},(0,i.A)(e,[{key:"$router",get:function(){return WbSpaModel.prototype.$router}},{key:"$moduleLoader",get:function(){return WbSpaModel.prototype.$moduleLoader}},{key:"$services",get:function(){return WbSpaModel.prototype.$services}}])}();const ls=as;let cs=function(){function e(){this.initialized=!1,this.requestCancelled=!1,this.cancelled=!1,this.catalogMenu=null,this.currentMenuItem=null}var t=e.prototype;return t.onBeforeActionExecuting=async function(e,t,n){var s;this.requestCancelled=this.cancelled=!1,this.initialized||await this._initAsync();const i=new URL(e);i.pathname=i.pathname.replace("/webapi",""),this.currentMenuItem=this.catalogMenu.getCurrentMenuItem(i),(null===(s=this.currentMenuItem)||void 0===s?void 0:s.landing)?n.cancelRequest=this.requestCancelled=null!=this.currentMenuItem:this.cancelled=!0},t.onActionExecuted=async function(e){if(this.cancelled)return;if(!this.requestCancelled)return this._modifyServerResult(e.responseData);e.responseData||(e.responseData={});const t=this.catalogMenu.getSitePathItems(this.currentMenuItem),n=this.currentMenuItem.id,[s,i]=await Promise.all([this.$moduleLoader.loadModuleAsync("mainCatalogConfig"),this._getCarouselsFromSearchService(n)]),r=new s(s.template,this.menuIdEnum).getConfig(this.currentMenuItem),o=this.bannersTask(r,n),a=this.catalogMenu.menuById.get(n).childs,l=JSON.parse(JSON.stringify(a)),c={menuId:n,bannersTask:o,brandCatalogCode:r.brandCatalogCode,pageTitle:this.currentMenuItem.name,sitePathItems:t,catalogMenu:this._transformMenu(l),needAdultProtection:n==this.menuIdEnum.forAdults&&!wb.adult.isConfirmed,promoMenuV2:!1,reqiredCss:r.reqiredCss,requiredJs:[],topMenu:r.useTopMenu?this._buildTopMenu(l):null,topBrandsUrl:this._getUrlForTopBrands(n,r),carouselsData:i},u={mainVersion:n===this.menuIdEnum.sport?2:3,type:ns.main,model:c};Object.assign(e.responseData,{data:u})},t._modifyServerResult=function(e){const{data:t}=e;if(!t)return;const{model:n}=t;n&&(n.bannersTask=Promise.resolve({mainBannersFirst:this.$isDesktop?n.firstBannersDesk:n.firstBannersMob,mainBannersSecond:this.$isDesktop?n.secondBannersDesk:n.secondBannersMob,seasonBanners:n.seasonBanners,verticalBanners:n.verticalBanners,smallBanners:n.smallBanners}))},t.bannersTask=async function(e,t){const n=await this.$services.bannersService.getCatalogBanners(t,this.menuIdEnum),s=this._buildBannersRows(n.smallBanners,e.bannersSort),i=this._buildBannersRows(n.verticalBanners,e.verticaBannerSort);return{mainBannersFirst:n.mainBannersFirst,mainBannersSecond:n.mainBannersSecond,seasonBanners:n.seasonBanners,verticalBanners:i,smallBanners:s}},t._getUrlForTopBrands=function(e,t){const n=new URLSearchParams({menuId:e,brandCode:t.brandCatalogCode});return t.topBrandsCount&&n.append("count",t.topBrandsCount),`/webapi/maincatalog/topBrands?${n}`},t._buildTopMenu=function(e){if(!e||0==e.length)return;const t=e.slice(0,7),n=this._toChunks(e,10),s=[];t.forEach((e=>{const t=this._toChunks(e.childs,10),n={node:this._toTopMenuItem(e),childNodes:t};s.push(n)}));return[{node:this._allCategoriesMenuItem(e[0]),childNodes:n}].concat(s)},t._toTopMenuItem=function(e){return{name:e.name,link:e.url}},t._allCategoriesMenuItem=function(e){return e.name="Все категории",this._toTopMenuItem(e)},t._toChunks=function(e,t){const n=[];for(let s=0;s<e.length;s+=t){const i=e.slice(s,s+t).map((e=>this._toTopMenuItem(e)));i.length>0&&n.push(i)}return n},t._buildBannersRows=function(e,t){if(!e||0==e.length||!t)return null;var n={},s=0;return t.forEach(((t,i)=>{let r=[];i<9&&this._isAllBannersExist(t,e)&&t.forEach((t=>{var n;(null===(n=e[t])||void 0===n?void 0:n.length)>0&&r.push(e[t][0])})),n[s]=r,s++})),n},t._isAllBannersExist=function(e,t){return e.forEach((e=>{var n;if(!((null===(n=t[e])||void 0===n?void 0:n.length)>0))return!1})),!0},t._initAsync=async function(){this.catalogMenu=await wb.spa.getCatalogMenu(),this.initialized=this.catalogMenu.isInited},t._transformMenu=function(e){return null==e?void 0:e.map((e=>{var t,n;return{childNodes:this._transformMenu(null!==(t=e.childs)&&void 0!==t?t:[]),entity:{pageUrl:e.url,name:e.name,isDenyLink:null!==(n=e.isDenyLink)&&void 0!==n&&n},parent:{}}}))},t._getCarouselsFromSearchService=async function(e){const t=async()=>{const[e,t,{XSeachData:n}]=await Promise.all([WbSpaModel.prototype.$getUserGender(),WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync(),this.$moduleLoader.loadModuleAsync("xCatalogData")]),s=new n(null,null,null,null,e),i=new URL(s.dataUrl);return wb.helpers.appendToParamsFromQuery(i.searchParams,t),i.searchParams.set("resultset","catalog"),WbSpaModel.prototype.$analitic.appendSplitInfoV2(i.searchParams,"search"),i};try{const[n,s]=await Promise.all([WbSpaModel.prototype.$httpClient.fetchStaticDataV2(`main-catalog-carousels-${e}.json`,3e3),t()]),i=null==n?void 0:n.filter((e=>{var t;return(null===(t=null==e?void 0:e.query)||void 0===t?void 0:t.length)>0})).map((e=>((e,t)=>(wb.helpers.appendToParamsFromQuery(t.searchParams,e.query),t.searchParams.sort(),{fetchUrl:t.toString(),firstTitle:e.name,showAllURL:t.toString(),sort:e.sort,targetURL:"TG"}))(e,s)));return null==i||i.sort(((e,t)=>e.sort-t.sort)),i}catch(e){return console.error(e),null}},(0,i.A)(e,[{key:"$services",get:function(){return WbSpaModel.prototype.$services}},{key:"$moduleLoader",get:function(){return WbSpaModel.prototype.$moduleLoader}},{key:"$isDesktop",get:function(){return WbSpaModel.prototype.$isDesktop}},{key:"menuIdEnum",get:function(){return this.catalogMenu.menuIdEnum}}])}();const us=cs;let ds=function(){function e(){this.initialized=!1,this.requestCancelled=!1,this.cancelled=!1,this.catalogMenu=null,this.currentMenuItem=null}var t=e.prototype;return t.onBeforeActionExecuting=async function(e,t,n){var s;this.requestCancelled=this.cancelled=!1,this.initialized||await this._initAsync();const i=new URL(e);i.pathname=i.pathname.replace("/webapi",""),this.currentMenuItem=this.catalogMenu.getCurrentMenuItem(i),(null===(s=this.currentMenuItem)||void 0===s?void 0:s.isDenyLink)?n.cancelRequest=this.requestCancelled=null!=this.currentMenuItem:this.cancelled=!0},t.onActionExecuted=async function(e){var t;if(this.cancelled)return;e.responseData||(e.responseData={});const n=this.catalogMenu.getSitePathItems(this.currentMenuItem),s={mainVersion:0,type:ns.categoryDenyLink,model:{menuId:this.currentMenuItem.id,currentMenuItem:this.currentMenuItem,rootMenuItem:this.catalogMenu.getRootNode(this.currentMenuItem),children:this.currentMenuItem.childs,sitePathItems:n,title:null!==(t=this.currentMenuItem.seo)&&void 0!==t?t:this.currentMenuItem.name,needAdultProtection:!wb.adult.isConfirmed,catalogMenu:this.catalogMenu,catalogPromoLeftMenu:this.catalogMenu.getCatalogDenyMenu(this.currentMenuItem,n)}};Object.assign(e.responseData,{data:s})},t._initAsync=async function(){this.catalogMenu=await wb.spa.getCatalogMenu(),this.initialized=this.catalogMenu.isInited},(0,i.A)(e,[{key:"$services",get:function(){return WbSpaModel.prototype.$services}},{key:"$moduleLoader",get:function(){return WbSpaModel.prototype.$moduleLoader}},{key:"$isDesktop",get:function(){return WbSpaModel.prototype.$isDesktop}}])}();const hs=ds;var ps=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n};let ms=function(){function e(){}var t=e.prototype;return t.onBeforeActionExecuting=async function(e,t,n){n.cancelRequest=!0,this.initialized||await this._initAsync()},t.onActionExecuting=async function(e,t,n){var s,i;const r=this.modules.QueryHelper.getInitialParams();this.catalogMenu=this.xData=this.products=this.targetUrl=this.isEmpty=null,this.isNetworkError=!1;let{brand:o,page:a,sort:l="popular",cardsize:c,search:u,targeturl:d,nocorrection:h,ssubject:p}=r,m=ps(r,["brand","page","sort","cardsize","search","targeturl","nocorrection","ssubject"]);const g=new this.modules.QueryHelper({sort:l,page:a,ssubject:p,filters:this.modules.QueryHelper.checkOnlyFilterParams(m)});l=g.checkAndchangeSort(l);const f=g.getQueryStringForCatalog(),y=await this._getXDataAsync(r);if(null==y.search||""===y.search)return n.redirected=!0,this.$router.moveTo404Async();const{redirect:v,isProductRedirect:b}=await this._checkPossibleRedirects(r,y);if(v&&!b)return n.redirected=!0,this.$router.moveTo(v,!0);const w=await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync(),S=this.modules.CatalogProvider.createGoodsProvider(y),{goods:_=[],resp:C,isNetworkError:k=!1}=await this._loadGoodsAsync(S,f),I=(null==C?void 0:C.metadata)?null==C?void 0:C.metadata:C;if(this.isEmpty=void 0!==(null==I?void 0:I.is_empty)?I.is_empty:null,(null==I?void 0:I.name)||(y.gender=null),"redirect"===(null==I?void 0:I.catalog_type)&&(null==I?void 0:I.catalog_value)){const e=await this._checkRedirectUrl(I.catalog_value);if(e)return n.redirected=!0,this.$router.moveTo(e,!0)}if((null==I?void 0:I.title)&&(y.title=I.title),(null==I?void 0:I.name)&&(null==I?void 0:I.change_input)&&(y.search=I.name),(null==I?void 0:I.catalog_value)&&(y.xcatalogQuery=I.catalog_value),(null==I?void 0:I.catalog_type)&&(y.xcatalogShard=I.catalog_type),(null==I?void 0:I.context)&&(y.xcatalogContext=I.context),(null==I?void 0:I.normquery)&&(y.normQuery=I.normquery),(null==I?void 0:I.rmi)&&(y.rmi=I.rmi),y.originalSearch=null!==(s=null==I?void 0:I.original)&&void 0!==s?s:null,y.change_input=null!==(i=null==I?void 0:I.change_input)&&void 0!==i&&i,this.products=k?[]:_,this.emptySearch=0===this.products.length&&0===g.getFiltersQuery().toString().length,this.isNetworkError=k,b&&this.emptySearch)return n.redirected=!0,this.$router.moveTo(v,!0);this.emptySearchRecom=[],this.emptySearch&&(this.emptySearchRecom=await this._getEmptySearchRecommendations(y)),this._needChangeEmptyUserSearch(this,y)&&(y.userSearch=y.search),this.xData=y,this.targetUrl=d,this.xInfo=w,this.sort=l},t.onActionExecuted=function(e){var t;e.responseData||(e.responseData={});this.$router.queryParams.get("ssubject");const n=String.format(null!==(t=this.xData.title)&&void 0!==t?t:this.xData.search),s={type:ns.search,model:{title:n,xData:this.xData,tagsUrl:`${this.xData.search.toSafeString()}&lang=ru&${this.xInfo}&locale=${WbSpaModel.prototype.$user.getLocale()}`,emptySearch:this.emptySearch,products:this.products,emptySearchRecom:this.emptySearchRecom,targetUrl:this.targetUrl,needAdultProtection:!wb.adult.isConfirmed,sorterModel:new this.modules.SorterModel(this.sort,window.location.href),currentMenuItem:null,rootMenuItem:null,isNetworkError:this.isNetworkError,isEmpty:this.isEmpty,selectedHasChild:!1}};Object.assign(e.responseData,{data:s})},t._loadGoodsAsync=async function(e,t){try{const{goods:n=[],resp:s}=await e.loadGoodsAsync(t);return{goods:n,resp:s}}catch(e){return{goods:[],resp:null,isNetworkError:!0}}},t._initAsync=async function(){const[e,t,n,s]=await Promise.all([this.$moduleLoader.loadModuleAsync("xCatalogData"),this.$moduleLoader.loadModuleAsync("queryHelper"),this.$moduleLoader.loadModuleAsync("xCatalogProvider"),this.$moduleLoader.loadModuleAsync("sorterModel")]);this.modules={XCatalogData:e.XSeachData,QueryHelper:t,CatalogProvider:n,SorterModel:s.CatalogSorterModel},this.initialized=!0},t._getXDataAsync=async function(e){const t=await WbSpaModel.prototype.$getUserGender();return new this.modules.XCatalogData(e.search,e.search,null,null,t,e.nocorrection,e.ssubject)},t._checkPossibleRedirects=async function(e,t){try{const[n,s]=await Promise.all([this._getBrandsRedirect(e),this._tryGetUrlToProductCard(e,t)]);return{redirect:null!=n?n:s,isProductRedirect:null!=s}}catch(e){return console.error(`Error checking redirect ${e.message}`),{redirect:null}}},t._getBrandsRedirect=async function(e){var t;try{const n=await this.$httpClient.fetchBasicJSON(`https://brand-suggestions.wildberries.ru/api/v1/redirect?query=${encodeURIComponent(e.search)}`,{},{timeout:2e3});return""===(null!==(t=null==n?void 0:n.url)&&void 0!==t?t:"")?null:n.url}catch(e){return null}},t._checkRedirectUrl=async function(e){var t;try{const n=new URL(e.startsWith("http")?e:"https://"+e);if(n.host.endsWith(".wildberries.ru")){const e=!n.pathname.startsWith("/recent")&&n.pathname.startsWith("/catalog");if(e&&(null===(t=await wb.spa.getCatalogMenu())||void 0===t?void 0:t.menuByUrl.get(n.pathname))||!e)return n.toString()}return n.toString()}catch(e){return null}},t._tryGetUrlToProductCard=async function(e,t){var n;if(!t.isValid||"merger"===t.shardKey)return null;const s=e.search;if(!this.$helper.isNumber(s))return null;if(s<=1e3||s>=1e9)return null;try{const e=await wb.xnm.getXnmProducts([s]);if(!((null===(n=null==e?void 0:e[s])||void 0===n?void 0:n.pics)>0))return null;const t=new URL(`/catalog/${s}/detail.aspx`,window.location.origin);return t.searchParams.set("targetUrl","SP"),t}catch(e){return null}},t._getEmptySearchRecommendations=async function(e){const t=`https://search-goods.wildberries.ru/search?query=${encodeURIComponent(e.search)}`;try{const e=await this.$httpClient.fetchBasicJSON(t,{},{timeout:2e3});if(!(Array.isArray(e)&&e.length>0))return[];const n=await wb.xnm.getCatalogCards(e);return Object.values(n).reduce(((e,t)=>(t.id&&e.push(wb.xnm.convertXProductToSpaCatalogProduct(t)),e)),[])}catch(e){return console.error(e.message),[]}},t._notShowTecDoc=function(e){var t,n;return!(null===(t=null==e?void 0:e.xcatalogContext)||void 0===t?void 0:t.includes("autoproduct"))||wb.settings.isIE||!(null===(n=wb.global.settings.switches)||void 0===n?void 0:n.tecDocEnable)},t._needChangeEmptyUserSearch=function(e,t){var n;if(!e.emptySearch)return!1;if(this._notShowTecDoc(t))return!1;return-1!==(null===(n=t.userSearch)||void 0===n?void 0:n.indexOf("automodel:"))},(0,i.A)(e,[{key:"$router",get:function(){return WbSpaModel.prototype.$router}},{key:"$moduleLoader",get:function(){return WbSpaModel.prototype.$moduleLoader}},{key:"$services",get:function(){return WbSpaModel.prototype.$services}},{key:"$httpClient",get:function(){return WbSpaModel.prototype.$httpClient}},{key:"$helper",get:function(){return WbSpaModel.prototype.$helper}}])}();const gs=ms,fs=["wide","medium","mini"];let ys=function(){function e(){this.fullMenu=null,this.menuByUrl=new Map,this.menuById=new Map,this.brandsMenuList=null,this.promoId=null,this.isSpecial=null,this.isPremium=!1}var t=e.prototype;return t.initMenu=async function(e){var t;e&&(this.promoId=null!==(t=e.promo.id)&&void 0!==t?t:0,this.isSpecial=e.promo.isSpecial,this.isPremium=e.isPremium,this.shelves=e.promo.shelves,this.isExtended=e.promo.isExtended,this._createMenuMap(e),this._generateImg(e))},t.getCurrentMenuItem=function(e){if(!e)return null;const t=e.pathname.replace("promotionscatalogdata","promotions");return this.menuByUrl.get(t)},t.getSitePathItems=function(e){if(!e)return null;const t=[];t.push({id:e.id,name:e.name,pageUrl:e.url});let n=this.menuById.get(e.id).parentId;for(;null!=n;){const e=this.menuById.get(n);t.push({id:n,name:e.name,pageUrl:e.url}),n=e.parentId}return t.push({id:2192,name:"Акции",pageUrl:"/promotions"}),t.reverse()},t.getCatalogMenu=function(e,t){var n,s,i,r,o,a;if(!e)return;if(e.landing||2===t.length)return{current:{name:e.name,link:e.url,isTop:e.isTop,lastSelected:!1},sideMenu:[],parent:{},parents:[],tagsMenu:null!==(s=null===(n=e.childNodes)||void 0===n?void 0:n.map((e=>({name:e.name,link:e.url}))))&&void 0!==s?s:[]};const l=t[t.length-2],c=t.slice(1).map((e=>({name:e.name,link:e.pageUrl})));c[c.length-1].lastSelected=!0;const u=null===(i=e.childNodes)||void 0===i?void 0:i.map((e=>({name:e.name,link:e.url,anc:!0})));if((null===(r=e.childNodes)||void 0===r?void 0:r.length)>0)return{current:{name:e.name,link:e.url,isTop:e.isTop,lastSelected:!1},sideMenu:[...c,...u],parent:{name:l.name,link:l.pageUrl},parents:this.getParents(e.id),tagsMenu:null!=u?u:[]};const d=this.menuByUrl.get(l.pageUrl);return{current:{name:e.name,link:e.url,isTop:e.isTop,lastSelected:!0},sideMenu:c,parent:{name:l.name,link:l.pageUrl},parents:this.getParents(e.id),tagsMenu:null!==(a=null===(o=d.childNodes)||void 0===o?void 0:o.map((e=>({name:e.name,link:e.url}))))&&void 0!==a?a:[]}},t.hasItem=function(e){return!!e&&this.menuById.has(e)},t.getCatalogLink=function(e){return this.menuById.get(e).url},t.getParents=function(e){const t=[];let n=this.menuById.get(e).parentId;for(;null!=n;){const e=this.menuById.get(n);t.push({name:e.name,link:e.url,isLanding:e.landing}),n=e.parentId}return t.reverse()},t.getRootNode=function(e){let t=this.menuById.get(e.id);for(;null!=t.parentId;)t=this.menuById.get(t.parentId);return this._adaptMenu(t)},t._createMenuMap=function(e){this.brandsMenuList=e.promo,this.fullMenu=e.menu,this.fullMenu.forEach((e=>this._setNode(e,null)))},t._setNode=function(e,t){var n;this.menuByUrl.set(e.url,e),this.menuById.set(e.id,{id:e.id,parentId:t,url:e.url,name:e.name,landing:e.landing,childs:e.childNodes,promoId:this.promoId}),null===(n=e.childNodes)||void 0===n||n.forEach((t=>this._setNode(t,e.id)))},t._adaptMenu=function(e){var t;const n=this.menuById.get(e.id);return n.childs=null===(t=n.childs)||void 0===t?void 0:t.map((e=>this._adaptMenu(e))),n},t._generateImg=function(e){const t=e.promo.poster;t&&(e.isPremium?this._generatePoster(t):this.isSpecial&&(this._generatePoster(t),this._generateCategoryImgBackground(t.category)))},t._generatePoster=function(e){e&&fs.forEach((t=>{const n=e.gradient?`no-repeat url('${e[t]}'), ${e.gradient}, ${e.background}`:`no-repeat url('${e[t]}'), ${e.background}`;document.documentElement.style.setProperty(`--custom-promo-poster-${t}`,n)}))},t._generateCategoryImgBackground=function(e){document.documentElement.style.setProperty("--custom-promo-image-background",e)},e}();const vs=ys;var bs=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n};let ws=function(){function e(){this.initialized=!1,this.catalogMenu=null,this.modules={}}var t=e.prototype;return t.onBeforeActionExecuting=async function(e,t,n){var s;if(this.xData=this.xInfo=this.currentMenuItem=this.products=this.type=this.sort=this.isKursk=null,n.cancelRequest)return;this.initialized||await this._initAsync();const i=new URL(e);i.pathname=i.pathname.replace("/webapi","");const r=i.pathname.split("/")[2];if(this.promo!==r){this.promotionsService=WbSpaModel.prototype.$services.promotionsService;const e=await this.promotionsService.getPromoDataByUrl(r);await this._loadPromoMenu(e,r)}if(!(this.catalogMenu.promoId>0&&(this.currentMenuItem=this.catalogMenu.getCurrentMenuItem(i))))return n.redirected=!0,WbSpaModel.prototype.$router.moveTo404Async();if(this.isKursk=189881===this.catalogMenu.promoId,this.isKursk){if("ru"!==wb.settings.currentLocale)return n.redirected=!0,this.$router.moveTo404Async();this.rewriteDestTo=-2307160}this.currentMenuItem=this.catalogMenu.getCurrentMenuItem(i),this.showCategories=null===(s=this.currentMenuItem)||void 0===s?void 0:s.isTop,this.xData=this.currentMenuItem?new this.modules.XCatalogData(this.currentMenuItem.query,this.currentMenuItem.shardKey,null,null,this.rewriteDestTo):null,this.xData.isPromo=!0,this.enableEntryPromoPage=this.showCategories,this.bannersTask=this.showCategories?this._bannersTask(this.catalogMenu.promoId):Promise.resolve(null),this.xInfo=await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync(),n.cancelRequest=null!=this.xData},t.onActionExecuting=async function(){if(this.xData&&this.xInfo&&!this.enableEntryPromoPage){const e=this.modules.QueryHelper.getInitialParams();let{sort:t=this.modules.SorterModel.getSortFromCookie,page:n}=e,s=bs(e,["sort","page"]);const i=new this.modules.QueryHelper({sort:t,page:n,filters:this.modules.QueryHelper.checkOnlyFilterParams(s)});t=i.checkAndchangeSort(t);const r=i.getQueryStringForCatalog(),o=this.modules.xCatalogProvider.createGoodsProvider(this.xData),{goods:a=[]}=await o.loadGoodsAsync(r);this.products=a,this.sort=t}},t.onActionExecuted=function(e){if(null==this.xData)return;e.responseData||(e.responseData={});const t=this.catalogMenu.getSitePathItems(this.currentMenuItem),n=this.enableEntryPromoPage?this._getEntryModel(t):this._getCatalogModel(t);Object.assign(e.responseData,{data:n})},t._initAsync=async function(){const[e,t,n,s,i]=await Promise.all([WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogData"),WbSpaModel.prototype.$moduleLoader.loadModuleAsync("queryHelper"),WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogProvider"),WbSpaModel.prototype.$moduleLoader.loadModuleAsync("sorterModel"),WbSpaModel.prototype.$moduleLoader.loadServiceAsync("promotionsService")]);this.modules={XCatalogData:e.XCatalogData,QueryHelper:t,xCatalogProvider:n,SorterModel:s.CatalogSorterModel},this.catalogMenu=new vs,this.initialized=!0},t._loadPromoMenu=async function(e,t){await this.catalogMenu.initMenu(e),this.promo=this.catalogMenu?t:null},t._getEntryModel=function(e){var t;if(this.catalogMenu.isPremium){const e=new URL(window.location.href);e.pathname=this.catalogMenu.getRootNode(this.catalogMenu.getCurrentMenuItem(e)).url,this.currentMenuItem=this.catalogMenu.getCurrentMenuItem(e),WbSpaModel.prototype.$router.replaceState(window.history.state,document.title,e)}return{mainVersion:0,type:ns.promoEntry,model:{xData:this.xData,menuId:this.currentMenuItem.id,currentMenuItem:this.catalogMenu.menuById.get(this.currentMenuItem.id),rootMenuItem:this.catalogMenu.getRootNode(this.currentMenuItem),children:this.currentMenuItem.childNodes,sitePathItems:e,title:null!==(t=this.currentMenuItem.seo)&&void 0!==t?t:this.currentMenuItem.name,needAdultProtection:!wb.adult.isConfirmed,catalogMenu:this.catalogMenu,promoId:this.catalogMenu.promoId,catalogPromoLeftMenu:this.catalogMenu.getCatalogMenu(this.currentMenuItem,e),bannersTask:this.bannersTask,isSpecial:this.catalogMenu.isSpecial,catalogType:ns.promoEntry,isKursk:this.isKursk,shelves:this.catalogMenu.shelves,isExtended:this.catalogMenu.isExtended}}},t._getCatalogModel=function(e){var t;return{mainVersion:0,type:ns.goods,model:{xData:this.xData,menuId:this.currentMenuItem.id,currentMenuItem:this.catalogMenu.menuById.get(this.currentMenuItem.id),rootMenuItem:this.catalogMenu.getRootNode(this.currentMenuItem),selectedHasChild:!!this.currentMenuItem.childs,sitePathItems:e,promoMenuV2:!0,catalogPromoLeftMenu:this.catalogMenu.getCatalogMenu(this.currentMenuItem,e),emptyCatalogLink:this.currentMenuItem.url,tagsUrl:this.currentMenuItem.url,products:this.products,targetUrl:"GP",title:null!==(t=this.currentMenuItem.seo)&&void 0!==t?t:this.currentMenuItem.name,containerClass:"catalog-page",needAdultProtection:!wb.adult.isConfirmed,sorterModel:new this.modules.SorterModel(this.sort,this.currentMenuItem.url),promoId:this.catalogMenu.promoId,isSpecial:this.catalogMenu.isSpecial,isKursk:this.isKursk,shelves:this.catalogMenu.shelves,isExtended:this.catalogMenu.isExtended}}},t._bannersTask=async function(e){return this.catalogMenu.isExtended?WbSpaModel.prototype.$services.bannersService.getPromotionSpecialBanners():WbSpaModel.prototype.$services.bannersService.getPromoCatalogBanners(e)},e}();const Ss=ws;var _s=n(77387);let Cs=function(){function e(){}e.init=async function(){var t;if(e.prototype.menuBaseData)return;e.prototype.menuBaseData=null!==(t=await WbSpaModel.prototype.$httpClient.fetchStaticDataV2("subject-base.json",1e4))&&void 0!==t?t:[],e.prototype.menuByIdData=new Map,e.prototype._createMenuMap()};var t=e.prototype;return t._createMenuMap=function(){e.prototype.menuBase.forEach((t=>e.prototype._setNode(t,null)))},t._setNode=function(t,n){var s;n&&(t.parentId=n),e.prototype.menuByIdData.set(t.id,t),null===(s=t.childs)||void 0===s||s.forEach((n=>e.prototype._setNode(n,t.id)))},(0,i.A)(e,[{key:"menuBase",get:function(){return e.prototype.menuBaseData},set:function(t){e.prototype.menuBaseData=t}}],[{key:"menuById",get:function(){return e.prototype.menuByIdData}}])}();const ks=Cs;let Is=function(e){function t(t,n){var s;return(s=e.call(this)||this).modules=t,s.brandConstructorService=n,s.brandData=null,s.fullMenu=null,s.menuByUrl=new Map,s.menuById=new Map,s}(0,_s.A)(t,e);var n=t.prototype;return n.initMenu=async function(t,n,s,i){var r;let o=await WbSpaModel.prototype.$httpClient.fetchBasicJSON(`https://static-basket-01.wbbasket.ru/vol0/data/brands/${t}.json`,{},{nullOnError:!0});if(!o){const e=null===(r=t.split("-"))||void 0===r?void 0:r[0];e&&(o=await WbSpaModel.prototype.$httpClient.fetchBasicJSON(`https://static-basket-01.wbbasket.ru/vol0/data/brands-by-id/${e}.json`,{},{nullOnError:!0})),o&&(location.href=$.views.helpers.brandUrl(o.url))}if(!o)return null;e.prototype.menuBase||await ks.init(),this.isConstructor=n.indexOf(o.id)>=0,this.brandData=o;const a=$.views.helpers.brandUrl(o.url),l=await this._getMenuItems(o,s,a,i);this.fullMenu=this._getFullMenu(o,a,l,this.infoMenu),this._createMenuMap(),this.isInited=!0},n._getFullMenu=function(e,t,n,s=[]){return[{id:e.id+"b",name:e.name,url:t,shard:this.isConstructor?"":this._brandToShard(e.name),query:this.isConstructor?"":this._brandToQuery(e.id),childs:n.concat(s)}]},n._getMenuItems=async function(e,t,n,s){var i,r,o;if(!this.isConstructor)return await this._getChildsFromSubjects(e,t,n);const a=this.brandConstructorService.getPageInfo(s),l=await this.brandConstructorService.getMenus(e,a.pageType,a.infoUrl,a.previewMode);if(this.previewMode=a.previewMode,this.hasCustomMenu=(null===(i=null==l?void 0:l.menu)||void 0===i?void 0:i.length)>0,(null===(o=null===(r=null==l?void 0:l.infoMenu)||void 0===r?void 0:r.menuInfoItems)||void 0===o?void 0:o.length)>0&&(this.infoMenu=l.infoMenu.menuInfoItems.map((t=>(t.id=`${t.id}info`,t.url=`${n}/info/${t.href}`,t.isInfo=!0,this._convertBrandScemeItemToMenuItemDTO(t,e))))),this.hasCustomMenu)return await this._getChildsFromCustomMenu(e,l.menu);const c=await this._getChildsFromSubjects(e,t,n),u={id:e.id+"b-all",name:"Весь ассортимент",url:`${n}/all`,seo:`${e.name} Весь ассортимент`,shard:this._brandToShard(e.name),query:this._brandToQuery(e.id),childs:[]};return c.push(u),c},n._getChildsFromCustomMenu=async function(e,t){const n=t.map((t=>this._convertBrandScemeItemToMenuItemDTO(t,e,!0)));return n.sort(((e,t)=>e-t)),n},n._getChildsFromSubjects=async function(e,t,n){var s,i,r,o;const a=this._brandToShard(e.name),l=this._brandToQuery(e.id),c=new this.modules.XCatalogData(l,a,"Brand"),u=this.modules.xCatalogProvider.createGoodsProvider(c),d=await u.loadSubjectsAsync(t,c),h=null!==(r=null===(i=null===(s=null==d?void 0:d.data)||void 0===s?void 0:s.filters.find((e=>"xsubject"===e.key)))||void 0===i?void 0:i.items.map((e=>e.id)))&&void 0!==r?r:[],p=[];for(const t of this.menuBase){let s=!1;const i=[];for(const r of null!==(o=null==t?void 0:t.childs)&&void 0!==o?o:[])if(h.indexOf(r.id)>=0){s=!0;const t=Object.assign({},r);t.seo=`${e.name} ${r.name}`,t.url=`${n}/${t.url}`,t.shard=this._brandToShard(e.name),t.query=this._brandToQuery(e.id,t.id),i.push(t)}if(s){const s=Object.assign({},t);s.seo=`${e.name} ${t.name}`,s.url=`${n}/${t.url}`,s.shard=this._brandToShard(e.name),s.query=this._brandToQuery(e.id,s.id),s.childs=i,s.parent=e.id+"b",p.push(s)}}return p},n._convertBrandScemeItemToMenuItemDTO=function(e,t,n){const s=this._getXQueryForMenuItem(t,e.query),i={id:e.id,name:e.title,url:e.url.toLowerCase(),seo:`${t.name} ${e.title}`,sort:e.sort,shard:this._brandToShard(t.name),query:s};return n&&(i.isCustom=n,i.parentId=t.id+"b"),e.isInfo&&(i.isInfo=!0),i},n._getXQueryForMenuItem=function(e,t){const n=new URLSearchParams(t);return n.has("type")&&n.delete("type"),n.set("brand",e.id),decodeURIComponent(n)},n.getBrandInfo=function(){var e;return{id:this.brandData.siteId,brandCod:this.brandData.id,name:this.brandData.name,brandLink:$.views.helpers.brandUrl(this.brandData.url),logoUrl:$.views.helpers.forBrandLogoFromId(null!==(e=this.brandData.hash)&&void 0!==e?e:this.brandData.id)}},n.getCurrentMenuItem=function(e){var t;if(!(e=null!==(t=null==e?void 0:e.pathname)&&void 0!==t?t:e))return null;const n=e.replace("/data","").replace("/preview","");let s=this.menuByUrl.get(n);return!s&&this.hasCustomMenu&&this.menuByUrl.forEach((e=>{e.url.split("?")[0]==n&&(s=e)})),null!=s?s:this.menuByUrl.get(n.slice(0,n.lastIndexOf("/")))},n.getSitePathItems=function(e){if(!e)return null;const t=[];t.push({id:e.id,name:e.name,pageUrl:e.url,isInfo:e.isInfo,analytic:["BCA",null,null,e.id]});let n=this.menuById.get(e.id).parentId;for(;null!=n;){const e=this.menuById.get(n);t.push({id:n,name:e.name,pageUrl:e.url,analytic:["BCA",null,null,n]}),n=e.parentId}const s=this._brandLetterToSitePathParam(this.brandData.letter);return t.push({id:0,name:`Бренды на «${s.toUpperCase()}»`,pageUrl:`/wildberries/brandlist.aspx?letter=${s}`}),t.reverse()},n.getCatalogMenu=function(e){var t,n,s,i;const r=[];if((e=null==e?void 0:e.filter((e=>!e.isInfo)))&&0!==e.length)if(1===e.length){const s={name:"",link:""},i=null!==(n=null===(t=this.menuByUrl.get(e[0].pageUrl).childs)||void 0===t?void 0:t.filter((e=>!e.isInfo)).map((e=>({node:{id:e.id,name:e.name,link:e.url},children:[]}))))&&void 0!==n?n:[];r.push({node:s,children:i})}else{const t=this.menuByUrl.get(e[1].pageUrl),n={id:t.id,isOpen:!0,lastSelected:e[e.length-1].id===t.id,link:t.isDenyLink?null:t.url,name:t.name},o=n.lastSelected?null!==(i=null===(s=t.childs)||void 0===s?void 0:s.filter((e=>!e.isInfo)).map((e=>({node:{id:e.id,name:e.name,link:e.url},children:[]}))))&&void 0!==i?i:[]:this.getCatalogMenu(e.slice(1));r.push({node:n,children:o})}else r.push({node:{name:"",link:""},children:[]});return r},n.hasItem=function(e){return!!e&&this.menuById.has(e)},n.getCatalogLink=function(e){return this.menuById.get(e).url},n.getParents=function(e){const t=[];let n=this.menuById.get(e).parentId;for(;null!=n;){const e=this.menuById.get(n);t.push(e.name),n=e.parentId}return t.reverse()},n.getRootNode=function(e){let t=this.menuById.get(e.id);for(;null!=t.parentId;)t=this.menuById.get(t.parentId);return this._adaptMenu(t)},n._createMenuMap=function(){this.fullMenu.forEach((e=>this._setNode(e,null)))},n._setNode=function(e,t,n){var s;this.menuByUrl.set(e.url,e),this.menuById.set(e.id,{parentId:t,url:e.url,name:e.name,childs:e.childs,id:e.id}),null===(s=e.childs)||void 0===s||s.forEach((t=>this._setNode(t,e.id,n)))},n._brandToShard=function(e){const t=e?e.toLowerCase():" ",n=t.charCodeAt(0);return 48<=n&&n<=57||97<=n&&n<=122||1072<=n&&n<=1105?`brands/${t[0]}`:"brands/special"},n._brandToQuery=function(e,t){return t?`brand=${e}&subject=${t}`:`brand=${e}`},n._brandLetterToSitePathParam=function(e){const t=e.charCodeAt(0);return 1072<=t&&t<=1105?"а-я":97<=t&&t<=122?e:"123"},n._adaptMenu=function(e){var t;const n=this.menuById.get(e.id);return n.childs=null===(t=n.childs)||void 0===t?void 0:t.map((e=>this._adaptMenu(e))),n},t}(ks);const Ms=Is;var $s=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n};let Ps=function(){function e(e){Object.assign(this,e)}var t=e.prototype;return t.onBeforeActionExecuting=async function(e,t,n){this.xData=new this.modules.XCatalogData(this.currentMenuItem.query,this.currentMenuItem.shard,"Brand"),n.cancelRequest=null!=this.xData},t.onActionExecuting=async function(e,t,n){if(this.xData&&this.xInfo){const e=this.modules.QueryHelper.getInitialParams();let{sort:t=this.modules.SorterModel.getSortFromCookie,page:s,sle:i}=e,r=$s(e,["sort","page","sle"]);if("adidas"===this.brand&&i)return n.redirected=!0,void this.$router.moveTo404Async();const o=new this.modules.QueryHelper({sort:t,page:s,filters:this.modules.QueryHelper.checkOnlyFilterParams(r)});t=o.checkAndchangeSort(t);const a=o.getQueryStringForCatalog(),l=this.modules.xCatalogProvider.createGoodsProvider(this.xData),{goods:c=[]}=await l.loadGoodsAsync(a);this.products=c,this.sort=t}},t.onActionExecuted=function(e){var t;if(null==this.xData)return;e.responseData||(e.responseData={});const n=this.catalogMenu.getSitePathItems(this.currentMenuItem),s={mainVersion:0,type:ns.brand,model:{brandInfo:this.catalogMenu.getBrandInfo(),xData:this.xData,currentMenuItem:this.currentMenuItem,rootMenuItem:this.catalogMenu.getRootNode(this.currentMenuItem),selectedHasChild:!1,sitePathItems:n,catalogMenu:this.catalogMenu.getCatalogMenu(null==n?void 0:n.slice(1)),emptyCatalogLink:this.currentMenuItem.url,tagsUrl:this.currentMenuItem.url,products:this.products,promoMenuV2:!1,targetUrl:"BP",title:null!==(t=this.currentMenuItem.seo)&&void 0!==t?t:this.currentMenuItem.name,containerClass:"catalog-page",needAdultProtection:!wb.adult.isConfirmed,sorterModel:new this.modules.SorterModel(this.sort,this.currentMenuItem.url)}};Object.assign(e.responseData,{data:s})},e}();const Os=Ps;var Ts=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n};let As=function(){function e(e){Object.assign(this,e)}var t=e.prototype;return t.onBeforeActionExecuting=async function(e,t,n){this.xData=new this.modules.XCatalogData(this.currentMenuItem.query,this.currentMenuItem.shard,"Brand"),n.cancelRequest=null!=this.xData},t.onActionExecuting=async function(){if(this.xData&&this.xData.xcatalogShard&&this.xInfo){const e=this.modules.QueryHelper.getInitialParams();let{sort:t=this.modules.SorterModel.getSortFromCookie,page:n,sle:s}=e,i=Ts(e,["sort","page","sle"]);if("adidas"===this.brand&&s)return options.redirected=!0,void this.$router.moveTo404Async();const r=new this.modules.QueryHelper({sort:t,page:n,filters:this.modules.QueryHelper.checkOnlyFilterParams(i)});t=r.checkAndchangeSort(t);const o=r.getQueryStringForCatalog(),a=this.modules.xCatalogProvider.createGoodsProvider(this.xData),{goods:l=[]}=await a.loadGoodsAsync(o);this.products=l,this.sort=t}},t.onActionExecuted=async function(e){if(null==this.xData)return;e.responseData||(e.responseData={});const t=this.catalogMenu.getSitePathItems(this.currentMenuItem),n=this.catalogMenu.getCatalogMenu(null==t?void 0:t.slice(1)),s=this.brandConstructorService.convertSchemeToViewModel(this.brandScheme,this.catalogMenu,this.currentMenuItem);await WbSpaModel.prototype.$moduleLoader.loadModuleAsync("brandConstructorConfig");const i=await this._getMetaTags(this.currentMenuItem),r={brandInfo:this.catalogMenu.getBrandInfo(),currentMenuItem:this.currentMenuItem,rootMenuItem:this.catalogMenu.getRootNode(this.currentMenuItem),containerClass:"brand-constructor-catalog",isCatalog:!0,needAdultProtection:!wb.adult.isConfirmed,sitePathItems:t,catalogMenu:n,brandScheme:s,title:this.currentMenuItem.seo,metaTags:i,tagsUrl:this.currentMenuItem.url,sorterModel:new this.modules.SorterModel(this.sort,this.currentMenuItem.url),products:this.products,xData:this.xData,targetUrl:"BP",emptyCatalogLink:this.currentMenuItem.url},o={mainVersion:0,type:ns.brandConstructorCatalog,model:r};Object.assign(e.responseData,{data:o})},t._getMetaTags=async function(e){var t;try{const n=e.url.split("?")[0].replace("brands/","brands/metatags/"),s=await WbSpaModel.prototype.$httpClient.fetchJSON(`/webapi/spa${n}?${new URLSearchParams({name:e.name})}`,{},{timeout:3e3,nullOnError:!0});return null!==(t=null==s?void 0:s.metaTags)&&void 0!==t?t:[]}catch(e){return[]}},e}();const Ds=As;let Es=function(){function e(e){Object.assign(this,e)}var t=e.prototype;return t.onBeforeActionExecuting=async function(e,t,n){n.cancelRequest=null!=this.currentMenuItem},t.onActionExecuting=async function(){},t.onActionExecuted=async function(e){e.responseData||(e.responseData={});const t=this.catalogMenu.getSitePathItems(this.currentMenuItem),n=this.catalogMenu.getCatalogMenu(null==t?void 0:t.slice(1)),s=this.brandConstructorService.convertSchemeToViewModel(this.brandScheme,this.catalogMenu,this.currentMenuItem),i=await this.brandConstructorService.getMainBanners(this.catalogMenu);await WbSpaModel.prototype.$moduleLoader.loadModuleAsync("brandConstructorConfig");const r={brandInfo:this.catalogMenu.getBrandInfo(),brandDirections:{},containerClass:"brand-constructor-ordinary",isCatalog:!1,needAdultProtection:!wb.adult.isConfirmed,sitePathItems:t,catalogMenu:n,brandScheme:s,mainBanners:i},o={mainVersion:0,type:ns.brandConstructor,model:r};Object.assign(e.responseData,{data:o})},e}();const xs=Es;let Bs=function(){function e(e){this.initialized=!1,this.catalogMenu=null,this.modules={},this.preview=e,this.pipeline=null}var t=e.prototype;return t.onBeforeActionExecuting=async function(e,t,n){var s,i;if(this.xData=this.xInfo=this.currentMenuItem=this.products=this.sort=this.pipeline=this.brandScheme=null,n.cancelRequest)return;let r=new URL(e);r.pathname=r.pathname.replace("/webapi","").toLowerCase();const o=r.pathname.split("/")[this.preview?4:3];if(this.brand!==o&&(this.initialized=!1,this.brand=this.catalogMenu=null),this.brand===o&&this.initialized||await this._initAsync(this.preview),this.xInfo=await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync(),this.brand!==o&&await this._loadBrandMenu(o,r.pathname),this.brand){if(this.preview&&!this.catalogMenu.isConstructor&&(r=new URL(e.href.replace("/preview","")),r.pathname=r.pathname.replace("/webapi","").toLowerCase()),this.currentMenuItem=this.catalogMenu.getCurrentMenuItem(r),!this.currentMenuItem)return n.cancelRequest=!1,void(n.cancelRequest||(t.body=await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync()));if(this.catalogMenu.isConstructor){const e=this.brandConstructorService.getPageInfo(r.pathname),t=null==e?void 0:e.pageType,n=null==e?void 0:e.infoUrl;this.brandScheme=await this.brandConstructorService.getBrandSchemeAsync(this.catalogMenu.brandData,t,n,e.previewMode),this.brandScheme||(this.ids=[],await this._loadBrandMenu(o,r.pathname,!0))}return this.catalogMenu.isConstructor?this.brandScheme.pageType==this.brandConstructorService.enums.pageType.catalog?this.pipeline=new Ds(this):this.pipeline=new xs(this):this.pipeline=new Os(this),null===(i=(s=this.pipeline).onBeforeActionExecuting)||void 0===i?void 0:i.call(s,e,t,n)}n.cancelRequest=!1},t.onActionExecuting=async function(e,t,n){var s,i;return null===(i=null===(s=this.pipeline)||void 0===s?void 0:s.onActionExecuting)||void 0===i?void 0:i.call(s,e,t,n)},t.onActionExecuted=function(e){var t,n;return null===(n=null===(t=this.pipeline)||void 0===t?void 0:t.onActionExecuted)||void 0===n?void 0:n.call(t,e)},t._initAsync=async function(e){const t=this._initConstructorServiceAndGetBrands(e),[n,s,i,r]=await Promise.all([WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogData"),WbSpaModel.prototype.$moduleLoader.loadModuleAsync("queryHelper"),WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogProvider"),WbSpaModel.prototype.$moduleLoader.loadModuleAsync("sorterModel")]);this.modules={XCatalogData:n.XCatalogData,QueryHelper:s,xCatalogProvider:i,SorterModel:r.CatalogSorterModel},this.ids=await t,this.catalogMenu=new Ms(this.modules,this.brandConstructorService),this.initialized=!0},t._initConstructorServiceAndGetBrands=async function(e){var t;return await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("brandConstructorService"),this.brandConstructorService=WbSpaModel.prototype.$services.brandConstructorService,null!==(t=await this.brandConstructorService.getConstructorBrands(e))&&void 0!==t?t:[]},t._loadBrandMenu=async function(e,t){await this.catalogMenu.initMenu(e,this.ids,this.xInfo,t),this.brand=this.catalogMenu.brandData?e:null},e}();const js=Bs;let Ls=function(e){function t(t){var n;return(n=e.call(this)||this).modules=t,n.sellerData=null,n.fullMenu=null,n.menuByUrl=new Map,n.menuById=new Map,n.shard="sellers",n}(0,_s.A)(t,e);var n=t.prototype;return n.initMenu=async function(t,n){var s,i,r,o,a,l,c;e.prototype.menuBase||await ks.init();const u=this.shard,d=this._sellerToQuery(t,null),h=new this.modules.XCatalogData(d,u,"Seller"),p=this.modules.xCatalogProvider.createGoodsProvider(h),m=await p.loadSubjectsAsync(n,h),g=await this._getSellerData(t);this.sellerData=g,this.fullMenu=[{id:g.id+"s",name:this._trimSellerOrgForms(null!==(i=null!==(s=g.trademark)&&void 0!==s?s:g.fineName)&&void 0!==i?i:g.name,g.orgForms),url:"/seller/"+g.id,shard:this.shard,query:this._sellerToQuery(g.id,null),childs:[],title:"Все товары"}];const f=null!==(a=null===(o=null===(r=null==m?void 0:m.data)||void 0===r?void 0:r.filters.find((e=>"xsubject"===e.key)))||void 0===o?void 0:o.items.toHashSet((e=>e.id)))&&void 0!==a?a:new Set;for(const e of this.menuBase){let t=!1;const n=[];for(const s of null!==(l=null==e?void 0:e.childs)&&void 0!==l?l:[])if(f.has(s.id)){t=!0;const e=Object.assign({},s);e.url=`/seller/${g.id}/${e.url}`,e.shard=this.shard,e.query=this._sellerToQuery(g.id,e.id),e.parentId=null!==(c=e.parentId)&&void 0!==c?c:g.id+"s",e.title=e.name,n.push(e)}if(t){const t=Object.assign({},e);t.url=`/seller/${g.id}/${e.url}`,t.shard=this.shard,t.query=this._sellerToQuery(g.id,t.id),t.childs=n,t.parentId=g.id+"s",t.title=t.name,this.fullMenu[0].childs.push(t)}}this._createMenuMap(),this.isInited=!0},n.getSellerInfo=function(){return this.sellerData},n.getCurrentMenuItem=function(e){var t;if(!e)return null;const n=e.pathname.replace("/data","");return null!==(t=this.menuByUrl.get(n))&&void 0!==t?t:this.menuByUrl.get(n.slice(0,n.lastIndexOf("/")))},n.getSitePathItems=function(e){if(!e)return null;const t=[];t.push({id:e.id,name:e.name,pageUrl:e.url});let n=this.menuById.get(e.id).parentId;for(;null!=n;){const e=this.menuById.get(n);t.push({id:n,name:e.name,pageUrl:e.url}),n=e.parentId}return t.reverse()},n.getCatalogMenu=function(e){var t,n,s,i;const r=[];if(e&&0!==e.length)if(1===e.length){const s={name:"",link:""},i=null!==(n=null===(t=this.menuByUrl.get(e[0].pageUrl).childs)||void 0===t?void 0:t.map((e=>({node:{id:e.id,name:e.name,link:e.url},children:[]}))))&&void 0!==n?n:[];r.push({node:s,children:i})}else{const t=this.menuByUrl.get(e[1].pageUrl),n={id:t.id,isOpen:!0,lastSelected:e[e.length-1].id===t.id,link:t.url,name:t.name},o=n.lastSelected?null!==(i=null===(s=t.childs)||void 0===s?void 0:s.map((e=>({node:{id:e.id,name:e.name,link:e.url},children:[]}))))&&void 0!==i?i:[]:this.getCatalogMenu(e.slice(1));r.push({node:n,children:o})}else r.push({node:{name:"",link:""},children:[]});return r},n.hasItem=function(e){return!!e&&this.menuById.has(e)},n.getCatalogLink=function(e){return this.menuById.get(e).url},n.getParents=function(e){const t=[];let n=this.menuById.get(e).parentId;for(;null!=n;){const e=this.menuById.get(n);t.push(e.name),n=e.parentId}return t.reverse()},n.getRootNode=function(e){let t=this.menuById.get(e.id);for(;null!=t.parentId;)t=this.menuById.get(t.parentId);return this._adaptMenu(t)},n._getSellerData=async function(e){var t;const n={id:e,isUnknown:!0,name:$.localize("Продавец")},s=await WbSpaModel.prototype.$httpClient.fetchBasicJSON(`https://static-basket-01.wbbasket.ru/vol0/data/supplier-by-id/${e}.json`,{},{nullOnError:!0});if(!s)return n;const i=WbSpaModel.prototype.$services.suppliersService.setSupplierInfo(s);return{id:i.supplierId,name:null!==(t=i.supplierFullName)&&void 0!==t?t:i.supplierName,fineName:this._trimSellerOrgForms(i.supplierName,i.orgForms),ogrn:i.ogrn,ogrnip:i.ogrnip,taxpayerCode:i.taxpayerCode,inn:i.inn,kpp:i.kpp,unp:i.unp,bin:i.bin,unn:i.unn,trademark:i.trademark,legalAddress:i.legalAddress,isUnknown:!1,orgForms:i.orgForms}},n._trimSellerOrgForms=function(e,t=[]){return $.views.converters.trimWord(e,t)},n._createMenuMap=function(){this.fullMenu.forEach((e=>this._setNode(e,null)))},n._setNode=function(e,t){var n;this.menuByUrl.set(e.url,e),this.menuById.set(e.id,{parentId:t,url:e.url,name:e.name,id:e.id,childs:e.childs}),null===(n=e.childs)||void 0===n||n.forEach((t=>this._setNode(t,e.id)))},n._sellerToQuery=function(e,t){return t?`supplier=${e}&subject=${t}`:`supplier=${e}`},n._adaptMenu=function(e){var t;const n=this.menuById.get(e.id);return n.childs=null===(t=n.childs)||void 0===t?void 0:t.map((e=>this._adaptMenu(e))),n},t}(ks);const Ns=Ls;var Rs=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n};const Fs=function(){function e(){this.initialized=!1,this.catalogMenu=null,this.modules={}}var t=e.prototype;return t.onBeforeActionExecuting=async function(e,t,n){if(this.xData=this.xInfo=this.currentMenuItem=this.products=this.type=this.sort=null,n.cancelRequest)return;this.initialized||await this._initAsync();let s=new URL(e);s.pathname=s.pathname.replace("/webapi","");const i=s.pathname.split("/")[3];this.xInfo=await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync(),this.seller!==i&&await this._loadBrandMenu(i),this.catalogMenu.isConstructor?t.body=this.xInfo:(this.seller&&(this.currentMenuItem=this.catalogMenu.getCurrentMenuItem(s),this.xData=new this.modules.XCatalogData(this.currentMenuItem.query,this.currentMenuItem.shard,"Seller")),n.cancelRequest=null!=this.xData)},t.onActionExecuting=async function(){if(this.xData&&this.xInfo){const e=this.modules.QueryHelper.getInitialParams();let{sort:t=this.modules.SorterModel.getSortFromCookie,page:n}=e,s=Rs(e,["sort","page"]);const i=new this.modules.QueryHelper({sort:t,page:n,filters:this.modules.QueryHelper.checkOnlyFilterParams(s)});t=i.checkAndchangeSort(t);const r=i.getQueryStringForCatalog(),o=this.modules.xCatalogProvider.createGoodsProvider(this.xData),{goods:a}=await o.loadGoodsAsync(r);this.products=a,this.sort=t}},t.onActionExecuted=function(e){if(null==this.xData)return;e.responseData||(e.responseData={});const t=this.catalogMenu.getSitePathItems(this.currentMenuItem),n={mainVersion:0,type:ns.seller,model:{sellerId:this.catalogMenu.sellerData.id,sellerInfo:this.catalogMenu.getSellerInfo(),xData:this.xData,rootMenuItem:this.catalogMenu.getRootNode(this.currentMenuItem),currentMenuItem:this.currentMenuItem,selectedHasChild:!1,sitePathItems:t,catalogMenu:this.catalogMenu.getCatalogMenu(t),emptyCatalogLink:this.currentMenuItem.url,tagsUrl:this.currentMenuItem.url,products:this.products,promoMenuV2:!1,title:this.currentMenuItem.title,containerClass:"catalog-page catalog-page--brand",needAdultProtection:!wb.adult.isConfirmed,sorterModel:new this.modules.SorterModel(this.sort,this.currentMenuItem.url)}};Object.assign(e.responseData,{data:n})},t._initAsync=async function(){const[e,t,n,s,i]=await Promise.all([WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogData"),WbSpaModel.prototype.$moduleLoader.loadModuleAsync("queryHelper"),WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogProvider"),WbSpaModel.prototype.$moduleLoader.loadModuleAsync("sorterModel"),WbSpaModel.prototype.$moduleLoader.loadServiceAsync("suppliersService")]);this.modules={XCatalogData:e.XCatalogData,QueryHelper:t,xCatalogProvider:n,SorterModel:s.CatalogSorterModel},this.catalogMenu=new Ns(this.modules),this.initialized=!0},t._loadBrandMenu=async function(e){await this.catalogMenu.initMenu(e,this.xInfo),this.seller=this.catalogMenu.sellerData?e:null},e}();let Us=function(){function e(){this.bannersTask=null}var t=e.prototype;return t.onBeforeActionExecuting=async function(e,t,n){this.bannersTask=null,n.cancelRequest=!0},t.onActionExecuting=async function(e){this.bannersTask=WbSpaModel.prototype.$services.bannersService.getBannersForHomePageAsync(),this.splitInfoTask=WbSpaModel.prototype.$analitic.getSplitInfo()},t.onActionExecuted=async function(e){e.responseData||(e.responseData={});const t=await this._getBanners();Object.assign(e.responseData,{bannersTask:this.bannersTask,banners:t,splitInfoTask:this.splitInfoTask})},t._getBanners=async function(){let e=2e3,t=null;return this.bannersTask.then((e=>{t=e})),new Promise((n=>{let s=setTimeout((function i(){if(!(e>=0&&null==t))return clearTimeout(s),n(t);e-=200,s=setTimeout(i,200)}),200)}))},e}();const Ws=Us;const Hs=function(){function e(e){this.timeout=e}return e.prototype.onBeforeActionExecuting=function(e,t,n){n.timeout=this.timeout},e}();let zs=function(){function e(){}var t=e.prototype;return t.onBeforeActionExecuting=async function(){this.data=null,await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("multipleSellersService")},t.onActionExecuting=async function(){const e=WbSpaModel.prototype,t=parseInt(e.$router.routeParameters.cod1S),{nmIds:n}=await this._getNmsForOtherSellers(t);if(null==n?void 0:n.length)try{const t=await e.$services.multipleSellersService.loadSellersInfoAsync(n);this.data=t.filter((e=>e.salePrice>0&&e.deliveryModel))}catch(e){console.error(e)}},t._getNmsForOtherSellers=async function(e){const[t,n]=await Promise.all([wb.xnm.getGoodsForRecommendAndCatalog([e],!0),WbSpaModel.prototype.$httpClient.fetchBasicJSON(wb.helpers.url.urlProductStatic(e),{},{timeout:2e3})]),s=null==t?void 0:t[0],[i,r]=await Promise.all([WbSpaModel.prototype.$services.productCard.getMultiInfo(s,n),WbSpaModel.prototype.$moduleLoader.loadModuleAsync("productSelectionManager")]);s.metacard=i,s.canCheckForMulti=WbSpaModel.prototype.$services.productCard._canCheckForMulti(n),this.productSelectionManager=new r(null,{nmId:e},s);const o=await this.productSelectionManager.getNmsForOtherSellers(e);return o.isMulticard?{nmIds:o.nms}:await WbSpaModel.prototype.$services.multipleSellersService.loadOtherSellersNmIds(e)},t.onActionExecuted=function(e){var t;e.responseData||(e.responseData={});const n={otherSellers:null!==(t=this.data)&&void 0!==t?t:[]};Object.assign(e.responseData,n)},e}();const qs=zs;let Vs=function(){function e(){}var t=e.prototype;return t.onBeforeActionExecuting=async function(){this.data=null,await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("productFeedbacksService")},t.onActionExecuting=async function(){var e;const t=WbSpaModel.prototype,n=parseInt(t.$router.routeParameters.cod1S);let s=parseInt(t.$router.queryParams.get("imtId"));isNaN(s)&&(s=await this._loadImtIdAsync(n));try{const i=await t.$services.productCard.loadStaticProductAsync(n),r=!(null===(e=i.colors)||void 0===e?void 0:e.length)||1==i.colors.length,o=await this._setDefaultSort(),{summary:a,votes:l}=await t.$services.productFeedbacksService.loadSummaryAndVotes(s,n,10,o,null);this.data={imtId:s,summary:a,votes:l,sortValue:o,nmId:n,isOneColor:r,staticProduct:i}}catch(e){return{imtId:s}}},t.onActionExecuted=function(e){var t;e.responseData||(e.responseData={}),Object.assign(e.responseData,null!==(t=this.data)&&void 0!==t?t:{})},t._loadImtIdAsync=async function(e){if(isNaN(e))return null;try{const t=await WbSpaModel.prototype.$httpClient.fetchJSON(wb.helpers.url.urlProductStatic(e),{},{noProcessResponse:!0});return null==t?void 0:t.imt_id}catch(e){return console.error(e),0}},t._setDefaultSort=async function(){return"dateDesc"},e}();const Gs=Vs;let Js=function(){function e(){}var t=e.prototype;return t.onBeforeActionExecuting=async function(){this.data=null,await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("productQuestionsService")},t.onActionExecuting=async function(){const e=WbSpaModel.prototype,t=parseInt(e.$router.routeParameters.cod1S);let n=parseInt(e.$router.queryParams.get("imtId"));isNaN(n)&&(n=await this._loadImtIdAsync(t));try{const[s,i]=await Promise.all([e.$services.productQuestionsService.loadQuestionsFromCache(n,10),WbSpaModel.prototype.$httpClient.fetchJSON(wb.helpers.url.urlProductStatic(t),{},{noProcessResponse:!0})]);this.data={staticProduct:i,imtId:n,questionsModel:s}}catch(e){return{imtId:n}}},t.onActionExecuted=function(e){var t;e.responseData||(e.responseData={}),Object.assign(e.responseData,null!==(t=this.data)&&void 0!==t?t:{})},t._loadImtIdAsync=async function(e){if(isNaN(e))return 0;try{const t=await WbSpaModel.prototype.$httpClient.fetchJSON(wb.helpers.url.urlProductStatic(e),{},{noProcessResponse:!0});return null==t?void 0:t.imt_id}catch(e){return console.error(e),0}},e}();const Ks=Js;let Qs=function(){function e(){}var t=e.prototype;return t.onBeforeActionExecuting=function(){this.data=null},t.onActionExecuting=async function(e,t,n){const s=WbSpaModel.prototype,i=parseInt(s.$router.routeParameters.cod1S);try{if(this.data=await wb.xnm.getMiniProductCard(i),null==this.data)return n.redirected=!0,void this.$router.moveTo404Async()}catch(e){console.error(e)}},t.onActionExecuted=function(e){var t,n,s;e.responseData||(e.responseData={});let i=parseInt(WbSpaModel.prototype.$router.queryParams.get("size"));const r=this.data;if(!isNaN(i)&&(null===(t=r.sizes)||void 0===t?void 0:t.some((e=>e.ch==i))))r.characteristicId=i,r.sizeName=null===(n=r.sizes.find((e=>e.ch==i)))||void 0===n?void 0:n.nm;else if(1==(null===(s=r.sizes)||void 0===s?void 0:s.length)){const e=r.sizes[0];r.characteristicId=e.ch,r.sizeName=null==e?void 0:e.nm}r.tilesVariable=WbSpaModel.prototype.$services.productCard.canUseTilesVariable(r.subjectId,r.subjectParentId),e.responseData.miniCard=r},(0,i.A)(e,[{key:"$router",get:function(){return WbSpaModel.prototype.$router}}])}();const Xs=Qs;let Ys=function(){function e(){}var t=e.prototype;return t.onBeforeActionExecuting=function(){this.model=this.imageId=null},t.onActionExecuting=async function(){var e;await this.$moduleLoader.loadServiceAsync("searchByImageService");const t=this.$router.routeParameters.imageId,n=this.$services.searchByImageService.getSearchResult(t);!n.invalidPhoto&&!n.error&&(null===(e=n.recommendationsNms)||void 0===e?void 0:e.length)>0&&(n.products=await this._loadGoods(n.recommendationsNms),n.statistic&&(n.statistic.foundByImageOnStock=n.products.length)),n.imageId=t,this.model=n,this.imageId=t},t.onActionExecuted=function(e){e.responseData||(e.responseData={}),Object.assign(e.responseData,this.model)},t._loadGoods=async function(e){try{const t=await wb.xnm.getCatalogCards(e,!1,!1),n=e.reduce(((e,n)=>{var s;return(null===(s=t[n])||void 0===s?void 0:s.id)&&e.push(wb.xnm.convertXProductToSpaCatalogProduct(t[n])),e}),[]);return n}catch(e){return[]}},(0,i.A)(e,[{key:"$moduleLoader",get:function(){return WbSpaModel.prototype.$moduleLoader}},{key:"$services",get:function(){return WbSpaModel.prototype.$services}},{key:"$router",get:function(){return WbSpaModel.prototype.$router}}])}();const Zs=Ys;let ei=function(){function e(){}var t=e.prototype;return t.onActionExecuted=async function(e){e.responseData||(e.responseData={});const t=WbSpaModel.prototype.$router.queryParams.get("searchQuery"),n=WbSpaModel.prototype.$router.queryParams.get("targetUrl"),s=this._getSearchCatalogLink(t),i=`/recommendationssearch?searchQuery?searchQuery=${new URLSearchParams({searchQuery:t,targetUrl:n})}`,r=await this._loadGoods(t);if(!Array.isArray(r)||0==r.length)return this.$router.moveTo404Async();const o={type:ns.recommendationsSearch,searchQuery:t,targetUrl:n,linkToSearchCatalog:s,originalUrl:i,products:r};Object.assign(e.responseData,o)},t._getSearchCatalogLink=function(e){let t=encodeURIComponent(e.replace(/<\/?[^>]+>/gi,"").trim());return`${wb.urlHelper.xSearchBase}?search=${t}`},t._loadGoods=async function(e){try{const t=`https://search-goods.wildberries.ru/search?query=${encodeURIComponent(e)}`,n=WbSpaModel.prototype.$analitic.getRecomendationsSplitterHeaders(),s=await this.$httpClient.fetchBasicJSON(t,{credentials:"omit",headers:n},{timeout:5e3});if(!((null==s?void 0:s.length)>0))return null;const i=await wb.xnm.getCatalogCards(s,!1,!1),r=s.reduce(((e,t)=>{var n;return(null===(n=i[t])||void 0===n?void 0:n.id)&&e.push(wb.xnm.convertXProductToSpaCatalogProduct(i[t])),e}),[]);return r}catch(e){return null}},(0,i.A)(e,[{key:"$httpClient",get:function(){return WbSpaModel.prototype.$httpClient}},{key:"$router",get:function(){return WbSpaModel.prototype.$router}},{key:"$user",get:function(){return WbSpaModel.prototype.$user}}])}();const ti=ei;let ni=function(){function e(){}var t=e.prototype;return t.onActionExecuting=async function(e,t,n){var s,i;this.goods=this.type=this.forproduct=this.result=null,await this.$moduleLoader.loadServiceAsync("recommendationsCatalogService");const r=this.$router.queryParams.get("type"),o=this.$router.queryParams.get("forproduct"),a=this.$services.recommendationsCatalogService,l=a.getType(r),c=await a.getRecommendations(l.id,o);let u;if((null===(s=null==c?void 0:c.goods)||void 0===s?void 0:s.length)?u=c.goods:(null===(i=null==c?void 0:c.nms)||void 0===i?void 0:i.length)&&(u=await this._loadGoods(c.nms)),!(Array.isArray(u)&&u.length>0))return n.redirected=!0,void this.$router.moveTo404Async();this.type=l,this.goods=u,this.result=c,this.forproduct=o},t.onActionExecuted=async function(e){var t,n,s,i;e.responseData||(e.responseData={});const{type:r,goods:o,result:a,forproduct:l}=this,c={type:r.id,targetInfo:{targetUrl:r.targetUrl},products:o,statistic:{type:r.id,source:null==a?void 0:a.source,recommendationsCount:null!==(i=null!==(n=null===(t=null==a?void 0:a.goods)||void 0===t?void 0:t.length)&&void 0!==n?n:null===(s=null==a?void 0:a.nms)||void 0===s?void 0:s.length)&&void 0!==i?i:0,productsCount:o.length,parentProduct:l},nmId:l,title:r.title};Object.assign(e.responseData,c)},t._loadGoods=async function(e){try{const t=await wb.xnm.getCatalogCards(e,!1,!1),n=e.reduce(((e,n)=>{var s;return(null===(s=t[n])||void 0===s?void 0:s.id)&&e.push(wb.xnm.convertXProductToSpaCatalogProduct(t[n])),e}),[]);return n}catch(e){return[]}},(0,i.A)(e,[{key:"$moduleLoader",get:function(){return WbSpaModel.prototype.$moduleLoader}},{key:"$services",get:function(){return WbSpaModel.prototype.$services}},{key:"$router",get:function(){return WbSpaModel.prototype.$router}}])}();const si=ni;let ii=function(){function e(){}var t=e.prototype;return t.onActionExecuted=async function(e){e.responseData||(e.responseData={});const t=await this._loadNms();if(0==t.length)return this.$router.moveTo404Async();const n=await this._loadGoods(t);if(0==n.length)return this.$router.moveTo404Async();const s={title:"Вы смотрели",products:n,type:"recent",targetInfo:{targetUrl:"RG"},statistic:{recommendationsCount:t.length,productsCount:n.length}};Object.assign(e.responseData,s)},t._loadNms=async function(){var e,t,n,s;let i=null!==(t=null===(e=this.$recentViews.get())||void 0===e?void 0:e.nm)&&void 0!==t?t:[];try{const e=await this.$httpClient.fetchBasicJSON("/webapi/goods/visited-nm",{method:"POST",body:null},{timeout:2e3});(null===(s=null===(n=null==e?void 0:e.value)||void 0===n?void 0:n.nmsArr)||void 0===s?void 0:s.length)>0&&(i=e.value.nmsArr)}catch(e){console.error(e)}return i},t._loadGoods=async function(e){try{const t=await wb.xnm.getCatalogCards(e,!0,!0),n=e.reduce(((e,n)=>{var s;return(null===(s=t[n])||void 0===s?void 0:s.id)&&e.push(wb.xnm.convertXProductToSpaCatalogProduct(t[n])),e}),[]);return n}catch(e){return[]}},(0,i.A)(e,[{key:"$recentViews",get:function(){return WbSpaModel.prototype.$recentViews}},{key:"$httpClient",get:function(){return WbSpaModel.prototype.$httpClient}},{key:"$router",get:function(){return WbSpaModel.prototype.$router}}])}();const ri=ii;const oi=function(){function e(e){this.defaultValue=e}return e.prototype.onBeforeActionExecuting=function(e,t,n){n.defaultValue=this.defaultValue},e}();const ai=function(){function e(){}return e.prototype.onActionExecuting=async function(e,t,n){const{userInfo:s}=await this.$services.userData.getUserDataAsync();s.isAuthenticated||(n.redirected=!0,this.$router.moveToSignIn({query:{returnUrl:window.location.href}},!0))},(0,i.A)(e,[{key:"$router",get:function(){return WbSpaModel.prototype.$router}},{key:"$services",get:function(){return WbSpaModel.prototype.$services}}])}();const li=function(){function e(){this.bannersTask=null}var t=e.prototype;return t.onBeforeActionExecuting=async function(e,t,n){this.bannersTask=null,n.cancelRequest=!0},t.onActionExecuting=async function(e){this.bannersTask=WbSpaModel.prototype.$services.bannersService.getPromoBanners()},t.onActionExecuted=function(e){e.responseData||(e.responseData={}),Object.assign(e.responseData,{bannersTask:this.bannersTask})},e}();const ci=function(){function e(){}return e.prototype.onActionExecuting=async function(){WbSpaModel.prototype.$moduleLoader.loadModuleAsync("spaWbxAuthController")},e}();const ui=function(){function e(){}return e.prototype.onBeforeActionExecuting=async function(e,t){const n=WbSpaModel.prototype.$services.cartService.publicBasketApiUrl;t.credentials="include";const s=new URL(n);e.port=s.port,e.pathname=(s.pathname+e.pathname).replace("//",""),e.host=s.host},e}();const di=function(){function e(){}return e.prototype.onBeforeActionExecuting=function(e,t,n){t.body||(t.body=new URLSearchParams),t.body.append("currency",WbSpaModel.prototype.$user.getCurrency())},e}();let hi=function(){function e(){}return e.prototype.onActionExecuting=async function(e,t,n){var s;if(this.$router.userIsAuth&&WbSpaModel.prototype.$auth.jwt){let e,t=null!==(s=this.$router.queryParams.get("ReturnUrl")||this.$router.queryParams.get("returnUrl"))&&void 0!==s?s:"/lk";try{e=new URL(t,window.location.origin)}catch(e){}e.hostname!==window.location.hostname&&(t="/lk"),n.redirected=!0,this.$router.moveTo(t)}},(0,i.A)(e,[{key:"$router",get:function(){return WbSpaModel.prototype.$router}},{key:"$services",get:function(){return WbSpaModel.prototype.$services}}])}();const pi=hi;const mi=function(){function e(){}var t=e.prototype;return t.onActionExecuting=async function(e,t){if(!(e.searchParams.get("redirect_uri")&&e.searchParams.get("client_id")&&e.searchParams.get("scope")&&e.searchParams.get("code_challenge")&&(e=>{const t=e.searchParams.get("redirect_uri");return/^((http|https):\/\/)/.test(t)})(e)))throw new NotFoundError;WbSpaModel.prototype.$auth.isAuth?this.getSavedOptionsTask=WbSpaModel.prototype.$services.apiUserStorage.getData([{path:"wb_oauth_saved_options"}],{timeout:1200}):window.location.replace($.views.helpers.urlSignIn(window.location.pathname+window.location.search))},t.onActionExecuted=async function(e){if(!WbSpaModel.prototype.$auth.isAuth)return;const t=await this.getSavedOptionsTask;if(t){if(null==t?void 0:t.length)try{return void(e.responseData=JSON.parse(WbSpaModel.prototype.$helper.base64.decode(t[0].file)))}catch(e){}e.responseData=[]}},e}(),gi=new qn,fi=new Gn,yi=new Xs,vi=new oi({isNetworkError:!0}),bi=new ai;let wi=function(){function e(){const e=new Map;this.globalPipelines=[new Xn],e.set("SpaHomeData",{pipelines:[new Ws]}),e.set("SpaPromotionsData",{pipelines:[new li]}),e.set("SpaSignInData",{pipelines:[new pi,vi,new ci,new Hs(1e3)]}),e.set("SpaRefundData",{pipelines:[vi]}),e.set("SpaProductCardData",{pipelines:[fi,new Yn]}),e.set("SpaGetGroupedDeliveries",{pipelines:[bi,fi,new Hs(1e3)],fallback:()=>({options:{}})}),e.set("SpaHeadArchivePositions",{pipelines:[bi,vi],fallback:()=>({limit:150,filters:{type:"all",status:0}})}),e.set("SpaBasketData",{maxTriesCount:0,pipelines:[vi,gi,new Qn,new Hs(4e3)]}),e.set("SpaEmailedConfirmData",{pipelines:[new Jn,new Gn((()=>{const{targetRoute:e}=WbSpaModel.prototype.$router;return"SpaConfirmEmailedEntrypoint"!=e&&"SpaChangeEmailEntrypoint"!=e}))]}),e.set("SpaAccountData",{pipelines:[bi,gi,vi],fallback:()=>({broken:!0,data:{subscriptions:{subscribtionsByType:{}},discountTable:{},mySafety:{},deleteAccountSettings:{},settings:{},calendarSettings:{}}})}),e.set("SpaWalletPurchaseData",{pipelines:[bi,gi,vi,new di]}),e.set("SpaCustomerReceiptData",{pipelines:[gi,vi]}),e.set("SpaPersonalCabinetData",{pipelines:[vi,gi,bi]}),e.set("SpaTravelLkData",{pipelines:[fi]}),e.set("SpaProfileData",{pipelines:[gi]}),e.set("SpaBasketBuyItNowData",{maxTriesCount:0,pipelines:[gi,new Qn,vi,new Hs(3e3)]}),e.set("SpaSearchData",{pipelines:[new gs]}),e.set("SpaRecommendationsSearchCatalogData",{pipelines:[fi,new ti]}),e.set("SpaRecommendationsCatalogData",{pipelines:[fi,new si]}),e.set("SpaRecentCatalogData",{pipelines:[fi,new ri]}),e.set("SpaWlArrivedData",{pipelines:[fi,new es,bi]}),e.set("SpaCatalogData",{pipelines:[new ls,new us,new hs]}),e.set("SpaPromotionsCatalogData",{pipelines:[new Ss]}),e.set("SpaSellerCatalogData",{pipelines:[new Fs]}),e.set("SpaBrandsData",{pipelines:[new js]}),e.set("SpaBrandsPreviewData",{pipelines:[new js(!0)]}),e.set("SpaFavoritesData",{pipelines:[fi,new ts,bi]}),e.set("SpaProductCardOtherSellersData",{pipelines:[fi,gi,yi,new qs]}),e.set("SpaProductCardFeedbacksData",{pipelines:[fi,gi,yi,new Gs]}),e.set("SpaProductCardQuestionsData",{pipelines:[fi,gi,yi,new Ks]}),e.set("SpaSearchByImageData",{pipelines:[fi,new Zs]}),e.set("SpaOrderConfirmedData",{fallback:e=>{if(e){const t=e.url.searchParams.get("orderId");if(t){const e=sessionStorage.getItem(`confirmed_order_${t}`);if(e)return{data:JSON.parse(e)}}}return{data:{broken:!0,order:{}}}},pipelines:[gi,new ui]}),e.set("SpaOrderThankYouEntrypoint",{fallback:()=>({})}),e.set("SpaPaymentFailData",{fallback:()=>({})}),e.set("SpaFavoriteBrandsData",{pipelines:[bi,vi]}),e.set("SpaHistoryRefundsData",{pipelines:[bi,vi]}),e.set("SpaMyCommunicationsData",{pipelines:[bi,vi]}),e.set("SpaMyClaimsData",{pipelines:[bi,vi]}),e.set("SpaMyFeedbacksData",{pipelines:[bi,vi]}),e.set("SpaNotificationsData",{pipelines:[bi,vi]}),e.set("SpaOAuthSignInData",{pipelines:[fi,new mi,gi]}),e.set("SubscriptionPageData",{pipelines:[fi,bi,gi]}),e.set("ServicePagesData",{pipelines:[new Vn]}),this.map=e}return e.prototype.extend=function(e){var t;const n=this.map.get(e)||{};return n.pipelines=(null!==(t=n.pipelines)&&void 0!==t?t:[]).concat(this.globalPipelines),n},e}();const Si=wi;let _i=new r.A;const Ci=new Si,ki=new _e;let Ii,Mi,$i,Pi,Oi,Ti,Ai,Di,Ei=null,xi=null;const Bi=Object.freeze({mobile:"m",desktop:"d"});let ji=function(){function e(){}var t=e.prototype;return t.asObservable=function(e){return $.observable(e)},t.toggleProperty=function(e){this.asObservable(this).setProperty(e,!this[e])},t.$localize=function(e){var t;return(null===(t=Mi[_i.current])||void 0===t?void 0:t[e])||e},t.$moveToAnchor=function(...e){const t=arguments[0],n=e.find((e=>e instanceof Event||e instanceof jQuery.Event)),s=arguments[1]instanceof Event||arguments[1]instanceof jQuery.Event||arguments[1],i=!(arguments[2]instanceof Event||arguments[2]instanceof jQuery.Event)&&arguments[2],r=arguments[3]instanceof Event||arguments[3]instanceof jQuery.Event||!arguments[3]?0:arguments[3];null==n||n.preventDefault(),null==n||n.stopPropagation(),null==n||n.stopImmediatePropagation();const o=document.getElementById(t);if(null==o)return void console.warn("anchor element doesnt exist");const a={top:0+r};let l=this.$helper.isElementInViewport(o,!0,a);function c(){"scrollBehavior"in document.documentElement.style?window.scrollTo({top:window.pageYOffset+o.getBoundingClientRect().top-r,left:0,behavior:s?"smooth":"auto"}):window.scrollTo(0,window.pageYOffset+o.getBoundingClientRect().top-r)}if(c(),i){const e=setInterval((()=>{l=this.$helper.isElementInViewport(o,!0,a),l?clearInterval(e):c()}),500)}},t.$void=function(){},t.$getCurrentXInfoAsync=function(){return Oi.getXinfo()},t.$getCurrentXInfoWithClustersAndVectorsAsync=function(e){return Oi.getXinfoWithClustersAndVectors(e)},t.$getUserGender=async function(){const{userInfo:e}=await this.$services.userData.getUserDataAsync();return e.genderE},t.$generateGuid=function(){const e=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},t.$getLoadingError=async function(){if(Di)return Di;try{const e=await Ii.loadModuleAsync("loadingError");return Di=new e,Di}catch(e){return null}},t.$getService=function(e){return Ii.loadServiceAsSingletonAsync(e)},t.$checkLotteryAvailabilityAsync=async function(){var e,t,n,s,i;if("ru"!=wb.settings.currentLocale)return!1;const r=null!==(i=null===(s=null===(n=null===(t=null===(e=wb.global)||void 0===e?void 0:e.settings)||void 0===t?void 0:t.variables.lotteryAccessSettings)||void 0===n?void 0:n.permitted)||void 0===s?void 0:s.split(";"))&&void 0!==i?i:[];if(r.length){const[e,{userInfo:t}]=await Promise.all([this.$user.getShardAsync(),this.$services.userData.getUserDataAsync()]);return t.isAuthenticated&&r.some((t=>{const[n,s]=t.split("&").map((e=>parseInt(e)));return e>=n&&e<=s}))}return!0},t.$isWbxOrderEnabled=function(e){var t,n,s;return!!(null===(t=this.$auth.jwtData)||void 0===t?void 0:t.user)&&("ru"!==wb.settings.currentLocale||(!!e.isWbxOrderEnabled||!!(null===(s=null===(n=wb.global.settings)||void 0===n?void 0:n.variables)||void 0===s?void 0:s.wbxOrderUsersRange)&&this._checkByRange(wb.global.settings.variables.wbxOrderUsersRange)))},t.$isWbxOrderCancelEnabled=function(e){var t,n,s;return!!(null===(t=this.$auth.jwtData)||void 0===t?void 0:t.user)&&(!!e.wbxCanCancel||!!(null===(s=null===(n=wb.global.settings)||void 0===n?void 0:n.variables)||void 0===s?void 0:s.wbxOrderCancelUsersRange)&&this._checkByRange(wb.global.settings.variables.wbxOrderCancelUsersRange))},t.$isUserGradeEnabled=function(){var e,t,n;return!(!(null===(e=this.$auth.jwtData)||void 0===e?void 0:e.user)||!(null===(n=null===(t=wb.global.settings)||void 0===t?void 0:t.variables)||void 0===n?void 0:n.userGradeUsersRange))&&this._checkByRange(wb.global.settings.variables.userGradeUsersRange)},t.$isUserPremiumEnabled=function(){var e,t,n,s,i;if(!(null===(e=this.$auth.jwtData)||void 0===e?void 0:e.user)||"ru"!==wb.settings.currentLocale)return!1;const r=this.$services.userData.getMaskedInfo();return((null===(n=null===(t=wb.global.settings)||void 0===t?void 0:t.variables)||void 0===n?void 0:n.usersRangeForPremiumSubs)&&this._checkByRange(wb.global.settings.variables.usersRangeForPremiumSubs)||(null==r?void 0:r.isEmp))&&(null===(s=this.$user.getUserGradeFromCache())||void 0===s?void 0:s.premiumIsAvailable)&&((null==r?void 0:r.phone.startsWith("79"))||(null===(i=this.$user.getUserGradeFromCache().subscription_features)||void 0===i?void 0:i.length)>0)},t._checkByRange=function(e){var t;const n=(null!==(t=null==e?void 0:e.split(";"))&&void 0!==t?t:[]).map((e=>parseInt(e)));if(n.length<2)return!1;const s=isNaN(this.$auth.jwtData.user)?Math.abs(this.$auth.jwtData.user.hashCode()):parseInt(this.$auth.jwtData.user);return s>n[0]&&s<=n[1]},t.$isRangeEnabledFor=function(e){var t;return!(!(null===(t=this.$auth.jwtData)||void 0===t?void 0:t.user)||!e)&&this._checkByRange(e)},t.$useCatalogReturnCost=function(){var e,t,n,s;return!!(null===(t=null===(e=wb.global.settings)||void 0===e?void 0:e.variables)||void 0===t?void 0:t.catalogReturnCostLocales)&&(null===(s=null===(n=wb.global.settings)||void 0===n?void 0:n.variables)||void 0===s?void 0:s.catalogReturnCostLocales.includes(this.$user.getLocale()))},t.$getService=function(e){return Ii.loadServiceAsSingletonAsync(e).then((()=>Ai[e]))},(0,i.A)(e,[{key:"$userEnv",get:function(){return Ni}},{key:"$router",get:function(){return _i}},{key:"$helper",get:function(){return s}},{key:"$moduleLoader",get:function(){return Ii}},{key:"$verificationTokenHelper",get:function(){return me}},{key:"$menuLk",get:function(){return null==xi&&(xi=(new a).init()),xi}},{key:"$localziation",get:function(){return Mi},set:function(e){return Mi=e,!0}},{key:"$httpClient",get:function(){return h}},{key:"$auth",get:function(){return _}},{key:"$wbxHttpClient",get:function(){return m}},{key:"$observable",get:function(){return $.observable(this)}},{key:"$storageHelper",get:function(){return ve}},{key:"$seoHelper",get:function(){return pe}},{key:"$stat",get:function(){return wb.stat}},{key:"$user",get:function(){return Oi}},{key:"$geoLocation",get:function(){return Ti}},{key:"$adult",get:function(){return $i}},{key:"$observerHelper",get:function(){return Pi}},{key:"$analitic",get:function(){return wb.analitics}},{key:"$productCardPopup",get:function(){return Ei=null!=Ei?Ei:new ce,Ei}},{key:"$isDesktop",get:function(){return Bi.desktop==wb.settings.displayMode}},{key:"$eventBus",get:function(){return de}},{key:"$services",get:function(){return Ai}},{key:"$routeExtensions",get:function(){return Ci}},{key:"$apiSupport",get:function(){return ki}},{key:"$recentViews",get:function(){return Ce}},{key:"$promotionsHelper",get:function(){return De}}])}();Object.defineProperties(window,{WbSpaModel:{value:ji}}),Object.setPrototypeOf(r.A.prototype,ji.prototype),Object.setPrototypeOf(be.A.prototype,ji.prototype),Object.setPrototypeOf(Se.prototype,ji.prototype),Object.setPrototypeOf(se.prototype,ji.prototype),Object.setPrototypeOf(ie.prototype,ji.prototype),Object.setPrototypeOf(re.prototype,ji.prototype),Object.setPrototypeOf(ce.prototype,ji.prototype),Object.setPrototypeOf(Object.getPrototypeOf(pe),ji.prototype),Object.setPrototypeOf(a.prototype,ji.prototype),Object.setPrototypeOf(Si.prototype,ji.prototype),Object.setPrototypeOf(De.prototype,ji.prototype),Object.setPrototypeOf(Dt.prototype,ji.prototype),Object.setPrototypeOf(xt.A.prototype,ji.prototype),Object.setPrototypeOf(zt.prototype,ji.prototype),Object.setPrototypeOf(nt.prototype,ji.prototype),Object.setPrototypeOf(it.prototype,ji.prototype),Object.setPrototypeOf(lt.prototype,ji.prototype),Object.setPrototypeOf(Cn.prototype,ji.prototype),Object.setPrototypeOf(Dn.prototype,ji.prototype),Object.setPrototypeOf(xn.prototype,ji.prototype),Object.setPrototypeOf(en.prototype,ji.prototype),Object.setPrototypeOf(Nn.prototype,ji.prototype),Object.setPrototypeOf(zn.prototype,ji.prototype),Ii=new se(ji.prototype).init(),$i=new ie,Oi=new be.A,Ti=new Se,Pi=new re;const Li=ji;wb.utils=Object.assign(wb.utils,s),wb.user=Oi,wb.adult=$i;const Ni={currency:wb.user.getCurrency(),activePositions:[],activePositionsTask:new J};Ai={storeService:new zt,userAddressService:new xt.A,cartService:new Dt,favsService:new nt,userData:new it,notifications:new lt,productCard:new en,bannersService:new Cn,apiUserStorage:new Dn,sessionService:new xn,pager:Bn,retryFetchService:new Nn,splitterService:new zn},Object.keys(Ai).forEach((e=>Ai[e].init&&Ai[e].init())),localStorage.removeItem("suppliersInfo"),Object.keys(Ai).forEach((e=>Ai[e].init&&Ai[e].init()));var Ri=n(25148);let Fi=function(){function e(){this.fullMenu=null,this.menuByUrl=new Map,this.menuById=new Map,this.isInited=!1,this.menuIdEnum=this._menuIdEnum()}var t=e.prototype;return t._menuIdEnum=function(){return{sport:784,monocity:61042,forAdults:62057,promotion:2192}},t.initMenu=async function(){var e;const t=`main-menu-${WbSpaModel.prototype.$user.getLocale()}-ru-v3.json`;if(this.fullMenu=await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(t,1e4),this.fullMenu){const t=null===(e=WbSpaModel.prototype.$user.getUserGradeFromCache())||void 0===e?void 0:e.wbClub,n=this.fullMenu.findIndex((e=>1234===e.id));WbSpaModel.prototype.$isUserPremiumEnabled()&&this.fullMenu.splice(n>=0?n:0,0,{id:1122,name:"Скидки WB Клуба",url:t&&"subscribed"===t?"/promotions/klubnye-skidki":"",locked:!t||"subscribed"!==t}),this.fullMenu.splice(this.fullMenu.findIndex((e=>306===e.id)),0,{id:131387,name:"Доброшрифт",url:"/promotions/dobroshrift"}),"ru"!==wb.settings.currentLocale&&n>=0&&this.fullMenu.splice(n,1),this._createMenuMap();const s=this.fullMenu.filter((e=>e.dynamic)).map((e=>this.loadDynamicBranch(e)));await Promise.all(s),this.isInited=!0}return this},t.loadDynamicBranch=async function(e){const t=`menu${e.url}.json`,n=await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(t,1e4);n&&(n.forEach((t=>this._setNode(t,e.id))),delete e.dynamic,e.childs=n,e.isDenyLink=!0)},t.getCurrentMenuItem=function(e){if(!e)return null;let t=e.pathname.replace("catalogdata","catalog");return this.menuByUrl.get(t)},t.getSitePathItems=function(e){if(!e)return null;const t=[];t.push({id:e.id,name:e.name,pageUrl:e.url,analytic:["CCC",null,null,e.id]});let n=this.menuById.get(e.id).parentId;for(;null!=n;){const e=this.menuById.get(n);t.push({id:n,name:e.name,pageUrl:e.url,analytic:["CCC",null,null,n]}),n=e.parentId}return t.reverse()},t.getCatalogMenu=function(e){var t,n,s,i;const r=[];if(e&&0!==e.length)if(1===e.length){const s={name:"",link:""},i=null!==(n=null===(t=this.menuByUrl.get(e[0].pageUrl).childs)||void 0===t?void 0:t.map((e=>({node:{id:e.id,name:e.name,link:e.url,isDenyLink:e.isDenyLink},children:[]}))))&&void 0!==n?n:[];r.push({node:s,children:i})}else{const t=this.menuByUrl.get(e[1].pageUrl),n={id:t.id,isOpen:!0,lastSelected:e[e.length-1].id===t.id,link:t.url,name:t.name},o=n.lastSelected?null!==(i=null===(s=t.childs)||void 0===s?void 0:s.map((e=>{var t;return{node:{id:e.id,name:e.name,link:e.url,isDenyLink:e.isDenyLink},children:null===(t=e.childs)||void 0===t?void 0:t.map((e=>({node:{id:e.id,name:e.name,link:e.url},children:[]})))}})))&&void 0!==i?i:[]:this.getCatalogMenu(e.slice(1));r.push({node:n,children:o})}else r.push({node:{name:"",link:""},children:[]});return r},t.getCatalogDenyMenu=function(e,t){var n,s,i,r,o,a;if(!e)return;if(e.landing||1===t.length)return{current:{name:e.name,link:e.url,isTop:e.isTop,lastSelected:!1},sideMenu:[],parent:{},parents:[],tagsMenu:null!==(s=null===(n=e.childs)||void 0===n?void 0:n.map((e=>({name:e.name,link:e.url}))))&&void 0!==s?s:[]};const l=t[t.length-2],c=t.slice(1).map((e=>({name:e.name,link:e.pageUrl})));c[c.length-1].lastSelected=!0;const u=null===(i=e.childs)||void 0===i?void 0:i.map((e=>({name:e.name,link:e.url,anc:!0})));if((null===(r=e.childs)||void 0===r?void 0:r.length)>0)return{current:{name:e.name,link:e.url,isTop:e.isTop,lastSelected:!1},sideMenu:[...c,...u],parent:{name:l.name,link:l.pageUrl},parents:this.getParentsForDeny(e.id),tagsMenu:null!=u?u:[]};const d=this.menuByUrl.get(l.pageUrl);return{current:{name:e.name,link:e.url,isTop:e.isTop,lastSelected:!0},sideMenu:c,parent:{name:l.name,link:l.pageUrl},parents:this.getParentsForDeny(e.id),tagsMenu:null!==(a=null===(o=d.childs)||void 0===o?void 0:o.map((e=>({name:e.name,link:e.url}))))&&void 0!==a?a:[]}},t.getRootNode=function(e){let t=e;for(;null!=t.parentId;)t=this.menuById.get(t.parentId);return t},t.hasItem=function(e){return!!e&&this.menuById.has(e)},t.getCatalogLink=function(e){return this.menuById.get(e).url},t.getParents=function(e){const t=[];let n=this.menuById.get(e).parentId;for(;null!=n;){const e=this.menuById.get(n);t.push(e.name),n=e.parentId}return t.reverse()},t.getParentsForDeny=function(e){const t=[];let n=this.menuById.get(e).parentId;for(;null!=n;){const e=this.menuById.get(n);t.push({name:e.name,link:e.url}),n=e.parentId}return t.reverse()},t.tryGetMenuItemFromDynamic=async function(e,t){if(!e){const e=t.pathname.split("/").length-2;let n=new URL(t);for(let s=0;s<e;s++){n.pathname=n.pathname.substring(0,n.pathname.lastIndexOf("/"));const e=this.getCurrentMenuItem(n);if(null==e?void 0:e.dynamic)return await this.loadDynamicBranch(e),this.getCurrentMenuItem(t);if(e)return null}return null}if(null==e?void 0:e.dynamic)return await this.loadDynamicBranch(e),e},t._createMenuMap=function(){this.fullMenu.forEach((e=>this._setNode(e,null)))},t._setNode=function(e,t){var n;t&&(e.parentId=t),this.menuByUrl.has(e.url)&&!e.shard||(this.menuByUrl.set(e.url,e),this.menuById.set(e.id,e)),null===(n=e.childs)||void 0===n||n.forEach((t=>this._setNode(t,e.id)))},t._prepareDropdownMenu=function(e,t=null){const n={parentItem:t};for(let t in e)e.hasOwnProperty(t)&&(Array.isArray(e[t])?n[t]=e[t].map((e=>this._prepareDropdownMenu(e,n))):n[t]=e[t]);return n},e}();const Ui=Fi,Wi=e=>"string"==typeof e,Hi=()=>{let e,t;const n=new Promise(((n,s)=>{e=n,t=s}));return n.resolve=e,n.reject=t,n},zi=e=>null==e?"":""+e,qi=/###/g,Vi=e=>e&&e.indexOf("###")>-1?e.replace(qi,"."):e,Gi=e=>!e||Wi(e),Ji=(e,t,n)=>{const s=Wi(t)?t.split("."):t;let i=0;for(;i<s.length-1;){if(Gi(e))return{};const t=Vi(s[i]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++i}return Gi(e)?{}:{obj:e,k:Vi(s[i])}},Ki=(e,t,n)=>{const{obj:s,k:i}=Ji(e,t,Object);if(void 0!==s||1===t.length)return void(s[i]=n);let r=t[t.length-1],o=t.slice(0,t.length-1),a=Ji(e,o,Object);for(;void 0===a.obj&&o.length;)r=`${o[o.length-1]}.${r}`,o=o.slice(0,o.length-1),a=Ji(e,o,Object),a&&a.obj&&void 0!==a.obj[`${a.k}.${r}`]&&(a.obj=void 0);a.obj[`${a.k}.${r}`]=n},Qi=(e,t)=>{const{obj:n,k:s}=Ji(e,t);if(n)return n[s]},Xi=(e,t,n)=>{for(const s in t)"__proto__"!==s&&"constructor"!==s&&(s in e?Wi(e[s])||e[s]instanceof String||Wi(t[s])||t[s]instanceof String?n&&(e[s]=t[s]):Xi(e[s],t[s],n):e[s]=t[s]);return e},Yi=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Zi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const er=e=>Wi(e)?e.replace(/[&<>"'\/]/g,(e=>Zi[e])):e;const tr=[" ",",","?","!",";"],nr=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),sr=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t])return e[t];const s=t.split(n);let i=e;for(let e=0;e<s.length;){if(!i||"object"!=typeof i)return;let t,r="";for(let o=e;o<s.length;++o)if(o!==e&&(r+=n),r+=s[o],t=i[r],void 0!==t){if(["string","number","boolean"].indexOf(typeof t)>-1&&o<s.length-1)continue;e+=o-e+1;break}i=t}return i},ir=e=>e&&e.replace("_","-"),rr={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class or{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||rr,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,s){return s&&!this.debug?null:(Wi(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new or(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new or(this.logger,e)}}var ar=new or;class lr{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach((e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)})),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(this.observers[e]){Array.from(this.observers[e].entries()).forEach((e=>{let[t,s]=e;for(let e=0;e<s;e++)t(...n)}))}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach((t=>{let[s,i]=t;for(let t=0;t<i;t++)s.apply(s,[e,...n])}))}}}class cr extends lr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator,r=void 0!==s.ignoreJSONStructure?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],n&&(Array.isArray(n)?o.push(...n):Wi(n)&&i?o.push(...n.split(i)):o.push(n)));const a=Qi(this.data,o);return!a&&!t&&!n&&e.indexOf(".")>-1&&(e=o[0],t=o[1],n=o.slice(2).join(".")),!a&&r&&Wi(n)?sr(this.data&&this.data[e]&&this.data[e][t],n,i):a}addResource(e,t,n,s){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const r=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator;let o=[e,t];n&&(o=o.concat(r?n.split(r):n)),e.indexOf(".")>-1&&(o=e.split("."),s=t,t=o[1]),this.addNamespaces(t),Ki(this.data,o,s),i.silent||this.emit("added",e,t,n,s)}addResources(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const s in n)(Wi(n[s])||Array.isArray(n[s]))&&this.addResource(e,t,s,n[s],{silent:!0});s.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,s,i){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),s=n,n=t,t=o[1]),this.addNamespaces(t);let a=Qi(this.data,o)||{};r.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?Xi(a,n,i):a={...a,...n},Ki(this.data,o,a),r.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((e=>t[e]&&Object.keys(t[e]).length>0))}toJSON(){return this.data}}var ur={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,s,i){return e.forEach((e=>{this.processors[e]&&(t=this.processors[e].process(t,n,s,i))})),t}};const dr={};class hr extends lr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),((e,t,n)=>{e.forEach((e=>{t[e]&&(n[e]=t[e])}))})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=ar.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;const n=this.resolve(e,t);return n&&void 0!==n.res}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const s=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const r=n&&e.indexOf(n)>-1,o=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||((e,t,n)=>{t=t||"",n=n||"";const s=tr.filter((e=>t.indexOf(e)<0&&n.indexOf(e)<0));if(0===s.length)return!0;const i=nr.getRegExp(`(${s.map((e=>"?"===e?"\\?":e)).join("|")})`);let r=!i.test(e);if(!r){const t=e.indexOf(n);t>0&&!i.test(e.substring(0,t))&&(r=!0)}return r})(e,n,s));if(r&&!o){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:i};const r=e.split(n);(n!==s||n===s&&this.options.ns.indexOf(r[0])>-1)&&(i=r.shift()),e=r.join(s)}return Wi(i)&&(i=[i]),{key:e,namespaces:i}}translate(e,t,n){if("object"!=typeof t&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof t&&(t={...t}),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const s=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,{key:r,namespaces:o}=this.extractFromKey(e[e.length-1],t),a=o[o.length-1],l=t.lng||this.language,c=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(c){const e=t.nsSeparator||this.options.nsSeparator;return s?{res:`${a}${e}${r}`,usedKey:r,exactUsedKey:r,usedLng:l,usedNS:a,usedParams:this.getUsedParamsDetails(t)}:`${a}${e}${r}`}return s?{res:r,usedKey:r,exactUsedKey:r,usedLng:l,usedNS:a,usedParams:this.getUsedParamsDetails(t)}:r}const u=this.resolve(e,t);let d=u&&u.res;const h=u&&u.usedKey||r,p=u&&u.exactUsedKey||r,m=Object.prototype.toString.apply(d),g=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,f=!this.i18nFormat||this.i18nFormat.handleAsObject,y=!Wi(d)&&"boolean"!=typeof d&&"number"!=typeof d;if(!(f&&d&&y&&["[object Number]","[object Function]","[object RegExp]"].indexOf(m)<0)||Wi(g)&&Array.isArray(d))if(f&&Wi(g)&&Array.isArray(d))d=d.join(g),d&&(d=this.extendTranslation(d,e,t,n));else{let s=!1,o=!1;const c=void 0!==t.count&&!Wi(t.count),h=hr.hasDefaultValue(t),p=c?this.pluralResolver.getSuffix(l,t.count,t):"",m=t.ordinal&&c?this.pluralResolver.getSuffix(l,t.count,{ordinal:!1}):"",g=c&&!t.ordinal&&0===t.count&&this.pluralResolver.shouldUseIntlApi(),f=g&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${p}`]||t[`defaultValue${m}`]||t.defaultValue;!this.isValidLookup(d)&&h&&(s=!0,d=f),this.isValidLookup(d)||(o=!0,d=r);const y=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&o?void 0:d,v=h&&f!==d&&this.options.updateMissing;if(o||s||v){if(this.logger.log(v?"updateKey":"missingKey",l,a,r,v?f:d),i){const e=this.resolve(r,{...t,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const n=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&n&&n[0])for(let t=0;t<n.length;t++)e.push(n[t]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(t.lng||this.language):e.push(t.lng||this.language);const s=(e,n,s)=>{const i=h&&s!==d?s:y;this.options.missingKeyHandler?this.options.missingKeyHandler(e,a,n,i,v,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,a,n,i,v,t),this.emit("missingKey",e,a,n,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&c?e.forEach((e=>{const n=this.pluralResolver.getSuffixes(e,t);g&&t[`defaultValue${this.options.pluralSeparator}zero`]&&n.indexOf(`${this.options.pluralSeparator}zero`)<0&&n.push(`${this.options.pluralSeparator}zero`),n.forEach((n=>{s([e],r+n,t[`defaultValue${n}`]||f)}))})):s(e,r,f))}d=this.extendTranslation(d,e,t,u,n),o&&d===r&&this.options.appendNamespaceToMissingKey&&(d=`${a}:${r}`),(o||s)&&this.options.parseMissingKeyHandler&&(d="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${a}:${r}`:r,s?d:void 0):this.options.parseMissingKeyHandler(d))}else{if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,d,{...t,ns:o}):`key '${r} (${this.language})' returned an object instead of string.`;return s?(u.res=e,u.usedParams=this.getUsedParamsDetails(t),u):e}if(i){const e=Array.isArray(d),n=e?[]:{},s=e?p:h;for(const e in d)if(Object.prototype.hasOwnProperty.call(d,e)){const r=`${s}${i}${e}`;n[e]=this.translate(r,{...t,joinArrays:!1,ns:o}),n[e]===r&&(n[e]=d[e])}d=n}}return s?(u.res=d,u.usedParams=this.getUsedParamsDetails(t),u):d}extendTranslation(e,t,n,s,i){var r=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const o=Wi(e)&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let a;if(o){const t=e.match(this.interpolator.nestingRegexp);a=t&&t.length}let l=n.replace&&!Wi(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),e=this.interpolator.interpolate(e,l,n.lng||this.language||s.usedLng,n),o){const t=e.match(this.interpolator.nestingRegexp);a<(t&&t.length)&&(n.nest=!1)}!n.lng&&"v1"!==this.options.compatibilityAPI&&s&&s.res&&(n.lng=this.language||s.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return i&&i[0]===s[0]&&!n.context?(r.logger.warn(`It seems you are nesting recursively key: ${s[0]} in key: ${t[0]}`),null):r.translate(...s,t)}),n)),n.interpolation&&this.interpolator.reset()}const o=n.postProcess||this.options.postProcess,a=Wi(o)?[o]:o;return null!=e&&a&&a.length&&!1!==n.applyPostProcessor&&(e=ur.handle(a,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let t,n,s,i,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Wi(e)&&(e=[e]),e.forEach((e=>{if(this.isValidLookup(t))return;const a=this.extractFromKey(e,o),l=a.key;n=l;let c=a.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const u=void 0!==o.count&&!Wi(o.count),d=u&&!o.ordinal&&0===o.count&&this.pluralResolver.shouldUseIntlApi(),h=void 0!==o.context&&(Wi(o.context)||"number"==typeof o.context)&&""!==o.context,p=o.lngs?o.lngs:this.languageUtils.toResolveHierarchy(o.lng||this.language,o.fallbackLng);c.forEach((e=>{this.isValidLookup(t)||(r=e,!dr[`${p[0]}-${e}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(r)&&(dr[`${p[0]}-${e}`]=!0,this.logger.warn(`key "${n}" for languages "${p.join(", ")}" won't get resolved as namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach((n=>{if(this.isValidLookup(t))return;i=n;const r=[l];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(r,l,n,e,o);else{let e;u&&(e=this.pluralResolver.getSuffix(n,o.count,o));const t=`${this.options.pluralSeparator}zero`,s=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(r.push(l+e),o.ordinal&&0===e.indexOf(s)&&r.push(l+e.replace(s,this.options.pluralSeparator)),d&&r.push(l+t)),h){const n=`${l}${this.options.contextSeparator}${o.context}`;r.push(n),u&&(r.push(n+e),o.ordinal&&0===e.indexOf(s)&&r.push(n+e.replace(s,this.options.pluralSeparator)),d&&r.push(n+t))}}let a;for(;a=r.pop();)this.isValidLookup(t)||(s=a,t=this.getResource(n,e,a,o))})))}))})),{res:t,usedKey:n,exactUsedKey:s,usedLng:i,usedNS:r}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,s):this.resourceStore.getResource(e,t,n,s)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Wi(e.replace);let s=n?e.replace:e;if(n&&void 0!==e.count&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!n){s={...s};for(const e of t)delete s[e]}return s}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}const pr=e=>e.charAt(0).toUpperCase()+e.slice(1);class mr{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ar.create("languageUtils")}getScriptPartFromCode(e){if(!(e=ir(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=ir(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Wi(e)&&e.indexOf("-")>-1){if("undefined"!=typeof Intl&&void 0!==Intl.getCanonicalLocales)try{let t=Intl.getCanonicalLocales(e)[0];if(t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t)return t}catch(e){}const t=["hans","hant","latn","cyrl","cans","mong","arab"];let n=e.split("-");return this.options.lowerCaseLng?n=n.map((e=>e.toLowerCase())):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=pr(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=pr(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=pr(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach((e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)})),!t&&this.options.supportedLngs&&e.forEach((e=>{if(t)return;const n=this.getLanguagePartFromCode(e);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find((e=>e===n?e:e.indexOf("-")<0&&n.indexOf("-")<0?void 0:e.indexOf("-")>0&&n.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===n||0===e.indexOf(n)&&n.length>1?e:void 0))})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),Wi(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),s=[],i=e=>{e&&(this.isSupportedCode(e)?s.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return Wi(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(e))):Wi(e)&&i(this.formatLanguageCode(e)),n.forEach((e=>{s.indexOf(e)<0&&i(this.formatLanguageCode(e))})),s}}let gr=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],fr={1:e=>Number(e>1),2:e=>Number(1!=e),3:e=>0,4:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),5:e=>Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5),6:e=>Number(1==e?0:e>=2&&e<=4?1:2),7:e=>Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),8:e=>Number(1==e?0:2==e?1:8!=e&&11!=e?2:3),9:e=>Number(e>=2),10:e=>Number(1==e?0:2==e?1:e<7?2:e<11?3:4),11:e=>Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3),12:e=>Number(e%10!=1||e%100==11),13:e=>Number(0!==e),14:e=>Number(1==e?0:2==e?1:3==e?2:3),15:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2),16:e=>Number(e%10==1&&e%100!=11?0:0!==e?1:2),17:e=>Number(1==e||e%10==1&&e%100!=11?0:1),18:e=>Number(0==e?0:1==e?1:2),19:e=>Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3),20:e=>Number(1==e?0:0==e||e%100>0&&e%100<20?1:2),21:e=>Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0),22:e=>Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)};const yr=["v1","v2","v3"],vr=["v4"],br={zero:0,one:1,two:2,few:3,many:4,other:5};class wr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=ar.create("pluralResolver"),this.options.compatibilityJSON&&!vr.includes(this.options.compatibilityJSON)||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(()=>{const e={};return gr.forEach((t=>{t.lngs.forEach((n=>{e[n]={numbers:t.nr,plurals:fr[t.fc]}}))})),e})(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{const n=ir("dev"===e?"en":e),s=t.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:n,type:s});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];const r=new Intl.PluralRules(n,{type:s});return this.pluralRulesCache[i]=r,r}catch(e){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((e=>`${t}${e}`))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort(((e,t)=>br[e]-br[t])).map((e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`)):n.numbers.map((n=>this.getSuffix(e,n,t))):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=this.getRule(e,n);return s?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:this.getSuffixRetroCompatible(s,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const n=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let s=e.numbers[n];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===s?s="plural":1===s&&(s=""));const i=()=>this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString();return"v1"===this.options.compatibilityJSON?1===s?"":"number"==typeof s?`_plural_${s.toString()}`:i():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?i():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!yr.includes(this.options.compatibilityJSON)}}const Sr=function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=((e,t,n)=>{const s=Qi(e,n);return void 0!==s?s:Qi(t,n)})(e,t,n);return!r&&i&&Wi(n)&&(r=sr(e,n,s),void 0===r&&(r=sr(t,n,s))),r},_r=e=>e.replace(/\$/g,"$$$$");class Cr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=ar.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:s,prefix:i,prefixEscaped:r,suffix:o,suffixEscaped:a,formatSeparator:l,unescapeSuffix:c,unescapePrefix:u,nestingPrefix:d,nestingPrefixEscaped:h,nestingSuffix:p,nestingSuffixEscaped:m,nestingOptionsSeparator:g,maxReplaces:f,alwaysFormat:y}=e.interpolation;this.escape=void 0!==t?t:er,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==s&&s,this.prefix=i?Yi(i):r||"{{",this.suffix=o?Yi(o):a||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?Yi(d):h||Yi("$t("),this.nestingSuffix=p?Yi(p):m||Yi(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=f||1e3,this.alwaysFormat=void 0!==y&&y,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e&&e.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,n,s){let i,r,o;const a=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=e=>{if(e.indexOf(this.formatSeparator)<0){const i=Sr(t,a,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(i,void 0,n,{...s,...t,interpolationkey:e}):i}const i=e.split(this.formatSeparator),r=i.shift().trim(),o=i.join(this.formatSeparator).trim();return this.format(Sr(t,a,r,this.options.keySeparator,this.options.ignoreJSONStructure),o,n,{...s,...t,interpolationkey:r})};this.resetRegExp();const c=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,u=s&&s.interpolation&&void 0!==s.interpolation.skipOnVariables?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>_r(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?_r(this.escape(e)):_r(e)}].forEach((t=>{for(o=0;i=t.regex.exec(e);){const n=i[1].trim();if(r=l(n),void 0===r)if("function"==typeof c){const t=c(e,i,s);r=Wi(t)?t:""}else if(s&&Object.prototype.hasOwnProperty.call(s,n))r="";else{if(u){r=i[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),r=""}else Wi(r)||this.useRawValueToEscape||(r=zi(r));const a=t.safeValue(r);if(e=e.replace(i[0],a),u?(t.regex.lastIndex+=r.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,o++,o>=this.maxReplaces)break}})),e}nest(e,t){let n,s,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=(e,t)=>{const n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;const s=e.split(new RegExp(`${n}[ ]*{`));let r=`{${s[1]}`;e=s[0],r=this.interpolate(r,i);const o=r.match(/'/g),a=r.match(/"/g);(o&&o.length%2==0&&!a||a.length%2!=0)&&(r=r.replace(/'/g,'"'));try{i=JSON.parse(r),t&&(i={...t,...i})}catch(t){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,t),`${e}${n}${r}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,e};for(;n=this.nestingRegexp.exec(e);){let a=[];i={...r},i=i.replace&&!Wi(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;let l=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){const e=n[1].split(this.formatSeparator).map((e=>e.trim()));n[1]=e.shift(),a=e,l=!0}if(s=t(o.call(this,n[1].trim(),i),i),s&&n[0]===e&&!Wi(s))return s;Wi(s)||(s=zi(s)),s||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),s=""),l&&(s=a.reduce(((e,t)=>this.format(e,t,r.lng,{...r,interpolationkey:n[1].trim()})),s.trim())),e=e.replace(n[0],s),this.regexp.lastIndex=0}return e}}const kr=e=>{const t={};return(n,s,i)=>{let r=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(r={...r,[i.interpolationkey]:void 0});const o=s+JSON.stringify(r);let a=t[o];return a||(a=e(ir(s),i),t[o]=a),a(n)}};class Ir{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=ar.create("formatter"),this.options=e,this.formats={number:kr(((e,t)=>n=>new Intl.NumberFormat(e,{...t}).format(n))),currency:kr(((e,t)=>n=>new Intl.NumberFormat(e,{...t,style:"currency"}).format(n))),datetime:kr(((e,t)=>n=>new Intl.DateTimeFormat(e,{...t}).format(n))),relativetime:kr(((e,t)=>n=>new Intl.RelativeTimeFormat(e,{...t}).format(n,t.range||"day"))),list:kr(((e,t)=>n=>new Intl.ListFormat(e,{...t}).format(n)))},this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=kr(t)}format(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find((e=>e.indexOf(")")>-1))){const e=i.findIndex((e=>e.indexOf(")")>-1));i[0]=[i[0],...i.splice(1,e)].join(this.formatSeparator)}return i.reduce(((e,t)=>{const{formatName:i,formatOptions:r}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const s=e.split("(");t=s[0].toLowerCase().trim();const i=s[1].substring(0,s[1].length-1);"currency"===t&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):"relativetime"===t&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach((e=>{if(e){const[t,...s]=e.split(":"),i=s.join(":").trim().replace(/^'+|'+$/g,""),r=t.trim();n[r]||(n[r]=i),"false"===i&&(n[r]=!1),"true"===i&&(n[r]=!0),isNaN(i)||(n[r]=parseInt(i,10))}}))}return{formatName:t,formatOptions:n}})(t);if(this.formats[i]){let t=e;try{const o=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},a=o.locale||o.lng||s.locale||s.lng||n;t=this.formats[i](e,a,{...r,...s,...o})}catch(e){this.logger.warn(e)}return t}return this.logger.warn(`there was no format function for ${i}`),e}),e)}}class Mr extends lr{constructor(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=ar.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,s.backend,s)}queueLoad(e,t,n,s){const i={},r={},o={},a={};return e.forEach((e=>{let s=!0;t.forEach((t=>{const o=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[o]=2:this.state[o]<0||(1===this.state[o]?void 0===r[o]&&(r[o]=!0):(this.state[o]=1,s=!1,void 0===r[o]&&(r[o]=!0),void 0===i[o]&&(i[o]=!0),void 0===a[t]&&(a[t]=!0)))})),s||(o[e]=!0)})),(Object.keys(i).length||Object.keys(r).length)&&this.queue.push({pending:r,pendingCount:Object.keys(r).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(r),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(a)}}loaded(e,t,n){const s=e.split("|"),i=s[0],r=s[1];t&&this.emit("failedLoading",i,r,t),!t&&n&&this.store.addResourceBundle(i,r,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const o={};this.queue.forEach((n=>{((e,t,n)=>{const{obj:s,k:i}=Ji(e,t,Object);s[i]=s[i]||[],s[i].push(n)})(n.loaded,[i],r),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((e=>{o[e]||(o[e]={});const t=n.loaded[e];t.length&&t.forEach((t=>{void 0===o[e][t]&&(o[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",o),this.queue=this.queue.filter((e=>!e.done))}read(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,r=arguments.length>5?arguments[5]:void 0;if(!e.length)return r(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:s,wait:i,callback:r});this.readingCalls++;const o=(o,a)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}o&&a&&s<this.maxRetries?setTimeout((()=>{this.read.call(this,e,t,n,s+1,2*i,r)}),i):r(o,a)},a=this.backend[n].bind(this.backend);if(2!==a.length)return a(e,t,o);try{const n=a(e,t);n&&"function"==typeof n.then?n.then((e=>o(null,e))).catch(o):o(null,n)}catch(e){o(e)}}prepareLoading(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();Wi(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Wi(t)&&(t=[t]);const i=this.queueLoad(e,t,n,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach((e=>{this.loadOne(e)}))}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),s=n[0],i=n[1];this.read(s,i,"read",void 0,void 0,((n,r)=>{n&&this.logger.warn(`${t}loading namespace ${i} for language ${s} failed`,n),!n&&r&&this.logger.log(`${t}loaded namespace ${i} for language ${s}`,r),this.loaded(e,n,r)}))}saveMissing(e,t,n,s,i){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=n&&""!==n){if(this.backend&&this.backend.create){const a={...r,isUpdate:i},l=this.backend.create.bind(this.backend);if(l.length<6)try{let i;i=5===l.length?l(e,t,n,s,a):l(e,t,n,s),i&&"function"==typeof i.then?i.then((e=>o(null,e))).catch(o):o(null,i)}catch(e){o(e)}else l(e,t,n,s,o,a)}e&&e[0]&&this.store.addResource(e[0],t,n,s)}}}const $r=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),Wi(e[1])&&(t.defaultValue=e[1]),Wi(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach((e=>{t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Pr=e=>(Wi(e.ns)&&(e.ns=[e.ns]),Wi(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Wi(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),Or=()=>{};class Tr extends lr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=Pr(e),this.services={},this.logger=ar,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach((e=>{"function"==typeof n[e]&&(n[e]=n[e].bind(n))})),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout((()=>{this.init(e,t)}),0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"==typeof t&&(n=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&(Wi(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const s=$r();this.options={...s,...this.options,...Pr(t)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...s.interpolation,...this.options.interpolation}),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator);const i=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?ar.init(i(this.modules.logger),this.options):ar.init(null,this.options),this.modules.formatter?t=this.modules.formatter:"undefined"!=typeof Intl&&(t=Ir);const n=new mr(this.options);this.store=new cr(this.options.resources,this.options);const r=this.services;r.logger=ar,r.resourceStore=this.store,r.languageUtils=n,r.pluralResolver=new wr(n,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format||(r.formatter=i(t),r.formatter.init(r,this.options),this.options.interpolation.format=r.formatter.format.bind(r.formatter)),r.interpolator=new Cr(this.options),r.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},r.backendConnector=new Mr(i(this.modules.backend),r.resourceStore,r,this.options),r.backendConnector.on("*",(function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];e.emit(t,...s)})),this.modules.languageDetector&&(r.languageDetector=i(this.modules.languageDetector),r.languageDetector.init&&r.languageDetector.init(r,this.options.detection,this.options)),this.modules.i18nFormat&&(r.i18nFormat=i(this.modules.i18nFormat),r.i18nFormat.init&&r.i18nFormat.init(this)),this.translator=new hr(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];e.emit(t,...s)})),this.modules.external.forEach((e=>{e.init&&e.init(this)}))}if(this.format=this.options.interpolation.format,n||(n=Or),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((t=>{this[t]=function(){return e.store[t](...arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((t=>{this[t]=function(){return e.store[t](...arguments),e}}));const r=Hi(),o=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),r.resolve(t),n(e,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initImmediate?o():setTimeout(o,0),r}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Or;const n=Wi(e)?e:this.language;if("function"==typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){if(n&&"cimode"===n.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],s=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach((t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)}))};if(n)s(n);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((e=>s(e)))}this.options.preload&&this.options.preload.forEach((e=>s(e))),this.services.backendConnector.load(e,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)}))}else t(null)}reloadResources(e,t,n){const s=Hi();return"function"==typeof e&&(n=e,e=void 0),"function"==typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=Or),this.services.backendConnector.reload(e,t,(e=>{s.resolve(),n(e)})),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&ur.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const s=Hi();this.emit("languageChanging",e);const i=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},r=(e,r)=>{r?(i(r),this.translator.changeLanguage(r),this.isLanguageChangingTo=void 0,this.emit("languageChanged",r),this.logger.log("languageChanged",r)):this.isLanguageChangingTo=void 0,s.resolve((function(){return n.t(...arguments)})),t&&t(e,(function(){return n.t(...arguments)}))},o=t=>{e||t||!this.services.languageDetector||(t=[]);const n=Wi(t)?t:this.services.languageUtils.getBestMatchFromCodes(t);n&&(this.language||i(n),this.translator.language||this.translator.changeLanguage(n),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(n)),this.loadResources(n,(e=>{r(e,n)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e):o(this.services.languageDetector.detect()),s}getFixedT(e,t,n){var s=this;const i=function(e,t){let r;if("object"!=typeof t){for(var o=arguments.length,a=new Array(o>2?o-2:0),l=2;l<o;l++)a[l-2]=arguments[l];r=s.options.overloadTranslationOptionHandler([e,t].concat(a))}else r={...t};r.lng=r.lng||i.lng,r.lngs=r.lngs||i.lngs,r.ns=r.ns||i.ns,""!==r.keyPrefix&&(r.keyPrefix=r.keyPrefix||n||i.keyPrefix);const c=s.options.keySeparator||".";let u;return u=r.keyPrefix&&Array.isArray(e)?e.map((e=>`${r.keyPrefix}${c}${e}`)):r.keyPrefix?`${r.keyPrefix}${c}${e}`:e,s.t(u,r)};return Wi(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=n,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],s=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const r=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,r);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!r(n,e)||s&&!r(i,e)))}loadNamespaces(e,t){const n=Hi();return this.options.ns?(Wi(e)&&(e=[e]),e.forEach((e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)})),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=Hi();Wi(e)&&(e=[e]);const s=this.options.preload||[],i=e.filter((e=>s.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e)));return i.length?(this.options.preload=s.concat(i),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services&&this.services.languageUtils||new mr($r());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new Tr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Or;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},i=new Tr(s);void 0===e.debug&&void 0===e.prefix||(i.logger=i.logger.clone(e));return["store","services","language"].forEach((e=>{i[e]=this[e]})),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n&&(i.store=new cr(this.store.data,s),i.services.resourceStore=i.store),i.translator=new hr(i.services,s),i.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];i.emit(e,...n)})),i.init(s,t),i.translator.options=s,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ar=Tr.createInstance();Ar.createInstance=Tr.createInstance;Ar.createInstance,Ar.dir,Ar.init,Ar.loadResources,Ar.reloadResources,Ar.use,Ar.changeLanguage,Ar.getFixedT,Ar.t,Ar.exists,Ar.setDefaultNamespace,Ar.hasLoadedNamespace,Ar.loadNamespaces,Ar.loadLanguages;const Dr=JSON.parse('{"common":{"goToMainPageBtn":"Перейти на главную"},"pageTitles":{"delivery":"Доставки","purchases":"Покупки","favorites":"Избранное","profile":"Профиль","basket":"Корзина","paymentMethods":"Способы оплаты","wbWallet":"WB Кошелёк","wbDiscount":"WB скидка","balance":"Баланс","communications":"Обращения","feedbackAndQuestions":"Отзывы и вопросы"},"basket":{"emptyBasket":{"title":"В корзине пока пусто","description":"Загляните на главную, чтобы выбрать товары или&nbsp;найдите нужное в поиске","goToMainPageBtn":"$t(common.goToMainPageBtn)"}},"productCard":{"premiumSaleClub":"-{{premiumSale}}% с клубом"},"favorites":{"favoriteBrands":{"addToFavorites":"Добавить в любимые бренды","removeFromFavorites":"Удалить из любимых брендов"}}}'),Er=JSON.parse('{"common":{"goToMainPageBtn":"Go to the main page"},"pageTitles":{"delivery":"Deliveries","purchases":"Purchases","favorites":"Favorites","profile":"Profile","basket":"Basket","paymentMethods":"Payment Methods","wbWallet":"WB Wallet","wbDiscount":"WB Discount","balance":"Balance","communications":"Communications","feedbackAndQuestions":"Feedback and Questions"},"basket":{"emptyBasket":{"title":"The basket is still empty","description":"Take a look at the main page to select products or find what you need in the search","goToMainPageBtn":"$t(common.goToMainPageBtn)"}},"favorites":{"favoriteBrands":{"addToFavorites":"Add to favorite brands","removeFromFavorites":"Remove from favorite brands"}}}'),xr=JSON.parse('{"common":{"goToMainPageBtn":"გადადით მთავარ გვერდზე"},"pageTitles":{"paymentMethods":"გადახდის მეთოდები","purchases":"შესყიდვები","favorites":"არჩეულები","profile":"პროფილი","balance":"ბალანსი","feedbackAndQuestions":"უკუკავშირი -და -კითხვები","delivery":"მიწოდებები","basket":"კალათა"}}'),Br="wb__lang";const jr=new(function(){function e(){this.currLang=localStorage.getItem(Br)||"ru"}return e.prototype.init=async function(){await Ar.init({lng:this.currLang,fallbackLng:"ru",resources:{en:{translation:Er},ru:{translation:Dr},ka:{translation:xr}}}),wb.i18n=Ar,localStorage.setItem(Br,this.currLang),$.views.helpers({t:function(e,t){return Ar.t(e,t)}})},e}());n(88798),n(32767);function Lr(e){return Lr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lr(e)}wb.xnm=function(){const e=e=>e?g.XX:g.Aj,t=[7031,7032,3382,3392,8332,5020,8411,7018,8251,6217,7019,6296,6304,6302,5783,5519,5948,5814,5784,5789,5813,5553,7015,5779,5780,5292,5293,5294,5297,5478,8588,5132,5129,5150,5121,5126,8590,5361,5127,5128,5158,5193,5194,5159,5019,5186,5021,5023,5119,5122,5125,5156,5065,5050,5084,5025,5037,5026,5086,5040,5043,5045,5046,5052,5064,5066,5068,5070,5073,5076,5085,5087,5088,5091,8589,5051,5090,7014,5117,5118,7025,7733,5069,5071,5120,4256,3489,5075,5080,5197,5534,5482,5288,53,5289,5039,2909,5273,2603,2604,2606,2611,3490,2610,2612,7710,2616,2609,2613,2618,5360,2602,2605,5630,7540,5074,5067,2617,2607,7571,6998,5116,5042,5668,2608,5083,2614,5082,5047,8145,5044,7016,5328,7731,8256,5332,5925,5340,5355,7666,7655,5576,7106,5593,5356,7020,5812,400,5049,7755,8110,7012,5072,5048,3517,2615,5325,6303,5153,5359,7770,8111,6315,8248,5326,6246,880,5324,5513,5624,5295,8243,2596,5296,5327,1354,7017,5354,5406,6062,6976,7013,7438,5497,5353,5041,5298,7732,5880,6412,5484,5357,3415,3452,3451,3410,6975,6986,6939,6972,6980,6990,7030,6981,6989,6974,6977,6983,6979,6984,6978,6987,6982,6973,6985,5089,5772];let n=[];const s=864e5,i="adultSubjectIds";async function r(){if(n.length>0)return Promise.resolve();const e=JSON.parse(localStorage.getItem(i));if((null==e?void 0:e.expired)>Date.now()-s)return n=e.info,Promise.resolve();try{const e="adult-subjects.json",t=await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(e,5e3);return t&&0!==t.length?(n=t,null===localStorage||void 0===localStorage||localStorage.putObject(i,{info:t,expired:Date.now()+s}),Promise.resolve()):(console.warn("Getting adult subjects has failed"),Promise.reject())}catch(e){return console.warn("Getting adult subjects has failed"),console.error(e.message),Promise.resolve()}}let o={};const a=36e5,l="no-return-subjects.json";function c(e,s){const i=n.length>0?n:t;return-1!==i.indexOf(e)||!!s&&-1!==i.indexOf(s)}let u=function(e){let t=this;this.width=this.weight=this.length=this.depth=0,null==e||e.forEach((function(e,n){"Вес с упаковкой (кг)"===e.name&&(t.weight=parseFloat(e.value)||0),"Ширина упаковки (мм)"===e.name&&(t.width=parseInt(e.value,10)||0),"Длина упаковки (мм)"===e.name&&(t.length=parseInt(e.value,10)||0),"Высота упаковки (мм)"===e.name&&(t.depth=parseInt(e.value,10)||0)})),this.v=this.width/1e3*(this.length/1e3)*(this.depth/1e3),this.sum3d=this.width+this.length+this.depth};const d=(e,t)=>{if(e){if("BYN"!==t&&"byn"!==t)return e.toString().slice(0,-2);{const t=e.toString();return(t.slice(0,-2)||"0")+"."+t.slice(-2)}}return e};function h(e,t){if(t&&e.pics>0)return!0;if(!e.price)return!1;if(0===e.pics||!e.sizes||0===e.sizes.length)return!1;for(let t=0;t<e.sizes.length;t++){const n=e.sizes[t];if(n.stocks&&n.stocks.length>0)return!0}return!1}function p(e){return!!(e.sizes&&e.sizes.length>0)}function m(e,t){return!t||!e.isAdult}async function f(t,n,s){const i=`${e(s)}?${t}&nm=${n.join(";")}`;return WbSpaModel.prototype.$httpClient.fetchBasicJSON(i,{xhrFields:{withCredentials:!1},processData:!1,dataType:"json"},{addAuthHeader:!0,addCatalogCaptcha:!0,retry:2,nullOnError:!0})}function y(e,t=!1,n=null){return new Promise(((s,i)=>{Promise.all([wb.user.getXinfo(),r()]).then((([r])=>{var o,a;~~n&&(r=WbSpaModel.prototype.$user._changeXDest(r,n));const l=[];let u=0,d=0,h=[];const p=new URLSearchParams;WbSpaModel.prototype.$analitic.appendSplitInfoV2(p,"catalog"),p.size>0&&(r+=`&${p}`),e.forEach((e=>{100===u&&(l[d]=f(r,h,t),d+=1,u=0,h=[]),h[u++]=e})),h.length>0&&(l[d]=f(r,h,t));const m={},g=new URLSearchParams(r),y=null===(o=g.get("curr"))||void 0===o?void 0:o.toUpperCase(),w=+g.get("spp"),S=+g.get("dest"),_=!(wb.global.settings.switches.showLogisticsInPrice||(null===(a=wb.global.settings.variables.destToShowLogistics)||void 0===a?void 0:a.indexOf(S))>=0)||"ru"!==WbSpaModel.prototype.$user.getLocale();Promise.all(l).then((e=>{e.forEach((e=>{var t;0===(t=e).state&&t.data.products&&t.data.products.forEach((e=>{var t;e.name=(null===(t=e.name)||void 0===t?void 0:t.length)>0?e.name:"Название не указано",e.isAdult=e.isAdult||c(e.subjectId,e.subjectParentId),e.currency=y,e.spp=w,e.dest=S,b(e),v(e,_),m[e.id]=e}))})),s(m)})).catch((e=>{console.log(e.statusText+" "+e.responseText),i()}))}))}))}function v(e,t=!0){var n;if(!e||!e.sizes)return;let s={},i=!1;const r=e.premiumSale>0&&((null===(n=WbSpaModel.prototype.$user.getUserGradeFromCache())||void 0===n?void 0:n.isPremium)||(null==e?void 0:e.showPremium));r||(e.premiumSale=0),e.sizes.forEach((n=>{if(!n.price)return;let o=t?n.price.total:n.price.product;n.price.priceForBasket=o,r&&(o-=100*wb.priceHelper.calculateDiscount(n.price.product/100,e.premiumSale,e.currency));const a=~~(100*(n.price.basic-o)/n.price.basic);n.price.sale=a>0?a:0,n.price.priceToShow=o,(n.price.basic<o||n.price.basic===o&&n.sale>0||n.price.sale<=wb.global.settings.variables.pricesDeltaToShowSale)&&(n.price.basic=o,n.price.sale=0),s.priceToShow||(s=n.price),s.priceToShow!==n.price.priceToShow&&(i=!0,s.priceToShow>n.price.priceToShow&&(s=n.price))})),e.price=s,i&&(e.diffPrice=!0)}function b(e,t,n){var s,i,r,o,a;return e?(t||(t=null!==(a=null!==(r=null===(i=null===(s=e.sizes)||void 0===s?void 0:s.filter((e=>e.payload)))||void 0===i?void 0:i[0])&&void 0!==r?r:null===(o=e.sizes)||void 0===o?void 0:o[0])&&void 0!==a?a:e),t&&t.saleConditions?(1&t.saleConditions&&(e.isUnrefusable=!0),2&t.saleConditions&&(e[1===n?"needPrepay":"isPrepaid"]=!0),4&t.saleConditions&&(e.isUnreturnable=!0),8&t.saleConditions&&(e.isVerificationReturn=!0),128&t.saleConditions&&(e.isWbInstCompliant=!0),1048576&t.saleConditions&&(e.wltSaleBan=!0),e.premiumSale=t.saleConditions>>22&31,e):e):e}function w(){try{return localStorage.getObject("product_colors")||{}}catch(e){return console.warn("[ProductColorsCache]: failed to read from local storage",e),{}}}function S(e){var t;if(!wb.global.settings.switches.enableManualGluingOnProduct)return null;let n={isOnlyColor:!1,value:""},s=null==e?void 0:e.map((e=>{var t;if(e.is_variable){let n=/^[\d.,]+$/,s=null===(t=e.variable_values)||void 0===t?void 0:t.filter((e=>{if(!n.test(e))return e})).join(", ");if(!(4!==e.charc_type&&5!==e.charc_type||n.test(e.value)))return{value:e.value,name:e.name};if(s)return{value:s,name:e.name}}})).filter((e=>e)).splice(0,3);return 1==(null==s?void 0:s.length)&&"Цвет"==(null===(t=s[0])||void 0===t?void 0:t.name)?(n.isOnlyColor=!0,n.value=null==s?void 0:s.map((e=>e.value)).toString(),n):(null==s?void 0:s.length)>=1?(n.isOnlyColor=!1,n.value=null==s?void 0:s.map((e=>e.value)).join(" • "),n):null}function _(e,t=!1,n=!1){var s,i,r,o,a,l,u;const h=!(wb.global.settings.switches.showLogisticsInPrice||(null===(s=wb.global.settings.variables.destToShowLogistics)||void 0===s?void 0:s.indexOf(e.dest))>=0)||"ru"!==WbSpaModel.prototype.$user.getLocale();v(e,h);const p=null!==(o=null===(r=null===(i=e.sizes)||void 0===i?void 0:i.filter((e=>e.payload)))||void 0===r?void 0:r[0])&&void 0!==o?o:null===(a=e.sizes)||void 0===a?void 0:a[0];b(e,p),v(e,h);const m=null!==(l=e.price)&&void 0!==l?l:{},g=20624===e.brandId||30624===e.siteBrandId;let f={rcId:e.rcId,nmId:e.id,cod1S:e.id,imtId:e.root,name:e.name,pics:e.pics,subjectId:e.subjectId,subjectParentId:e.subjectParentId,kindId:e.kindId,brand:e.brand,brandId:e.siteBrandId,brandCod:e.brandId,price:d(m.basic,e.currency),salePrice:d(m.priceToShow,e.currency),productSalePrice:d(m.product,e.currency),priceForBasket:d(m.priceForBasket,e.currency),logisticsCost:m.logistics,colorCodes:e.colors.map((e=>e.id)),sale:m.sale,priceDiff:e.diffPrice,star:e.rating,reviewRating:e.reviewRating,feedbacks:e.feedbacks,adult:e.isAdult||c(e.subjectId,e.subjectParentId)||!1,isDigitalGood:e.isDigital||!1,sizes:C(e.sizes,t,n,e.currency),panelPromoId:e.panelPromoId,promoTxt:e.promoTextCat,promoTextCard:e.promoTextCard,color:e.colors.map((e=>e.name)).join(","),woSize:1===(null===(u=e.sizes)||void 0===u?void 0:u.length)&&""===p.name,canQuickOrder:!e.isDigital,soldOut:e.soldOut||!1,deliveryHours:(e.time1||0)+(e.time2||0),fastestStore:e.wh,isPreorder:5772===e.brandId&&wb.settings.preOrderList.includes(e.id),currency:e.currency,spp:e.spp,dest:e.dest,saleConditions:null==p?void 0:p.saleConditions,isUnrefusable:e.isUnrefusable,isPrepaid:e.isPrepaid,isUnreturnable:e.isUnreturnable,isVerificationReturn:e.isVerificationReturn,dist:e.dist,time1:e.time1,time2:e.time2,totalQuantity:e.totalQuantity,payloadV2:null==p?void 0:p.payload,optionId:null==p?void 0:p.optionId,whDtype:null==p?void 0:p.dtype,log:e.log,logs:e.logs,supplierId:e.supplierId,supplier:$.views.helpers.supplierFineName(e.supplier,e.brandId),supplierRating:e.supplierRating,sort:e.sort||0,viewFlags:e.viewFlags,shouldShowOriginalMark:!g&&!!(8&e.viewFlags),paymentDiscountAmount:wb.priceHelper.calcWalletDiscount(m.priceToShow/100,e.currency,null==p?void 0:p.saleConditions),catalogPrice:m,supplierFlags:e.supplierFlags,normQuery:e.normQuery,rs:e.rs,isAdv:e.isAdv,extraAnaliticsCode:e.extraAnaliticsCode,preset_type:e.preset_type,premiumSale:e.premiumSale,isPremiumAccent:wb.global.settings.switches.enablePremiumSellerAccent&&!!(8&e.supplierFlags)};return f.priceWithCouponAndDiscount=f.salePrice,f.productPriceWithCouponAndDiscount=f.productSalePrice,k(f.panelPromoId)&&(f.showRedPrice=!0),function(e){if(!WbSpaModel.prototype.$auth.isAuth||!e.totalQuantity||e.totalQuantity>1e3)return;WbSpaModel.prototype.$promotionsHelper.isThermometerNeeded(e.panelPromoId)&&(e.showThermometer=!0)}(f),f}const C=(e,t=!1,n=!1,s=null)=>{if(null==e)return;e.sort((function(e,t){return e.rank-t.rank}));let i=e;return t&&(i=e.filter((e=>{var t;return(null===(t=e.stocks)||void 0===t?void 0:t.length)>0}))),i.map((e=>{var t,i;const r={ch:e.optionId,s:1,nm:e.origName,rusNm:e.name,stocks:null!==(t=e.stocks)&&void 0!==t?t:[{wh:e.wh,dtype:e.dtype,qty:1}],unavailable:(null===(i=e.stocks)||void 0===i?void 0:i.length)<=0,payloadV2:e.payload,saleConditions:e.saleConditions,whDtype:e.dtype,deliveryHours:(e.time1||0)+(e.time2||0)};return n&&e.price&&(r.price=d(e.price.basic,e.currency||s),r.salePrice=d(e.price.priceToShow,e.currency||s),r.priceForBasket=d(e.price.priceForBasket,e.currency||s),r.catalogPrice=e.price,r.returnCost=e.price.return,r.logisticsCost=e.price.logistics),r}))};function k(e){return!!WbSpaModel.prototype.$promotionsHelper.isRedPriceNeeded(e)}return{getGoodsForRecommendAndCatalog:function(e,t,n,s){return new Promise(((i,r)=>{const o=[];if(!e)return o;const a=!t;y(e,a).then((r=>{e.forEach((e=>{if(r[e]){const i=r[e];if(a){if(i&&p(i)&&m(i,n)){const e=_(i,!1,!0);e.soldOut=!i.sizes||0===i.sizes.length,o.push(e)}}else if(i&&h(i,t)&&m(i,n)){const e=_(i,!s,!0);e.soldOut=!h(i,!1),o.push(e)}}})),i(o)})).catch((()=>{e.forEach((e=>{o.push({nmId:e,cod1S:e,isFail:!0})})),i(o)}))}))},getXnmProducts:y,getInfoForWbaStat:async function(e,t){try{const n=e.map((e=>e.nmId)),s=t?await t:await y(n);return e.reduce(((e,t)=>{var n,i;const{nmId:r,size:o}=t;let a=null;if(null==s?void 0:s.hasOwnProperty(t.nmId)){const e=s[r],t=null===(i=null===(n=e.sizes.find((e=>e.optionId===o)))||void 0===n?void 0:n.price)||void 0===i?void 0:i.total,l=o?e.sizes.find((e=>e.optionId===o)):C(e.sizes).filter((e=>{var t;return(null===(t=e.stocks)||void 0===t?void 0:t.length)>0}))[0];a={salePrice:t/100,stores:null==l?void 0:l.stocks}}return e.set(r,a),e}),new Map)}catch(e){return console.error(e),new Map}},getCatalogCards:function(e,t,n,s=!1){return new Promise(((i,r)=>{const o={};e.forEach((e=>{o[e]={}}));const a=!n;y(e,a).then((e=>{Object.keys(e).forEach((i=>{let r=e[i];const l=o[r.id];function c(e,t){return e.rank>t.rank?1:e.rank===t.rank?0:e.rank<t.rank?-1:void 0}if(a)l&&p(r)&&m(r,t)&&(o[r.id]=r,o[r.id].sizes.sort(c),r.soldOut=!1);else if(l&&h(r,n)&&m(r,t)){if(o[r.id]=r,r.sizes&&r.sizes.length>0){const e=s?r.sizes:r.sizes.filter((e=>e.stocks&&e.stocks.length>0));e.sort(c),o[r.id].sizes=e}r.soldOut=!h(r,!1)}}))})).then((()=>i(o)),(()=>r()))}))},convertXProductToSpaCatalogProduct:_,getProductNamesMap:w,getProductColorsByNmIdsAsync:function(e){return new Promise(((t,n)=>{let s=w(),i={},r=[];if(e.forEach((e=>{let t=s[e];t&&t.dims?i[e]=t:r.push(e)})),!r.length)return void t(i);let o=r.map((e=>fetch(wb.helpers.url.urlProductStatic(e)).then((e=>e.json())).then((e=>Promise.resolve({options:e.options,nmId:e.nm_id,color:e.nm_colors_names,name:e.imt_name,dims:new u(e.options),gluedOptions:S(e.options)}))).catch((()=>Promise.resolve({nmId:e,color:""})))));return Promise.all(o).then((e=>{!function(e,t){try{const n=255;t=null!=t?t:w(),e.forEach((e=>t[e.nmId]={nmId:e.nmId,c:e.color,n:e.name,dims:e.dims,gluedOptions:e.gluedOptions,ts:Date.now()}));let s=Object.values(t);return s.length>n&&(s.sort(((e,t)=>t.ts-e.ts)),s.splice(n),t=s.reduce(((e,t)=>(e[t.nmId]=t,e)),{})),localStorage.putObject("product_colors",t),t}catch(e){return console.warn("[ProductColorsCache]: failed to update colors map",e),{}}}(e,s),t(s)}))}))},fillOtherSellersProducts:function(e){return new Promise((t=>{y(e.map((e=>e.nmId))).then((n=>{e.forEach((e=>{const t=n[e.nmId];null!=t&&h(t)&&(Object.assign(e,_(t,!0)),e.stocks=function(e){return Object.keys(e.sizes.reduce(((e,t)=>{var n;return(null===(n=t.stocks)||void 0===n?void 0:n.length)>0&&t.stocks.forEach((t=>e[t.wh]=!0)),e}),{}))}(t),e.isAvailable=!0)})),t()}))}))},getMiniProductCard:async function(e){if(isNaN(e))throw new TypeError("nmId at getMiniProductCard is not a number");const t=await y([e]);return t[e]?_(t[e],!1,!0):null},proceedPrices:v,waitNoReturnSubjectsInitialized:async function(){if(Object.keys(o).length>0)return Promise.resolve();const e=JSON.parse(localStorage.getItem(l));if((null==e?void 0:e.expired)>Date.now()-a)return o=e.info,Promise.resolve();try{const e="no-return-subjects.json",t=await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(e,5e3);return t&&0!==t.length?(o=t,null===localStorage||void 0===localStorage||localStorage.putObject(l,{info:t,expired:Date.now()+a}),Promise.resolve()):(console.warn("Getting subjects has failed"),Promise.reject())}catch(e){return console.warn("Getting adult subjects has failed"),console.error(e.message),Promise.resolve()}},setNoRefund:function(e){const t=o[e];if(!t)return!1;let n;switch(WbSpaModel.prototype.$user.getLocale()){case"by":n=2;break;case"kz":n=3;break;case"kg":n=4;break;case"am":n=5;break;case"uz":n=13;break;default:n=1}return!!(t&1<<n-1)},expandSaleConditions:b,isRedPrice:k,fillFeedbacksPayment:async function(e){if(!wb.global.settings.switches.enableFeedbacksForPoints||!(null==e?void 0:e.length))return null;await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("feedbacksPaymentService"),await WbSpaModel.prototype.$services.feedbacksPaymentService.fillFeedbacksPayments(e)},fillFeedbacksPaymentByUser:async function(e){if(!wb.global.settings.switches.enableFeedbacksForPoints||!(null==e?void 0:e.length))return null;await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("feedbacksPaymentService"),await WbSpaModel.prototype.$services.feedbacksPaymentService.fillFeedbacksPaymentsByUser(e)},getFeedbacksPaymentByUser:async function(){return wb.global.settings.switches.enableFeedbacksForPoints?(await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("feedbacksPaymentService"),await WbSpaModel.prototype.$services.feedbacksPaymentService.getFeedbacksPaymentByUser()):null},convertOptionsToGluedOptions:S,isAdvert:function(e){return e&&!!(64&e.viewFlags)}}}();var Nr=n(63662);function Rr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Rr=function(){return!!e})()}function Fr(e){var t="function"==typeof Map?new Map:void 0;return Fr=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(Rr())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,t);var i=new(e.bind.apply(e,s));return n&&(0,Nr.A)(i,n.prototype),i}(e,arguments,Lr(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,Nr.A)(n,e)},Fr(e)}let Ur=function(e){function t(n){var s;const{message:i,payload:r}=t.parsePayload(n);return(s=e.call(this,i)||this).isCustomError=!0,s.payload=r,s}return(0,_s.A)(t,e),t.parsePayload=function(e){var t;return"string"==typeof e?{message:e,payload:null}:{message:null!==(t=null==e?void 0:e.message)&&void 0!==t?t:"Unknow error",payload:null==e?void 0:e.payload}},t}(Fr(Error)),Wr=function(e){function t({msg:t,jwtDrop:n}={}){var s;return(s=e.call(this,t)||this).isUnauthorize=!0,s.jwtDrop=n,s}return(0,_s.A)(t,e),t}(Ur),Hr=function(e){function t(t=""){var n;return(n=e.call(this,t)||this).isCancelled=!0,n}return(0,_s.A)(t,e),t}(Ur),zr=function(e){function t(t=""){var n;return(n=e.call(this,t)||this).isNotFound=!0,n}return(0,_s.A)(t,e),t}(Ur);Object.defineProperties(window,{KnownServerError:{value:Ur},UnauthorizeError:{value:Wr},CancelledRequestError:{value:Hr},NotFoundError:{value:zr},NetworkError:{value:function(){this.isNetworkError=!0}}});n(41325);let qr=null;function Vr(e){return()=>{e.style.top=Math.max(document.documentElement.clientHeight/2+window.scrollY-e.clientHeight/2,window.scrollY)+"px",e.style.left=Math.max(document.documentElement.clientWidth/2-e.clientWidth/2,0)+"px"}}function Gr(e){const t=document.createElement("div");return t.classList.addMany(e),t}function Jr(e,t){const n=document.createElement("a");n.href="#",t.push("close"),n.classList.addMany(t),e.appendChild(n)}function Kr(e,t,n,s,i,r){const o=document.createElement("div");if(null!=s&&Array.isArray(s)&&o.classList.addMany(s),n)o.innerHTML=t;else if(r){let t=document.querySelector(r),n=document.createElement("span");n.id="popup_pc",t.parentElement.insertBefore(n,t),e.placeholder=document.getElementById(n.id),o.appendChild(t)}else o.textContent=t;null!=i&&Object.entries(i).forEach((([e,t])=>o.setAttribute(e,t))),e.appendChild(o)}function Qr(e,t,n){const s=document.createElement("button");s.classList.addMany(n||[]),s.textContent=t,e.appendChild(s)}function Xr(e,t,n,s){var i,r,o;let a;const l=e=>{var n;null==e||e.preventDefault(),(null===(n=s.onBeforeHide)||void 0===n?void 0:n.call(s))||(t.classList.remove("shown"),!s.keepOpenOnTransition&&window.removeEventListener("spaTransition",a),Promise.resolve().then((()=>{var t;null===(t=s.onHide)||void 0===t||t.call(s,e)})))};a=()=>{l()},!s.keepOpenOnTransition&&window.addEventListener("spaTransition",a);const c=e=>{27==e.keyCode&&(l(e),window.removeEventListener("keydown",c,!0))};(s.modal||null==s.modal)&&(window.addEventListener("keydown",c,!0),null==n||n.addEventListener("click",l)),(null===(i=s.closeSelector)||void 0===i?void 0:i.length)>0&&t.addEventListener("click",this.$helper.delegator(s.closeSelector,l)),null!=qr&&(qr.close(),qr=null);const u=function(e){if(!e)return 0;const t=document.querySelectorAll(".j-custom-overlay");let n=0;return t.forEach((e=>{n=Math.max(n,e.style.zIndex)})),n}(n);n&&(n.style.zIndex=u+300),t.style.zIndex=u+300+1,e.appendChild(t),n&&e.appendChild(n),null===(r=s.onBeforeShow)||void 0===r||r.call(s,t),document.body.insertBefore(e,document.body.firstChild),null===(o=s.onShow)||void 0===o||o.call(s,t);const d={popup:t,overlay:n,close:e=>{var n;return null===(n=s.onHide)||void 0===n?void 0:n.call(s,t,e)},centered:s.centeredFunction};return s.onlyOne&&(qr=d),d}function Yr(e,t,n,s=!0,i=!1){e instanceof Error?e=e.isCustomError&&!e.isCancelled&&e.message?e.message:this.$localziation.serverError:e||(e=this.$localziation.serverError);const r=document.createDocumentFragment();let o=["popup","popup-alert","shown"];t&&(Array.isArray(t)?o=o.concat(t):o.push(t));const a=Gr(o);r.appendChild(a),i&&Jr(a,["popup__close"]),Kr(a,e,!0),null!==n&&Qr(a,n||this.$localziation.close,["popup__btn-main","popup-alert__close"]);const l=document.createElement("div");l.classList.addMany(["overlay","initially-hidden","j-custom-overlay"]);const c=Vr(a);window.addEventListener("resize",c),Xr.call(this,r,a,l,{onlyOne:!0,closeSelector:".popup-alert__close, .popup__close",modal:s,onShow:function(){a.style.display="block",c()},onHide:function(){window.removeEventListener("resize",c),a.remove(),l.remove()}})}function Zr(e,t={}){const n={msg:e,lockScroll:!0,modal:!1,showCloseBtn:!0,useHtml:!0,contentClasses:["content"],popupClassesList:["shown","tooltip","tooltip--mobile",...(null==t?void 0:t.classes)||[]],useCenteredFunction:!0,onShow:e=>e.classList.remove("popup")};return wb.popup.showCustomPopup(n)}function eo(e,t,n,s){const i=document.createDocumentFragment(),r=Gr(t);Jr(r,["j-close"]),Kr(r,e,!0,["content","quick-order-popup-content","j-sizepicker-content"],null);const o=document.createElement("div");o.classList.addMany(["overlay","initially-hidden","j-custom-overlay"]),r.id="size-picker-popup",r.style.opacity="0";const a=Vr(r);window.addEventListener("resize",a),Xr.call(this,i,r,o,{closeSelector:".j-close",onHide:function(){window.removeEventListener("resize",a),r.remove(),o.remove(),null==s||s()},onShow:function(){r.style.display="block",a(),r.style.opacity="1",null==n||n(r)}})}function to(e){const t=this.$helper.deepMerge({},{overlay:!0,showCross:!0,useHtml:!1,popupClassesList:[],contentClasses:[],overlayClasses:[],contentAttributeDictionary:{},msg:"",closeClass:["j-close","popup__close"],modal:!0,closeSelector:".j-close",useCenteredFunction:!1,lockScroll:!1,lockScrollMobile:!1,onlyOne:!1},e),n=document.createDocumentFragment(),s=Gr(["popup"].concat(t.popupClassesList));t.showCross&&Jr(s,t.closeClass),Kr(s,t.msg,t.useHtml,t.contentClasses,t.contentAttributeDictionary,t.srcElem),t.showCloseBtn&&function(e,t){const n=document.createElement("button");n.innerText="Закрыть",!t.length&&t.push("close"),n.classList.addMany(t),e.appendChild(n)}(s,t.closeClass);const i=t.overlay?document.createElement("div"):null;if(i){const e=["overlay","initially-hidden","j-custom-overlay"].concat(t.overlayClasses);i.classList.addMany(e)}let r;return t.useCenteredFunction&&(r=Vr(s),window.addEventListener("resize",r)),Xr.call(this,n,s,i,{onBeforeHide:()=>{var e;return null===(e=t.onBeforeHide)||void 0===e?void 0:e.call(t)},onHide:function(e,n){var o,a,l,c,u;(null===(o=t.onBeforeHide)||void 0===o?void 0:o.call(t))||(!t.lockScroll||(null==n?void 0:n.keepLockScroll)||t.keepLockScroll||(document.body.classList.remove("body--overflow"),document.body.style.paddingRight=""),!t.lockScrollMobile||(null==n?void 0:n.keepLockScroll)||t.keepLockScroll||document.body.classList.remove("body--overflow-mobile"),t.useCenteredFunction&&window.removeEventListener("resize",r),t.srcElem&&(null===(l=null===(a=s.placeholder)||void 0===a?void 0:a.parentElement)||void 0===l||l.insertBefore(document.querySelector(t.srcElem),s.placeholder),null===(c=s.placeholder)||void 0===c||c.remove()),null===(u=t.onHide)||void 0===u||u.call(t,s,e),s.remove(),null==i||i.remove(),document.querySelector("body").classList.remove("no-scroll"))},onShow:()=>{var e;if(document.activeElement.blur(),t.lockScroll&&!document.body.classList.contains("body--overflow")){const e=Math.abs(window.innerWidth-document.documentElement.clientWidth);document.body.classList.add("body--overflow"),document.body.style.paddingRight=`${e}px`}t.lockScrollMobile&&!document.body.classList.contains("body--overflow-mobile")&&document.body.classList.add("body--overflow-mobile");const n=()=>{s.style.opacity=1,t.useCenteredFunction&&r()},i=this.$helper.nextTick().then((()=>(n(),Promise.resolve())));Object.defineProperty(s,"contentEl",{get:()=>s.querySelector(".popup__content")}),t.onShowAsync?t.onShowAsync(s).then(n):null===(e=t.onShow)||void 0===e||e.call(t,s,i)},onBeforeShow:function(){var e;s.style.opacity=0,s.style.display="block",null===(e=t.onBeforeShow)||void 0===e||e.call(t,s)},modal:t.modal,closeSelector:t.closeSelector,centeredFunction:r,onlyOne:t.onlyOne,keepOpenOnTransition:t.keepOpenOnTransition})}function no(e,t){let n;const s=this.$helper,i=wb.popup.showCustomPopup({useHtml:!0,popupClassesList:["popup-video","shown"],contentClasses:["content"],useCenteredFunction:!0,msg:$.templates('<h2 class="popup__header">{{>title}}</h2><div class="video"><video id="videoPlayer" class="video-js vjs-default-skin vjs-big-play-centered vjs-waiting" width="855" controls autoplay preload></video></div>')({title:t}),onBeforeShow:e=>{e.style.opacity=0,e.style.display="block"},onShow:t=>{n=videojs("videoPlayer",{html5:{nativeAudioTracks:!1,nativeVideoTracks:!1,hls:{overrideNative:!0}}}),n.ready((function(){this.src({src:e,type:"application/x-mpegURL",withCredentials:!0})})),s.nextTick().then((()=>{t.style.opacity=1,i.centered()}))},onHide:()=>{n.isDisposed()||(n.isInPictureInPicture()&&n.exitPictureInPicture(),n.dispose())}})}function so(e,t,n,s){let i;const r=this.$helper,o=wb.popup.showCustomPopup({useHtml:!0,popupClassesList:["i-popup-video-review","j-popup-video-review","shown"],contentClasses:["content"],useCenteredFunction:!0,msg:t,onBeforeShow:e=>{e.style.opacity=0,e.style.display="block"},onShow:t=>{i=videojs("videoPlayer",{html5:{nativeAudioTracks:!1,nativeVideoTracks:!1,hls:{overrideNative:!0}}}),i.ready((function(){this.src({src:e,type:"application/x-mpegURL",withCredentials:!0})})),r.nextTick().then((()=>{t.style.opacity=1,o.centered()})),null==n||n(t)},onHide:()=>{i.isDisposed()||(i.isInPictureInPicture()&&i.exitPictureInPicture(),i.dispose(),null==s||s())}})}function io(e,t={}){return new Promise((n=>{var s,i,r;document.activeElement.blur();const o=document.createDocumentFragment();let a=["popup","popup-confirm","shown"];t.classList&&(a=a.concat(t.classList));let l=["popup__btn-main","j-yes"],c=["popup__btn-base","j-no"];t.yesBtnClassList&&(l=t.yesBtnClassList),t.noBtnClassList&&(c=t.noBtnClassList);const u=Gr(a);u.style.display="block",t.contentClasses=t.contentClasses||[],t.contentClasses.push("popup__msg"),Kr(u,e,!0,t.contentClasses);let d=document.createElement("div");d.classList.add("popup__btn","btn-block"),u.appendChild(d);const h=[];if((null===(s=t.showYesBtn)||void 0===s||s)&&h.push((()=>Qr(d,t.yes||$.localize("Да"),l))),(null===(i=t.showNoBtn)||void 0===i||i)&&h.push((()=>Qr(d,t.no||$.localize("Нет"),c))),t.inverseBtns&&h.reverse(),h.forEach((e=>e())),t.showCross&&Jr(u,["popup__close"]),t.lockScroll&&!document.body.classList.contains("body--overflow")){const e=Math.abs(window.innerWidth-document.documentElement.clientWidth);document.body.classList.add("body--overflow"),document.body.style.paddingRight=`${e}px`}const p=document.createElement("div");p.classList.addMany(["overlay","initially-hidden","j-custom-overlay"]);const m=Xr.call(this,o,u,p,{onHide:function(){u.remove(),p.remove(),n(!1),t.lockScroll&&(document.body.classList.remove("body--overflow"),document.body.style.paddingRight="")},onShow:function(){var e;const s=u.querySelector(".popup__back");Vr(u)(),u.querySelector(l.map((e=>"."+e)).join("")).addEventListener("click",(e=>{n(!0),m.close()})),null===(e=u.querySelector(c.map((e=>"."+e)).join("")))||void 0===e||e.addEventListener("click",(e=>{n(!1),m.close()})),s&&s.addEventListener("click",(()=>{t.backBtnCallback(),m.close()}))},modal:null!==(r=t.modal)&&void 0!==r&&r,closeSelector:t.showCross?".popup__close":null})}))}function ro(e,{width:t=600,height:n=500}={}){const s=[`top=${Math.floor((window.screenY||window.screenTop||0)+(window.outerHeight-n)/2)||0}`,`left=${Math.floor((window.screenX||window.screenLeft||0)+(window.outerWidth-t)/2)||0}`,`width=${t}`,`height=${n}`,"status=0","toolbar=0"];return null!=window.open(e,"",s.join(","))}let oo=function(e){function t(){return e.apply(this,arguments)||this}(0,_s.A)(t,e);var n=t.prototype;return n.renderModalError=function(){return Yr.apply(this,arguments)},n.renderModalAdaptive=function(){return Zr.apply(this,arguments)},n.showCustomPopup=function(){return to.apply(this,arguments)},n.confirm=function(){return io.apply(this,arguments)},n.videoPlayer=function(){return no.apply(this,arguments)},n.videoReviewPlayer=function(){return so.apply(this,arguments)},n.showSizePickerPopup=function(){return eo.apply(this,arguments)},n.browserPopup=function(){return ro.apply(this,arguments)},n.showFeedbackError=function(e){return $.views.loadTemplateAsync("popupErrorUnbuy").then((t=>{wb.popup.showCustomPopup({useHtml:!0,msg:t.render({errorMessage:e.isCancelled?null:e.message}),popupClassesList:["popup-error-unbuy","shown"],contentClasses:["popup__content"],useCenteredFunction:!0,modal:!0})}))},t}(WbSpaModel);wb.popup=new oo;const ao=new RegExp(["www.wildberries.ru","www.wildberries.by","www.wildberries.kz","www.wildberries.kg","www.wildberries.am","www.wildberries.uz","localhost","webapp-*.wbx-site.k8s.dev-el","webapp-*.wbx-site.k8s.stage-xc","webapp-*.wbx-site.k8s.prod-el","webapp-*.wbx-site.k8s.prod-xc","kg.wildberries.ru","uz.wildberries.ru"].map((e=>e.replace(/\./g,"\\.").replace(/\*/g,".*"))).join("|"));wb.namespace("spa",function(){let e={},t=new Ri.A;const n=new Li,s={};async function i(){var e,t,n;if(!((null===(t=null===(e=wb.global.settings)||void 0===e?void 0:e.variables)||void 0===t?void 0:t.resourseStatSettings)&&"PerformanceObserver"in window&&(null===(n=null===PerformanceObserver||void 0===PerformanceObserver?void 0:PerformanceObserver.supportedEntryTypes)||void 0===n?void 0:n.includes("resource"))))return;const s=await wb.user.getShardAsync();for(const e in wb.global.settings.variables.resourseStatSettings){const[t,n]=wb.global.settings.variables.resourseStatSettings[e].split(";"),i=parseInt(n),[o,a]=t.split("-"),l=parseInt(o),c=parseInt(a);if(s>=l&&s<=c&&i>0){let t=0;const n=new PerformanceObserver((async n=>{var s,o,a,l,c;if(n.getEntries){const u=n.getEntries();for(const n of u.filter((t=>t.initiatorType===e))){if(t%i==0&&!r(n)){const e={url:n.name,ok:n.responseStatus>300?1:0,error:n.responseStatus>=300?n.responseStatus:0,dns:parseInt(n.domainLookupEnd-n.domainLookupStart),connect:parseInt(n.connectEnd-n.connectStart),ttfb:parseInt(n.responseStart-n.requestStart),load:n.responseStart>0?parseInt(n.responseEnd-n.fetchStart):0,full:parseInt(n.duration),cache:"HIT"===(null===(o=null===(s=n.serverTiming)||void 0===s?void 0:s.find((e=>"cache"===e.name)))||void 0===o?void 0:o.description)?1:0,srv:null!==(c=null===(l=null===(a=n.serverTiming)||void 0===a?void 0:a.find((e=>"srv"===e.name)))||void 0===l?void 0:l.description)&&void 0!==c?c:"",size:n.transferSize};wb.analitics.sendEvent("performance_static_download",e)}t++}}}));n.observe({type:"resource",buffered:!0});let s=0;new PerformanceObserver((e=>{if(e.getEntries){const t=e.getEntries();for(const e of t.filter((e=>"img-load-error"===e.name)))s%i==0&&wb.analitics.sendEvent("performance_static_download",{url:e.detail.url,ok:0}),s++}})).observe({type:"mark",buffered:!0})}}}function r(e){return!(e.transferSize>0)&&(e.decodedBodySize>0||e.duration<3)}return $.views.loadTemplateAsync=async function(e,t=""){var i;if($.templates[e])return $.templates[e];if(!s[e]){let r;if(window._debug)r=`${e}.json`;else{n.$helper.currentCulture;const t=`${e}.json`,s=null===(i=n.$router.tmplHashes)||void 0===i?void 0:i[t];r=t.replace(".json",`.${s}.json`)}const o=t?`${t}${r}`:$.views.converters.urlForJsTmpl(r);s[e]=window._debug?n.$httpClient.fetchBasicJSON(o):n.$httpClient.fetchStaticV2(o)}try{const t=await s[e],n=Object.keys(t);return 1===n.length?($.templates(e,t[n[0]]),s[e]=null,$.templates[e]):($.templates(t),s[e])}catch(t){throw s[e]=null,t}},$.views.loadWebApiTemplateAsync=async function(e){const t=`webapi_tmpl_${e}`;if($.templates[t])return $.templates[t];s[t]||(s[t]=n.$httpClient.fetchText(`/webapi/htmltemplate/${e}`));try{const e=await s[t];try{const t=JSON.parse(e);$.templates(t)}catch(n){$.templates(t,e)}return s[t]=null,$.templates[t]}catch(e){throw s[t]=null,e}},$.views.loadTemplateDictionaryAsync=function(e){return $.views.loadTemplateAsync(e)},$.views.converters({formatString:function(){let[e,t,n,s]=arguments;if("string"!=typeof e)throw new Error("Template must be a string");return n&&(e=e.replace(/\[(\d+)\]/gm,"{$1}")),s&&(t=$.views.converters.encode(t)),String.format.apply(null,[e,t])},dateFormat:function(e,t){return e.format(t)}}),{init:async function(e){const{router:s,seoHelper:r,menuLkHelper:o}=e;Object.defineProperty(Li,"appVersion",{value:s.appVersion,writable:!1}),n.$router.setData(s.routesDictionary,s.tmplHashes),await jr.init(),n.$moduleLoader.setModules(s.modules),n.$moduleLoader.setServices(s.services);const a=[];if("AbortController"in window||a.push(n.$moduleLoader.loadModuleAsync("abortControllerPolyfill",!0)),"FormData"in window&&"get"in(null===FormData||void 0===FormData?void 0:FormData.prototype)||a.push(n.$moduleLoader.loadModuleAsync("formDataPolyfill",!0)),"undefined"==typeof navigator||navigator.locks||a.push(n.$moduleLoader.loadModuleAsync("navigatorLocksPolyfill",!0)),a.length>0&&await Promise.all(a),wb.displayModeSettings.init(),t.preInit(),n.$user.initUser(),await wb.global.loadSettingAsync(),wb.global.periodicBasketConfigUpdate(),n.$seoHelper.init(r.items,r.updateUrl,r.defaultTitle),n.$menuLk.setStatic(o),t.init(),wb.network.init(),wb.analitics.getSplitInfo(),WbSpaModel.prototype.$user.getBannersClusters(),await n.$router.init(s.ssrModel),!ao.test(window.location.hostname))return wb.spa.logError({message:`fishing from ${document.location}`},{referrer:wb.spa.getReferrer(),cookie:document.cookie}),wb.popup.renderModalError("Вы находитесь на фишинговом сайте!"),void(wb.spa=null);document.body.addEventListener("load",(e=>{var t;"IMG"===e.target.tagName&&e.target.complete&&(null===(t=e.target.closest(".img-plug"))||void 0===t||t.classList.remove("img-plug--error"))}),!0),navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.indexOf("Trident/")>0||document.body.addEventListener("error",(e=>{var t,n;if((null===(n=null===(t=wb.global.settings)||void 0===t?void 0:t.switches)||void 0===n?void 0:n.enableErrorImagePlug)&&"IMG"===e.target.tagName&&-1===e.target.src.indexOf("/i/blank.gif")){const t=e.target.closest(".img-plug");null==t||t.classList.add("img-plug--error"),null==t||t.classList.remove("load"),null===performance||void 0===performance||performance.mark("img-load-error",{detail:{url:e.target.src}})}}),!0),setTimeout(i,2e3),setTimeout((function(){WbSpaModel.prototype.$helper.loadJsAsync(wb.settings.scripts.performance)}),5e3)},registerViewModel:function(t){const s=Object.getPrototypeOf(t.prototype);s===Object.prototype?Object.setPrototypeOf(t.prototype,Li.prototype):Object.setPrototypeOf(s,Li.prototype),n.$router.getAppliedEntries().forEach((n=>{e[n]=t}))},getViewModelByName:function(t){return e[t]},redirect:function(e,t,s=!1){n.$router.moveTo(e,t,!1,s)},setUserStatus:function({userIsAuth:e,userUid:t,userId:s}){$.observable(n.$router).setProperty({userIsAuth:e,userUid:t,userId:s}),n.$eventBus.dispatchEvent(new CustomEvent(e?"onUserAuth":"onUserUnAuth")),n.$services.favsService.setKey(e,t),n.$services.userData.setKey(e,t),n.$getService("orderService").then((e=>e.startSync(n.$services.cartService.publicBasketApiUrl))),n.$getService("wbxOrderService").then((e=>e.startSync(n.$services.cartService.publicBasketApiUrl))),e&&(n.$getService("groupedDeliveriesService").then((e=>e.init())),"ru"!==wb.settings.currentLocale&&n.$services.userData.migrateProfileFromGlobal())},refresh:function(){n.$router.refresh()},getMainLayout:function(){return t},getCatalogMenu:async function(){return this._catalogMenuTask||(this._catalogMenuTask=new Promise((async(e,t)=>{const n=new Ui;await n.initMenu(),n.isInited?e(n):(t(),this._catalogMenuTask=null)}))),this._catalogMenuTask},clearCatalogMenu:function(){this._catalogMenuTask=null},getReferrer:function(){return n.$router.referrer},logError:function(e,t=null,n=!1){try{const s={msg:e.message};n&&(s.stk=e.stack),t&&(s.data=t);const i="/webapi/logging/jserror",r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)};WbSpaModel.prototype.$httpClient.fetch(i,r).catch((()=>{WbSpaModel.prototype.$services.retryFetchService.saveRequest(i,r)}))}catch(e){}},orderMetrics:function(e){try{WbSpaModel.prototype.$httpClient.fetch(`/webapi/logging/orders/metrics?status=${e}`,{method:"POST"})}catch(e){}},signIn:function(e,t){n.$router.moveToSignIn(e,t)},afterSignOut:function(){wb.spa.signIn({query:{returnUrl:window.location.href}}),t.updateAfterLogin()}}}()),wb.namespace("global",function(){const e="user-settings",t="global-settings-v2",n="cdn-config",s=18e4,i={switches:{},variables:{}};let r,o,a,l,c=[],u=!0,d=200,h=0;function p(e){if(!e||!WbSpaModel.appVersion)return;const t=e.split("."),n=WbSpaModel.appVersion.split(".");if(t.length<3||n.length<3)return;+((parseInt(n[0])||0)+("000"+(parseInt(n[1])||0)).slice(-3)+("000"+(parseInt(n[2])||0)).slice(-3))<+(t[0]+("000"+t[1]).slice(-3)+("000"+t[2]).slice(-3))&&window.location.reload()}function m(){return o||(o=localStorage.getObject(e),o||(o={}),o.closed||(o.closed=[]),o.colorsHitory||(o.colorsHitory=[]),o.confirmed||(o.confirmed=[]),o)}function g(e){for(const t of["basket_route_map","feedback_route_map"]){if(!e[t])continue;let n="switch (true) {";for(const s of e[t])n+=`case volId >= ${s.vol_range_from} && volId <= ${s.vol_range_to}: return "${s.http_host}";`;n+="}";const s=new Function("volId",n);s(0),wb.helpers.setImgFunc(t,s)}}return window.addEventListener("storage",(e=>{if(e.key===t)try{const{data:t}=JSON.parse(e.newValue);r=t,p(r.variables.siteMinVersion),c.forEach((e=>e(r))),window._debug&&console.log("[globalsettings] changed external")}catch(e){console.error("[globalsettings] changed external failed")}else if(e.key===n){const t=JSON.parse(e.newValue);t&&g(t)}})),{get settings(){const e=function(){var e,n;return r||(r=null!==(n=null===(e=localStorage.getObject(t))||void 0===e?void 0:e.data)&&void 0!==n?n:i,r)}();return e.switches.enableWbxOrder=!0,e},get userSettings(){return m()},saveUserSettings:function(){localStorage.putObject(e,m()),Li.prototype.$eventBus.dispatchEvent(new CustomEvent("UserSettingsSaved"))},subscribe(e){c.push(e)},loadSettingAsync:function e(){a||(a=setInterval(e,12e4)),u?u=!1:d=2e3;const n=h>=2?"/webapi/settings/global/hash":wb.helpers.url.urlStaticDataJson("data/settings-front.json.hash");return Li.prototype.$httpClient.fetchText(n,{method:"GET",cache:"no-cache"},{noProcessResponse:!0,timeout:d}).then((e=>{var n;if(void 0===e)throw new Error;if(e!==(null===(n=localStorage.getObject(t))||void 0===n?void 0:n.hash)){const n=h>=2?"/webapi/settings/global/get":wb.helpers.url.urlStaticDataJson("data/settings-front.json");return Li.prototype.$httpClient.fetchJSON(n,{method:"GET",cache:"no-cache",headers:{"Content-Type":"application/json"}},{noProcessResponse:!0,timeout:d}).then((n=>(r=n,localStorage.putObject(t,{hash:e,data:r}),h=0,window._debug&&console.log("[globalsettings] changed"),c.forEach((e=>e(r))),p(r.variables.siteMinVersion),Promise.resolve()))).catch((()=>Promise.resolve()))}return Promise.resolve()})).catch((()=>(h++,Promise.resolve())))},periodicBasketConfigUpdate:async function e(){if(WbSpaModel.prototype.$isRangeEnabledFor(wb.global.settings.variables.usersRangeCdnConfig))if(l)try{await navigator.locks.request(`lock-${n}`,(async e=>{var t;const i=localStorage.getObject(n);if(i&&i.timestamp+s>Date.now())return;const r=await Li.prototype.$httpClient.fetchBasicJSON(`https://cdn.wbbasket.ru/api/v2/upstreams?hash=${null!==(t=null==i?void 0:i.hash)&&void 0!==t?t:""}`,{cache:"no-cache"},{nullOnError:!0});if(!(null==r?void 0:r.upstreams)||r.hash===(null==i?void 0:i.hash))return;let o=r.upstreams.filter((e=>e.is_default||e.is_available));if(0===o.length)return;if(1===o.length)return g(o[0]),Object.assign(o[0],{timestamp:Date.now(),hash:r.hash}),void localStorage.putObject(n,o[0]);const a="performance-check",l={},c=new PerformanceObserver((e=>{const t=e.getEntries();for(const e of t.filter((e=>e.name.indexOf(a)>0))){const t=new URL(e.name).searchParams;if(parseInt(t.get(a))<u)continue;const n=t.get("name");l[n]||(l[n]=[]),l[n].push(200===e.responseStatus||e.encodedBodySize>0?e.duration:1e5)}}));c.observe({type:"resource",buffered:!0});const u=Date.now();for(const e of o)for(let t=0;t<3;t++)await WbSpaModel.prototype.$httpClient.fetch(`${e.check_url}?name=${e.name}&${a}=${Date.now()}`,{mode:"no-cors",cache:"no-cache"}).catch((e=>{}));await Li.prototype.$helper.sleep(1e3),c.disconnect();for(const e in l)o.find((t=>t.name===e)).latency=~~(l[e].reduce(((e,t)=>e+t),0)/l[e].length);const d=o.sort(((e,t)=>e.latency-t.latency||!e.is_default-!t.is_default))[0];g(d),Object.assign(d,{timestamp:Date.now(),hash:r.hash}),localStorage.putObject(n,d)}))}catch(e){wb.spa.logError(e)}else{l=setInterval(e,s);const t=localStorage.getObject(n);t&&t.timestamp+s>Date.now()?g(t):setTimeout(e,5e3)}}}}())},25148:(e,t,n)=>{"use strict";n.d(t,{A:()=>R});var s={};n.r(s),n.d(s,{dataProceeder:()=>d,urlCreator:()=>u});var i=n(77387);const r=function(){function e(e){var t;this.layoutModel=e.layoutModel,this.tmpl="shortBasketInfoTmpl",this.control=document.querySelector("#basketContent"),this.addressesInfo=null,this.eventsModels=this.layoutModel.$services.notifications.eventsModel,this.profileMenu=null,this.lkMenuMouseEnterHandler=this.lkMenuMouseEnterHandler.bind(this),this.deliveriesPreviewEnterHandler=this.deliveriesPreviewEnterHandler.bind(this),this.toggleControl=this.toggleControl.bind(this),this.controlState={hide:!1},this.basketInfo={IsAuthenticated:this.layoutModel.$auth.isAuth,BasketQuantity:this.layoutModel.$services.cartService.localCount,UserIsPremium:!!this.layoutModel.$auth.isAuth&&(null===(t=this.layoutModel.$user.getUserGradeFromCache())||void 0===t?void 0:t.isPremium)},$.templates[this.tmpl].link(this.control,this,{controlState:this.controlState})}var t=e.prototype;return t.init=function(){var e,t,n;this.layoutModel.$eventBus.addEventListener("LocalBasketUpdateCount",this._updateLocalBasketCount.bind(this)),this.layoutModel.$eventBus.addEventListener("UserReset",this.update.bind(this)),this.layoutModel.$eventBus.addEventListener("UserGradeUpdated",this.updatePremiumState.bind(this));const s=this.layoutModel.$services.cartService.currentDeliveryType;s&&this.layoutModel.$analitic.setCurrentAddress(s.deliveryType,null!==(e=s.officeId)&&void 0!==e?e:s.addressId),(null===(n=null===(t=this.layoutModel)||void 0===t?void 0:t.menuTop)||void 0===n?void 0:n.mobileMenu)&&this.layoutModel.menuTop.mobileMenu.updateBasket(this.basketInfo.BasketQuantity),window.addEventListener("spaTransition",(e=>{e.detail.isFinished&&this.toggleControl(!1)})),this.basketInfo.IsAuthenticated&&this.layoutModel.$services.notifications.checkNotificationCountAsync().then((e=>{var t,n;(null===(n=null===(t=this.layoutModel)||void 0===t?void 0:t.menuTop)||void 0===n?void 0:n.mobileMenu)&&this.layoutModel.menuTop.mobileMenu.updateEvents(e),$.observable(this.eventsModel).setAllProperty(e)}))},t.update=function(){var e;const t={IsAuthenticated:this.layoutModel.$auth.isAuth,BasketQuantity:this.layoutModel.$services.cartService.localCount,UserIsPremium:null===(e=this.layoutModel.$user.getUserGradeFromCache())||void 0===e?void 0:e.isPremium};$.observable(this.basketInfo).setAllProperty(t),(t.IsAuthenticated?this.layoutModel.$services.notifications.checkNotificationCountAsync():Promise.resolve({eventsCount:0})).then((e=>{var t,n;(null===(n=null===(t=this.layoutModel)||void 0===t?void 0:t.menuTop)||void 0===n?void 0:n.mobileMenu)&&this.layoutModel.menuTop.mobileMenu.updateEvents(e),$.observable(this.eventsModel).setAllProperty(e)}))},t.updatePremiumState=function(){var e;$.observable(this.basketInfo).setProperty({UserIsPremium:null===(e=this.layoutModel.$user.getUserGradeFromCache())||void 0===e?void 0:e.isPremium})},t._updateLocalBasketCount=function(e){var t,n,s,i;const r=null!==(n=null===(t=e.detail)||void 0===t?void 0:t.count)&&void 0!==n?n:0;$.observable(this.basketInfo).setProperty({BasketQuantity:r}),(null===(i=null===(s=this.layoutModel)||void 0===s?void 0:s.menuTop)||void 0===i?void 0:i.mobileMenu)&&this.layoutModel.menuTop.mobileMenu.updateBasket(r)},t.deliveriesPreviewEnterHandler=function(){if(this.deliveriesPreview)return this.toggleControl(!0);this.layoutModel.$moduleLoader.loadModuleAsync("deliveriesPreview").then((e=>{const t=this.control.querySelector(".j-tooltip-delivery");this.deliveriesPreview=new e,e.template.link(t,this.deliveriesPreview,{controlState:this.controlState}),this.toggleControl(!0)}))},t.lkMenuMouseEnterHandler=function(){if(this.lkMenuPreview)return this.toggleControl(!0);const e=WbSpaModel.prototype;Promise.all([e.$moduleLoader.loadModuleAsync("cabinetMenuPreview"),e.$user.getBalance().catch((e=>Promise.resolve({isNetworkError:!0}))),e.$services.userData.getUserDataAsync(!0)]).then((([e,t])=>{const n=this.control.querySelector(".j-tooltip-profile");this.lkMenuPreview=new e(t),this.lkMenuPreview.template.link(n,this.lkMenuPreview,{controlState:this.controlState}),this.lkMenuPreview.onAfterRender(),this.toggleControl(!0)}))},t.toggleControl=function(e){$.observable(this.controlState).setProperty({hide:!e})},e}();var o=n(92901);const a=Object.freeze({history:0,catalog:1,brands:2,subjects:3,goods:4,grouped:5,tags:6,supplier:7,redirect:8});const l=new(function(){function e(){this.isInited=!1}var t=e.prototype;return t.initMenu=async function(){this.menu=await wb.spa.getCatalogMenu(),this.isInited=this.menu.isInited},t.hasItem=function(e){return!!e&&this.menu.menuById.has(e)},t.getCatalogLink=function(e){return this.menu.menuById.get(e).url},t.getParents=function(e){const t=[];let n=this.menu.menuById.get(e).parentId;for(;null!=n;){const e=this.menu.menuById.get(n);t.push(e.name),n=e.parentId}return t.reverse()},e}()),c=Object.freeze(new Map([["home","/"],["faq","/services/voprosy-i-otvety"],["lk","/lk"],["notifications","/lk/newsfeed/events"],["basket","/lk/basket"],["delivery","/lk/myorders/delivery"],["orders","/lk/myorders/archive"],["favorites","/lk/favorites"],["favorite_brands","/lk/favoritebrands"],["communications","/lk/communications"],["claims","/lk/claims"],["feedback","/lk/discussion/feedback?type=Comments"],["cards","/lk#bankCard"],["sessions","/lk#personal-safety"],["balance","/lk/mywallet/purchases"],["refunds","/lk/myrefunds"],["receipts","/lk/receipts/get"],["pickups","/services/besplatnaya-dostavka"],["make_refund","/lk/refund"],["make_order","/services/kak-sdelat-zakaz"],["payment_options","/services/sposoby-oplaty"],["goods_refund","/services/vozvrat-tovara"],["money_refund","/services/vozvrat-denezhnyh-sredstv"],["sale_rules","/services/pravila-prodazhi"],["market_rules","/services/pravila-polzovaniya-torgovoy-ploshchadkoy"],["about_us","/services/o-nas"],["requisites","/services/rekvizity"],["press","/presservice"],["contacts","/services/kontakty"],["bug_bounty","/services/bug-bounty"]])),u=async()=>"https://suggests.wb.ru/suggests/api/v7/hint",d=async(e,t)=>{const n=e.suggests,s=e.max_tags_rows,i=[];if(!Array.isArray(n)&&!t)return i;if((!Array.isArray(n)||Array.isArray(n)&&0===n.length)&&t.trim())return[{type:a.catalog,suggestions:[{name:t,search:t,type:1,typedText:t}]}];if(l.isInited||await l.initMenu(),0!==s){const e=n.filter((e=>"tag"===e.type)).map((e=>({name:e.name,type:a.catalog,typeStr:e.type,pos:e.pos,maxTagsRows:s})));i.push({type:a.tags,suggestions:e})}const r=n.filter((e=>"category"===e.type||"brand"===e.type||"supplier"===e.type||"redirect"===e.type||"external_redirect"===e.type)).map((e=>{switch(e.type){case"category":const n=parseInt(e.menu_id);if(l.hasItem(n)){const s=l.menu.menuById.get(n);return{typeStr:e.type,name:s.name,search:s.name,typedText:t,type:a.subjects,xParams:s.query,xShard:s.shard,url:l.getCatalogLink(n),breadCrumbs:l.getParents(n),src:$.views.converters.imgForPromoCategory(n,!0),imgWidth:36,imgHeight:48}}break;case"brand":return{typeStr:e.type,typeName:"Бренд",name:e.brand_name,search:e.brand_name,brandId:e.brand_id,brandHash:e.brand_hash,typedText:t,type:a.brands,src:$.views.helpers.forBrandLogoFromId(e.brand_hash),imgOnError:`${wb.settings.staticSiteUrl}/i/v3/broken-img/brands.jpg`,imgWidth:32,imgHeight:13};case"supplier":return{typeStr:e.type,typeName:"Магазин",name:$.views.converters.trimWord(e.supplier_name,$.views.helpers.suppliersOrgForms),search:e.supplier_name,supplierId:e.supplier_id,typedText:t,type:a.supplier,url:`/seller/${e.supplier_id}`,src:$.views.helpers.forSellerLogo(e.supplier_id),imgOnError:`${wb.settings.staticSiteUrl}/i/v3/catalog/seller-logo-new.jpg`,imgWidth:67,imgHeight:28};case"redirect":case"external_redirect":return{typeStr:e.type,typeName:"Раздел",name:e.name,search:e.name,id:e.id,typedText:t,type:a.redirect,url:"external_redirect"===e.type?e.url:c.get(e.id),src:`${wb.settings.staticSiteUrl}/i/interface/shops/wb.png`,imgWidth:67,imgHeight:28}}})).filter((e=>e));i.push({type:a.grouped,suggestions:r});const o=n.filter((e=>"suggest"===e.type)).map((e=>({name:e.name,search:e.name,type:a.catalog,typedText:t,typeStr:e.type,xParams:e.query,xShard:e.shard_key}))).slice(0,7);return 0===o.length&&0===tagsSuggests.length&&t.trim()&&o.push({name:t,search:t,type:a.catalog,typedText:t,typeStr:"self"}),i.push({type:a.catalog,suggestions:o}),i},h=[34,42],p=[38,40],m=Object.freeze({6:0,0:1,1:2,5:3});let g=function(e){function t(){var t;return(t=e.call(this)||this).searchText="",t.searchQueryText="",t.showImageSearch=!1,t.uploadingPhoto=!1,t.suggestions=[],t.allSuggestions=[],t.suggestionsQueue=[],t.prohibitSuggestions=!0,t.searchTagClick=!1,t.onlyTags=!1,t.showSuggestionsDebouncer=t.showSuggestionsDebouncer(),t.showSuggestionsDebounced=t.showSuggestionsDebouncer.debounce(t.showSuggestionsOuter.bind(t),300),t._hideSuggestionsByClick=t._hideSuggestionsByClick.bind(t),t}(0,i.A)(t,e);var n=t.prototype;return n.clearSearch=function(){this.searchTagClick=!1,this.onlyTags=!1,$.observable(this).setProperty({searchText:""}),this.inputEl.focus()},n.onSearchInputKeypress=function(e){var t;if(h.indexOf(e.which)>-1)return!1;if(13===e.which)return this.showSuggestionsDebouncer.stop(),this.applySearch(),!1;if(this.onlyTags){const e=this.allSuggestionsAnalitics;this.$analitic.saveLastSearchAnaliticsData("Tag_Suggest",this.searchText,e),this.onlyTags=!1}if(this.$isDesktop&&p.indexOf(e.which)>-1&&this.allSuggestions.length){e.preventDefault();const n=38===e.which,s=this.allSuggestions.filter((e=>1!==e.type||1===e.type&&!e.hasOwnProperty("pos")));let i=s.findIndex((e=>e.selected));n&&-1===i&&(i=0),i+=n?-1:1,i%=s.length,i<0&&(i+=s.length);const r=s[i];null!=r&&($.observable(this).setProperty({searchText:r.name}),null===(t=this._markSuggestAsSelected)||void 0===t||t.call(this,r))}},n.onSearchSubmit=function(e){e.preventDefault()},n.applySearch=function(){this.searchText.length&&(this.inputEl.blur(),this._hideSuggestionsByClick(),this._loadSearchPage())},n.searchByImage=async function(e){const[t]=await Promise.all([this.$moduleLoader.loadModuleAsync("imageChip"),this.$moduleLoader.loadServiceAsync("searchByImageService")]),n=new t;n.uploading=!0,$.observable(this).setProperty({imageChipData:n});try{this.$analitic.saveState({l:"SPA"});const t=e.currentTarget.files[0],n=await this.$services.searchByImageService.searchByImage(t),s=this.$analitic.getTermByTermName("qid");this.$analitic.saveQueryIdForSearch(s),this.$analitic.sendEvent("Search_Request_Send",{type:"Photo",query_id:s}),this.$router.moveTo(n)}catch(e){console.error(e)}finally{$.observable(this).setProperty({showImageSearch:!1})}},n.enableSuggestions=function(e){if(!this.imageChipData)return"focus"===e.type&&(this.focusSearchTime=Date.now(),this.focusSearchText=this.searchText),$.observable(this).setProperty({prohibitSuggestions:!1}),this.showSuggestions(e);e.preventDefault()},n.showSuggestionsDebouncer=function(){let e=null;function t(){e&&clearTimeout(e)}return{debounce:(n,s)=>(...i)=>{t(),e=setTimeout((()=>{n.apply(this,i),e=null}),s)},stop:t}},n.showSuggestionsOuter=function(e){return this.prohibitSuggestions?this.enableSuggestions(e):this.showSuggestions(e)},n.showSuggestions=function(e){if(this.imageChipData)return void(null==e||e.preventDefault());clearTimeout(this._hideSuggestionsTimer);const t=this.suggestionsHelper.loadSuggestionsAsync(this.searchText.toLowerCase(),null),n=this.$isDesktop?$.views.loadTemplateDictionaryAsync("searchSuggestionsTmpl"):Promise.resolve();this.suggestionsQueue.push(t),Promise.all([t,n]).then((([e])=>{var n;if(this.prohibitSuggestions)return void $.observable(this.suggestions).refresh([]);const s=this.suggestionsQueue.findIndex((e=>e==t));if(s<0)return;this.suggestionsQueue=this.suggestionsQueue.slice(s+1);const i=JSON.parse(JSON.stringify(e));this._removeRepeats(i),this._sortSuggests(i),$.observable(this.suggestions).refresh(i);const r=null===(n=i.find((e=>6===e.type)))||void 0===n?void 0:n.suggestions;if(r){const e=r[0].maxTagsRows;if(e>0){const t=document.querySelector(".j-unmark-suggests");document.documentElement.style.setProperty("--row-on-tags",e),t.classList.add("autocomplete__list--row")}}this.allSuggestions=i.reduce(((e,t)=>e.concat(t.suggestions)),[]),document.removeEventListener("click",this._hideSuggestionsByClick),document.addEventListener("click",this._hideSuggestionsByClick),this.toggleBackgroundBlur(!0)})).catch((e=>{console.error(e)}))},n.toggleBackgroundBlur=function(e){var t;if(e&&this.$isDesktop){if(!document.querySelector(".overlay--search")){const e=document.createElement("div");e.classList.add("overlay","overlay--search","hide-mobile"),document.querySelector("body").appendChild(e)}}else null===(t=document.querySelector(".overlay--search"))||void 0===t||t.remove()},n._hideSuggestionsByClick=function(e){if("m"==wb.settings.displayMode||(null==e?void 0:e.target.closest(".search-catalog__btn--clear")))return;(e?!e.target.closest(".j-menu-burger-btn")&&this.inputEl==document.activeElement||e.target.closest(".j-clear-history")||e.target.closest(".j-clear-history-all")||e.target.closest(".j-suggest-tag"):null)?this.inputEl.focus():(clearTimeout(this._hideSuggestionsTimer),$.observable(this).setProperty({prohibitSuggestions:!0}),this._hideSuggestionsTimer=setTimeout((()=>{$.observable(this.suggestions).refresh([]),document.removeEventListener("click",this._hideSuggestionsByClick),this.toggleBackgroundBlur(!1)}),150))},n.clearAllSearchHistories=function(e){this._clearSearchHistory(null,!0),this.$analitic.sendEvent("Search_History_Delete")},n.clearSearchHistory=function(e){const{data:t}=$.view(e.currentTarget);this._clearSearchHistory(t.name)},n._clearSearchHistory=function(e,t){this.suggestionsHelper.removeFromHistorySearch(e,t),"m"===wb.settings.displayMode&&this.showSuggestions(),this.inputEl.focus()},n.fillWithTag=function(e){var t,n,s;if(this.searchTagClick=!0,e.target.closest(".j-clear-history"))return;const{data:i}=$.view(e.currentTarget);if(!i)return;const r=null!==(t=i.name)&&void 0!==t?t:"",o=(this.searchText,this.searchText.trimLeft().split(/\s+/));o[i.pos]=r,this.onlyTags=!0,this.$analitic.sendEvent("Search_Tag_Suggest_T",{text:r,text_typed:null!==(n=this.searchText)&&void 0!==n?n:""}),$.observable(this).setProperty({searchText:o.join(" ")+" "}),null===(s=this.inputEl)||void 0===s||s.focus()},n._setTextInSearchInput=function(e){console.log("_setTextInSearchInput"),$.observable(this).setProperty({searchText:e}),!this.$isDesktop&&this.parentBlock&&$.observable(this.parentBlock).setProperty({searchText:e})},n.followSuggest=function(e){var t,n,s;if(e.target.closest(".j-clear-history"))return;this.onlyTags=!1;const{data:i}=$.view(e.currentTarget);if(null==i)return;const r=this.allSuggestionsAnalitics;this._setTextInSearchInput(i.name),this.suggestionsHelper.saveHistorySearch(i.name);const o=this._getAnalyticsFromSuggest(i),a={type:o.type,l:o.location,t:this.searchText,t1:null===(t=i.searchParams)||void 0===t?void 0:t.get("xParams"),t2:null===(n=i.searchParams)||void 0===n?void 0:n.get("xShard"),t3:i.typedText,t4:this.searchTagClick},l=o.type;this.$analitic.saveLastSearchAnaliticsData("Suggest",this.searchText,r);const c=this.$analitic.getTermByTermName("qid");this.$analitic.saveQueryIdForSearch(c),this.$analitic.saveState(a);const u={type:l,text:i.search,text_typed:i.typedText,text_suggest:r,query_id:c,suggests:this.suggestionsJsonString,start_inputed_at:this.focusSearchTime,start_inputed_text:this.focusSearchText,location:null!==(s=this.location)&&void 0!==s?s:""};i.isBrand||i.isHistory||(u.group="new"),this.$analitic.sendEvent("Search_Request_Send",u),this._getUrlToFollow(i).then((e=>{if(null!=wb.spa)return wb.spa.redirect(e);window.location.href=e}))},n.removeImageChip=function(){$.observable(this).setProperty({imageChipData:null})},n._loadSearchPage=function(){var e,t,n,s;if(/^\s+$/.test(this.searchText)){switch(wb.analitics.getState().l){case"SNT":case"STA":this.typeSearch="Text";break;case"SNS":this.typeSearch="Suggest";break;case"SNH":case"SHS":this.typeSearch="Hist";break;case"STC":this.typeSearch="Category";break;case"STB":this.typeSearch="Brand";break;case"SPA":this.typeSearch="Photo";break;case"AST":case"SST":case"SIS":this.typeSearch="Tag_Suggest"}let t={type:null!==(e=this.typeSearch)&&void 0!==e?e:"",text:this.searchText,text_typed:this.searchText,reason:"search",query:"",shardKey:"",text_suggest:"",suggests:this.suggestionsJsonString,query_id:wb.analitics.retrieveQueryIdForSearch()};wb.analitics.sendEvent("Search_Empty_Respon",t)}this.suggestionsHelper.saveHistorySearch(this.searchText);const i=this.allSuggestionsAnalitics;this.$analitic.saveState({l:this.onlyTags?"SST":"SNT",t:this.searchText,t1:null===(t=this.xData)||void 0===t?void 0:t.xcatalogQuery,t2:null===(n=this.xData)||void 0===n?void 0:n.xcatalogShard,t4:this.searchTagClick});const r=this.$analitic.getTermByTermName("qid");this.$analitic.saveQueryIdForSearch(r),this.$analitic.sendEvent("Search_Request_Send",{text:this.searchText,type:this.onlyTags?"Tag_Suggest":"Text",group:"new",text_typed:this.searchText,text_suggest:i,query_id:r,suggests:this.suggestionsJsonString,start_inputed_at:this.focusSearchTime,start_inputed_text:this.focusSearchText,location:null!==(s=this.location)&&void 0!==s?s:""}),$.observable(this).setProperty({searchQueryText:this.searchText});let o=this._makeSafeString(this.searchText);const a=`${wb.urlHelper.xSearchBase}?search=${o}`;if(null!=wb.spa)return wb.spa.redirect(a);window.location.href=a},n._makeSafeString=function(e){return e.toSafeString()},n._getUrlToFollow=async function(e){if(e.url)return Promise.resolve(e.url);if(2===e.type){const t=await $.views.helpers.brandUrlById(e.brandId);if(t)return t}return Promise.resolve(`${wb.urlHelper.xSearchBase}?search=${this._makeSafeString(e.search)}`)},n.markSelected=function(e,t){let n=e.trim();if(t){const e=t.trim().replace(wb.settings.regexp.escapingRegExp,"\\$&"),s=$.views.converters.encode(n.replace(new RegExp(e,"i"),"")).replace(wb.settings.regexp.escapingRegExp,"\\$&");return n=$.views.converters.encode(n.replace(new RegExp(`(${s})$`,"i"),"[b]$&[/b]")),n.replace(new RegExp("\\[b\\]("+$.views.converters.encode(s)+")\\[\\/b\\]","gi"),"<b>$1</b>")}return $.views.converters.encode(n)},n._removeRepeats=function(e){const{history:t,common:n}=e.reduce(((e,t)=>{switch(t.type){case 0:e.history=t;break;case 1:e.common=t}return e}),{history:null,common:null});if(!t||!n)return;const s=t.suggestions.reduce(((e,t)=>(e.add(t.name),e)),new Set);n.suggestions=n.suggestions.filter((e=>!s.has(e.name)))},n._sortSuggests=function(e){e.sort(((e,t)=>m[e.type]-m[t.type]))},n._getAnalyticsFromSuggest=function(e){switch(e.type){case 0:return{location:"SNH",type:"Hist"};case 1:return{location:"SNS",type:"Suggest"};case 2:return{location:"STB",type:"Brand"};case 3:return{location:"STC",type:"Category"};case 4:return{location:"SIS",type:"Item"};case 7:return{location:"STS",type:"Supplier"};default:return{location:"",type:"Unknown"}}},(0,o.A)(t,[{key:"allSuggestionsAnalitics",get:function(){return this.allSuggestions.map((e=>e.name)).join("|")}},{key:"suggestionsJsonString",get:function(){const e={},t=this.allSuggestions.map((t=>{t.typeStr in e||(e[t.typeStr]=0);const n=e[t.typeStr];return e[t.typeStr]+=1,{type:"history"===t.typeStr?"hist":t.typeStr,value:t.name,index:n}}));return this.$analitic.saveLastSearchAnalyticsDataForSuggest(JSON.stringify(t)),JSON.stringify(t)}},{key:"location",get:function(){return{SpaActiveOrdersEntrypoint:"Delivery",SpaCatalogEntrypoint:"Catalog",SpaSearchEntrypoint:"Catalog",SpaBrandsEntrypoint:"Brand",SpaSellerCatalogEntrypoint:"Supplier",SpaArchivePositionsEntrypoint:"Purchases",SpaFavoritesEntrypoint:"Favorites",SpaBasketEntrypoint:"Cart",SpaPersonalCabinetEntrypoint:"LK",SpaHomeEntrypoint:"Main"}[WbSpaModel.prototype.$router.currentRoute.name]}}])}(WbSpaModel),f=function(e){function t(){var t;return(t=e.call(this)||this).imageChipData=null,t._hideSuggestionsTimer=null,t.inputEl=document.getElementById("searchInput"),t.applySearchEl=document.getElementById("applySearchBtn"),t.searchByImageBtnEl=document.getElementById("searchByImageBtn"),t.searchByImageContainerEl=document.getElementById("searchByImageContainer"),t.searchInputMobileEl=document.querySelector(".j-search-input-mobile"),t._checkImageFormClick=t._checkImageFormClick.bind(t),t.hasAnySuggestions.depends=["suggestions"],t}(0,i.A)(t,e);var n=t.prototype;return n.init=async function(){await this._prepareSuggestionsHelper(),this._observeProperties(),this._bindEvents(),$.link(!0,"#searchBlock",this)},n.hasAnySuggestions=function(){return this.suggestions.some((e=>e.suggestions.length>0))},n.toggleImageSearch=function(){this.toggleProperty("showImageSearch")},n.markSuggest=function(e){const{data:t}=$.view(e.currentTarget);null!=t&&this._markSuggestAsSelected(t)},n.unmarkSuggests=function(){this.allSuggestions.forEach((e=>{$.observable(e).setProperty({selected:!1})}))},n._markSuggestAsSelected=function(e){this.allSuggestions.forEach((t=>{$.observable(t).setProperty({selected:t==e})}))},n._observeProperties=function(){$.observe(this,"showImageSearch",((e,{value:t})=>{t?this._addImageSearchHandlers():this._removeImageSearchHandlers()}))},n._bindEvents=function(){window.addEventListener("spaTransition",(e=>{var t;"SpaSearchEntrypoint"!==(null===(t=e.detail.dest)||void 0===t?void 0:t.name)&&($.observable(this).setProperty({searchText:""}),$.observable(this).setProperty({searchQueryText:""}))})),this.inputEl.addEventListener("focus",(()=>{this.$isDesktop||this._showMobileSearchPopup()})),this.$eventBus.addEventListener("NeedSearchUpdate",(e=>{const{searchText:t}=e.detail;$.observable(this).setProperty({searchText:t}),$.observable(this).setProperty({searchQueryText:t})})),this.$eventBus.addEventListener("RenderImageChip",(e=>{const{imageChipData:t}=e.detail;$.observable(this).setProperty({imageChipData:t})})),this._bindDisplayEvents()},n._bindDisplayEvents=function(){var e;const t=this,n=this._showMobileSearchPopup.bind(this);function s(){var e,s;"m"==wb.settings.displayMode?null===(e=t.searchInputMobileEl)||void 0===e||e.addEventListener("click",n):null===(s=t.searchInputMobileEl)||void 0===s||s.removeEventListener("click",n)}s(),null===(e=wb.displayModeSettings)||void 0===e||e.addObserver((()=>{s()}))},n._addImageSearchHandlers=function(){document.documentElement.addEventListener("click",this._checkImageFormClick)},n._removeImageSearchHandlers=function(){document.documentElement.removeEventListener("click",this._checkImageFormClick)},n._checkImageFormClick=function(e){e.target==this.searchByImageBtnEl||this.searchByImageContainerEl.contains(e.target)||$.observable(this).setProperty({showImageSearch:!1})},n._showMobileSearchPopup=async function(){await $.views.loadTemplateDictionaryAsync("searchSuggestionsTmpl");const e=wb.popup.showCustomPopup({showCross:!1,useCenteredFunction:!0,useHtml:!0,lockScroll:!0,popupClassesList:["popup-search","shown"],contentClasses:["popup__content","popup-search__content"],onShow:async(t,n)=>{const s=new y(this);s.searchByImage=t=>{this.searchByImage(t),e.close()},$.templates.searchMobilePopupTmpl.link(t.querySelector(".popup__content"),s,{close:()=>e.close()}),await n,s.onAfterShown()}})},n._prepareSuggestionsHelper=async function(){const e=await this.$moduleLoader.loadModuleAsync("suggestionsHelper");let t=[[{cacheKey:"historySearch",historiesLimit:20},e.suggestionsTypes.history]];t.push([s,e.suggestionsTypes.grouped]),this.suggestionsHelper=e.createSuggestionsHelper(t)},t}(g),y=function(e){function t(t){var n;return(n=e.call(this)||this).suggestionsHelper=t.suggestionsHelper,n.searchText=t.searchText,n.parentBlock=t,n}return(0,i.A)(t,e),t.prototype.onAfterShown=function(){this.inputEl=document.getElementById("mobileSearchInput"),this.inputElFullPage=document.getElementById("searchInput"),this.inputEl.focus()},t}(g);const v=f;const b=function(){function e(e){var t;this.layoutModel=e,this.container=document.getElementById("balanceBlock"),this.updateBalance=this.updateBalance.bind(this),this.model={balance:0},this._setWalletInfo(null===(t=e.$user.balance)||void 0===t?void 0:t.walletTypeCode)}var t=e.prototype;return t.init=async function(e){e&&await this._fetchBalanceAndLink().catch((e=>Promise.resolve())),this.layoutModel.$eventBus.addEventListener("BalanceReset",this._fetchBalanceAndLink.bind(this)),this.layoutModel.$eventBus.addEventListener("CurrencyChanged",this._fetchBalanceAndLink.bind(this)),this.layoutModel.$eventBus.addEventListener("BalanceUpdated",this.updateBalance.bind(this))},t._fetchBalanceAndLink=async function(){if(!this.layoutModel.$auth.isAuth)return;let e=await this.layoutModel.$user.getBalance();this._link(e.totalBalance||0,(null==e?void 0:e.balanceCurrency)||"RUB")},t._link=function(e,t){void 0!==e&&null!=e&&this.layoutModel.$router.userIsAuth&&!this._isLinked&&(this._isLinked=!0,this.model.balance=e,this.model.balanceCurrency=t,$.link(!0,this.container,this.model),$.observable(this.layoutModel.$userEnv).setProperty({balance:e,balanceCurrency:t}))},t.updateBalance=function(e){const{totalBalance:t,balanceCurrency:n,walletTypeCode:s}=e.detail;this._isLinked?($.observable(this.model).setProperty({balance:t,balanceCurrency:n}),$.observable(this.layoutModel.$userEnv).setProperty({balance:t,balanceCurrency:n})):this._link(t),this._setWalletInfo(s)},t._setWalletInfo=function(e){$.observable(wb.settings).setProperty({balanceTitle:this._getBalanceTitle(e),walletTypeCode:e})},t._getBalanceTitle=function(e=0){return e>0?"WB Кошелёк":"Баланс"},e}();let w=function(){function e(e){this.mainLayout=e;const t=document.querySelector(".j-b-header-country"),n=t.querySelector(".j-b-change-currency");this.tooltip=document.querySelector(".j-tooltip-country"),$.observable(e.$userEnv).setProperty({currency:e.$user.getCurrency()}),this.currentCurrency=e.$user.getCurrency(),this.changeCurrency=this.changeCurrency.bind(this),$.templates({changeCurrencyTmpl:'\n               <h2 class="popup__header">Выберите валюту</h2>\n                <div class="country">\n                    <div class="country__wrap" data-link="{on \'click\' \'.j-currency-item\' changeCurrency}">\n                    {^{radiogroup currentCurrency}}\n                        {^{props ~wbCurrencies sort=sort ^~current=currentCurrency}}\n                            <label class="radio-with-text{{if key == ~current}} radio-with-text--current{{/if}}">\n                                <input class="j-currency-item" type="radio" name="currency" value=\'{{:key}}\' ">\n                                <span class="radio-with-text__text radio-with-text__text--flag">\n                                    <span class="radio-with-text__language"><span class="radio-with-text__flag flag-{{:prop.locale}}"></span>{{:key}}</span>\n                                    <span class="radio-with-text__name">{{:prop.name}}</span>\n                                </span>\n                            </label>\n                        {{/props}}\n                    {{/radiogroup}}\n                    </div>\n                </div>\n        '}),$.templates.changeCurrencyTmpl.link(n,this),$.link(!0,t,this),$.link(!0,document.querySelector(".nav-element__currency"),this),document.addEventListener("click",e.$helper.delegator(".j-currency-show-popup",((e,t)=>this.showPopup())))}var t=e.prototype;return t.showPopup=function(){this.currentPopup=wb.popup.showCustomPopup({useHtml:!0,popupClassesList:["popup-country","j-popup-country","shown"],contentClasses:["popup__content"],useCenteredFunction:!0,modal:!0,closeClass:["j-close","popup__close"],closeSelector:".j-close",onShow:e=>$.templates.changeCurrencyTmpl.link(e.querySelector(".popup__content"),this)})},t.sort=function(e,t){return e.key===this.view.data.currentCurrency?-1:t.key===this.view.data.currentCurrency?1:0},t.changeCurrency=function(e){const t=e.target.value;this.mainLayout.$user.setCurrency(t).then((()=>{var e;$.observable(this.mainLayout.$userEnv).setProperty({currency:t}),this.mainLayout.$eventBus.dispatchEvent(new CustomEvent("CurrencyChanged",{detail:{currency:t}})),null===(e=this.currentPopup)||void 0===e||e.close()})),this.tooltip||(this.tooltip=document.querySelector(".j-tooltip-country")),this._closeTooltip()},t.refresh=function(e){wb.currencies.info[e]&&$.observable(this).setProperty("currentCurrency",e)},t._closeTooltip=function(){if(this.tooltip)return this.tooltip.style.pointerEvents="none",setTimeout((()=>this.tooltip.style.pointerEvents="auto"),100)},e}();const S=w;let _=function(){function e(e){this.layoutModel=e.layoutModel,this.shortBasketInfo=new r(e),this.search=new v,this.chatStartedRefunds=new this.layoutModel.$helper.Deferred}var t=e.prototype;return t._initOnlineChat=function(e){setTimeout((()=>{this.layoutModel.$moduleLoader.loadModuleAsync("onlineChatPopup").then((t=>{var n,s;this.onlineChat=new t({auth:e.isAuth,uid:e.isAuth?e.uid:e.basketUid,startedRefunds:this.chatStartedRefunds}).init(),wb.displayModeSettings.removeObserver(this.onlineChat.onBreakpoint),(null===(s=null===(n=wb.global.settings)||void 0===n?void 0:n.switches)||void 0===s?void 0:s.enableOnlineChat)?(wb.displayModeSettings.addObserver(this.onlineChat.onBreakpoint,!0),this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("OnlineChatInited"))):wb.global.subscribe((()=>{!this.onlineChat.inited&&wb.global.settings.switches.enableOnlineChat&&(wb.displayModeSettings.addObserver(this.onlineChat.onBreakpoint,!0),this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("OnlineChatInited")))})),wb.global.subscribe((e=>{const t=e.switches.enableSellersChat;this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("SellersChatSwitched",{detail:t}))}))}))}),5e3)},t.init=async function(){this.userBalance=new b(this.layoutModel),this.changeCurrency=new S(this.layoutModel),this.shortBasketInfo.init();const e=WbSpaModel.prototype.$geoLocation.initPreferredLocation(),t=this.search.init();this.bindSignOut(),this.bindStat();const n=this.layoutModel.$user.getUserInfo();return this._initOnlineChat(n),this.userBalance.init(n.isAuth),Promise.all([e,t])},t.bindSignOut=function(){document.addEventListener("click",(e=>{const t=e.target.closest("a");null==t||e._preventRouterTransition||t.href.endsWith("/security/exit")&&(e.preventDefault(),this.signOut())}))},t.signOut=function(e){this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("onBeforeSignOut")),this.layoutModel.$user.clearLocalUserData(),this.layoutModel.$auth.signOut(e)},t.bindStat=function(){const e=this.layoutModel.$analitic;const t=document.querySelector(".j-header");null==t||t.addEventListener("click",this.layoutModel.$helper.delegator(".j-wba-header-item",(function(t){const n=t.target.closest(".j-wba-header-item");n&&e.sendEvent("Header_T",{name:n.dataset.wbaHeaderName})})));const n=document.querySelector(".j-country");null==n||n.addEventListener("click",this.layoutModel.$helper.delegator(".j-country-item input",(function(t){const n=t.target.closest(".j-country-item input");n&&e.sendEvent("Header_Country_Apl",{name:n.value})})))},e}();const C=_;let k=function(e){function t(){var t;return(t=e.call(this)||this).bannersLoaded=!1,t.footerBanners=[],t._onChangeDisplayMode=t._onChangeDisplayMode.bind(t),t._loadBanners=t._loadBanners.bind(t),t.$eventBus.addEventListener("GeoUpdated",(()=>{"ru"!==wb.settings.currentLocale&&t.$observable.setProperty({userLocale:t.$user.getLocale()}),t._loadBanners(!0)})),t}(0,i.A)(t,e);var n=t.prototype;return n.init=async function(){await this.$helper.loadJsAsync(wb.settings.scripts.bannersTag),this.userLocale="ru"!==wb.settings.currentLocale&&this.$user.getLocale()||"ru";const e=document.querySelector(".j-footer");$.link(!0,e,this),this.showFooterObserver=WbSpaModel.prototype.$observerHelper.getVerticalObserver(e),e.addEventListener(this.showFooterObserver.elementInViewportEventName,(()=>{this._loadBanners(),WbSpaModel.prototype.$analitic.sendEvent("Footer_S")})),this.showFooterObserver.observe()},n.onMenuSelected=function(e){if("m"!==wb.settings.displayMode)return;e.currentTarget.parentNode.classList.toggle("dropdown-open")},n.sendStatEvent=function(e){const t=e.currentTarget;t&&WbSpaModel.prototype.$analitic.sendEvent("Footer_T",{name:t.dataset.wbaFooterName})},n._onChangeDisplayMode=function(){this._setBanners()},n._setBanners=function(){if(!this.banners)return;const e="phone"==wb.settings.displayType;$.observable(this).setProperty({footerBanners:e?this.banners.mobileBanners:this.banners.desktopBanners})},n._loadBanners=async function(e){if(this.bannersLoaded&&!e)return;this.bannersLoaded=!0;const[t]=await Promise.all([this.$services.bannersService.getBannersForFooterAsync(),this.$helper.loadJsAsync(wb.settings.scripts.swiper)]);this.banners=t,this._onChangeDisplayMode(),!e&&$.observe(wb.settings,"displayType",this._onChangeDisplayMode)},t}(WbSpaModel);const I=k,M=Object.freeze({UNKNOWN:"unknown",HOME:"home",CATALOG:"catalog",PRODUCTCARD:"product-card",SECURITY:"security",BASKET:"basket",PONED:"poned",PROFILE:"profile",ARCHIVE:"archive",ORDERS:"orders",SERVICES:"services",CLAIMS:"claims",COMMUNICATIONS:"communications",SUBSCRIPTION:"subscription"});const P=function(){function e(){}return e.getType=function(){const e=location.pathname.toLowerCase();return"/"==e?M.HOME:/\/catalog\/\d+\/detail\.aspx/.test(e)?M.PRODUCTCARD:e.startsWith("/catalog")?M.CATALOG:e.startsWith("/subscription")?M.SUBSCRIPTION:e.startsWith("/security")?M.SECURITY:e.startsWith("/lk/basket")?M.BASKET:e.startsWith("/lk/favorites")?M.PONED:e.startsWith("/lk/myorders/archive")?M.ARCHIVE:e.startsWith("/lk/myorders/delivery")?M.ORDERS:e.startsWith("/lk/claims")||e.startsWith("/lk/refund")?M.CLAIMS:e.startsWith("/lk/communications")?M.COMMUNICATIONS:e.startsWith("/lk")?M.PROFILE:e.startsWith("/services/")||e.startsWith("/promo/")||e.startsWith("/presservice")?M.SERVICES:M.UNKNOWN},(0,o.A)(e,null,[{key:"types",get:function(){return M}}])}();const O=function(e){function t(){var t,n,s;return(t=e.call(this)||this).navbarContainer=document.querySelector(".j-navbar-mobile"),t.navbarMenuLink=null===(n=t.navbarContainer)||void 0===n?void 0:n.querySelector("#catalogNavbarLink"),t.currentType=P.getType(),t.menuModel={type:t.currentType,catalogState:!1,router:t.$router,isPremium:!!t.$auth.isAuth&&(null===(s=t.$user.getUserGradeFromCache())||void 0===s?void 0:s.isPremium)},t.catalogState=!1,t}(0,i.A)(t,e);var n=t.prototype;return n.init=function(){this._bindEvents(),$.link(!0,this.navbarContainer,this.menuModel,{sendAnalytics:e=>{const t=e.target.closest(".navbar-mobile__link");t&&this.$analitic.sendEvent("Header_T",{name:t.dataset.wbaHeaderName})},showPopupLoginMobile:e=>{!1===this.$router.userIsAuth&&(e.preventDefault(),wb.popup.showCustomPopup({useHtml:!0,popupClassesList:["popup-login-mobile","shown"],contentClasses:["popup__content"],useCenteredFunction:!0,onShow:e=>{$.views.templates.popupLoginMobile.link(e.querySelector(".popup__content"),this)}}))}})},n.setType=function(e){this.catalogState=e==this.types.CATALOG,this.catalogState?e=null:this.currentType=e,$.observable(this.menuModel).setProperty({catalogState:this.catalogState,type:e})},n.setCatalog=function(){this.setType("catalog")},n.isCatalog=function(){return this.catalogState},n.isNavbarLink=function(e){return!!e.closest(".navbar-mobile__link")},n.revertActive=function(){this.setType(this.currentType)},n.updatePremiumState=function(){var e;$.observable(this.menuModel).setProperty({isPremium:null===(e=this.$user.getUserGradeFromCache())||void 0===e?void 0:e.isPremium})},n.updateBasket=function(e){$.observable(this.menuModel).setProperty({basketCount:e})},n.updateEvents=function(e){$.observable(this.menuModel).setProperty({eventsModel:e})},n._bindEvents=function(){window.addEventListener("spaTransition",(e=>{e.detail.isFinished||(this.currentType=P.getType(),this.$eventBus.dispatchEvent(new CustomEvent("MobileMenuTypeChange",{detail:{currentType:this.currentType}})))})),this.$eventBus.addEventListener("OnlineChatInited",(e=>{this.$eventBus.dispatchEvent(new CustomEvent("MobileMenuTypeChange",{detail:{currentType:this.currentType,isInit:!0}}))})),this.$eventBus.addEventListener("MobileMenuTypeChange",(e=>{const{currentType:t}=e.detail;let n="";switch(t){case P.types.HOME:case P.types.BASKET:case P.types.PONED:case P.types.ARCHIVE:case P.types.ORDERS:case P.types.PROFILE:case P.types.SUBSCRIPTION:n=t;break;case P.types.SECURITY:n=P.types.PROFILE}this.setType(n)})),this.$eventBus.addEventListener("UserGradeUpdated",this.updatePremiumState.bind(this))},(0,o.A)(t,[{key:"menuLink",get:function(){return this.navbarMenuLink}},{key:"types",get:function(){return P.types}}])}(WbSpaModel);const T=function(){function e(e){this.delay=e.delay,this.menuContainer=e.menuContainer,this.timerId=null,this.updateFirstLvlMenuTask=null,this.success=!1,this.menuItemsUpdated=null}var t=e.prototype;return t.lazyUpdateMenu=function(){this.timerId=setTimeout(this._setUpdateFirstLvlMenuTask.bind(this),this.delay)},t.forceUpdateMenu=async function(){this._setUpdateFirstLvlMenuTask();try{const e=await this.updateFirstLvlMenuTask;return Promise.resolve(e)}catch(e){return Promise.reject(!1)}},t.reloadMenu=function(){this.updateFirstLvlMenuTask=null,this.forceUpdateMenu()},t._stopUpdatingMenu=function(){this.timerId&&clearTimeout(this.timerId)},t._setUpdateFirstLvlMenuTask=function(){this.updateFirstLvlMenuTask&&this.success||(this.updateFirstLvlMenuTask=this._updateFirstLvlMenu()),this._stopUpdatingMenu()},t._updateFirstLvlMenu=async function(){const[e]=await Promise.all([wb.spa.getCatalogMenu(),$.views.loadTemplateDictionaryAsync("menuTopTmpl")]),t=e.fullMenu;return this.menuItemsUpdated=await this._addMenuItemsFirstLvl(t,this.menuContainer),this.success=!0,Promise.resolve(e)},t._addMenuItemsFirstLvl=async function(e,t){var n;const s=t.querySelector(".menu-burger__main-list");let i=s.querySelectorAll(".j-menu-main-item"),r=null,o=!0,a=0;for(let t=0;t<e.length;t++){const l=e[t];if(o&&(r=null==i?void 0:i[a]),l.id==(null===(n=null==r?void 0:r.dataset)||void 0===n?void 0:n.menuId)){o=!0,a++;continue}o=!1;const c=$.templates.menuFirstLvlTmpl.render(l);r?r.insertAdjacentHTML("beforebegin",c):s.insertAdjacentHTML("beforeend",c)}if(i=t.querySelectorAll(".j-menu-main-item"),e.length<i.length)for(let t=e.length;t<i.length;t++)i[t].remove();return Promise.resolve(i)},e}();let A=function(e){function t(t){var n;return(n=e.call(this)||this).mobileMenu=new O,n.layoutModel=t.layoutModel,n.menuBtn=document.querySelector(".j-menu-burger-btn"),n.menuContainer=document.querySelector(".j-menu-burger"),n.mainMenuContainer=n.menuContainer.querySelector(".j-menu-burger-main"),n.header=document.querySelector(".j-header"),n.widthScrollbar=Math.abs(window.innerWidth-document.documentElement.clientWidth),n.bodyOverflowClass="body--overflow",n.menuContainerActiveClass="menu-burger--active",n.innerMenuContainerActiveClass="menu-burger__drop--active",n.innerMenuItemActiveClass="menu-burger__drop-list-item--active",n.menuActiveClass="j-menu-active",n.mainMenuItemActiveClass="menu-burger__main-list-item--active",n.headerFixedClass="header--fixed",n.headerFixedAnimateClass="header--fixed-animate",n.menuItemActiveClass="menu-burger__drop-list-item--active",n.menuBtnCloseClass="nav-element__burger--close",n.menuOverlay=n._getMenuOverlay(document.body.querySelector(".j-menu-burger")),n._menuOpenHandler=n._menuOpenHandler.bind(n),n._menuCloseHandler=n._menuCloseHandler.bind(n),n.firstLvlMenuUpdater=new T({menuContainer:n.menuContainer,delay:12e3}),n.firstLvlMenuUpdater.lazyUpdateMenu(),n}(0,i.A)(t,e);var n=t.prototype;return n.isMenuOpened=function(){return this.menuContainer.classList.contains(this.menuContainerActiveClass)},n.init=function(){this.mobileMenu.init(),this._bindEvents(),this._initMobileSearchbar(!this.$isDesktop)},n._initMobileSearchbar=function(e){const t=this.mobileMenu.types;let n=0,s=!1,i="";function r(){s||(window.requestAnimationFrame(a.bind(this)),s=!0)}r=r.bind(this);const o=(e,t)=>{e?(this.header.classList.add(this.headerFixedClass),window.requestAnimationFrame((()=>this.header.classList.add(this.headerFixedAnimateClass)))):(t&&this.header.classList.remove(this.headerFixedClass),window.requestAnimationFrame((()=>this.header.classList.remove(this.headerFixedAnimateClass))))};function a(){const e=window.scrollY;if(Math.abs(e-n)<0)return void(s=!1);if(e<=this.headerFixedScrollTop)return o(!1,!0),void(s=!1);const t=e>n;t&&"down"!=i?(this.$isDesktop?o(!0):o(!1),i="down"):t||"up"==i||(o(!0),i="up"),n=e>0?e:0,s=!1}const l=e=>{const{currentType:n}=e.detail;n==t.PRODUCTCARD?this.header.classList.add("hide-mobile"):this.header.classList.remove("hide-mobile"),n==t.HOME||n==t.SERVICES?window.addEventListener("scroll",r):(this.header.classList.remove(this.headerFixedClass,this.headerFixedAnimateClass),window.removeEventListener("scroll",r))};this.$eventBus.addEventListener("MobileMenuTypeChange",l);l({detail:{currentType:P.getType()}})},n._renderInnerMenu=async function(){var e,t;const[n,s,i]=await Promise.all([this.layoutModel.$moduleLoader.loadModuleAsync("sideMenu"),this.firstLvlMenuUpdater.forceUpdateMenu()]),r=this.layoutModel.$services.bannersService.getMenuBanners(),o=new n(this.menuContainer,s,r);return o.checkMenuItemForHide(o.menuItems,null===(t=null===(e=this.$geoLocation)||void 0===e?void 0:e.location)||void 0===t?void 0:t.destinations),o.relinkModel(),o.onSearchImage=()=>this._onMenuHide(),o},n._bindEvents=function(){var e,t,n;this.menuBtn.addEventListener("mousedown",this._menuOpenHandler),null===(t=null===(e=this.mobileMenu)||void 0===e?void 0:e.menuLink)||void 0===t||t.addEventListener("mousedown",this._menuOpenHandler),null===(n=wb.displayModeSettings)||void 0===n||n.addObserver((()=>{this._onMenuHide(),this._initMobileSearchbar(!this.$isDesktop)})),window.addEventListener("spaTransition",(e=>{e.detail.isFinished&&this._onMenuHide()})),this.$eventBus.addEventListener("HideSideMenu",(()=>{this.isMenuOpened()&&(document.body.classList.remove(this.bodyOverflowClass),document.body.style.paddingRight="")})),this.$eventBus.addEventListener("SelectedSideMenuItemUpdated",(e=>{const{menuId:t}=e.detail;this.mainMenuItems.forEach((e=>e.classList.toggle(this.mainMenuItemActiveClass,e.dataset.menuId==t)))}))},n._bindMenuCloseHandlers=function(){document.addEventListener("mousedown",this._menuCloseHandler)},n._unbindMenuCloseHandlers=function(){document.removeEventListener("mousedown",this._menuCloseHandler)},n._menuOpenHandler=function(e){if(this.isMenuOpened()||!this.$isDesktop&&this.mobileMenu.isCatalog())return;e.stopPropagation(),e.preventDefault();const t=e.currentTarget;let n="touchstart"===e.type?"touchend":"mouseup";const s=()=>{t.removeEventListener(n,s),this.layoutModel.$helper.loadCssAsync(wb.settings.styles.menuBurger).then((()=>this._onMenuShow()))};t.addEventListener(n,s),this.visibleCertItemMenu&&wb.analitics.sendEvent("Certificate_S",{location:"Catalog"})},n._menuCloseHandler=function(e){var t;const n=e.target,s=this;if(!(this.$isDesktop&&n.closest(`.${this.menuActiveClass}`)||!this.$isDesktop&&!this.mobileMenu.isNavbarLink(n)&&!this.menuBtn.contains(n)))if(this.$isDesktop){const r=e.currentTarget,o="touchstart"===e.type?"touchend":"mouseup";function a(){r.removeEventListener(o,a),i()}r.addEventListener(o,a)}else null===(t=this.sideMenu)||void 0===t||t.touchHandlerHelper(e,i);function i(){s._onMenuHide()}},n.refreshMenu=function(e){e&&(wb.spa.clearCatalogMenu(),this.firstLvlMenuUpdater.reloadMenu()),this.menuRendered=!1,!this.$isDesktop&&this.isMenuOpened()&&this._onMenuShow()},n._onMenuShow=async function(){var e;if(document.body.classList.add(this.bodyOverflowClass),document.body.style.paddingRight=`${this.widthScrollbar}px`,"d"===wb.settings.displayMode&&scrollY<=this.header.offsetHeight&&document.documentElement.style.setProperty("--scroll-top",window.scrollY+"px"),this.menuContainer.classList.add(this.menuContainerActiveClass),this.mainMenuContainer.classList.add(this.menuActiveClass),this.menuBtn.classList.add(this.menuBtnCloseClass),this.menuOverlay.show(),!this.$isDesktop&&this.mobileMenu.setCatalog(),this._bindMenuCloseHandlers(),this.menuRendered)null===(e=this.sideMenu)||void 0===e||e.clearShownBanners();else{const e=await this._renderInnerMenu();this.sideMenu=e,this.mainMenuItems.forEach((e=>{var t,n,s;if(!this.$isDesktop&&("2192"===e.dataset.id||"4853"===e.dataset.id))return;const i=this.sideMenu.findItem(e.dataset.menuId);i&&(((null===(t=i.childs)||void 0===t?void 0:t.length)>0||(null===(n=i.banners)||void 0===n?void 0:n.length)>0)&&e.classList.add("menu-burger__main-list-item--subcategory"),e.classList.toggle("hide",null!==(s=i.hide)&&void 0!==s&&s),1234===i.id&&(this.visibleCertItemMenu=!0,wb.analitics.sendEvent("Certificate_S",{location:"Catalog"})))})),this.menuRendered=!0}this._menuMainHoverHandler()},n._onMenuHide=function(){var e,t;null===(e=this.sideMenu)||void 0===e||e.changeSelectedMenuItem(null),null===(t=this.sideMenu)||void 0===t||t.innerMenuHide(),document.body.classList.remove(this.bodyOverflowClass),document.body.style.paddingRight="",this.menuContainer.classList.remove(this.menuContainerActiveClass),this.mainMenuContainer.classList.remove(this.menuActiveClass),this.menuBtn.classList.remove(this.menuBtnCloseClass),this.menuOverlay.hide(),!this.$isDesktop&&this.mobileMenu.revertActive(),this._unbindMenuCloseHandlers()},n._menuMainHoverHandler=function(){!this.subMenuShowerActivated&&this.$isDesktop&&(this.layoutModel.$moduleLoader.loadModuleAsync("subMenuShower").then((e=>new e(this.mainMenuItems,{over:e=>{this.$isDesktop&&this.sideMenu.onMenuSelected(e)},out:()=>{},timeout:30,interval:40,sensitivity:4}))),this.subMenuShowerActivated=!0)},n._getMenuOverlay=function(e){const t=e;let n;function s(){n&&n.remove(),n=null}return{show:function(){"m"!=wb.settings.displayMode?n||(t.insertAdjacentHTML("beforebegin",'<div class="overlay overlay--menu-burger j-overlay"></div>'),n=e.parentElement.querySelector(".j-overlay")):s()},hide:s}},(0,o.A)(t,[{key:"headerFixedScrollTop",get:function(){return this.$isDesktop?24:400}},{key:"mainMenuItems",get:function(){var e;return(null===(e=this.firstLvlMenuUpdater)||void 0===e?void 0:e.menuItemsUpdated)?this.firstLvlMenuUpdater.menuItemsUpdated:this.menuContainer.querySelectorAll(".menu-burger__main-list-item")}}])}(WbSpaModel);const D=A,E="cookie_accepted",x="_cp";const B=function(){function e(e){this.layoutModel=e.layoutModel,this.cookiesWrapper=document.querySelector(".j-fixed-block .fixed-block__cookies"),this.check()}var t=e.prototype;return t.disable=function(){wb.cookieHelper.deleteCookie(x),window.location.reload()},t._show=function(){var e;(null===(e=this.cookiesWrapper)||void 0===e?void 0:e.classList.contains("hide"))&&($.link(!0,this.cookiesWrapper,this),this.cookiesWrapper.classList.remove("hide"),this.layoutModel.$analitic.sendEvent("Alert_S",{name:"cookies_alert"}),window.BroadcastChannel&&(this.channel=new BroadcastChannel("_cookiePolicy"),this.channel.addEventListener("message",this._hide.bind(this))))},t._hide=function(){var e,t,n;(null===(e=this.cookiesWrapper)||void 0===e?void 0:e.classList.contains("hide"))||(null===(t=this.cookiesWrapper)||void 0===t||t.classList.add("hide"),$.unlink(this.cookiesWrapper),null===(n=this.channel)||void 0===n||n.close(),this.channel=null,this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("CookiePolicyHide")))},t.check=function(){const e="1"===wb.cookieHelper.getCookie(x)||"true"===localStorage.getItem("wbx__cookieAccepted");return e?this._hide():"false"!==sessionStorage.getItem(E)&&this._show(),e},t.ok=function(){var e;const t=this.check();t||wb.cookieHelper.setCookie(x,"1",{"max-age":7776e3}),this.cookiesWrapper&&(null===(e=this.channel)||void 0===e||e.postMessage("hide"),this._hide(),t||this.layoutModel.$analitic.sendEvent("Alert_T",{name:"cookies_alert",type:"ok"}))},t.no=function(){sessionStorage.setItem(E,"false"),this._hide(),this.layoutModel.$analitic.sendEvent("Alert_T",{name:"cookies_alert",type:"no"})},t.cookies=function(){this.layoutModel.$analitic.sendEvent("Alert_T",{name:"cookies_alert",type:"cookies"})},e}();let j=function(){function e(e){this.$base=e.layoutModel,this.$base.$eventBus.addEventListener("onUserAuth",this._onAuthLogin.bind(this)),this.$base.$auth.isAuth&&window.addEventListener("spaTransition",(e=>{e.detail.isFinished&&this._onAuthLogin()}),{once:!0})}var t=e.prototype;return t._loadResources=function(){return this.$base.$moduleLoader.loadModuleAsync("offer0724").then((e=>{this.oferta||(this.oferta=new e)}))},t._onAuthLogin=function(){this._loadResources().then((e=>{this.oferta.show()}))},t.confirm=async function(){var e;this.$base.$auth.isAuth&&(await this._loadResources(),null===(e=this.oferta)||void 0===e||e.confirm())},t.promise=async function(){var e;if(this.$base.$auth.isAuth)return await this._loadResources(),(null===(e=this.oferta)||void 0===e?void 0:e.promise())||new Promise((e=>e()))},e}();const L=j;let N=function(e){function t(){var t;return(t=e.call(this)||this).initTask=new t.$helper.Deferred,t._initWba=t._initWba.bind(t),t}(0,i.A)(t,e);var n=t.prototype;return n.preInit=function(){const e={layoutModel:this};this.header=new C(e),this.oferta=new L(e),this.cookiePolicy=new B(e),["by"].includes(wb.settings.currentLocale)?this.cookiePolicy.check()?this._initWba():(this._initWba(!0),this.$eventBus.addEventListener("CookiePolicyHide",(()=>{this.cookiePolicy.check()?this._initWba():window.wba=function(){}}),{once:!0})):this._initWba()},n.init=function(){const e={layoutModel:this};this.footer=new I,this.menuTop=new D(e),this.menuTop.init();const t=this.footer.init(),n=this.header.init();Promise.all([t,n]).then((()=>this.initTask.resolve()))},n._initWba=function(e=!1){var t,n,s,i,r,o;t=window,n=document,s="script",t[i="wba"]=t[i]||function(){(t[i].q=t[i].q||[]).push(arguments)},t[i].l=Date.now(),e||(r=n.createElement(s),o=n.getElementsByTagName(s)[0],r.async=1,r.src="https://a.wb.ru/sdk/sdk.js",o.parentNode.insertBefore(r,o)),wba("init",{counterId:4})},n.updateAfterLogin=function(){this.$user.reset(),this.header.shortBasketInfo.update(),this.$geoLocation.updateLocation(),this.$router.clearNotActiveContainer()},t}(WbSpaModel);Object.defineProperties(window,{MainLayoutSpa:{value:N}});const R=N},14196:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const s="spa_history";new Set;let i=function(){function e(){this.history=new r}var t=e.prototype;return t.addItem=function(e){this.history.push(e),this._updateCache()},t.tryInitFromCache=function(e){const t=sessionStorage.getObject(s);return t&&e&&this.history.tryRevokeFromCache(t)&&this.history.findCurrent(e),this},t.updateCurrent=function(e){this.history.findCurrent(e)},t.updateCurrentItem=function(e){this.history.tryUpdateCurrrent(e)||this.history.push(e),this._updateCache()},t.canMove=function(e){return this.history.canMove(e)},t._updateCache=function(){sessionStorage.putObject(s,this.history)},e.generateId=function(){return WbSpaModel.prototype.$generateGuid()},e}(),r=function(){function e(){this.head=null,this.current=null}var t=e.prototype;return t.push=function(e){const t=new o(e,this.current);null==this.head||null==this.current?this.head=t:this.current.updateNext(t),this.current=t},t.tryUpdateCurrrent=function(e){return null!=this.current&&(this.current.update(e),!0)},t.findCurrent=function(e){const{id:t}=e;let n=this.head;for(;n;){if(n.state.id==t){this.current=n;break}n=n.next}},t.tryRevokeFromCache=function(e){const t=e.reduce(((e,t)=>(e.set(t.state,new o(t.state)),e)),new Map);e.forEach((e=>{const n=t.get(e.state);if(e.next){const s=t.find((t=>t.state.id==e.next));n.updateNext(s)}if(e.previous){const s=t.find((t=>t.state.id==e.previous));n.updatePrevious(s)}}));const n=t.find((e=>null==e.previous));return!!n&&(this.head=n,!0)},t.toJSON=function(){var e,t;let n=this.head;const s=[];for(;n;)s.push({state:n.state,next:null===(e=n.next)||void 0===e?void 0:e.state.id,previous:null===(t=n.previous)||void 0===t?void 0:t.state.id}),n=n.next;return s},t.canMove=function(e){let t=this.current,n=e>0?-1:1,s=e>0?"next":"previous",i=e;for(;0!=i;)if(t=t[s],i+=n,null==t)return;return!0},e}(),o=function(){function e(e,t){this.state=e,this.previous=t,this.next=null}var t=e.prototype;return t.updateNext=function(e){this.next=e},t.updatePrevious=function(e){this.previous=e},t.update=function(e){this.state=e},e}();const a=i},30694:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(92901),_customHistory_customHistory__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14196),__rest=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n};const DEFAULT_PREVIEW="preview_General",APP_CONTAINERS=Object.freeze([{containerId:0,viewModel:null},{containerId:1,viewModel:null},{containerId:2,viewModel:null}]),VIEW_MODEL_STATUSES=Object.freeze({prepearing:0,readyToInstall:1,installed:2,destroyed:3}),VALID_EXTERNAL_DOMAINS=Object.freeze(["vmeste.wildberries.ru","vmeste-stage.wildberries.ru","digital.wildberries.ru","vsemrabota.ru","guru.wildberries.ru","guru-stage.wildberries.ru","travel.wildberries.ru","digital.wb.ru","seller.wildberries.ru","career.wb.ru"]);let Router=function(){function Router(){}var _proto=Router.prototype;return _proto.init=async function(e){var t,n;this.customHistory=(new _customHistory_customHistory__WEBPACK_IMPORTED_MODULE_0__.A).tryInitFromCache(window.history.state),this.abortController=new AbortController,this.routeParameters={},this.clientRenderInited=!1,this.referrer=document.referrer,Object.defineProperty(document,"referrer",{get:function(){return WbSpaModel.prototype.$router.referrer}});let s=null===(t=this._findRoute(window.location.pathname))||void 0===t?void 0:t.name;if(!s){try{const e=await this.$httpClient.fetchJSON(`/webapi/check-redirect${window.location.pathname}${window.location.search}`);(null==e?void 0:e.redirect)&&(s=null===(n=this._findRoute(window.location.pathname))||void 0===n?void 0:n.name)}catch(e){}if(!s)return this._bindEvents(),this.moveTo404Async()}this.currentRoute=this.routesDictionary[s],this.targetRoute=s,this._bindEvents();const i=this.routesDictionary[s].useSSR;return i||(this.current=$.templates["preview_"+s]?"preview_"+s:DEFAULT_PREVIEW),this._replaceState({name:s},document.title,window.location.href),this.loadingTemplate=s,i&&null!=e?this._initSSR(e,s):this._routerTransitionAsync(s,window.location,!0).then((({needStateUpdate:e})=>Promise.resolve(e))).catch((e=>(console.log(e),e.isCancelled||this.moveTo500Async(),Promise.resolve())))},_proto.setData=function(e,t){this.routesDictionary=e,this.tmplHashes=t},_proto.refresh=function(){const e=this.currentRoute;this.clearNotActiveContainer(),this.goToRoute(e,window.location,!0)},_proto.clearNotActiveContainer=function(){this.appContainers.filter((e=>e.containerId!==this.activeContainer)).forEach((e=>{var t,n;null!==e.viewModel&&((null===(t=e.viewModel)||void 0===t?void 0:t.__modelStatus__)!=VIEW_MODEL_STATUSES.destroyed&&(null===(n=e.viewModel)||void 0===n||n.onBeforeUnrender()),e.viewModel=null)}))},_proto.move=function(e,t){var n;null==(null===(n=null==t?void 0:t.currentTarget)||void 0===n?void 0:n.href)?window.history.go(e):this.customHistory.canMove(e)&&(t.preventDefault(),window.history.go(e))},_proto.moveTo=function(e,t=!1,n=!1,s=!1){var i,r,o;let a;try{a=new URL(e,window.location.origin)}catch(e){return!1}if("javascript:"===a.protocol)return!1;if(VALID_EXTERNAL_DOMAINS.includes(a.host))return window.location=a.toString(),!1;const l=this._findRoute(a.pathname);if(null==l||null==this.routesDictionary[l.name]||a.hostname!==window.location.hostname)return this.isLeaving=!0,t?window.location.replace(encodeURIComponent(e)):window.location=e;this.isLeaving=!1,(null===(i=this.currentRoute)||void 0===i?void 0:i.name)===l.name&&window.dispatchEvent(new CustomEvent("spaTransition",{detail:{isFinished:!0,dest:l}})),a.pathname!==window.location.pathname||window.location.search!==a.search||n?(this.targetRoute=l.name,this.referrer=window.location.href,t?this._replaceState({name:l.name},document.title,a.href):this._pushState({name:l.name},document.title,a.href),this.goToRoute(l,a,s).then((e=>{e&&this._replaceState({name:l.name},document.title,a.href)})).catch((()=>{}))):null===(o=null===(r=this.viewModel)||void 0===r?void 0:r.onSamePageNavigation)||void 0===o||o.call(r,e)},_proto.goToRoute=function(e,t,n=!1){return window.dispatchEvent(new CustomEvent("spaTransition",{detail:{isFinished:!1,dest:e}})),this._routerTransitionAsync(e.name,t,!1,n,!0)},_proto.getAppliedEntries=function(){var e;const t=document&&(null===(e=document.currentScript)||void 0===e?void 0:e.src);let n;return n="currentScript"in document?t.includes("static-basket")?t.replace(/https?:/,""):t.replace(window.origin,""):this.routesDictionary[this.loadingTemplate].requiredModel,Object.keys(this.routesDictionary).filter((e=>this.routesDictionary[e].requiredModel===n))},_proto.prepareUrl=function(e){if(null==e.routePathSegments)return e.path;const t=e.routePathSegments.reduce(((e,t)=>(e+="/",t.isParameter?(!t.isOptional||t.isOptional&&null!=this.routeParameters[t.name])&&(e+=this.routeParameters[t.name]):e+=t.content,e)),"").replace(/[\/\?]$/,"");return e.externalPath?e.externalPath+t:t},_proto.addState=function(e,t,n){var s;this._pushState(Object.assign({isLocalHandler:!0,name:(null===(s=this.currentRoute)||void 0===s?void 0:s.name)||""},e),t,n)},_proto.replaceState=function(e,t,n){var s;this._replaceState(Object.assign({isLocalHandler:!0,name:(null===(s=this.currentRoute)||void 0===s?void 0:s.name)||""},e),t,n)},_proto._pushState=function(e,t,n){const s=_customHistory_customHistory__WEBPACK_IMPORTED_MODULE_0__.A.generateId();e.id=s,window.history.pushState(e,t,n),this.customHistory.addItem(e)},_proto._replaceState=function(e,t,n){e.id=_customHistory_customHistory__WEBPACK_IMPORTED_MODULE_0__.A.generateId(),e.title=t,window.history.replaceState(e,"",n),this.customHistory.updateCurrentItem(e)},_proto.initCSR=function(){const e=Object.create(WbSpaModel.prototype,{router:{value:this}});$.link.appTemplate("#app",e),this.clientRenderInited=!0},_proto.updateRouteDataExternal=async function(e,t){var n;t=t||(null===(n=this.currentRoute)||void 0===n?void 0:n.name)||"",await this._updateRouteData(t,e)},_proto.moveTo404Async=async function(){const e=await this.$moduleLoader.loadModuleAsync("error404"),t=new e(e.data,e.template);await t.showErrorPage(),window.dispatchEvent(new CustomEvent("spaTransition",{detail:{isFinished:!0}}))},_proto.moveTo500Async=async function(e,t){try{await Promise.all([this.$helper.loadCssAsync(wb.settings.styles.error500),this.$helper.loadJsAsync(wb.settings.scripts.spaRecommendationCarousel)]),this._updateRouteData("criticalError")}catch(e){console.error(e),this._updateRouteData("absoluteCriticalError")}finally{wb.spa.logError(e,t,!0)}},_proto.loadRouteDataAsync=async function(e,t=0,n=!1,s=!1){var i,r,o,a,l;const c=this.$routeExtensions.extend(null==e?void 0:e.name);let u;try{if(!e)return{viewData:{},needStateUpdate:!1};u={url:new URL(`${this.prepareUrl(e)}?${this.queryParams.toString()}`,window.location.origin),params:{method:"POST"},options:{redirectUnauth:!0,replaceState:!0,includeResponse:!0}},await Promise.all((null!==(i=null==c?void 0:c.pipelines)&&void 0!==i?i:[]).map((e=>{var n;return null===(n=e.onBeforeActionExecuting)||void 0===n?void 0:n.call(e,u.url,u.params,u.options,s,t)})));const n=[];u.options.cancelRequest||u.options.redirected?n.push(Promise.resolve({})):n.push(this.$httpClient.fetchJSON(u.url.toString(),u.params,u.options)),n.push(...(null!==(r=null==c?void 0:c.pipelines)&&void 0!==r?r:[]).map((e=>{var n;return null===(n=e.onActionExecuting)||void 0===n?void 0:n.call(e,u.url,u.params,u.options,s,t)})));const[l]=await Promise.all(n);u.options.redirected||await Promise.all((null!==(o=null==c?void 0:c.pipelines)&&void 0!==o?o:[]).map((e=>{var t;return null===(t=e.onActionExecuted)||void 0===t?void 0:t.call(e,l,s)})));let d=l.responseData;return u.options.cancelRequest&&(null==c?void 0:c.fallback)&&(d=null==c?void 0:c.fallback(u)),{viewData:d,needStateUpdate:!1,needRouteUpdate:!(null!==(a=u.options.redirected)&&void 0!==a&&a)}}catch(s){const i=null!==(l=c.maxTriesCount)&&void 0!==l?l:3;if(s.isNotFound||s.isUnauthorize||s.isCancelled||t>=i||n){if((null==c?void 0:c.fallback)&&(s.isCancelled||t>=i))return{viewData:null==c?void 0:c.fallback(u),needStateUpdate:!1};throw s}return await this.loadRouteDataAsync(e,++t)}},_proto.moveToSignIn=function(e,t){let n=$.views.helpers.urlSignIn(e&&e.query&&e.query.returnUrl);this.moveTo(new URL(n,window.location.href).href,t)},_proto._bindEvents=function(){window.addEventListener("popstate",(e=>{var t,n,s;this.$analitic.updateStatInfo(!1);const{name:i,isLocalHandler:r,title:o}=history.state;if(o&&(document.title=o),null!=this.routesDictionary[i]){if(this.customHistory.updateCurrent(history.state),window.dispatchEvent(new CustomEvent("spaTransition",{detail:{isFinished:!1,dest:{name:i}}})),r&&(null===(t=this.currentRoute)||void 0===t?void 0:t.name)==i)return this._updateRouteParametres(window.location.pathname.substring(1),this.currentRoute),this._updateQueryModel(),null===(s=null===(n=this.viewModel)||void 0===n?void 0:n.onHistoryChange)||void 0===s||s.call(n,history.state,null,{fromPopstate:!0},this.abortController.signal),void window.dispatchEvent(new CustomEvent("spaTransition",{detail:{isFinished:!0,dest:{name:i}}}));this.targetRoute=i,this._routerTransitionAsync(i)}else window.location.reload()})),window.addEventListener("click",(e=>{const t=e.target.closest("a");if((null==t?void 0:t.classList.contains("BDC_ReloadLink"))||e.defaultPrevented||e.ctrlKey||e.metaKey)return!1;null==t||e._preventRouterTransition||(t.hasAttribute("target")&&"_blank"===t.getAttribute("target")?this.$analitic.updateStatInfo(!0):(this.$analitic.updateStatInfo(!1),e.preventDefault(),this.moveTo(t.href)))}))},_proto._routerTransitionAsync=async function(e,t=window.location,n=!1,s=!1,i=!1){window.scrollTo(0,0),this.abortController.abort(),this.abortController=new AbortController;const r=this.abortController.signal;this.currentRoute=this.routesDictionary[e],wb.stat.sendPageView(),this.$analitic.sendEvent("pageview",{cookies_alert:wb.spa.getMainLayout().cookiePolicy.check()?1:0});try{const{viewData:o,needStateUpdate:a,needRouteUpdate:l}=await this._loadRouteData(e,t,n,s,r);return l&&this._updateRouteData(e,o,r,i),window.dispatchEvent(new CustomEvent("spaTransition",{detail:{isFinished:!0,dest:this.currentRoute}})),a}catch(t){if(t.isNotFound)return this.moveTo404Async(),!1;if(!t.isCancelled&&!t.isUnauthorize&&null!=t.message&&""!=t.message)return console.log(t.message),this.moveTo500Async(t,{method:"_routerTransitionAsync",destRoute:e,current:window.location.toString(),initial:n,forced:s}),!1;throw t}},_proto._findRoute=function(e){var t;const n=e.substring(1).split("/"),s=e.substring(1);let i=null!==(t=Object.keys(this.routesDictionary).filter((e=>{const t=this.routesDictionary[e];return null==t.routePathSegments?t.path===s:("SpaCatalogEntrypoint"!==t.name||".aspx"!==s.slice(-5))&&t.routePathSegments.every(((e,t)=>{var s;return e.isParameter?!(null!==(s=null==e?void 0:e.isOptional)&&void 0!==s&&!s)||n[t]:e.content===n[t]}))})).map((e=>this.routesDictionary[e])))&&void 0!==t?t:[];if(i.length>1){const e=e=>{var t,n;return null!==(n=null===(t=e.routePathSegments)||void 0===t?void 0:t.some((e=>e.isCatchAll)))&&void 0!==n&&n};i.sort(((t,n)=>e(t)-e(n))),i=i.filter((e=>"SpaCatalogEntrypoint"!==e.name))}return i[0]},_proto._initSSR=async function(e,t){var n,s,i,r,o,a,l,c;this.currentRoute=this.routesDictionary[t];const u=this.currentRoute.requiredModel?this.$helper.loadJsAsync(this.currentRoute.requiredModel):Promise.resolve(),d=this._loadTemplateAsync(t);this._updateQueryModel(),this._updateRouteParametres(window.location.pathname.substring(1),this.routesDictionary[t]);try{await Promise.all([d,u]);const h=wb.spa.getViewModelByName(t),p=h?new h(e,t):Object.create(WbSpaModel.prototype,{});p.fromSSR=!0;const m=null!==(s=null===(n=this.currentRoute)||void 0===n?void 0:n.targetContainer)&&void 0!==s?s:0,g=this.appContainers.find((e=>e.containerId==m));$.observable(g).setProperty({viewModel:p}),$.observable(this).setProperty({activeContainer:m});const f=new this.$helper.Deferred;await(null===(r=(i=this.viewModel).onBeforeRender)||void 0===r?void 0:r.call(i,e,f.promise)),$.link(!0,"#app",this.viewModel),await this.$helper.nextTick(),null===(a=(o=this.viewModel).onAfterRender)||void 0===a||a.call(o,{data:e}),wb.stat.sendPageView();const y=null===(c=(l=this.viewModel).getScreenName)||void 0===c?void 0:c.call(l);y&&this.$analitic.sendEvent("Screen_V",{name:y})}catch(e){console.error(e.message)}},_proto._loadRouteData=async function(e,t,n,s,i){var r,o,a,l,c,u;this._updateRouteParametres(t.pathname.substring(1),this.routesDictionary[e]),this._updateQueryModel(t);const d=this.prepareUrl(this.currentRoute);this.$menuLk.updateMenu(d,this.currentRoute.lkMenuOptions,this.userIsAuth);const h=null!==(o=null===(r=this.currentRoute)||void 0===r?void 0:r.targetContainer)&&void 0!==o?o:0,p=null===(a=this.appContainers.find((e=>e.containerId==h)))||void 0===a?void 0:a.viewModel,m=!s&&null!=p&&p.__modelStatus__!=VIEW_MODEL_STATUSES.destroyed&&p.__routeName__==e&&null!=p.onHistoryChange;if(this.clientRenderInited||m)if(m||n){if(m){return this.activeContainer==h||$.observable(this).setProperty({showPreview:!0}),null===(c=null===(l=this.viewModel)||void 0===l?void 0:l.onActiveViewChanged)||void 0===c||c.call(l,!1),await(null===(u=p.onHistoryChange)||void 0===u?void 0:u.call(p,window.history.state,s,{},i)),i.aborted||$.observable(this).setProperty({activeContainer:h,showPreview:!1}),{viewData:null,needStateUpdate:!1,needRouteUpdate:!1}}}else $.observable(this).setProperty({showPreview:!0});else!n&&(this.current=$.templates["preview_"+e]?"preview_"+e:DEFAULT_PREVIEW);!this.currentRoute.metaTagsUrl&&this.$seoHelper.update(d,null);const g=await this._loadRequiredResoursesAsync(e);return Object.assign({needRouteUpdate:!i.aborted},g)},_proto._loadRequiredResoursesAsync=function(e,t=0){this.loadingTemplate=e;const n=this.routesDictionary[e],s=null==$.templates[e]&&n.tmpl?this._loadTemplateAsync(e,n.tmpl):Promise.resolve(),i=this.loadRouteDataAsync(n.requiredData,t,!0),r=n.requiredCss?Promise.all(n.requiredCss.map(this.$helper.loadCssAsync)):Promise.resolve(),o=n.requiredJs?Promise.all(n.requiredJs.map(this.$helper.loadJsAsync)):Promise.resolve(),a=n.requiredModel?this.$helper.loadJsAsync(n.requiredModel):Promise.resolve();return Promise.all([i,o,r,a,s]).then((([e])=>Promise.resolve(e))).catch((n=>n.isNotFound||n.isUnauthorize||n.isCancelled||t>=3?Promise.reject(n):this._loadRequiredResoursesAsync(e,++t)))},_proto._updateRouteData=async function(e,t,n=this.abortController.signal,s=!1){var i,r,o,a,l,c,u,d,h,p,m,g;if(n.aborted)return;if(e.indexOf("preview_")>-1)return $.observable(this).setProperty({showPreview:!0});const f=wb.spa.getViewModelByName(e),y=f?new f(t,e):Object.assign(Object.create(WbSpaModel.prototype),null!=t?t:{}),v=null!==(r=null===(i=this.currentRoute)||void 0===i?void 0:i.targetContainer)&&void 0!==r?r:0,b=y.onBeforeRender,w=y.onAfterRender,S=y.onBeforeUnrender;Object.defineProperties(y,{__routeName__:{value:e},__targetContainer__:{value:v},__modelStatus__:{value:VIEW_MODEL_STATUSES.prepearing,writable:!0},routeTemplate:{value:e},onBeforeRender:{value:async function(e,t){n.aborted||(await(null==b?void 0:b.call(y,e,t)),this.__modelStatus__=VIEW_MODEL_STATUSES.readyToInstall)}},onAfterRender:{value:async function(e,t){n.aborted||(await(null==w?void 0:w.call(y,e,n,t)),this.__modelStatus__=VIEW_MODEL_STATUSES.installed)}},onBeforeUnrender:{value:async function(e){await(null==S?void 0:S.call(y,e)),this.__modelStatus__=VIEW_MODEL_STATUSES.destroyed}}});const _=null==this?void 0:this.viewModel;if(null==_||_.__targetContainer__!=v&&null!=_.onHistoryChange?null===(c=null===(l=null==this?void 0:this.viewModel)||void 0===l?void 0:l.onActiveViewChanged)||void 0===c||c.call(l,!1):await(null===(a=null===(o=null==this?void 0:this.viewModel)||void 0===o?void 0:o.onBeforeUnrender)||void 0===a?void 0:a.call(o)),n.aborted)return;const C=new this.$helper.Deferred;await(null===(u=y.onBeforeRender)||void 0===u?void 0:u.call(y,t,C.promise));let k=window._debug&&performance.now();const I=this.appContainers.find((e=>e.containerId==v));(null===(d=I.viewModel)||void 0===d?void 0:d.__modelStatus__)!=VIEW_MODEL_STATUSES.destroyed&&(null===(h=I.viewModel)||void 0===h||h.onBeforeUnrender(t)),n.aborted||($.observable(I).setProperty({viewModel:y}),$.observable(this).setProperty({showPreview:!1,activeContainer:v})),this.clientRenderInited||this.initCSR(),k&&console.log("[INITIAL MODEL RENDER]: ",performance.now()-k,e),await this.$helper.nextTick(),C.resolve(),null===(p=y.onAfterRender)||void 0===p||p.call(y,t,n),s&&(null===(m=y.onSpaTransition)||void 0===m||m.call(y));const M=null===(g=y.getScreenName)||void 0===g?void 0:g.call(y);M&&this.$analitic.sendEvent("Screen_V",{name:M})},_proto._updateRouteParametres=function(e,t){if(null==t.routePathSegments)return void(this.routeParameters={});const n=e.split("/"),s=t.routePathSegments.reduce(((e,t,s)=>(t.isParameter&&(t.isCatchAll?e[t.name]=n.slice(s).join("/"):e[t.name]=n[s]),e)),{});this.routeParameters=s},_proto._updateQueryModel=function(e){this.queryParams=new URLSearchParams((null!=e?e:window.location).search)},_proto._loadTemplateAsync=function _loadTemplateAsync(routeName,tmplNameInput){const tmplName=("string"==typeof tmplNameInput?tmplNameInput:`${routeName.replace("Entrypoint","")}`).toLowerCase(),tmplFullName=(window._debug,`${tmplName}.json`),hash=this.tmplHashes[tmplFullName];return(window._debug?this.$httpClient.fetchBasicJSON($.views.converters.urlForJsTmpl(`${tmplFullName}?${hash}`)):this.$httpClient.fetchStaticV2($.views.converters.urlForJsTmpl(tmplFullName.replace(".json",`.${hash}.json`)))).then((tmpl=>{const{main,localization}=tmpl,templates=__rest(tmpl,["main","localization"]);if(localization)try{Object.assign(this.$localziation,{[routeName]:eval(localization)})}catch(e){}return $.templates(Object.assign({[routeName]:main},templates)),Promise.resolve()})).catch((e=>Promise.reject(e)))},_proto._hardReload=function(){return location.reload()},(0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__.A)(Router,[{key:"appContainers",get:function(){return APP_CONTAINERS}},{key:"previewTemplate",get:function(){return DEFAULT_PREVIEW}},{key:"viewModel",get:function(){var e;return null===(e=this.appContainers.find((e=>e.containerId==this.activeContainer)))||void 0===e?void 0:e.viewModel}}])}();const __WEBPACK_DEFAULT_EXPORT__=Router},17252:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var s=n(92901),i=n(47949);const r="wb_delivery-points-",o="wb_allpickups_hash",a=36e4,l=i.Ho;const c=function(){function e(){this._startJobSyncPickups(),this.checkInterval=null}var t=e.prototype;return t._startJobSyncPickups=function(){this._pickupDbName="wb_allpickups",this._objectStoreName="pickups_active",this._version=1,setTimeout(this._syncPickups.bind(this),15e3)},t._openPickupDb=function(){return this.$storageHelper.openDb(this._pickupDbName,{onupgradeneeded:e=>e.createObjectStore(this._objectStoreName,{keyPath:"id"}),version:this._version})},t._syncPickups=async function(){const e=await WbSpaModel.prototype.$httpClient.fetchStaticDataV2("all-poo-v9.json.hash",5e3,"text").catch((e=>null));if(null!==e)if(e!==localStorage.getItem(o)){const t=await WbSpaModel.prototype.$httpClient.fetchStaticDataV2("all-poo-fr-v9.json",6e4),n=null==t?void 0:t.selectMany((e=>(e.items.forEach((t=>{t.country=e.country})),e.items)));if(!(n&&n.length||this.checkInterval))return void setTimeout(this._syncPickups.bind(this),15e3);if((!n||!n.length)&&this.checkInterval)return;this.checkInterval||(this.checkInterval=setInterval(this._syncPickups.bind(this),a)),this._openPickupDb().then((t=>{window._debug&&console.time("transaction pickups");let s=t.transaction([this._objectStoreName],"readwrite").objectStore(this._objectStoreName);s.clear();for(let e=0;e<n.length;e++)s.add(n[e]);window._debug&&console.timeEnd("transaction pickups"),localStorage.setItem(o,e)}))}else this.checkInterval||(this.checkInterval=setInterval(this._syncPickups.bind(this),a));else this.checkInterval||setTimeout(this._syncPickups.bind(this),15e3)},t.getPickupAsync=function(e){return this._openPickupDb().then((t=>this.$storageHelper.getItem(t,this._objectStoreName,e)))},t.getActivePickupsAsync=async function(e={}){const[t,n]=await Promise.all([this._openPickupDb().then((e=>this.$storageHelper.getAll(e,this._objectStoreName))),this.$auth.jwtData.user?this.$services.userData.getUserDataAsync():Promise.resolve({})]);return[...this._filterPickups(t,null==n?void 0:n.userInfo,e)]},t._filterPickups=function*(e,{isEmployeeSynced:t,houseKeeping:n,isPickupPointOwner:s}={},i={}){for(const r of e){r.isHkn&&!n||r.emp&&!t||r.isSortCenter&&!(s||t)||(null==i?void 0:i.dest)&&r.dest3!=i.dest||"changeOffice"===(null==i?void 0:i.source)&&(2===r.status||r.isExternalPostamat)||(yield r)}},t.getDeliveryPointsAsync=function(e,t){return new Promise(((n,s)=>{const i=Object.assign({deliveryWay:e,currency:WbSpaModel.prototype.$user.getCurrency()},t);this.$httpClient.fetchJSON(this.deliveryPointsUrl,{method:"POST",body:this.$helper.objectSerializer(i),credentials:"include"},{timeout:2e3}).then((t=>{const s=this._updateDeliveryPoints(t,e);n(s)})).catch((t=>{console.log(t.message);let s=this.restoreDeliveryPoints(e);s&&n(s)}))}))},t._updateDeliveryPoints=function(e,t){const n=[...e,...this.restoreDeliveryPoints(t).filter((e=>e._local))].reduce(((e,t)=>{const n=e.findIndex((e=>e.addressId===t.addressId));return-1===n?e.push(t):e[n]._local=e[n]._local&&t._local,e}),[]);return this.backupDeliveryPoints(n,t),this._syncDeliveryPoints(n.filter((e=>e._local)).reverse(),t),n},t._syncDeliveryPoints=async function(e,t){for(let n=0;n<e.length;n++)await this._saveAddressAsync(e[n],t)},t.get=function(e,t){var n;const s=null===(n=this.restoreDeliveryPoints(t))||void 0===n?void 0:n.find((t=>t.addressId==e));return s&&s._local&&this._syncDeliveryPoints([s],t),s},t.getByCoordinates=function(e,t,n){return["self","courier"].forEach((s=>{var i;const r=null===(i=this.restoreDeliveryPoints(s))||void 0===i?void 0:i.find((s=>s.lat==e&&s.lon==t&&s.address===n));if(r&&r._local&&this._syncDeliveryPoints([r],s),r)return r})),null},t.backupDeliveryPoints=function(e,t){this.deliveryPoints[t]=e;const n=this._key;localStorage.putObject(n,this.deliveryPoints),Object.entries(localStorage).filter((e=>e[0].startsWith(r)&&e[0]!==n)).forEach((e=>{localStorage.removeItem(e[0])}))},t.restoreDeliveryPoints=function(e){var t,n;return this.deliveryPoints=null!==(t=localStorage.getObject(this._key))&&void 0!==t?t:{},this.deliveryPoints.self||(this.deliveryPoints.self=[]),this.deliveryPoints.courier||(this.deliveryPoints.courier=[]),[...this.deliveryPoints.courier,...this.deliveryPoints.self].forEach((e=>{e.latitude&&e.longitude||!e.lat||!e.lon||(e.latitude=e.lat,e.longitude=e.lon)})),null!==(n=this.deliveryPoints[e])&&void 0!==n?n:[]},t.add=async function(e,t){let n=this.restoreDeliveryPoints(t);const s=this._convertModel(e,t);if(!n.find((e=>(null==e?void 0:e.addressId)==s.addressId))){if("courier"===t){const e=await WbSpaModel.prototype.$httpClient.fetchBasicJSON(`${l}get-office?latitude=${s.lat}&longitude=${s.lon}`,{},{timeout:3e3,nullOnError:!0});e&&Object.assign(s,e)}n.unshift(s),this.backupDeliveryPoints(n,t)}return this._saveAddressAsync(s,t),n},t.remove=function(e,t){let n=this.restoreDeliveryPoints(t);return n=n.filter((t=>t.addressId!=e)),this.backupDeliveryPoints(n,t),this._removeAddressAsync(e,t),n},t._removeAddressAsync=function(e,t){this.$httpClient.fetchJSON(this.removeUrl,{method:"POST",body:this.$helper.objectSerializer({addressId:e,deliveryWay:t}),credentials:"include"}).then((e=>{this.backupDeliveryPoints(e,t)}))},t._saveAddressAsync=function(e,t){const n="self"===t?{"Item.AddressId":e.addressId}:e;return this.$httpClient.fetchJSON(this._dataUrl(t),{method:"POST",credentials:"include",body:this.$helper.objectSerializer(n,new URLSearchParams,!0)}).then((e=>(this.backupDeliveryPoints(e,t),e)))},t._dataUrl=function(e){return"self"===e?this.editPooUrl:this.editCourierAddressUrl},t._convertModel=function(e,t){if("courier"===t){let n=Object.assign({},e);return n._local=!0,n.deliveryType=t,n.addressId=btoa(wb.helpers.generateGuid().slice(12)),n.address=`${n.city?n.city:n.province}, `,n.area&&!n.city&&(n.address+=`${n.area}, `),n.street&&(n.address+=`${n.street}, `),n.home&&(n.address+=`д. ${n.home}, `),n.flat&&(n.address+=`кв. ${n.flat}, `),n.entrance&&(n.address+=`под. ${n.entrance}, `),n.doorCode&&(n.address+=`дмф. ${n.doorCode}, `),n.floor&&(n.address+=`этаж ${n.floor}, `),n.index&&(n.address+=`индекс ${$.views.converters.leadZero(n.index,6)}, `),n.address=n.address.slice(0,-2),n.lat||(n.lat=n.latitude),n.lon||(n.lon=n.longitude),n}if("self"===t)return{_local:!0,address:e.address,addressId:e.id,lat:e.coordinates[0],lon:e.coordinates[1],workTime:e.workTime,deliveryType:t,pointTypeName:this._getPointTypeName(e.dtype),IsSortCenter:63===t,status:e.status,rate:e.rate,deliveryPrice:$.views.helpers.priceFromRub(e.deliveryPrice,!0),country:e.country,dest:e.dest,sign:e.sign}},t._getPointTypeName=function(e){return 63===e?"СЦ / Склад":"Пункт выдачи"},(0,s.A)(e,[{key:"removeUrl",get:function(){return this.$services.cartService.publicBasketApiUrl+"/spa/removeaddress"}},{key:"editPooUrl",get:function(){return this.$services.cartService.publicBasketApiUrl+"/spa/poos/create?version=1"}},{key:"editCourierAddressUrl",get:function(){return this.$services.cartService.publicBasketApiUrl+"/spa/yandexaddress/editajax?version=2"}},{key:"deliveryPointsUrl",get:function(){return this.$services.cartService.publicBasketApiUrl+"/spa/deliverypoints"}},{key:"_key",get:function(){const e=this.$services.sessionService.getUserUid();return`${r}_${e}`}}])}()},75281:()=>{"use strict";let e=function(){function e(){}return e.getCookie=function(e){const t=document.cookie.split(";").find((t=>{const[n]=t.trim().split("=");return n==e}));return t?decodeURIComponent(t.trim().split("=")[1]):null},e.setCookie=function(e,t,n={}){n=Object.assign({path:"/","max-age":31536e3},n);let s=encodeURIComponent(e)+"="+encodeURIComponent(t);Object.keys(n).forEach((e=>{s+=`; ${e}`,1!=n[e]&&(s+=`=${n[e]}`)})),document.cookie=s},e.deleteCookie=function(t,n={}){e.setCookie(t,"",Object.assign({"max-age":-1},n))},e}();wb.cookieHelper=e},61506:()=>{"use strict";let e=function(){function e(){}return e.canShowWalletDiscount=function(e=0,t="",n=0,s=0,i=0){if(1048576&n)return 0;const r=s||(wb.settings.walletTypeCode>1?wb.settings.wlt2DiscountPercent:wb.settings.wlt1DiscountPercent),o=i||(wb.settings.walletTypeCode>1?wb.global.settings.variables.wlt2DiscountDisplayMaxPrice:wb.global.settings.variables.wlt1DiscountDisplayMaxPrice);return r>0&&o>=e&&"RUB"===t?r:0},e.calcWalletDiscount=function(t=0,n="",s=0,i=0,r=0){const o=e.canShowWalletDiscount(t,n,s,i,r);return o>0?e.calculateDiscount(t,o,n):0},e.calculateDiscount=function(e=0,t=0,n="",s=!1){if(!t)return 0;let i=e*(t/100);const r=$.views.helpers.minFiscalPriceInCurrency(n);return i<r?r:Math[s?"floor":"ceil"](i/r)*r},e.calculateCommission=function(e,t,n=""){return this.calculateDiscount(e,t,n,!0)},e.calculateCustomCharges=function(e,t,n){const s=100*e;if(!n)return 0;if(s<n.dutyFreelimit)return 0;const i=.15*(s-n.dutyFreelimit)+n.fixedAmount;return $.views.helpers.toLocalPrice(i/100,t)},e}();wb.priceHelper=e},85340:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var s=n(92901),i=n(47949);const r=JSON.parse('{"RUB":{"locale":"ru","name":"Российский рубль","sign":"₽","code":"643"},"BYN":{"locale":"by","name":"Белорусский рубль","sign":"р.","code":"933"},"KZT":{"locale":"kz","name":"Казахстанский тенге","sign":"тг.","code":"398"},"AMD":{"locale":"am","name":"Армянский драм","sign":"драм","code":"051"},"KGS":{"locale":"kg","name":"Кыргызский сом","sign":"сом","code":"417"},"UZS":{"locale":"uz","name":"Узбекский сум","sign":"сум","code":"860"}}'),o=Object.entries(r).reduce(((e,[t,n])=>(e[n.sign]=t,e)),{});wb.currencies={info:r,getIsoBySign:e=>o[e]||wb.settings.currencyCodeByLetters,getDefaultForLocale:function(e){let t;for(const n in r)r[n].locale===e&&(t=n);return null!=t?t:"RUB"}},$.views.helpers({wbCurrencies:wb.currencies.info}),$.views.converters({isoCode:e=>{var t;return null===(t=wb.currencies.info[null==e?void 0:e.toUpperCase()]||wb.currencies.info[wb.settings.currencyCodeByLetters])||void 0===t?void 0:t.code},currencySign:e=>{var t;return null===(t=wb.currencies.info[e]||wb.currencies.info[wb.settings.currencyCodeByLetters])||void 0===t?void 0:t.sign}});const a="_sys_auth",l="user-balance",c=i.of,u=["65896095","6182663","8175888","16474491","126051733","112501232","13539779","15800639","60152764","27921069","20432466","7127629","146311557","124235485","11253735","19089801","153164239","151251536","152733644","151839264","151581324","157878042","180073193","157878042","157922000","158757427","159245498","180322273","180086213","180073193","153865697","180986891","181306249","151234692","186198155","186198155","186199515","191493705"];let d=function(){function e(){var t;for(const t in e.syncData)e.syncData[t].init();this.balance=localStorage.getObject(e.storageKey(l)),this.balance&&(this._savedBalance=Object.assign(this.balance)),this._balanceTs=(null===(t=this.balance)||void 0===t?void 0:t.balanceTs)||0,this.getUserGrade=WbSpaModel.prototype.$helper.lockPromise(this.getUserGrade),this.getCustomsDuty=WbSpaModel.prototype.$helper.lockPromise(this.getCustomsDuty),window.addEventListener("storage",this._onSync.bind(this))}var t=e.prototype;return t.getUid=function(){return e._getUserUid()},t.getId=function(){return WbSpaModel.prototype.$auth.jwtData.user||0},t.getUserInfo=function(){return this.userInfo},t.initUser=function(){const t=this.$auth.jwtData,n=this.$auth.isAuth,s=this.$services.sessionService.getBasketUid(),i=n?e._getUserUid():"";localStorage.setItem(a,n?t.user:"unauth"),this.userInfo=n?{uid:i,basketUid:void 0,isAuth:n,t:t.user}:{uid:0,basketUid:s,isAuth:n},wb.analitics.sendUserEvent(i,n?t.user:""),wb.analitics.sendSessionStartEvent(),n?this.getUserGrade(this.getCurrency()):this._setDiscountForUnAuth(),wb.spa&&wb.spa.setUserStatus({userIsAuth:n,userUid:n?i:s,userId:parseInt(t.user,10)})},t.getBalance=async function({force:t,timeout:n}={}){var s,i;let r=!1;if(t||(null===(s=this._savedBalance)||void 0===s?void 0:s.balanceCurrency)&&this._savedBalance.balanceCurrency!==this.getCurrency()||!this.balance||this._balanceTs<(new Date).getTime()){this._balanceTs=(new Date).getTime()+3e4;try{this.balance=await this.$httpClient.fetchJSON("/webapi/account/getsignedbalance",{method:"POST"},n?{timeout:n}:{}),this.balance.balanceCurrency=this.getCurrency(),this.balance.walletTypeCode=this._getWalletTypeCode(this.balance.walletType,this.balance.walletStatus),this._savedBalance=Object.assign(this.balance),this.balance.balanceTs=this._balanceTs,localStorage.putObject(e.storageKey(l),this.balance),r=!0}catch(e){if(!this._savedBalance)throw this._balanceTs=(new Date).getTime()+15e3,e;this.balance=Object.assign(this._savedBalance)}}if(null===this.balance)return{walletLimit:0,moneyBalanceRUB:0,walletBalance:0,totalBalanceRub:0,totalBalance:0,balanceCurrency:this.getCurrency()};const o=null!==(i=this.balance[`moneyBalance${this.balance.balanceCurrency}`])&&void 0!==i?i:"RUB"===this.balance.balanceCurrency?this.balance.moneyBalance:0;return this.balance.totalBalance=o+("RUB"===this.balance.balanceCurrency?this.balance.bonusBalance+this.balance.walletBalance:0),"RUB"===this.balance.balanceCurrency&&(this.balance.totalBalance=Math.floor(Math.abs(this.balance.totalBalance)<1?0:this.balance.totalBalance)),this.balance.totalBalanceRub=(this.balance.moneyBalanceRUB||0)+(this.balance.bonusBalance||0)+(this.balance.walletBalance||0),this.balance.totalBalanceRub=Math.floor(Math.abs(this.balance.totalBalanceRub)<1?0:this.balance.totalBalanceRub),r&&this.$eventBus.dispatchEvent(new CustomEvent("BalanceUpdated",{detail:this.balance})),this.balance},t._getWalletTypeCode=function(e="",t=""){return"rejected"===t||"closed"===t?0:"verified"===e?2:"anonymous"===e?1:0},t.resetBalance=function(){this.balance=null,this.$eventBus.dispatchEvent(new CustomEvent("BalanceReset"))},t.getBrokerInstallmentConfig=async function(){if(!this.isBrokerInstEnabled())return null;if(this.brokerInstallmentConfig)return this.brokerInstallmentConfig;if(this.brokerInstallmentConfig=localStorage.getObject("wbx_br_inst_config"),!this.brokerInstallmentConfig||this.brokerInstallmentConfig.expire<Date.now())try{const e=await this.$wbxHttpClient.fetch(`${c}/v1/config`,{method:"GET",timeout:1e3}),t=await e.json();t.expire=Date.now()+36e5,localStorage.putObject("wbx_br_inst_config",t),this.brokerInstallmentConfig=t}catch(e){wb.spa.logError(e,"[WBX_BR_INST_CONFIG]: failed to fetch broker installment config")}return this.brokerInstallmentConfig},t.resetBrokerInstStatusTs=function(){this._resetBrokerInstStatusTs=!0},t.isBrokerInstEnabled=function(){var e,t,n;return this.$isRangeEnabledFor(null===(n=null===(t=null===(e=wb.global)||void 0===e?void 0:e.settings)||void 0===t?void 0:t.variables)||void 0===n?void 0:n.cwbInstRange)||u.indexOf(this.$auth.jwtData.user)>-1},t.getBrokerInstallmentStatus=async function(e=!1){if(!this.isBrokerInstEnabled())return null;if(e&&this.resetBrokerInstStatusTs(),this._brokerInstStatusTs=this._resetBrokerInstStatusTs?0:Date.now()+3e5,!this.brokerInstallmentStatus||this._brokerInstStatusTs<Date.now())try{const e=await this.$wbxHttpClient.fetch(`${c}/v1/status`,{method:"GET",credentials:"include",timeout:1e3});this.brokerInstallmentStatus=await e.json(),this._resetBrokerInstStatusTs=!1}catch(e){this.brokerInstallmentStatus=null}return this.brokerInstallmentStatus},t.resetInstallmentLimit=function(){this.installmentLimit=null,this.pdlInstallmentLimit=null},t.getUserGrade=async function(e="RUB"){var t,n,s;if(!this.$auth.isAuth)return null;let i=this._userGrade||localStorage.getObject("wbx_user_grade");this.$auth.jwtData.user!==(null==i?void 0:i.user_id)&&(i=null);const r=this.$useCatalogReturnCost()?4:3;if(null==i||i.expire<Date.now()||this.$auth.jwtData.user!==i.user_id||i.currency!==e||i.version!=r)try{const o=await this.$wbxHttpClient.fetch(`https://user-grade.wildberries.ru/api/v${r}/grade?curr=${e}`);if(!o.ok)throw new Error(`resp_status=${o.status}`);const a=await o.json();if(null==a.payload||0!==a.state)throw new Error(`resp_data=${JSON.stringify(a||{})}`);i=a.payload,i.sign=a.sign,i.sign_version=a.sign_version,i.expire=Date.now()+3e5,i.fraud&&(null===(t=JSON.parse(i.fraud))||void 0===t?void 0:t.is_trust)?(i.premiumIsAvailable=!0,i.wbClub="available"):i.premiumIsAvailable=!1,(null===(n=i.subscription_features)||void 0===n?void 0:n.length)&&(i.wbClub="subscribed"),i.isPremium=(null===(s=i.subscription_features)||void 0===s?void 0:s.indexOf("extra_discount"))>-1,localStorage.putObject("wbx_user_grade",i),this._userGrade=i,this.$eventBus.dispatchEvent(new CustomEvent("UserGradeUpdated"))}catch(e){wb.spa.logError(e,"[WBX_USER_GRADE]: failed to fetch user grade data")}if(null==i?void 0:i.payments){const e=i.payments.find((e=>1===e.wctype_id));wb.settings.wlt1DiscountPercent=(null==e?void 0:e.anonymous_discount)||0,wb.settings.wlt2DiscountPercent=(null==e?void 0:e.uprid_discount)||0;let t=(null==e?void 0:e.wb_club_anonymous_discount)-(null==e?void 0:e.anonymous_discount),n=(null==e?void 0:e.wb_club_uprid_discount)-(null==e?void 0:e.uprid_discount);wb.settings.premium1DiscountPercent=t>0?t:0,wb.settings.premium2DiscountPercent=n>0?n:0}return i||{spp:0,postpaid_limit:0,currency:e}},t.getUserGradeFromCache=function(){return this.$auth.isAuth?this._userGrade||localStorage.getObject("wbx_user_grade"):null},t.resetUserGrade=function(){const e=this.getUserGradeFromCache();e&&(e.expire=0,localStorage.putObject("wbx_user_grade",e))},t._setDiscountForUnAuth=async function(){var e;let t=localStorage.getObject("wbx_default_discounts");if(null==t||t.expire<Date.now()){const n=await this.$httpClient.fetchBasicJSON("https://static-basket-01.wb.ru/vol1/global-payment/default-payment.json",{},{nullOnError:!0});if(0===(null==n?void 0:n.state)){const s=null===(e=n.data)||void 0===e?void 0:e.find((e=>1===e.wctype_id));t={wctype_id:null==s?void 0:s.wctype_id,discount_value:(null==s?void 0:s.discount_value)||0,expire:Date.now()+3e5},t.expire=Date.now()+3e5,localStorage.putObject("wbx_default_discounts",t)}}wb.settings.wlt1DiscountPercent=(null==t?void 0:t.discount_value)||wb.global.settings.variables.wlt1DiscountPercent},t.getCustomsDuty=async function(e){var t,n,s;if(!(null===(n=null===(t=wb.global.settings)||void 0===t?void 0:t.switches)||void 0===n?void 0:n.enableCustomsDuty))return null;let i=this._customsData||localStorage.getObject("customs_duty");try{if(!i||!i.dutyForImportedGoods||i.dutyForImportedGoods.find((e=>new Date(1e3*e.timestamp).addDays(1)<new Date))){const e=await this.$httpClient.fetchBasicJSON("https://static-basket-03.wb.ru/vol44/duty/duty.json",{timeout:500}).catch((e=>(wb.spa.logError(e,"[CUSTOMS_DUTY]: failed to fetch customs duty data"),this._customsData)));e&&(localStorage.putObject("customs_duty",e),this._customsData=i=e)}return null===(s=null==i?void 0:i.dutyForImportedGoods)||void 0===s?void 0:s.find((t=>t.curr==e))}catch(e){return wb.spa.logError(e,"[CUSTOMS_DUTY]: customs duty exception"),null}},t.getCustomsDutyFromCache=function(){return this._customsData||localStorage.getObject("customs_duty")},t.reset=function(){this.resetUserGrade(),wb.cookieHelper.deleteCookie("access_token"),this.initUser(),this.resetBalance(),this.clearXInfo(),this.$services.userData.clear(),this.$getService("groupedDeliveriesService").then((e=>e.resetCache()))},t.clearLocalUserData=function(){this.$services.userData.clearLocalUserInfo(),localStorage.removeItem(e.storageKey(l)),localStorage.removeItem("offerRateMain")},e._getUserUid=function(){return WbSpaModel.prototype.$auth.um.userUid||"0"},t._getUserData=async function(){return e.syncData.userData.time<=Date.now()&&!e.syncData.userData.updateInProgress&&await this._xInfoUpdate(),e.syncData.userData.data},e.storageKey=function(t){return`${t}-${e._getUserUid()}`},t._xInfoUpdate=async function(){const t=e.syncData.userData;t.updateInProgress=!0;const n=e.storageKey(t.prefix);await navigator.locks.request(`lock-${n}`,(async s=>{var i;const r=e.syncData.userData;if(!r||r.time<Date.now()){const e=null==t?void 0:t.data;let s=new URLSearchParams;(null==e?void 0:e.currency)&&s.set("currency",e.currency),e&&(s.set("latitude",e.latitude),s.set("longitude",e.longitude),s.set("locale",e.locale),s.set("address",e.address),s.set("dt",e.dt||"0"),e.addressId&&s.set("addressId",e.addressId),e.addressType&&s.set("addressType",e.addressType));const r=t.fetchParam.url(s),o=await WbSpaModel.prototype.$httpClient.fetchBasicJSON(r,{credentials:"include"},{timeout:t.fetchParam.timeout,nullOnError:!0,addAuthHeader:!0});if(o){const e=null===(i=localStorage.getObject(n))||void 0===i?void 0:i.data,s={time:Date.now()+t.interval,data:Object.assign(Object.assign({},e),o)};localStorage.putObject(n,s),Object.assign(t,s),this._checkForRefresh(e,o)}else e.time=Date.now()+1e4}else r&&r.time!==t.time&&Object.assign(t,r);t.updateInProgress=!1}))},t.getXinfo=function(){return this._getUserData().then((e=>Promise.resolve(e.xinfo)))},t.getXinfoWithClustersAndVectors=function(t){return this._checkNeedUpdateData(e.syncData.userClusters),this._checkNeedUpdateData(e.syncData.userVector),this._getUserData().then((n=>{var s,i;let r=e.syncData.userClusters.data.length>0?n.xinfo+`&uclusters=${e.syncData.userClusters.data.join(",")}`:n.xinfo;if((wb.global.settings.switches.addUserVector&&"search"===t||wb.global.settings.switches.addUserVectorCatalog&&"catalog"===t||wb.global.settings.switches.addUserVectorRecommend&&"new_recom"===t)&&(null===(i=null===(s=e.syncData.userVector)||void 0===s?void 0:s.data[t])||void 0===i?void 0:i.value)){const n=e.syncData.userVector.data[t];r+=`&uv=${n.value}&uiv=${n.version}`}return Promise.resolve(r)}))},t.getUserClusters=function(){return this._checkNeedUpdateData(e.syncData.userClusters),e.syncData.userClusters.data.join(",")},t.getBannersClusters=function(){return this._checkNeedUpdateData(e.syncData.userClustersBanners),e.syncData.userClustersBanners.data.length>0?e.syncData.userClustersBanners.data:[]},t.getXinfoSignedV1=function(){return this._getUserData().then((e=>{var t;return Promise.resolve({xinfo:e.xinfo,userDataSign:e.userDataSign,addressDataSign:e.addressDataSign,shard:e.shard,latitude:e.latitude,longitude:e.longitude,address:e.address,dest:null===(t=e.destinations)||void 0===t?void 0:t.last()})}))},t.getLocationData=async function(){const e=await this._getUserData();return{latitude:e.latitude,longitude:e.longitude,address:e.address,destinations:e.destinations,locale:e.locale}},t.setGeo=async function(t){var n,s,i;const r=null!==(n=t.lat)&&void 0!==n?n:t.latitude,o=null!==(s=t.lon)&&void 0!==s?s:t.longitude,a=t.address;if(r&&o&&a){const n=e.syncData.userData,s=e.storageKey(n.prefix);const l=`officeId=${"self"===t.deliveryType?t.addressId:t.officeId}&dest=${t.dest}&sign=${t.sign}&lat=${r}&lng=${o}`,c=Object.assign(Object.assign(Object.assign({},null==n?void 0:n.data),null===(i=localStorage.getObject(s))||void 0===i?void 0:i.data),{latitude:r,longitude:o,address:a,addressId:t.addressId,addressType:t.deliveryType,addressDataSign:l,dt:Date.now()/1e3|0,relevant:!1});c.xinfo=this._changeXDest(c.xinfo,t.dest);const u={data:c,time:e._timeInPast(n.interval)};Object.assign(n,u),localStorage.putObject(s,u),WbSpaModel.prototype.$geoLocation.setCityName(a),await this._xInfoUpdate()}},t.setCurrency=async function(t){var n;if(t){const s=e.syncData.userData,i=e.storageKey(s.prefix),r=Object.assign(Object.assign(Object.assign({},null==s?void 0:s.data),null===(n=localStorage.getObject(i))||void 0===n?void 0:n.data),{currency:t,relevant:!1});r.xinfo=this._changeXCurrency(r.xinfo,t),Object.assign(s,{data:r,time:e._timeInPast(s.interval)}),await this._xInfoUpdate()}},t.clearXInfo=function(){for(const t in e.syncData)e.syncData[t].time=e._timeInPast(e.syncData[t].interval);Object.keys(localStorage).forEach((t=>{for(const n in e.syncData)-1!==t.indexOf(e.syncData[n].prefix)&&localStorage.removeItem(t)}))},t.clearUserVectors=function(){e.syncData.userVector.time=e._timeInPast(e.syncData.userVector.interval),Object.keys(localStorage).forEach((t=>{-1!==t.indexOf(e.syncData.userVector.prefix)&&localStorage.removeItem(t)}))},t.getShardAsync=async function(){return(await this._getUserData()).shard},t.getIp=function(){return e.syncData.userData.data.ip},t.getCurrency=function(){return e.syncData.userData.data.currency},t.getCurrencyAsync=async function(){return(await this._getUserData()).currency},t.getLocale=function(){return e.syncData.userData.data.locale},t._changeXCurrency=function(e,t){const n=`$1${t.toLowerCase()}$3`;return e.replace(/(&curr=)(.*?)(&)/,n)},t._changeXDest=function(e,t){const n=`$1${t}$3`;return e.replace(/(&dest=)(.*?)(&)/,n)},e.getXCurrency=function(e){var t;return null===(t=/curr=(.*?)&/.exec(e))||void 0===t?void 0:t[1]},t._checkForRefresh=function(t,n,s){var i,r,o,a,l,c,u,d;let h=!1;(null==t?void 0:t.currency)!==(null==n?void 0:n.currency)&&(e._checkCurrencyInvalid(n)&&location.reload(),null===(i=wb.spa.getMainLayout().header)||void 0===i||i.changeCurrency.refresh(n.currency),h=!0),(null==t?void 0:t.destinations[t.destinations.length-1])!==(null==n?void 0:n.destinations[n.destinations.length-1])&&(h=!0),(null==n?void 0:n.address)&&(null===(r=WbSpaModel.prototype.$geoLocation.location)||void 0===r?void 0:r.address)!==(null==n?void 0:n.address)&&WbSpaModel.prototype.$geoLocation.updateLocation(),h&&(this.$eventBus.dispatchEvent(new CustomEvent("GeoUpdated")),null===(l=null===(a=null===(o=wb.spa)||void 0===o?void 0:o.getMainLayout())||void 0===a?void 0:a.menuTop)||void 0===l||l.refreshMenu((null==t?void 0:t.locale)!==(null==n?void 0:n.locale)),this.$router.clearNotActiveContainer(),(s||WbSpaModel.prototype.$router.currentRoute&&"SpaBasketEntrypoint"!==(null===(c=WbSpaModel.prototype.$router.currentRoute)||void 0===c?void 0:c.name)&&"SpaBasketBuyItNowEntrypoint"!==(null===(u=WbSpaModel.prototype.$router.currentRoute)||void 0===u?void 0:u.name))&&(null===(d=wb.spa)||void 0===d||d.refresh()))},t._onSync=function({key:t,oldValue:n,newValue:s}){if(t===a&&s)n!==s&&(s&&"unauth"!==s&&!this.$router.userIsAuth?wb.spa.getMainLayout().updateAfterLogin():location.reload());else if(t===e.storageKey(e.syncData.userData.prefix)){if(s){const t=JSON.parse(n),i=JSON.parse(s);Object.assign(e.syncData.userData,i),setTimeout((()=>this._checkForRefresh(null==t?void 0:t.data,i.data,!0)),1e3)}}else for(const n in e.syncData)if(t===e.storageKey(e.syncData[n].prefix)){const t=JSON.parse(s);Object.assign(e.syncData[n],t)}},e._getFallbackData=function(){const t=e._getDefaultLocale(),n=e._getDefaultCurrency(t);let s;switch(t){case"ru":s={xinfo:`appType=1&curr=${n.toLowerCase()}&dest=-1257786&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,address:"Москва",latitude:55.753737,longitude:37.6201,currency:n,destinations:[-1029256,-102269,-2162196,-1257786]};break;case"by":s={xinfo:`appType=1&curr=${n.toLowerCase()}&dest=-8139704&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,address:"Минск",latitude:53.901328,longitude:27.549044,currency:n,destinations:[12358386,12358403,-70563,-8139704]};break;case"kz":s={xinfo:`appType=1&curr=${n.toLowerCase()}&dest=85&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,address:"Нур-Султан",latitude:51.129669,longitude:71.495475,currency:n,destinations:[12358388,12358412,-3479876,85]};break;case"kg":s={xinfo:`appType=1&curr=${n.toLowerCase()}&dest=28&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,address:"Бишкек",latitude:42.8618,longitude:74.5831,currency:n,destinations:[12358387,12358395,-10860151,28]};break;case"am":s={xinfo:`appType=1&curr=${n.toLowerCase()}&dest=36&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,address:"Ереван",latitude:40.177628,longitude:44.512547,currency:n,destinations:[12358387,12358400,-13404218,36]};break;case"uz":s={xinfo:`appType=1&curr=${n.toLowerCase()}&dest=491&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,address:"Ташкент",latitude:41.311158,longitude:69.279737,currency:n,destinations:[12358390,12358442,-2448072,491]}}return s.locale=t,s.shard=0,s},e._getDefaultCurrency=function(e){const t=localStorage.getItem("wbx__currency"),n=wb.currencies.info[t];return t&&localStorage.removeItem("wbx__currency"),n?t:wb.currencies.getDefaultForLocale(e)},e._getDefaultLocale=function(){switch(document.location.hostname){case"www.wildberries.by":return"by";case"www.wildberries.kz":return"kz";case"www.wildberries.kg":return"kg";case"www.wildberries.am":return"am";case"www.wildberries.uz":case"uz.wildberries.ru":return"uz"}return"ru"},e._timeInPast=function(e){return Date.now()-e},e._checkCurrencyInvalid=function(t){var n;return!t||!wb.currencies.info[t.currency]||!wb.currencies.info[null===(n=e.getXCurrency(t.xinfo))||void 0===n?void 0:n.toUpperCase()]},t._checkNeedUpdateData=function(t){if(t.time>=Date.now()||t.updateInProgress)return;t.updateInProgress=!0;const n=e.storageKey(t.prefix);navigator.locks.request(`lock-${n}`,(async s=>{const i=localStorage.getObject(n);if(!i||i.time<Date.now()){let s;if("0"!==e._getUserUid())if(t.disableFetch&&await t.disableFetch())s=[];else{const n=t.fetchParam.url(e._getUserUid()),i=await WbSpaModel.prototype.$httpClient.fetchBasicJSON(n,{credentials:"omit"},{timeout:t.fetchParam.timeout,nullOnError:!0,addAuthHeader:t.fetchParam.jwt});s=t.processData(i)}else s=[];if(s){const e={time:Date.now()+t.interval,data:s};localStorage.putObject(n,e),Object.assign(t,e)}else t.time=Date.now()-t.interval+6e4}else i&&i.time!==t.time&&Object.assign(t,i);t.updateInProgress=!1}))},(0,s.A)(e,[{key:"geoDataStorageKey",get:function(){return e.storageKey(e.syncData.userData.prefix)}}])}();d.syncData={userData:{prefix:"geo-data-v1",data:null,interval:18e4,fetchParam:{url:e=>`${i.Ho}get-geo-info?${e}`,timeout:3e3},init:function(){const e={data:d._getFallbackData(),time:d._timeInPast(Date.now())},t=localStorage.getObject(d.storageKey(this.prefix));(null==t?void 0:t.data)&&d._checkCurrencyInvalid(t.data)&&(t.time=d._timeInPast(this.interval)),Object.assign(this,Object.assign(Object.assign({},e),t))}},userClusters:{prefix:"user-clusters",data:null,processData:function(e){return this.fetchParam.dataField?e[this.fetchParam.dataField]:e},interval:432e5,fetchParam:{url:e=>`https://personal-clusters.wildberries.ru/api/v1/clusters?id=${e}`,dataField:"uclusters",timeout:2e4},init:function(){Object.assign(this,Object.assign({data:[],time:d._timeInPast(this.interval)},localStorage.getObject(d.storageKey(this.prefix))))}},userClustersBanners:{prefix:"user-clusters-banners",data:null,processData:function(e){return this.fetchParam.dataField?e[this.fetchParam.dataField]:e},interval:432e5,fetchParam:{url:e=>`https://user-banner.wb.ru/api/v1/clusters?id=${e}`,timeout:2e4},init:function(){Object.assign(this,Object.assign({data:[],time:d._timeInPast(this.interval)},localStorage.getObject(d.storageKey(this.prefix))))}},userVector:{prefix:"user-vector",data:null,processData:function(e){var t;return e?null===(t=e.data[0])||void 0===t?void 0:t.vectors.reduce(((e,t)=>(e[t.space]={value:t.value,version:t.version},e)),{}):this.data},interval:432e5,fetchParam:{url:()=>"https://user-vector-info.wb.ru/api/v1/vector",timeout:2e4,jwt:!0},init:function(){Object.assign(this,Object.assign({data:[],time:d._timeInPast(this.interval)},localStorage.getObject(d.storageKey(this.prefix))))},disableFetch:async function(){const e=await WbSpaModel.prototype.$services.userData.getUserDataAsync();return!e||!e.userInfo.enableUserVectors}}};const h=d},34784:()=>{"use strict";window.wb={namespace:function(e,t){for(var n=e.split("."),s=this,i=n.length,r=0;r<i;r++)void 0===s[n[r]]&&(s[n[r]]=t&&r===i-1?t:{}),s=s[n[r]];return s},getURLparam:function(e){return(RegExp("[\\?&]"+e+"=([^&#]*)","i").exec(location.href)||[,null])[1]}},$.processResponse=function(e,t,n,s){var i;if(null==e)return!1;let r=void 0!==e.ResultState?e.ResultState:e.resultState;switch(e.hasOwnProperty("resultState")||e.hasOwnProperty("ResultState")||(r=e.state),r){case-1:const o=e.Value||e.value||(null===(i=e.data)||void 0===i?void 0:i.errorMsg)||"Ошибка сервера";if("boolean"==$.type(n)){n&&wb.popup.renderModalError(o);break}null!=n?n(o):alert(o);break;case 0:if(null==t)return!1;t(e.Value||e.value);break;case 1:window.location.href=e.Value||e.value;break;case 2:case 4:if(4===r&&wb.spa){wb.spa.refresh();break}let a=window.location.href;const l=a.indexOf("#");-1!==l&&(a=a.substr(0,l)),null!=e.Value||null!=e.value?(window.location.href=a+(e.Value||e.value),window.location.reload()):window.location.href=a;break;case 3:const c=e.Value||e.value;if(null==wb.spa)return window.location.href=c.url;const u=new URL(decodeURIComponent(c.url),window.location.origin);c.redirect=!0,null==s||s(c),wb.spa.redirect(u.href,c.replaceState,c.forceUpdate)}return!0},wb.quickNav=function(e){var t=e||{},n=document.querySelector(".j-quicknav");n.addEventListener("click",(function(){return window.scrollTo({top:0,behavior:"smooth"}),!1}));let s;function i(){n.style.display="block"}function r(){n.style.display="none"}window.addEventListener("scroll",(function(){if(n){document.documentElement.clientWidth>=768?function(){const e=t.bottomPx||function(){const e=document.querySelector("#app");return e?e.offsetTop+parseFloat(getComputedStyle(e,null).height.replace("px","")):0}();(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0)>e?i():r()}():function(){const e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;s||(s=e),function(){if(e>=s)return!1;const t=document.documentElement.clientHeight;return!(e<1.5*t)}()?i():r(),s=e}()}}))},wb.namespace("utils.script",function(){var e={};function t(e){var t=$("html").attr("lang");if("ru"==t)return Promise.resolve();var n=e.substring(e.lastIndexOf("/")+1).replace(".min.js",".js").split("?");return fetch("j/localized/"+n[0]+"?v="+n[1]+"&c="+t)}return{require:function(n,s){var i,r=e[n];return r||($.isEmptyObject(e)&&document.querySelectorAll("script[type='text/javascript']").forEach((function(t){if(t.type){var n=t.src.replace("http:","").replace("https:","");e[n]=Promise.resolve()}})),e[n]||(r=Promise.all([s?t(n):Promise.resolve(),(i=n,new Promise(((e,t)=>{try{var n=document.createElement("script");n.type="text/javascript",n.src=i,n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,e())}:(n.onload=function(){e()},n.onerror=function(){t()}),document.body.appendChild(n)}catch(e){t()}})))]),e[n]=r)),r}}}()),wb.namespace("displayModeSettings",function(){const e="displayMode";let t;var n=new Map;return{init:function(){function n(){const n=wb.settings.breakponts,s=window.innerWidth;for(var i in t="d",n)s<i&&(t=n[i]);let r="desktop";s<=767.98&&(r="phone"),s>=768&&s<=1023.98&&(r="tablet"),$.observable(wb.settings).setProperty(e,t),$.observable(wb.settings).setProperty({displayType:r})}n(),window.addEventListener("resize",n)},addObserver:function(s,i){if("function"==typeof s){i&&s(t);var r=()=>s(t);$.observe(wb.settings,e,r),$.observe(wb.settings,"displayType",r),n.set(s,r)}},removeObserver:function(t){let s=n.get(t);s&&($.unobserve(wb.settings,e,s),$.unobserve(wb.settings,"displayType",s))}}}()),wb.namespace("network",{init:function(){function e(){$.observable(wb.settings).setProperty("isOffline",!window.navigator.onLine)}e(),window.addEventListener("online",e),window.addEventListener("offline",e)}})},88798:()=>{"use strict";var e,t,n,s;wb.stat=function(){let e,t=[];function n(){const e=t;return t=[],e}function s(){if(!t.length)return;const s=n(),i={};i.pageViewGuid=e,i.path=window.location.pathname,i.queryString=window.location.search,i.urlReferrer=null!=wb.spa?wb.spa.getReferrer():document.referrer,i.deviceId=wb.cookieHelper.getCookie("_wbauid"),i.statisticEvents=s,WbSpaModel.prototype.$httpClient.fetch("/webapi/stats/events",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}).catch((e=>{t=t.concat(s)}))}return setInterval((function(){s()}),3e3),{sendEvent:function(e,n,i){const r=n.slice();t.push({EventName:e,EventParams:r}),i&&s()},wrapParam:function(e,t){return{ParamName:e,ParamValue:void 0===t?null:t.toString().replace(/"/g,"\\x22")}},sendPageView:function(){const s={};let i;s.statusCode=200,s.path=window.location.pathname,s.queryString=window.location.search,s.urlReferrer=document.referrer,s.deviceId=wb.cookieHelper.getCookie("_wbauid"),t.length>0&&(i=n(),s.statisticEvents=i),WbSpaModel.prototype.$user.getLocationData().then((e=>(e&&(s.address=e.address,s.latitude=e.latitude,s.longitude=e.longitude),WbSpaModel.prototype.$httpClient.fetch("/webapi/stats/pageview",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}})))).then((e=>e.json())).then((t=>{e=t})).catch((e=>{t=t.concat(i)}))}}}(),wb.stat.banners=function(){const e={ths:this,cl:{banner:"j-banner"}};e.sl={shownStat:".j-banner-shown-stat",clickStat:".j-banner-click-stat",banner:"."+e.cl.banner};const t=function(e){const t=[],n=e.data("banner-id"),s=e.data("section"),i=e.data("statistic-fields");return""===n?null:(t.push(wb.stat.wrapParam("BID",n)),t.push(wb.stat.wrapParam("SCTN",s)),i&&(t.push(wb.stat.wrapParam("BUT",i.urlType)),t.push(wb.stat.wrapParam("BLT",i.locationType)),t.push(wb.stat.wrapParam("BDT",i.displayType)),t.push(wb.stat.wrapParam("SORT",i.sort))),t)},n=function(e){e instanceof jQuery||(e=$(e));if(e.data("shown-stat-sent"))return;const n=t(e);if(!n)return;const s=e[0].classList.contains("j-banner-stat-send");wb.stat.sendEvent("BSE",n,s),e.attr("data-shown-stat-sent",!0)};var s=function(e,n){var s,i;if((null==e?void 0:e.length)>0){const t=e[0];if(t.classList.contains("j-banner-wba")){let{data:e}=$.view(t);e=e.length>0?e[0]:e,e.banner&&(e=e.banner);const n=!!e.ordBannerMark,i=(null===(s=e.bannerSelections)||void 0===s?void 0:s.length)>0?e.bannerSelections.map((e=>e.href)).toString():e.link;wb.analitics.sendBannersWbaEvent("Banner_T",e.alt,t.dataset.analiticsCode,i,t.dataset.bannerIndex,e.id,n)}}n||(e.data("click-stat-sent")||(i=t(e))&&(wb.stat.sendEvent("BCE",i,!0),e.attr("data-click-stat-sent",!0)))};return{initClickEvent:function(t){$("body").off("mousedown",e.sl.clickStat).on("mousedown",e.sl.clickStat,(function(n){if(3!==n.which){var i,r=n.currentTarget.classList.contains(e.cl.banner),o=$(n.currentTarget);r||(i=$this.data("banner-id"),o=$(e.sl.banner).filter((function(e,t){return $(t).data("banner-id")===i})).first()),s(o,t)}}))},sendShownStatistic:n,sendAllShownStatistic:function(){var t=$(e.sl.shownStat);wb.scrollListener.addElements(t,(function(e){n($(e))}),!1,.6),wb.scrollListener.start()},sendStatisticNow:function(){$.each($(e.sl.shownStat),(function(e,t){wb.stat.banners.sendShownStatistic($(t))}))},sendShownCarousel:function(e){var t;t=e.find("li:not(.jc-clone)").find(".j-banner"),$.each(t,(function(e,t){wb.stat.banners.sendShownStatistic($(t))}))},callShownVisibleHandlerForCarousel:function(e,t){var n;n=e.find("li").find(".j-banner:not(.j-banner-section)"),wb.scrollListener.addElements(n,(function(e){wb.stat.banners.sendShownStatistic($(e))}),!1,t),wb.scrollListener.start()},getShownAfterSetActiveEvent:function(e){return function(t){var n=t.find(".j-banner").first();wb.scrollListener.checkRatio(n,e)&&wb.stat.banners.sendShownStatistic(n)}},sendClickStatistic:s,destroyClickEvent:function(){$("body").off("mousedown",e.sl.clickStat)},bannerBlockShownStatWba:function(e){const t=function(e){if(!e)return;const t=document.querySelectorAll(".j-banners-block"),n=[];function s(t){const s=t.querySelectorAll(".j-banner-wba").toArray(),i=e.$observerHelper.getVerticalObserver(s,{threshold:.5});function r(t){const n=t.target;let{data:s}=$.view(n);const o=!!s.ordBannerMark;e.$analitic.sendBannersWbaEvent("Banner_S",n.title,n.dataset.analiticsCode,n.href,n.dataset.bannerIndex,n.dataset.bannerId,o,s.pixelSrc),e.$stat.banners.sendShownStatistic(n),n.removeEventListener(i.elementInViewportEventName,r)}n.push(i),s.forEach((e=>{e.addEventListener(i.elementInViewportEventName,r)})),i.observe()}return t.forEach((e=>{s(e)})),{destroy:function(){n.forEach((e=>{e.destroy()}))},addBlocks:function(e){(null==e?void 0:e.length)&&e.filter((e=>e.classList.contains("j-banners-block"))).forEach((e=>{s(e)}))}}}(e);return{destroy:function(){t.destroy()},addBlocks:function(e){t.addBlocks(e)}}}}}(),function(){var e=document.createElement("a");if(e.href=document.referrer,function(e){let t=!0;return["wb.","wildberries."].forEach((function(n){e.indexOf(n)>=0&&-1===$.inArray(e.split(".")[0],["style","blog","lookshop"])&&(t=!1)})),t}(e.hostname)){var t=wb.helpers.getParamsFromUrlQuery(location.search),n=wb.stat,s=[];e.hostname||t.utm_medium||t.utm_campaign||t.utm_source?(s.push(n.wrapParam("UTMM",t.utm_medium?t.utm_medium:"not_set")),s.push(n.wrapParam("UTMC",t.utm_campaign?t.utm_campaign:"not_set")),s.push(n.wrapParam("UTMS",t.utm_source?t.utm_source:e.hostname?e.hostname:"not_set")),t.gclid&&s.push(n.wrapParam("GCID","adwords")),e.hostname&&s.push(n.wrapParam("Rfr",e.hostname))):s.push(n.wrapParam("Rfr","direct")),wb.stat.sendEvent("RFR",s)}}(),e=wb.getURLparam("wb_tp"),t=wb.getURLparam("wb_bnd"),n=wb.stat,s=[],e&&t&&(s.push(n.wrapParam("Btp",e)),s.push(n.wrapParam("Bbnd",t)),n.sendEvent("BV",s))},32767:()=>{"use strict";$.observable.Object.prototype.setAllProperty=function(e,t){var n=this;$.each(e,(function(e,s){var i=e;t&&(i=t+"."+i),$.isPlainObject(s)?n.setAllProperty(s,i):!$.isArray(s)&&n.setProperty(i,s)}))},$.observable.Array.prototype.refreshArray=function(e){for(var t=this,n=0;n<e.length;n++)t._data.length===n?t.insert(e[n]):$.observable(t._data[n]).setProperty(e[n]);for(;e.length<t._data.length;)t.remove(t._data.length-1)},$.views.helpers({suppliersOrgForms:["ООО","ПАО","ОАО","ЗАО","ИП","Фонд","Ассоциации","Союзы","НАО","ТОО","АО"],isDefaultSupplier:function(e,t){return 32477===e||12399===e||17887===e||23316===e||28906===e||"Brands Seller"===t||"Best Brands"===t||"First Choice"===t||"WILDBERRIES"===t},supplierFineName:function(e,t){return 20624===t?"":1876===t&&"Wildberries"===e?"Brands Seller":20253===t&&"Wildberries"===e?"Best Brands":154===t&&"Wildberries"===e?"First Choice":"Wildberries"===e?"WILDBERRIES":$.views.converters.trimWord(e,$.views.helpers.suppliersOrgForms)},ImageUrl:wb.helpers.url.imageUrl,urlFeedbackPhoto:wb.helpers.url.urlFeedbackPhoto,urlProductVideo:wb.helpers.url.urlVideoProduct,urlFeedbackVideoPreview:wb.helpers.url.urlFeedbackVideoPreview,productCardUrl:function(e,t,n){return $.views.converters.urlForGood(e,null,n,null,null,t)},forBrandLogoFromId:function(e){return e?wb.helpers.url.urlToExternalStatic(`/vol1/sellers/brands/${e}.webp`):`${wb.settings.staticSiteUrl}/i/nologo.gif`},forSellerLogo:function(e,t=!1){return wb.helpers.url.urlToExternalStatic(`/vol1/crm-bnrs/shops/${e}_${t?"main_banner":"logo"}.webp`)},isEmptyObject:function(e){return $.isEmptyObject(e)},PersonalPhoto:function(){return"https://static-basket-01.wbbasket.ru/vol0/i/v3/user/avatar.png"},Declension:function(e,t,n,s,i){var r,o=e%10,a=e%100;return r=1==o&&11!=a?t:2==o&&12!=a||3==o&&13!=a||4==o&&14!=a?n:s||n,void 0===i?r:String.format(i,e,String.format(r,e))},pluralize:function(e){return $.pluralize(null!=e?e:0,Array.prototype.slice.call(arguments,1))},debug:function(e){console.log(e)},toDateFormat:function(e,t){return new Date(parseInt(e.replace("/Date(","").replace(")\\/",""),10)).format(t)},formatDate:function(e,t){return new Date(e).format(t)},toJson:function(e){return JSON.stringify(e)},fromJson:function(e){return JSON.parse(e)},encode:function(){for(var e="",t=0;t<arguments.length;t++)e=e.concat(arguments[t]);return encodeURIComponent(e)},isLazyImgInCarousel:function(e,t,n,s,i){return!0===e&&(!0===n?t>=2*s&&t<i-s:t>=2*s)},timeLeft:function(e){var t=$.views.helpers.parseFromDotNet(e);return wb.helpers.date.leftBefore(t)},parseFromDotNet:function(e){return new Date(parseInt(e.replace("/Date(","").replace(")\\/",""),10))},timeLeftSpa:function(e){var t=new Date(e);return wb.helpers.date.leftBefore(t)},isPriceEqual:function(e,t){return e===t},isNullOrWhiteSpace:function(e){return!e||0===e.length||/^\s*$/.test(e)},HasFlag:function(e,t){return(e&t)==t},blurAdult:function(e){return e&&!wb.adult.isConfirmed},nonBreakingSpaceFormatted:function(e){return String(e).replace(/\B(?=(\d{3})+(?!\d))/g,"&nbsp;")},pickupType:function(e,t){if(86==e.dtype)return e.name;if("courier"==e.deliveryType)return"Курьерский адрес";if(63==e.dtype||e.isSortCenter)return t?"СЦ / Склад":"СЦ / Склад Wildberries";if(29==e.dtype||31==e.dtype||32==e.dtype)return t?"Почта":"Отделение Почты";if(23==e.dtype)return 2==e.pickupType?"Партнерский&nbsp;пункт выдачи (Почта&nbsp;России)":t?"Почта&nbsp;России":"Отделение Почты России";if(14==e.dtype)return"Постамат Халва";if(15==e.dtype&&e.pickupType>=0){if(1==e.pickupType)return"Отделение&nbsp;Сбербанка";if(0==e.pickupType)return"Постамат&nbsp;Сбербанка"}return 16==e.dtype?"Постамат&nbsp;Пятерочка":e.isExternalPostamat?"Партнерский&nbsp;постамат":e.isWb?"Пункт выдачи":"Партнерский&nbsp;пункт выдачи"},pickupPhotos:e=>{var t,n;if(!e.photos)return[];if(86==e.dtype)return e.photos;const s=new Set,i=new Set;for(let t of e.photos){const e=t.split(".").pop();t=t.replace("preview",""),"webp"==(null==e?void 0:e.toLowerCase())?s.add(t):i.add(t)}return[...s.size>0&&(null===(n=null===(t=WbSpaModel.prototype)||void 0===t?void 0:t.$apiSupport)||void 0===n?void 0:n.webpImage)?s:i]},priceFromRub:(e,t,n)=>{var s,i;if(!(null===(i=null===(s=wb.global)||void 0===s?void 0:s.settings)||void 0===i?void 0:i.currencies))return e;const r=n||WbSpaModel.prototype.$user.getCurrency();if("RUB"===r)return e;if(!wb.global.settings.currencies[r])return e;let o=e/wb.global.settings.currencies[r].rubRate;return t?"AMD"===r||"KZT"===r?10*Math.floor(o/10):"BYN"===r?Math.floor(100*o)/100:"UZS"===r?100*Math.floor(o/100):Math.floor(o):o},priceToRub:(e,t)=>{var n,s;return(null===(s=null===(n=wb.global)||void 0===n?void 0:n.settings)||void 0===s?void 0:s.currencies)&&wb.global.settings.currencies[t]?e*wb.global.settings.currencies[t].rubRate:e},toLocalPrice:(e,t)=>"AMD"===t||"KZT"===t?10*Math.floor(e/10):"BYN"===t?Math.floor(100*e)/100:"UZS"===t?100*Math.floor(e/100):Math.floor(e),max:e=>Math.max(e,0),abs:e=>Math.abs(e),trimWord:function(e,t){if(!(null==t?void 0:t.length)||!e)return e;if((null==(t=[].concat(t))?void 0:t.length)>0){const s=(e=e.trim()).toLowerCase();for(var n=0;n<t.length;n++){const i=t[n].toLowerCase(),r=s.indexOf(i+" ",0);0==r&&(e=e.substring(i.length).trim());const o=e.toLowerCase().indexOf(i,e.length-i.length);if(o>0&&(e=e.substring(0,o)),0==r||o>0)return e.trim()}}return e},brandUrl:function(e){return`/brands/${encodeURIComponent(e)}`},brandUrlById:async function(e){if(!e)return null;const t=await WbSpaModel.prototype.$httpClient.fetchBasicJSON(`https://static-basket-01.wbbasket.ru/vol0/data/brands-by-id/${e}.json`,{},{nullOnError:!0}).catch((e=>null));return t?$.views.helpers.brandUrl(t.url):null},formatPrice:function(e,t,n){let s=$.views.converters.divideNumberBySeparator(e)+(t?`,${t}`:"");return""!=n&&(s+="&nbsp;"+(n||wb.settings.currencyShortName)),s},isDateToday:e=>new Date(e).dateEqual(new Date),isClosedByUser:e=>{var t;return(null===(t=wb.global.userSettings.closed)||void 0===t?void 0:t.includes(e))||!1},getCurrentCurrency:function(){return $.views.converters.currencySign(WbSpaModel.prototype.$user.getCurrency())},fillFeedbackPhotosAndVideo(e){return e?e.map((e=>{const t=e.isVideo?this.fillFeedbackVideos([e]):this.fillFeedbackPhotos([e]);return null==t?void 0:t[0]})):[]},fillFeedbackPhotos:function(e){const t=[];return e?e.map((e=>{const t=e.id||e;return{id:t,preview:wb.helpers.url.urlFeedbackPhoto(t,"ms"),fullPath:wb.helpers.url.urlFeedbackPhoto(t,"fs")}})):t},fillFeedbackVideos:function(e){if(!e)return[];return(Array.isArray(e)?e:[e]).map((e=>{const t=e.id,[n,s]=null==t?void 0:t.split("/"),i=("00"+n).slice(-2),r=e.durationSec?wb.helpers.formatVideoDuration(e.durationSec):"-";return{id:t,preview:`https://videofeedback${i}.wbbasket.ru/${s}/preview.${$.views.converters.toWebp("jpg")}`,video:`https://videofeedback${i}.wbbasket.ru/${s}/index.m3u8`,mp4:`https://videofeedback${i}.wbbasket.ru/${s}/preview.mp4`,isVideo:!0,duration:r}}))},stripHtml:(e,t)=>{if(!e)return"";if(t)return e;return(new DOMParser).parseFromString(e,"text/html").body.textContent||""},isIosDevice:wb.helpers.iOS,isHuaweiDevice:wb.helpers.huawei,sumBy:(e,t)=>t&&e&&0!=e.length?e.reduce(((e,n)=>(isNaN(n[t])||(e+=+n[t]),e)),0):0,minFiscalPriceInCurrency:function(e){switch(e.toUpperCase()){case"UZS":return 100;case"AMD":case"KZT":return 10;case"BYN":case"USD":return.01;default:return 1}},stopPropagation:e=>e.stopPropagation(),subtract:function(e,t=0){return(Math.round(100*e)-Math.round(100*t))/100},isExpressDeliveryToday:function(e,t,n){if(!t||!e||!n)return!1;const s=new Date,i=60*s.getHours()+s.getMinutes(),r=n[0],o=n[1],a=i+60*e;if(i>=r&&i<=o){if(t.some((e=>a<e.start))&&e<5)return!0}return!1}}),$.views.converters({not:function(e){return!e},formatPhone:function(e,t){return e.toString().formatPhone(t)},toOrdinalDigitByFemaleGender:function(e){return["Первая","Вторая","Третья","Четвертая","Пятая","Шестая","Седьмая","Восьмая","Девятая","Десятая"][e]||e+1},spaceFormatted:function(e){return String(e).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")},plusMinus:e=>{let t="";return e>0?t="+":e<0&&(t="-"),t+" "+$.views.converters.spaceFormatted(Math.abs(e))},toInt:function(e){return parseInt(e,10)},toFixed:function(e,t){var n=parseFloat(e);return isNaN(n)?"":n.toFixed(t)},leadZero:function(e,t){if(isNaN(e)||null==e)return null;for(var n=Math.floor(e);n.toString().length<t;)n="0"+n;return n},basketDeliveryDate:function(e,t,n,s,i=!1,r=!1,o=!1,a=!1,l=!1){if(!e)return"";if(o&&r&&r>540&&(i="9:00–23:00"),!(8&~n)){const t=(new Date).daysBetween(e);if(i){const t=$.views.converters.dayNameFromDate(e,l);return a?t:`${t}, ${i}`}if(s<5&&0==t)return $.views.converters.deliveryDateTxt(s,!0)}if(!t){if(i){const t=$.views.converters.dayNameFromDate(e,l);return a?t:`${t}, ${i}`}return $.views.converters.dayNameFromDate(e,l)}const c=t instanceof Date?t:new Date;return"number"==typeof t&&(c.setTime(e.getTime()),c.setDate(c.getDate()+t)),c.is1stJan()&&c.setDate(c.getDate()+1),e.getMonth()!==c.getMonth()?`${e.format("d MMMM")}-${c.format("d MMMM")}`:`${e.format("d")}-${c.format("d MMMM")}`},priceWithCoins:function(e,t,n=!1){var s,i,r,o,a,l,c=Math.abs(Math.round(100*(e%1).toFixed(2)));e=e>0?Math.floor(e):Math.ceil(e);const u=(null===(r=null===(i=null===(s=this.tagCtx)||void 0===s?void 0:s.props)||void 0===i?void 0:i.iso)||void 0===r?void 0:r.toUpperCase())||this.ctxPrm&&(null===(o=this.ctxPrm("iso"))||void 0===o?void 0:o.toUpperCase());return u&&(t=null===(l=null===(a=wb.currencies)||void 0===a?void 0:a.info[u])||void 0===l?void 0:l.sign),0==c&&n?c=null:c<10&&(c="0"+c),$.views.helpers.formatPrice(e,c,t)},priceWithCurrencyOld:function(e,t,n,s=!1){if(!t&&(isNaN(e)||!e))return"";if(("byn"===n||!n&&""!==n)&&("by"===wb.settings.currentLocale||"byn"===n||s)){let t=Math.round(100*(e%1).toFixed(2));return e=Math.floor(e),t<10&&(t="0"+t),n&&"byn"!==n&&(t=null),n="р.",$.views.helpers.formatPrice(e,t,n)}let i=""===n?"":n||wb.settings.currencyShortName;return e=Math.floor(100*e)/100,$.views.helpers.formatPrice(e,null,i)},priceWithCurrencyV2:function(e,t,n){var s,i,r,o,a,l,c,u,d,h,p,m,g;if(!t&&(isNaN(e)||!e))return"";const f=e.toString().split("."),y=(null===(i=null===(s=this.tagCtx)||void 0===s?void 0:s.props)||void 0===i?void 0:i.withCoins)&&e%1!=0,v=n?null===(o=null===(r=wb.currencies)||void 0===r?void 0:r.getIsoBySign)||void 0===o?void 0:o.call(r,n):(null===(c=null===(l=null===(a=this.tagCtx)||void 0===a?void 0:a.props)||void 0===l?void 0:l.iso)||void 0===c?void 0:c.toUpperCase())||this.ctxPrm&&(null===(u=this.ctxPrm("iso"))||void 0===u?void 0:u.toUpperCase())||WbSpaModel.prototype.$user.getCurrency();n||(n=null===(h=null===(d=wb.currencies)||void 0===d?void 0:d.info[v])||void 0===h?void 0:h.sign);const b=null!==(g=null===(m=null===(p=this.tagCtx)||void 0===p?void 0:p.props)||void 0===m?void 0:m.sale)&&void 0!==g?g:0;if(b>0){e=Number(e);let t=Math.ceil(e*(b/100));const s=$.views.helpers.minFiscalPriceInCurrency(n);t=t<s?-s:-Math.ceil(t/s)*s,e+=t,f[0]=`${e}`}if("RUB"===v&&"byn"!==n&&!y)return $.views.helpers.formatPrice(f[0],null,n||"₽");let w,S=e;if("byn"===n||"BYN"===v||"RUB"===v&&y){S=Math.floor(e),w="00";const t=e.toString().replace(",",".").split(".")[1];(null==t?void 0:t.length)>0&&(w=t.substring(0,2),1==w.length&&(w+="0")),n="byn"===n||"BYN"===v?"р.":"₽"}else"AMD"!==v&&"KZT"!==v||"string"==typeof e?"UZS"===v?S=100*parseInt(e/100):"KGS"===v&&(S=Math.floor(e)):S=10*parseInt(e/10);return $.views.helpers.formatPrice(S,w,n)},priceUsdRaw:function(e){var t,n,s;if(!(null===(s=null===(n=null===(t=wb.global)||void 0===t?void 0:t.settings)||void 0===n?void 0:n.variables)||void 0===s?void 0:s.toUsdExchangeRate))return 0;return(parseInt(e*wb.global.settings.variables.toUsdExchangeRate*100)/100).toFixedNumber(2)},priceUsd:function(e){var t,n,s;if(!(null===(s=null===(n=null===(t=wb.global)||void 0===t?void 0:t.settings)||void 0===n?void 0:n.variables)||void 0===s?void 0:s.toUsdExchangeRate))return"";return"$"+$.views.converters.priceUsdRaw(e).toString().replace(/\B(?=(\d{3})+(?!\d))/g,"&nbsp;").replace(".",",")},urlForGood:function(e,t,n,s,i,r,o){const a=new URL("/catalog/"+e+"/detail.aspx",window.location.origin);return n&&a.searchParams.set("targetUrl",n),r&&a.searchParams.set("size",r),o&&a.searchParams.set("helpKursk","true"),s&&(a.hash=s),a.toString()},urlForStatic:function(e,t){return wb.settings.staticSiteUrl+e},toLower:function(e){return null==e?void 0:e.toLowerCase()},dateFromTimestamp:function(e,t){return new Date(e).format(t||"dd.MM.yyyy HH:mm")},formatDate:function(e,t){var n;if(!e)return"";const s=new Date(e);return(null===(n=this.tagCtx)||void 0===n?void 0:n.props.yearFormat)&&(new Date).getFullYear()!=s.getFullYear()&&(t+=this.tagCtx.props.yearFormat),s.format(t)},humanDate:function(e,t){if(!e)return"";"string"==typeof e&&(e=new Date(e));const n=e=>`${e} мес`,s=e=>$.pluralize(e,"{0} год","{0} года","{0} лет"),{years:i,months:r,days:o}=wb.helpers.date.diff(e);let a=(i>0||r>0)&&o>15?r+1:r;return i>0?0==a?s(i):12==a?s(i+1):`${s(i)} ${n(a)}`:r>0?12==a?s(i+1):n(a):null!=t?t:$.pluralize(o,"{0} день","{0} дня","{0} дней")},humanTime:function(e){var t,n,s,i;if(e<=0||isNaN(e))return"";const r=null===(n=null===(t=this.tagCtx)||void 0===t?void 0:t.props)||void 0===n?void 0:n.genitive,o=[],a=Math.floor(e%86400/3600);a&&o.push(r?$.pluralize(a,"{0} часа","{0} часов"):$.pluralize(a,"{0} час","{0} часа","{0} часов"));const l=null===(i=null===(s=this.tagCtx)||void 0===s?void 0:s.props)||void 0===i?void 0:i.withSeconds,c=Math.floor(e%3600/60)+(l?0:1);if(c&&o.push(r?$.pluralize(c,"{0} минуты","{0} минут"):$.pluralize(c,"{0} минута","{0} минуты","{0} минут")),l){const t=e%60;t&&o.push(r?$.pluralize(t,"{0} секунды","{0} секунд"):$.pluralize(t,"{0} секунда","{0} секунды","{0} секунд"))}return o.reduce(((e,t,n,s)=>{if(0==n)return t;return`${e}${s.length-1==n?" и ":", "}${t}`}),"")},differenceDatesInSeconds:function(e=new Date,t=0){const n=new Date(e).addDays(t),s=new Date,i=Math.floor((n-s)/1e3);return Math.max(0,i)},humanTimerFormat:function(e=0,t=!1){if(e<=0||isNaN(e))return"время закончилось";const n=Math.floor(e/3600),s=Math.floor(e%3600/60),i=e%60;if(e<86400)return`${t?"":$.pluralize(n,"остался","осталось")} ${n<10?"0":""}${n}${t?" ч ":":"}${s<10?"0":""}${s}${t?" мин ":":"}${i<10?"0":""}${i}${t?" сек":""}`;{const t=Math.floor(e/86400);return $.pluralize(t,"остался {0} день"," осталось {0} дня","осталось {0} дней")}},humanTimerFormatSimple:function(e=0){const t=Math.floor(e/3600),n=Math.floor(e%3600/60),s=e%60;return`${t>0?`${t<10?"0":""}${t}:`:""}${n<10?"0":""}${n}:${s<10?"0":""}${s}`},dateStringToFormat:function(e,t){if(!e||"string"!=typeof e)return"";const[n,s,i]=e.split(".").map((e=>parseInt(e)));try{return new Date(i,s-1,n).format(t||"dd MMMM yyyy")}catch(e){return""}},localize:function(e){return $.localize(e,Array.prototype.slice.call(arguments,1))},pluralize:function(e){return $.pluralize(null!=e?e:0,Array.prototype.slice.call(arguments,1))},customDateTimeFormat:function(e,t,n,s,i){i||(i="HH:mm");var r=new Date(e),o=new Date;if(r.toDateString()===o.toDateString())return n+", "+r.format(i);var a=function(){return this.setDate(this.getDate()-1),this}.call(o);if(r.toDateString()===a.toDateString())return s+", "+r.format(i);var l=r.format(t);return r.getFullYear()<o.getFullYear()?l+" "+r.getFullYear()+", "+r.format(i):l+", "+r.format(i)},divideNumberBySeparator:function(e,t){return Object.is(e,-0)?"-0":null==e?void 0:e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,t||"&nbsp;")},trimWord:$.views.helpers.trimWord,join:function(e){if(!e||0==e.length)return"";const{upper:t,prefix:n,separator:s}=this.tagCtx.props;return e.map((e=>(t&&(e=e.toUpperCase()),n&&(e=`${n}${e}`),e))).join(s)},humanBytes:e=>{const t=["Б","КБ","МБ","ГБ"];let n=0;for(;n<t.length-1&&e>=1024;)e/=1024,n++;return`${+e.toFixed(2)} ${t[n]}`},deliveryDateTxt:function(e,t){if(!e||"number"!=typeof e)return"";let n;const s=new Date(Date.now()),i=new Date(s.getTime()+60*e*60*1e3);i.is1stJan()&&(i.setDate(i.getDate()+1),e+=24);const r=24-s.getHours(),o=i.getHours();return s.getDate()===i.getDate()&&e<24?n=o<9?"Сегодня утром":o<23?t?e<5?"Сегодня за 2–4 часа":$.pluralize(e,"Сегодня за {0} час","Сегодня за {0} часа","Сегодня за {0} часов"):$.pluralize(e,"За {0} час","За {0} часа","За {0} часов"):"Завтра утром":e<r+9?n=e<5?"Завтра утром":"Завтра":e<24+r?n=o<23?"Завтра":"Послезавтра":e<48+r&&o<23?n="Послезавтра":(o>=23&&(e+=r),n=$.views.converters.dateFromTimestamp(Date.now()+60*e*60*1e3,"d MMMM")),n},minutesToTime:function(e){return Math.floor(e/60)+":"+(e%60).toString().padStart(2,"0")},fastDeliveryText:function(e,t,n){if(!t||!e||!n)return;const s=new Date,i=60*s.getHours()+s.getMinutes(),r=n[0],o=n[1],a=i+60*e,l=t[0].start,c=$.views.converters.minutesToTime(l);if(i<=r)return`Сегодня с ${c}`;if(i>=r&&i<=o){return t.some((e=>a<e.start))?e<5?"За 2–4 часа":$.pluralize(e,"За {0} час","За {0} часа","За {0} часов"):`Завтра с ${c}`}return`Завтра с ${c}`},formatTimeStr:function(e){return e.replace(/^0(\d):/,"$1:")},dayNameFromDate:function(e,t=!1,n=!1){if(!e)return;const s=new Date,i=e instanceof Date?e:new Date(e),r=s.daysBetween(i);return 0===r?"Сегодня":1===r?"Завтра":2===r&&t?"Послезавтра":n&&i.getFullYear()!==s.getFullYear()?i.format("d MMMM yyyy"):i.format("d MMMM")},catalogDeliveryDate:function(e){return`Доставка <span class="product-card__delivery-date">${$.views.converters.deliveryDateTxt(e)}</span>`},deliveryType:function(){const{storeType:e}=this.tagCtx.props;return`${4&~e?"Доставка":"Грузовая доставка"} ${8&~e?"Wildberries":"продавца"}`},formatString:function(){let[e,t,n,s]=arguments;if("string"!=typeof e)throw new Error("Template must be a string");return n&&(e=e.replace(/\[(\d+)\]/gm,"{$1}")),s&&(t=$.views.converters.encode(t)),String.format.apply(null,[e,t])},trim:function(e){return null==e?void 0:e.trim()},imgForPromoCategory:function(e=0,t=!1,n,s){const i=t?"small/":"",r=n?`promo_custom/pack_${s}/`:"promo_v2/",o=e<1e6?e:parseInt((e+"").slice(-6));return wb.helpers.url.urlToExternalStatic(`/vol1/wbx-catalog/${r}${i}${o}.webp`)},fileName:function(e){var t,n;const s=e.substring(e.lastIndexOf("/")+1),i=null===(n=null===(t=this.tagCtx)||void 0===t?void 0:t.props)||void 0===n?void 0:n.mode;return"name"==i?s.substring(0,s.lastIndexOf("."))||s:"extension"==i?s.slice(1+(Math.max(s.lastIndexOf("."),0)||s.length))||"":s},convertToText:function(e){if(!Array.isArray(e)||0===e.length)return"";const t={text:"комментарий",photo:"фото",video:"видео"},n=e.map((e=>t[e.toLowerCase()])).filter(Boolean);if(0===n.length)return"";if(1===n.length)return $.localize(n[0]);const s=n.pop(),i=n.join(", ");return $.localize(`${i} и&nbsp;${s}`)},toHttps:e=>$.views.converters.url(null==e?void 0:e.replace(/^http:/i,"https:")),onlyDigits:e=>null==e?void 0:e.replace(/[^\d\.]/g,""),toWebp:function(e){var t,n;return(null===(n=null===(t=WbSpaModel.prototype)||void 0===t?void 0:t.$apiSupport)||void 0===n?void 0:n.webpImage)?"webp":e},useWebp:function(e){var t,n;return(null===(n=null===(t=WbSpaModel.prototype)||void 0===t?void 0:t.$apiSupport)||void 0===n?void 0:n.webpImage)?null==e?void 0:e.replace(/^(.*\.)(jpg|jpeg)$/i,"$1webp"):e},toNumber:e=>+e,fixHtml:e=>e?(new DOMParser).parseFromString(e,"text/html").body.innerHTML:""}),$.views.tags({range:{boundProps:["start","end"],baseTag:"for",render:function(e){var t=e,n=this.tagCtx,s=n.props.start||0,i=n.props.end,r=n.params.props;if(s||i)if(n.args.length)$.isArray(t)&&(t=t.slice(s,i));else{t=[],i=i||0;for(var o=s;o<=i;o++)t.push(o)}return arguments.length||r&&(r.start||r.end)?this.base(t):this.base()},onArrayChange:function(e,t){this.refresh()}},calendarV2:{dataBoundOnly:!0,onUpdate:!1,bindTo:["selected","limitTo","limitFrom"],linkedCtxParam:["selected","limitTo","limitFrom"],format:"dd.MM.yyyy",init:function(e){e.props.format&&(this.format=e.props.format),e.props.appendTo&&(this.appendTo=e.props.appendTo)},onBind:function(e){const t={x:0,y:1};e.props.offsetX&&(t.x=e.props.offsetX),this.datePicker=$(e.props.target).glDatePicker({selectedDate:this.ctxPrm("selected")?this.ctxPrm("selected"):e.props.limitTo,customWidth:e.props.width,zIndex:e.props.zIndex,appendTo:this.appendTo,overlay:"m"===wb.settings.displayMode,useClick:!0,calendarOffset:t,onClick:(t,n,s,i)=>{this.ctxPrm("selected",s),"function"==typeof e.props.onSelect&&e.props.onSelect(s.format(this.format))}}).glDatePicker(!0)},onAfterLink:function(e,t,n,s,i){var r={from:e.props.defaultFrom?e.props.defaultFrom:new Date(2001,1,1),to:new Date};e.props.limitFrom&&(r.from=e.props.limitFrom),e.props.limitTo&&(r.to=e.props.limitTo),this.datePicker.options.selectableDateRange=[r];for(var o=[],a=r.from.getFullYear();a<=r.to.getFullYear();a++)o.push(a);this.datePicker.options.selectableYears=o,this.datePicker.render()}},swiper:{dataBoundOnly:!0,mainElement:".custom-slider",boundProps:["total","needRefresh","activeSlide"],template:'\n                <div class="custom-slider{{if ~tag.sliderClass}} {{: ~tag.sliderClass}}{{/if}}">\n                    <div class="custom-slider__list">\n                        {{include tmpl=#content/}}\n                    </div>\n                    {{if ~tag.showArrows}}\n                    <button type="button" aria-label="Назад" class="custom-slider__arrow custom-slider__arrow--prev" data-link="{on ~tag.scroll \'left\'}disabled{:~leftArrowDisabled}"></button>\n                    <button type="button" aria-label="Вперёд" class="custom-slider__arrow custom-slider__arrow--next" data-link="{on ~tag.scroll \'right\'}disabled{:~rightArrowDisabled}"></button>\n                    {{/if}}\n                    {{if ~tag.showArrows && ~tag.showFade}}\n                    <div class="custom-slider__fade custom-slider__fade--prev" data-link="disabled{:~leftArrowDisabled}"></div>\n                    <div class="custom-slider__fade custom-slider__fade--next" data-link="disabled{:~rightArrowDisabled}"></div>\n                    {{/if}}\n                </div>\n            ',init:function(){var e,t,n,s;const i=this.tagCtx.props.slidesPerView;this.slidesPerView="auto"===i||"number"==typeof i?i:1,this.showArrows=null!==(e=this.tagCtx.props.showArrows)&&void 0!==e&&e,this.showFade=null!==(t=this.tagCtx.props.showFade)&&void 0!==t&&t,this.sliderClass=null!==(n=this.tagCtx.props.sliderClass)&&void 0!==n&&n,this.slideSelector=null!==(s=this.tagCtx.props.slideSelector)&&void 0!==s?s:".custom-slider__item",this.checkArrows=this.checkArrows.bind(this),this.doOnScroll=WbSpaModel.prototype.$helper.throttle(this.doOnScroll.bind(this),300),this.scrollToSlide=this.scrollToSlide.bind(this)},onAfterLink:function(){this.checkArrows();const e=this.tagCtx.props.activeSlide;void 0!==e&&this.scrollToSlide(e)},onBind:function(e){this.containerList=this.mainElem[0].querySelector(".custom-slider__list"),this.containerList.addEventListener("scroll",this.doOnScroll)},onUpdate:function(e,t,n){return"propertyChange"===e.type&&("needRefresh"===t.path?(this.containerList.scrollLeft=0,this.checkArrows()):"activeSlide"===t.path&&this.scrollToSlide(t.value)),!1},scroll:function(e){const t=this.containerList.querySelector(this.slideSelector).clientWidth+parseInt(getComputedStyle(this.containerList).gap);let n=this.slidesPerView;if("auto"===this.slidesPerView){const e=this.mainElem[0].getBoundingClientRect();n=Math.floor(e.width/t)}const s=t*n,i=Math.round(this.containerList.scrollLeft)+("left"===e?-s:s);this.containerList.scrollLeft=Math.round(i/t)*t},scrollToSlide:function(e){const t=e*(this.containerList.querySelector(this.slideSelector).clientWidth+parseInt(getComputedStyle(this.containerList).gap));this.containerList.scrollLeft=t},doOnScroll:async function(e){this.checkArrows()},checkArrows:async function(){window.requestAnimationFrame((()=>{const e=this.containerList.querySelectorAll(this.slideSelector);if(!e.length>0)this.ctxPrm("leftArrowDisabled",!0),this.ctxPrm("rightArrowDisabled",!0);else{const t=this.mainElem[0].getBoundingClientRect(),n=e[e.length-1].getBoundingClientRect();this.ctxPrm("leftArrowDisabled",this.containerList.scrollLeft<=0),this.ctxPrm("rightArrowDisabled",t.right+5>=n.right)}}))}},btnAdvertising:{template:"\n            {{if ordBannerMark}}<button type=\"button\" class=\"btn-advertising\" title=\"\" data-link=\"{on ~tag.onClickBtn}{tooltip classes='tooltip-advertising j-tooltip-advertising tooltip--dark' pos='alignright bottom' trigger='hover' distance=0 tmplName='advertisingTooltipTmpl' tmplData=ordBannerMark}\"><span>Реклама</span></button>{{/if}}\n        ",onClickBtn:function(e){e.preventDefault()}},infiniteScroll:{mainElement:"div",template:'<div class="scroll-loader"></div>',onAfterLink(){this.scrollObserver=new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.isIntersecting&&this.tagCtx.props.callback()}))}),{threshold:0,rootMargin:"0px 0px 50% 0px"}),this.scrollObserver.observe(this.mainElem[0])},onDispose(){this.scrollObserver.disconnect()}},onSwipe:{init:function(e){var t;this.threshold=10,1==(null===(t=e.args)||void 0===t?void 0:t.length)&&"function"==typeof e.args[0]&&(this.onSwiped=e.args[0]),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this)},onBind:function(){this.onSwiped&&(this.linkCtx.elem.addEventListener("touchstart",this.onTouchStart,!1),this.linkCtx.elem.addEventListener("touchmove",this.onTouchMove,!1),this.linkCtx.elem.addEventListener("touchend",this.onTouchEnd,!1))},onUnbind:function(){this.linkCtx.elem.removeEventListener("touchstart",this.onTouchStart,!1),this.linkCtx.elem.removeEventListener("touchmove",this.onTouchMove,!1),this.linkCtx.elem.removeEventListener("touchend",this.onTouchEnd,!1)},onTouchStart:function(e){const t=e.changedTouches[0];this.startX=t.pageX,this.startY=t.pageY,e.cancelable&&e.preventDefault()},onTouchMove:function(e){const t=e.changedTouches[0];this.deltaX=t.pageX-this.startX,this.deltaY=t.pageY-this.startY,e.cancelable&&e.preventDefault()},onTouchEnd:function(e){const t=Math.atan2(-this.deltaY,-this.deltaX),n=3*Math.PI/4,s=Math.PI/4;let i;i=s<=t&&t<=n?"up":-n<=t&&t<=-s?"down":-n<t&&t<n?"left":"right",(Math.abs(this.deltaX)>=this.threshold||Math.abs(this.deltaY)>=this.threshold)&&this.onSwiped(i),e.cancelable&&e.preventDefault()}}})},31383:()=>{"use strict";const e="tail_object_data",t=["SNT","SNH","SNS","SST","SHT"],n=["SNS","ANS","SNH","ANH","SHT"],s=["SAB","ANH","ANS","AST","ATR"],i=["MBB","MBM","MBS","BBB","BBA","CBB","CBA","CBU","CBS"];const r=function(){function r(){}var o=r.prototype;return o.getTermsFromTailObject=function(e,r){var o;const a=this.getTailObjectData(),l={filters:a.filters,filters_entry_point:a.filters_entry_point},c={bid:a.bid,bid_index:a.bid_index},u={category:a.category,id_category:a.id_category};if("AAA"===e||"ADI"===e){const e=this.getTailObjectData();let t="";switch(e.page_type){case"brand":t=e.brand;break;case"catalog":t=e.id_category;break;case"search":t=e.search_text;break;case"seller":t=e.page_info;break;default:t=""}return{page_type:e.page_type,page_info:t}}if("AHT"===e){const e=this.getTailObjectData();return{catalog_type:e.catalog_type,catalog_value:e.catalog_value,normquery:e.normquery,query_id:e.query_id,filters:e.filters,filters_entry_point:e.filters_entry_point,rmi:e.rmi,search_text:e.search_text}}if("SCL"===e){const e=this.getTailObjectData();return{catalog_type:e.catalog_type,catalog_value:e.catalog_value,query_id:e.query_id,rmi:e.rmi}}if("SCM"===e){const e=this.getTailObjectData();return{catalog_type:e.catalog_type,catalog_value:e.catalog_value,query_id:e.query_id,rmi:e.rmi}}function d(){return Object.assign(Object.assign({},l),u)}if(i.includes(e))return Object.assign(Object.assign({},c),l);if(t.includes(e)||s.includes(e)){const t=Object.assign({catalog_type:a.catalog_type,catalog_value:a.catalog_value,normquery:a.normquery,query_id:a.query_id,rmi:a.rmi,search_text:a.search_text},l);return n.includes(e)&&(t.text_typed=null!==(o=a.text_typed)&&void 0!==o?o:""),t}return"STB"===e?function(){var e;return{filters:a.filters,filters_entry_point:a.filters_entry_point,brand:a.brand,query_id:a.query_id,text_typed:null!==(e=a.text_typed)&&void 0!==e?e:""}}():"SCF"===e?{search_text:a.search_text}:"SPA"===e?{query_id:a.query_id}:"MAB"===e||"MCS"===e?Object.assign({catalog_type:a.catalog_type,catalog_value:a.catalog_value,preset_type:a.preset_type,recid:a.recid},r):"MBL"===e?Object.assign({bid:a.bid},l):"MBT"===e?Object.assign(Object.assign(Object.assign({},c),l),{tv_block:1}):["BCR","IBN","IBC"].includes(e)?l:"BCA"===e?d():"CCT"===e||"CCR"===e?{}:["CCC","CTC","CAB"].includes(e)?d():"ICC"===e?l:"IAB"===e?Object.assign(Object.assign({},l),{banner_name:a.banner_name}):["ICO","ICV","ICR","ISP"].includes(e)?{parent_item_id:a.parent_item_id}:"ISC"===e?Object.assign(Object.assign({},l),{parent_item_id:a.parent_item_id}):"IPT"===e?{parent_item_id:a.parent_item_id}:["ICS","ICA"].includes(e)?{catalog_type:a.catalog_type,catalog_value:a.catalog_value,preset_type:a.preset_type,parent_item_id:a.parent_item_id}:["CCB","CCM","CPF"].includes(e)?{item_ids:a.item_ids}:"CRV"===e?{empty_cart:a.empty_cart}:"CSI"===e||"TCM"===e?{parent_item_id:a.parent_item_id}:["CSD","CAD","WLC","WLA"].includes(e)?Object.assign(Object.assign({discount_name:"Скидка WB клуба"},l),u):["PBC","PBB"].includes(e)?c:"PCB"===e?u:["PSA","PBA","PAP","AMB","PPA","PCS","DLV","DCV","DRE"].includes(e)?{}:"FBR"===e?l:["AAA","ADI"].includes(e)?{page_type:a.page_type,page_info:a.page_info}:["LLI","AIL"].includes(e)?{special_project:a.special_project}:"ICB"===e?{type_of_block:a.type_of_block,parent_item_id:a.parent_item_id}:null},o.getTailObjectData=function(){var t;return null!==(t=sessionStorage.getObject(e))&&void 0!==t?t:{}},o.updateTailObjectDataFromHtml=function(e){if([...i,"MBL","MBT"].includes(e.l)){const t={bid:e.t,bid_index:e.t2};this.updateTailObjectData(t)}else if("IAB"===e.l){const t={banner_name:e.t};this.updateTailObjectData(t)}else if(["ICO","ICV","ICR","ICS","ISC","ISP"].includes(e.l)){const t={parent_item_id:e.t};this.updateTailObjectData(t)}},o.updateTailObjectData=function(e){const t=this.getTailObjectData();e.terms&&(e.terms=Object.assign(Object.assign({},t.terms),e.terms));const n=Object.assign(Object.assign({},t),e);this._saveTailObjectData(n)},o._saveTailObjectData=function(t){try{if(!t)return;sessionStorage.putObject(e,t)}catch(e){}},r}();wb.namespace("analitics",(()=>{const e="wbAnalitic",t="__wba_s",n="lats_search_type",s="search_suggest",i="purchase_checkout",o="stat_helper",a="query_id_search",l={l:"AAA",iid:1},c=3e5,u=new r;let d={moveFrom:""},h="";if(null==sessionStorage.getItem(e)){const t=JSON.parse(localStorage.getItem(e));(null==t?void 0:t.expired)>Date.now()-c&&sessionStorage.setItem(e,JSON.stringify(t.payload))}const p=JSON.parse(localStorage.getItem(o));function m(){return d}async function g(){return WbSpaModel.prototype.$services.splitterService.getSplitInfo()}async function f(e){return WbSpaModel.prototype.$services.splitterService.getSplitInfoV2(e)}function y(e){u.updateTailObjectData(e)}function v(e,t=null,n="",s=!1){var i;e||(e="");const r=["targetUrl","iid","l","lw","s","t","t1","t2","t3","t4","logs"],o=(e,s)=>{var i;return null!==(i=null!=e?e:null==t?void 0:t[s])&&void 0!==i?i:n},a={},l=e.split("|");for(let e=s?2:0;e<r.length;e++){let t=null!==(i=l[e])&&void 0!==i?i:null,n=r[e];if(!n)return;a[n]=o(t,n)}return a}return(null==p?void 0:p.expired)>Date.now()-c&&(d=p.info),{getTermsFromTailObject:function(e){return u.getTermsFromTailObject(e)},updateTailObjectData:y,getTailObjectData:function(){return u.getTailObjectData()},getTermByTermName:function(e){const t=wb.cookieHelper.getCookie("_wbauid"),n=(new Date).format("yyyyMMddHHmmss",!0),s={qid:"qid",recid:"recid"};return s[e]?`${s[e]}${t}${n}`:void 0},analiticsInfoToListName:function(e={},t={}){const n=Object.assign(Object.assign({},e),t),{l:s="",lw:i="",s:r="",t:o="",t1:a="",t2:l="",t3:c="",t4:u="",t5:d=""}=n;return`${s}|${i}|${r}|${o}|${a}|${l}|${c}|${u}|${d}`},getAnaliticsInfoFromTargetUrl:v,getTailObjectFromAnalyticsInfo:function(e,t,n){return function({l:e="",lw:t="",s:n="",t:s="",t1:i="",t2:r="",t3:o="",t4:a="",t5:l="",t6:c="",t7:u=""}={},d=null){const h={loc:e,loc_way:t,sort:n};if(d)return h.terms=d,h;const p=l,m=u,g=r,f={catalog_type:r,catalog_value:i,normquery:"",rmi:""},y={catalog_type:"",catalog_value:"",normquery:"",rmi:""},v={filters:"",filters_entry_point:""},b={},w={category:s,id_category:i},S={bid:s,bid_index:r},_={supplier_type:i};return["SVR","STA","SNT","SHS","SNH","STH","SNS","SHT","SCF","STC","STB"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign(Object.assign({},f),v),{search_text:s,query_id:p})}):["SST"].includes(e)?Object.assign(Object.assign({},h),{terms:{search_text:s,catalog_value:i,catalog_type:r}}):["SAB","AVR","ANH","ANS","AST","AHT","ATR"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign({},b),{search_text:o,query_id:p})}):["ATC"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign({},b),{id_category:o,query_id:p})}):["ATB"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign({},b),{brand:o,query_id:p,filtersT7:m})}):"STB"===e?Object.assign(Object.assign({},h),{terms:{brand:s,catalog_value:i,catalog_type:r,query_id:p}}):"STC"===e?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign(Object.assign({},f),v),{category:s,query_id:p})}):"STS"===e?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign(Object.assign({},f),v),{supplier_name:s,supplier_id:"",query_id:p})}):["STR","STG"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign(Object.assign({},v),y),{tag_text:s,tag_index:i,supplier_id:"",query_id:p})}):["SBA","SIS","SCM","SCN","SPH","STM","SCR","SPA"].includes(e)?Object.assign(Object.assign({},h),{terms:{query_id:p}}):["MBB","MBH","MBM","MBS","MBV"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign({},S),v)}):"MBT"===e?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign(Object.assign({},S),v),{tv_block:i})}):["MBG","MBF"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign({},S)}):["MAB","AMB"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign({},b)}):["MCS","MCB","MCP","MCV","MCO","MPF","MCM","MCN","MSA"].includes(e)?Object.assign({},h):"MCD"===e||"MAD"===e?Object.assign(Object.assign({},h),{terms:{promo_name:s,promo_id:i,type_of_block:l}}):["BBB","BBA","BBD"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign({},v),S)}):"BCA"===e?Object.assign(Object.assign({},h),{terms:Object.assign({filters:g},w)}):["BPA"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign({},b),{brand:o,filters:m})}):["BCR","BCB","BCP"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign({},v)}):["CCC","CTC"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign({},w),{filters:g,filters_entry_point:""})}):"CAB"===e?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign(Object.assign({},v),b),{id_category:o})}):"CAA"===e?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign(Object.assign({},v),b),{search_text:o,query_id:p,filters:m})}):["CBB","CBA","CBS","CBU"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign({},S),v)}):["CCA","CCR","CCT","CAR","CBP","CPA"].includes(e)?Object.assign({},h):"CAR"===e?Object.assign(Object.assign({},h),{terms:{search_text:s,catalog_value:i,catalog_type:r,query_id:p,filters:m}}):"SPL"===e?Object.assign(Object.assign({},h),{terms:Object.assign({},_)}):["SBB","SBT","SBC"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign({},_),S)}):"SCA"===e?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign({},_),{category:s})}):"SBR"===e?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign({},_),{brand_index:r})}):["SCB","SCO","SCP"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign({},_)}):["ABP","ABC","ABN"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign({parent_item_id:null==s?void 0:s.toString()},b),{brand:o,filters:m})}):["ICO","ICB","ICF","ICV","ICD","ICR","ICE","ICS","IBS","ICL","ICI","ISC","IAD"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign({parent_item_id:null==s?void 0:s.toString()},v)}):"ICA"===e?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign({},b),{parent_item_id:null==s?void 0:s.toString()})}):"IAB"===e?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign({},S),v)}):["IBN","IBP","IBC","ICC","IRC","ISP","ITA"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign({},v)}):["CCM","CPF","CRA"].includes(e)?Object.assign(Object.assign({},h),{terms:{item_ids:s}}):"CSI"===e?Object.assign(Object.assign({},h),{terms:{parent_item_id:null==s?void 0:s.toString()}}):"CRV"===e?Object.assign(Object.assign({},h),{terms:{empty_cart:s}}):["CCS","CSA"].includes(e)?Object.assign(Object.assign({},h),{terms:{}}):["CRT","CER","CEB"].includes(e)?Object.assign({},h):"CCB"===e?Object.assign(Object.assign({},h),{terms:{item_ids:s,parent_item_id:null==i?void 0:i.toString(),subject_id:r,subject_parent_id:o,carousel_type:a}}):["DLV","DCR","DCV","DRC","DRE"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign({},v)}):"TCB"===e?Object.assign(Object.assign({},h),{terms:{parent_item_id:null==s?void 0:s.toString()}}):"TCM"===e||["FCR","FCS","FRP","FCV"].includes(e)||["VRW","VCV"].includes(e)||["AAA","ADI","AAB","AAC","AAS"].includes(e)||["LCS","LCR","WTL"].includes(e)||["WSH","WCA","WCV","WCS","WCR","WAB"].includes(e)||"RWA"===e||["NCV","NCB","NCM","NCR"].includes(e)||"NIA"===e||["PRC","PCV"].includes(e)||"PPM"===e?Object.assign({},h):["FBR","FBV"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign({},v)}):"FBA"===e?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign({},b),{brand:o,filters:m})}):"LBA"===e?Object.assign(Object.assign({},h),{terms:Object.assign({},v)}):"PCA"===e?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign({},v),{type:s,name:i,link:r})}):"ITO"===e?Object.assign(Object.assign({},h),{terms:{parent_item_id:null==s?void 0:s.toString(),type_of_block:i}}):"LSP"===e?Object.assign(Object.assign({},h),{sort:"default",terms:{project_name:s}}):["PBC","PBB"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign({},S)}):["PSA","PBA","PPA"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign({},b),{bid:l,bid_index:c})}):"PAP"===e?Object.assign(Object.assign({},h),{terms:Object.assign(Object.assign({},b),{category:l,id_category:c})}):"PCB"===e?Object.assign(Object.assign({},h),{terms:Object.assign({},w)}):"PSP"===e?Object.assign(Object.assign({},h),{terms:{parent_item_id:null==s?void 0:s.toString()}}):"PCS"===e||["WCI","WCD"].includes(e)?Object.assign({},h):["TBV","TBN","TBC","TBA","TBP","TBT"].includes(e)?Object.assign(Object.assign({},h),{terms:Object.assign({},S)}):{}}(e,t=t||u.getTermsFromTailObject(null==e?void 0:e.l,n))},tryGetAnaliticsCodeForSearchAdvert:function(e){switch(e){case"SNH":return"ANH";case"SNS":return"ANS";case"SHT":return"AHT";case"STC":return"ATC";case"SNT":return"SAB";case"SST":return"AST";case"AAA":return"ADI";case"MBB":return"AMB";case"PBC":return"PBA";case"PBB":return"PPA";case"PCB":return"PAP";case"CSD":return"CAD";case"WLC":return"WLA";case"WCI":return"WCD";default:return null}},tryGetAdvertCode:function(e){switch(e){case"ANH":return"SNH";case"ANS":return"SNS";case"AHT":return"SHT";case"ATC":return"STC";case"SAB":return"SNT";case"AST":return"SST";case"ADI":return"AAA";default:return null}},getRecomendationsSplitterHeaders:async function(){return await async function(e){var t;const n=await f(e),s=WbSpaModel.prototype.$user.getUserInfo(),i=(null!==(t=null==s?void 0:s.uid)&&void 0!==t?t:0).toString();let r="";(null==n?void 0:n.length)&&n.forEach((e=>{r+=`${e.key}=${e.value};`}));const o=new Headers;return o.set("UserID",i),o.set("Test-Properties",(null==r?void 0:r.substring(0,r.length-1))||""),o}("rec")},checkDataInSplitterServiceV2:async function(e,t,n){let s=!1;if(e){const i=await f(e);for(let e=0;e<i.length;e++)i[e].key===t&&i[e].value===n&&(s=!0,e=i.length)}return s},checkDataInSplitterServiceV2Sync:function(e,t,n){let s=!1;if(e){const i=function(e){return WbSpaModel.prototype.$services.splitterService.getSplitInfoV2(e)}(e);for(let e=0;e<i.length;e++)i[e].key===t&&i[e].value===n&&(s=!0,e=i.length)}return s},getSplitInfo:g,getSplitInfoV2:f,appendSplitInfoV2:async function(e,t){return WbSpaModel.prototype.$services.splitterService.appendSplitInfoV2(e,t)},getStatInfo:m,updateStatInfo:function(e){const t=m();t.moveFrom=h||"",h="",function(e,t){try{null===localStorage||void 0===localStorage||localStorage.putObject(o,{info:e,expired:Date.now()+c}),t||(d=e)}catch(e){console.warn("Saving analitics state has failed"),console.error(e.message)}}(t,e)},sendWbaEcomStat:function(e,t,n,s){var i;try{if(!window.wba||(!s&&!(null==t?void 0:t.length))>0)return;if((n=null!=n?n:{}).hasOwnProperty("cookies_alert")||(n.cookies_alert=wb.spa.getMainLayout().cookiePolicy.check()?1:0),n.hasOwnProperty("country")||(n.country=wb.settings.currentLocale),!n.hasOwnProperty("cluster")){const e=WbSpaModel.prototype.$user.getUserClusters();e&&(n.cluster=e)}n.address=null!==(i=this.currentAddress)&&void 0!==i?i:"not_selected";const r=(new Date).format("yyyy-MM-dd HH:mm:ss");t.length&&!s?t.forEach((t=>{var s,i,o,a,l,c,u,d,h,p;let m={utcTime:r,id:null===(s=t.id)||void 0===s?void 0:s.toString(),nm:Number(t.id),chrt:Number(t.chrt),rid:null===(i=t.rid)||void 0===i?void 0:i.toString(),name:t.name,brand:t.brand,price:parseInt(t.price),inListIndex:parseInt(t.inListIndex)||1,listName:t.listName,variant:null!==(o=t.variant)&&void 0!==o?o:"",quantity:1,affiliation:`${null!==(a=t.affiliation)&&void 0!==a?a:""}|${null!==(l=t.storeId)&&void 0!==l?l:""}`,category:null!==(c=t.category)&&void 0!==c?c:"regular",category2:t.subjectId>0?t.subjectId.toString():"",category3:t.subjectParentId>0?t.subjectParentId.toString():"",coupon:`${null!==(u=t.feedbacksCount)&&void 0!==u?u:""}|${null!==(d=t.rating)&&void 0!==d?d:""}`,logs:null!==(h=t.logs)&&void 0!==h?h:"",tailObject:t.tailObject};if("cart_del"===(null==n?void 0:n.type_remove)||"after_check_data"===(null==n?void 0:n.type_remove)||"card"===(null==n?void 0:n.type_add))return m.quantity=t.quantity,void window.wba("ec:addProduct",m);if(window.wba("ec:setCurrency",WbSpaModel.prototype.$user.getCurrency()),"add_to_wishlist"===e)window.wba("ec:addProduct",m);else{const e=parseInt(t.quantity)||1,n=!!t.rid&&e>1&&(null===(p=m.rid)||void 0===p?void 0:p.split(","))||[];for(let t=0;t<e;t++)(null==n?void 0:n.length)>t&&(m=Object.assign({},m),m.rid=n[t]),window.wba("ec:addProduct",m)}})):window.wba("ec:setCurrency",WbSpaModel.prototype.$user.getCurrency()),window.wba("ec:setAction",e),window.wba("ec:send",n)}catch(e){console.log("wba exception",e)}},savePurchaseCheckout:function(e){sessionStorage.setItem(i,e)},getPurchaseCheckout:function(){var e;return null!==(e=sessionStorage.getItem(i))&&void 0!==e?e:"not_found"},sendCarouselWbaEvent:function(e,t,n,s,i,r){"Carousel_All"===e&&(h="carousel");let o={location:t=t||this.getState().l,index:null==n?void 0:n.toString(),item_id:null==s?void 0:s.toString(),name:i};r&&(o=Object.assign(o,r)),this.sendEvent(e,o)},sendEvent:function(e,t={}){var n;if(!window.wba)return;t.country=wb.settings.currentLocale;const s=WbSpaModel.prototype.$user.getUserClusters();s&&(t.cluster=s),t.address=null!==(n=this.currentAddress)&&void 0!==n?n:"not_selected","Header_T"===e&&(t.type="d"===wb.settings.displayMode?"desktop":"mobile"),window.wba(e,t)},sendAddressSelection:function({source:e,deliveryType:t,addressId:n,address:s,isChanged:i}){const r=i?"DLV_Address_Add_Ok":"DLV_Address_Slt",o={location:e};"courier"===t?(o.type="CRR",o.address_crr=s):(o.type="PUP",o.pup_id=n.toString()),this.sendEvent(r,o)},sendBannersWbaEvent:function(e,t,n,s,i="0",r,o,a=null){n=n||this.getState().l,"Banner_T"===e&&(h="banner");const l={name:null!=t?t:"",location:n,link:s,index:(i=parseInt(i)+1).toString(),id:r,promo:o?"yes":"no"};"MBT"===n&&(l.tv_block=1),this.sendEvent(e,l),a&&this.sendTrackingPixel(a)},sendSessionStartEvent:function(){const e=localStorage.getItem(t),n=Date.now();localStorage.setItem(t,(n+18e5).toString()),e&&e>n||this.sendEvent("session_start")},sendEventTmpl(e,...t){if(!window.wba)return;const n=t.slice(0,-2),s={};if(n&&n.length%2==0)for(let e=0;e<n.length;e+=2)s[n[e]]=n[e+1];this.sendEvent(e,s)},proceedAndSave(e,t,n,s,i,r,o,a,l){if("string"!=typeof e)return;"string"!=typeof t&&"number"!=typeof t&&(t=null),"string"!=typeof n&&"number"!=typeof n&&(n=null),"string"!=typeof s&&"number"!=typeof s&&(s=null),"string"!=typeof i&&"number"!=typeof i&&(i=null),"string"!=typeof r&&"number"!=typeof r&&(r=null),"string"!=typeof o&&"number"!=typeof o&&(o=null),"string"!=typeof a&&"number"!=typeof a&&(a=null),"string"!=typeof l&&(l=null);const c={l:e};let d=parseInt(t);null==t||isNaN(d)||(c.iid=Math.max(1,d)),null!=n&&(c.opt=n),null!=s&&(c.t=s),null!=i&&(c.t1=i),null!=r&&(c.t2=r),null!=o&&(c.t3=o),null!=a&&(c.t4=a),null!=l&&(c.logs=l),u.updateTailObjectDataFromHtml(c),this.saveState(c)},updateAnalyticsFromQuery(){const e=new URL(window.location.href);if(document.referrer.indexOf("guru.wildberries.ru")>0&&e.searchParams.has("externalSource")&&e.searchParams.has("analyticsCode"))this.saveState(e.searchParams.get("analyticsCode"),!1,!0);else if(e.searchParams.has("listName")){const t=v(`||${e.searchParams.get("listName")}`);this.saveState(t),["LLI","AIL"].includes(t.l)&&y({special_project:t.t})}else e.searchParams.has("analiticsCode")&&this.saveState({l:e.searchParams.get("analiticsCode")},!0)},saveState(t,n=!1,s=!1){try{"string"==typeof t&&(t=v(`||${t}`));const i=JSON.stringify({payload:t,expired:Date.now()+c});s||(t.s=function(e){var t,n;const s=null===(n=null===(t=function(e){let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}("__catalogOptions"))||void 0===t?void 0:t.split("&").find((e=>{const[t]=e.trim().split(":");return"Sort"===t})))||void 0===n?void 0:n.split(":"),i=(null==s?void 0:s.length)>0?s[1]:"popular";return"DRE"===e.l?"":i.toLowerCase()}(t));const r=JSON.stringify(t);sessionStorage.setItem(e,r),n||localStorage.setItem(e,i)}catch(e){console.warn("Saving analitics state has failed"),console.error(e.message)}},updateState(e,t){const n=this.getState(!1);let s=Object.assign(Object.assign({},n),e);!e.extraTerms&&t&&t[n.l]&&(s=Object.assign(Object.assign({},s),t[n.l])),this.saveState(s)},getState(t=!0){var n;let s=null!==(n=sessionStorage.getObject(e))&&void 0!==n?n:l;return t&&s.extraL&&(s.l=s.extraL,s.extraTerms&&(s=Object.assign(Object.assign({},s),s.extraTerms))),this._validateAndFix(s)},saveLastSearchAnaliticsData(e,t,s){sessionStorage.setItem(n,`${e}&${t}&${s}`)},saveLastSearchAnalyticsDataForSuggest(e){sessionStorage.setItem(s,e)},saveQueryIdForSearch(e){sessionStorage.setItem(a,e)},retrieveQueryIdForSearch(){const e=sessionStorage.getItem(a);if(e)return e;{const e=this.getTermByTermName("qid");return this.saveQueryIdForSearch(e),e}},getLastSearchAnaliticsData(){var e;return null!==(e=sessionStorage.getItem(n))&&void 0!==e?e:""},getLastSearchAnalyticsDataForSuggest(){var e;return null!==(e=sessionStorage.getItem(s))&&void 0!==e?e:""},_validateAndFix(e){return(null==e.iid||isNaN(e.iid)||e.iid<1)&&(e.iid=1),e.t=this._escape(e.t),e.t1=this._escape(e.t1),e.t2=this._escape(e.t2),e},_escape:e=>e?"string"!=typeof e?e:e.replace(/'/g," "):"",async isAbTest155Approved(){const{splitId:e,title:t}=await g();return"155"===e&&"test_1"===t},sendUserEvent(e,t){this.sendEvent("user_id",{clientId:e,account_id:t})},setCurrentAddress(e,t){this.currentAddress=`${"courier"===e?"CRR":""}${t}`},saveLastViewedNm(e){sessionStorage.putObject("LAST_VIEWED_NM",e)},getLastViewedNm:()=>sessionStorage.getObject("LAST_VIEWED_NM"),updateAnalyticsSource(e){this.updateState({source:e})},sendTrackingPixel(e){document.createElement("img").src=e}}})())},47949:(e,t,n)=>{"use strict";n.d(t,{Aj:()=>i,D4:()=>a,E$:()=>c,F3:()=>o,Ho:()=>r,R0:()=>l,XX:()=>s,YM:()=>d,of:()=>h,sk:()=>u});const s="https://card.wb.ru/cards/v2/list",i="https://card.wb.ru/cards/v2/detail",r="https://user-geo-data.wildberries.ru/",o="https://cart-storage-api.wildberries.ru/api/basket",a="https://favs-storage-api.wildberries.ru/api/favs",l="https://wbx-auth.wildberries.",c="https://ru-basket-api.wildberries.ru",u="https://basket-api.wildberries.",d="https://wbx-bell-v3.wildberries.ru",h="https://fin-person-installment.wildberries.ru"},92151:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},3939:e=>{var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,s=0;n<e.length;n++,s+=8)t[s>>>5]|=e[n]<<24-s%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],s=0;s<e.length;s+=3)for(var i=e[s]<<16|e[s+1]<<8|e[s+2],r=0;r<4;r++)8*s+6*r<=8*e.length?n.push(t.charAt(i>>>6*(3-r)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],s=0,i=0;s<e.length;i=++s%4)0!=i&&n.push((t.indexOf(e.charAt(s-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(s))>>>6-2*i);return n}},e.exports=n},87206:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},83503:(e,t,n)=>{var s,i,r,o,a;s=n(3939),i=n(92151).utf8,r=n(87206),o=n(92151).bin,(a=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?o.stringToBytes(e):i.stringToBytes(e):r(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=s.bytesToWords(e),l=8*e.length,c=1732584193,u=-271733879,d=-1732584194,h=271733878,p=0;p<n.length;p++)n[p]=16711935&(n[p]<<8|n[p]>>>24)|4278255360&(n[p]<<24|n[p]>>>8);n[l>>>5]|=128<<l%32,n[14+(l+64>>>9<<4)]=l;var m=a._ff,g=a._gg,f=a._hh,y=a._ii;for(p=0;p<n.length;p+=16){var v=c,b=u,w=d,S=h;c=m(c,u,d,h,n[p+0],7,-680876936),h=m(h,c,u,d,n[p+1],12,-389564586),d=m(d,h,c,u,n[p+2],17,606105819),u=m(u,d,h,c,n[p+3],22,-1044525330),c=m(c,u,d,h,n[p+4],7,-176418897),h=m(h,c,u,d,n[p+5],12,1200080426),d=m(d,h,c,u,n[p+6],17,-1473231341),u=m(u,d,h,c,n[p+7],22,-45705983),c=m(c,u,d,h,n[p+8],7,1770035416),h=m(h,c,u,d,n[p+9],12,-1958414417),d=m(d,h,c,u,n[p+10],17,-42063),u=m(u,d,h,c,n[p+11],22,-1990404162),c=m(c,u,d,h,n[p+12],7,1804603682),h=m(h,c,u,d,n[p+13],12,-40341101),d=m(d,h,c,u,n[p+14],17,-1502002290),c=g(c,u=m(u,d,h,c,n[p+15],22,1236535329),d,h,n[p+1],5,-165796510),h=g(h,c,u,d,n[p+6],9,-1069501632),d=g(d,h,c,u,n[p+11],14,643717713),u=g(u,d,h,c,n[p+0],20,-373897302),c=g(c,u,d,h,n[p+5],5,-701558691),h=g(h,c,u,d,n[p+10],9,38016083),d=g(d,h,c,u,n[p+15],14,-660478335),u=g(u,d,h,c,n[p+4],20,-405537848),c=g(c,u,d,h,n[p+9],5,568446438),h=g(h,c,u,d,n[p+14],9,-1019803690),d=g(d,h,c,u,n[p+3],14,-187363961),u=g(u,d,h,c,n[p+8],20,1163531501),c=g(c,u,d,h,n[p+13],5,-1444681467),h=g(h,c,u,d,n[p+2],9,-51403784),d=g(d,h,c,u,n[p+7],14,1735328473),c=f(c,u=g(u,d,h,c,n[p+12],20,-1926607734),d,h,n[p+5],4,-378558),h=f(h,c,u,d,n[p+8],11,-2022574463),d=f(d,h,c,u,n[p+11],16,1839030562),u=f(u,d,h,c,n[p+14],23,-35309556),c=f(c,u,d,h,n[p+1],4,-1530992060),h=f(h,c,u,d,n[p+4],11,1272893353),d=f(d,h,c,u,n[p+7],16,-155497632),u=f(u,d,h,c,n[p+10],23,-1094730640),c=f(c,u,d,h,n[p+13],4,681279174),h=f(h,c,u,d,n[p+0],11,-358537222),d=f(d,h,c,u,n[p+3],16,-722521979),u=f(u,d,h,c,n[p+6],23,76029189),c=f(c,u,d,h,n[p+9],4,-640364487),h=f(h,c,u,d,n[p+12],11,-421815835),d=f(d,h,c,u,n[p+15],16,530742520),c=y(c,u=f(u,d,h,c,n[p+2],23,-995338651),d,h,n[p+0],6,-198630844),h=y(h,c,u,d,n[p+7],10,1126891415),d=y(d,h,c,u,n[p+14],15,-1416354905),u=y(u,d,h,c,n[p+5],21,-57434055),c=y(c,u,d,h,n[p+12],6,1700485571),h=y(h,c,u,d,n[p+3],10,-1894986606),d=y(d,h,c,u,n[p+10],15,-1051523),u=y(u,d,h,c,n[p+1],21,-2054922799),c=y(c,u,d,h,n[p+8],6,1873313359),h=y(h,c,u,d,n[p+15],10,-30611744),d=y(d,h,c,u,n[p+6],15,-1560198380),u=y(u,d,h,c,n[p+13],21,1309151649),c=y(c,u,d,h,n[p+4],6,-145523070),h=y(h,c,u,d,n[p+11],10,-1120210379),d=y(d,h,c,u,n[p+2],15,718787259),u=y(u,d,h,c,n[p+9],21,-343485551),c=c+v>>>0,u=u+b>>>0,d=d+w>>>0,h=h+S>>>0}return s.endian([c,u,d,h])})._ff=function(e,t,n,s,i,r,o){var a=e+(t&n|~t&s)+(i>>>0)+o;return(a<<r|a>>>32-r)+t},a._gg=function(e,t,n,s,i,r,o){var a=e+(t&s|n&~s)+(i>>>0)+o;return(a<<r|a>>>32-r)+t},a._hh=function(e,t,n,s,i,r,o){var a=e+(t^n^s)+(i>>>0)+o;return(a<<r|a>>>32-r)+t},a._ii=function(e,t,n,s,i,r,o){var a=e+(n^(t|~s))+(i>>>0)+o;return(a<<r|a>>>32-r)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=s.wordsToBytes(a(e,t));return t&&t.asBytes?n:t&&t.asString?o.bytesToString(n):s.bytesToHex(n)}},92901:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var s=n(49922);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(0,s.A)(i.key),i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},77387:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var s=n(63662);function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,s.A)(e,t)}},63662:(e,t,n)=>{"use strict";function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}n.d(t,{A:()=>s})},92327:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var s=n(82284);function i(e,t){if("object"!=(0,s.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=(0,s.A)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}},49922:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var s=n(82284),i=n(92327);function r(e){var t=(0,i.A)(e,"string");return"symbol"==(0,s.A)(t)?t:t+""}},82284:(e,t,n)=>{"use strict";function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}n.d(t,{A:()=>s})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__(34784),__webpack_require__(31383);var __webpack_exports__=__webpack_require__(17708)})();